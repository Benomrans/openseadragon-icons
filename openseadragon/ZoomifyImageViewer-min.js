/*
 Zoomify Image Viewer, version on line 25 below. Copyright Zoomify, Inc., 1999-2018. All rights reserved. You may
use this file on private and public websites, for personal and commercial purposes, with or without modifications, so long as this
notice is included. Redistribution via other means is not permitted without prior permission. Additional terms apply. For complete
license terms please see the Zoomify License Agreement in this product and on the Zoomify website at www.zoomify.com.
::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
*/
(function(){(function(){return this}).call().Z={}})();Z.version="5.23 ExpressMulti";Z.getVersion=function(){return Z.version};
Z.showImage=function(b,c,d){function e(){Z.Utils.removeEventListener(document,"DOMContentLoaded",e);Z.Utils.removeEventListener(window,"load",e);var f="Viewer";if("undefined"!==typeof d&&null!==d&&""!=d){var h=d.indexOf("zViewerID");if(-1!=h){Z.multipleViewers=!0;var k=d.substring(h,d.length),f=k.indexOf("=")+h+1,k=k.indexOf("&"),f=d.substring(f,-1!=k?k+h:d.length)}}Z.viewerCounter++;1<Z.viewerCounter&&"Viewer"==f&&(f+="_"+b);Z[f]=new Z.ZoomifyImageViewer(b,c,d)}Z.showImage.initialized||(Z.showImage.initialized=
!0,Z.Utils.addCrossBrowserEvents(),Z.Utils.addCrossBrowserFunctions(),Z.Utils.declareZoomifyGlobals(),Z.Utils.detectBrowserFeatures());"complete"==document.readyState?e():(Z.Utils.addEventListener(document,"DOMContentLoaded",e),Z.Utils.addEventListener(window,"load",e))};
Z.ZoomifyImageViewer=function(b,c,d){function e(){if(a.xmlParametersPath&&!a.parameters)a.loadParametersXML();else if(null===a.parameters||"undefined"===typeof a.parameters.zXMLParametersPath)y(a.parameters),Z.Utils.stringValidate(a.copyrightPath)&&enforceCopyright(),Q("readyConfigureViewer"),1!=a.debug&&2!=a.debug&&3!=a.debug||Za(Z.Utils.getResource("z445"),!1,!0)}function f(){if(h()&&!u("configureCalled")){var b=function(){a.clearCallback("readyViewer",b);var c=a.comparison?Z.Utils.getResource("ALERT_LOADINGIMAGESETCOMPARE"):
a.overlays?Z.Utils.getResource("ALERT_LOADINGIMAGESETOVERLAY"):a.animation?Z.Utils.getResource("ALERT_LOADINGIMAGESETANIMATION"):Z.Utils.getResource("ALERT_LOADINGIMAGESETSLIDES"),d=Z.Utils.getResource("ALERT_LOADINGANNOTATIONS");I()!=c&&I()!=d||a.hideMessage();c=a.Viewport.getViewportID();(Z.multipleViewers||a.imageSet&&!a.comparison&&c!=a.imageSetStart)&&z619Delayed();a.tracking&&a.viewportCurrent.syncTrackingToViewport()},c=function(){a.clearCallback(d,c);Tc(0==a.viewerInternalID&&1==Z.viewerCounter);
Z.Utils.addEventListener(a.ViewerDisplay,"mouseover",kb);Z.Utils.addEventListener(a.ViewerDisplay,"mouseout",kb);Z.Utils.addEventListener(a.ViewerDisplay,"mousemove",Z.Utils.preventDefault);Z.Utils.addEventListener(a.ViewerDisplay,"mousewheel",kb);0<a.mouseWheel&&Z.Utils.addEventListener(a.ViewerDisplay,"mousewheel",Z.Utils.preventDefault);H();a.autoResize&&Z.Utils.addEventListener(window,"resize",a.viewerEventsHandler);a.tracking&&Xb(!0);var b=a["Viewport"+(a.imageSetLength-1).toString()];k(a.overlays?
b:a.viewportCurrent)};K("configureCalled",!0);var d=a.imageSet?"initializedViewer":"initializedViewport";a.setCallback(d,c);a.setCallback("readyViewer",b);if(a.imageSet){var e=a.comparison?Z.Utils.getResource("ALERT_LOADINGIMAGESETCOMPARE"):a.overlays?Z.Utils.getResource("ALERT_LOADINGIMAGESETOVERLAY"):a.animation?Z.Utils.getResource("ALERT_LOADINGIMAGESETANIMATION"):Z.Utils.getResource("ALERT_LOADINGIMAGESETSLIDES");E(e,!1,null,"center");if("undefined"!==typeof a.overlayJSONObject&&"object"===typeof a.overlayJSONObject&&
null!==a.overlayJSONObject)e=Z.Utils.jsonConvertObjectToXMLText(a.overlayJSONObject),e=Z.Utils.xmlConvertTextToDoc(e),a.parseImageSetXML(e,"overlay");else{var g,e=new Z.NetConnector(a);".xml"!=a.imageSetPath.toLowerCase().substring(a.imageSetPath.length-4,a.imageSetPath.length)&&(g=a.animation?Z.Utils.getResource("DEFAULT_XMLFILEANIMATION"):Z.overlay?Z.Utils.getResource("DEFAULT_XMLFILEOVERLAY"):Z.Utils.getResource("DEFAULT_XMLFILESLIDESTACK"),a.imageSetPath=a.imageSetPath+"/"+g);g=Z.Utils.cacheProofPath(a.imageSetPath);
e.loadXML(g)}}else a.Viewport=new ac,a.viewportCurrent=a.Viewport,Z.Viewport=a.Viewport}}function h(){var b=0==Z.singleFileEnabled||!Z.localUseEnabled||Z.localFileSelected,c=null===a.userLogin||Z.Utils.stringValidate(a.userName),d=null===a.copyrightPath||Z.Utils.stringValidate(a.copyright);return b&&c&&d}function k(b){0<a.toolbarVisible&&!a.Toolbar&&(a.Toolbar=new a.ZoomifyToolbar(b));0<a.navigatorVisible&&(a.Navigator||(a.Navigator=new a.ZoomifyNavigator(b)),a.Navigator&&a.Navigator.z682(),a.comparison&&
!a.Navigator2&&(a.Navigator2=new a.ZoomifyNavigator(a.Viewport1)),a.Navigator2&&a.Navigator2.z682());0<a.galleryVisible&&(a.Gallery||(a.Gallery=new a.ZoomifyGallery(b)),a.Gallery&&a.Gallery.validateGalleryGlobals());0<a.rulerVisible&&!a.Ruler&&(a.Ruler=new a.ZoomifyRuler(b));a.helpCustom&&(new Z.NetConnector(a)).loadHTML(a.helpPath,a.receiveHelpHTML,null,"loadHTML")}function y(b){var c=Z.Utils.getResource("z110"),d=Z.Utils.getResource("z109"),e=Z.Utils.getResource("z108");a.expressParamsEnabled=c!=
d?!0:!1;a.expressParamsEnabled||(a.toolbarInternal=!0);var d=Z.Utils.getResource("z187"),f=Z.Utils.getResource("z186"),c=Z.Utils.getResource("z185");a.proParamsEnabled=d!=f?!0:!1;var n=Z.Utils.getResource("z215"),d=Z.Utils.getResource("z214"),f=Z.Utils.getResource("z213");a.specialStorageEnabled=n!=d?!0:!1;var h=Z.Utils.getResource("z107"),E=Z.Utils.getResource("z106"),n=Z.Utils.getResource("z105");a.enterpriseParamsEnabled=h!=E?!0:!1;null===a.viewerID&&(a.viewerID=0);null===a.skinPath&&(a.skinPath=
Z.Utils.getResource("z201"));null===a.skinMode&&(a.skinMode=Z.Utils.getResource("z199"));isNaN(parseFloat(Z.Utils.getResource("z143")))||(a.initialX=parseFloat(Z.Utils.getResource("z143")));isNaN(parseFloat(Z.Utils.getResource("z144")))||(a.initialY=parseFloat(Z.Utils.getResource("z144")));isNaN(parseFloat(Z.Utils.getResource("z145")))||(a.initialZ=parseFloat(Z.Utils.getResource("z145")));null!==a.minZ||isNaN(parseFloat(Z.Utils.getResource("z163")))||(a.minZ=parseFloat(Z.Utils.getResource("z163")));
null!==a.maxZ||isNaN(parseFloat(Z.Utils.getResource("z153")))||(a.maxZ=parseFloat(Z.Utils.getResource("z153")));null!==a.zoomSpeed||isNaN(parseFloat(Z.Utils.getResource("z241")))||(a.zoomSpeed=parseFloat(Z.Utils.getResource("z241")));null!==a.panSpeed||isNaN(parseFloat(Z.Utils.getResource("z175")))||(a.panSpeed=parseFloat(Z.Utils.getResource("z175")));null!==a.fadeInSpeed||isNaN(parseFloat(Z.Utils.getResource("z111")))||(a.fadeInSpeed=parseFloat(Z.Utils.getResource("z111")));a.fadeIn=0<a.fadeInSpeed;
null===a.navigatorVisible&&(a.navigatorVisible=parseInt(Z.Utils.getResource("z171"),10));null===a.navigatorW&&(a.navigatorW=parseInt(Z.Utils.getResource("z172"),10));null===a.navigatorH&&(a.navigatorH=parseInt(Z.Utils.getResource("z167"),10));null===a.navigatorL&&(a.navigatorL=parseInt(Z.Utils.getResource("z168"),10));null===a.navigatorT&&(a.navigatorT=parseInt(Z.Utils.getResource("z170"),10));null===a.navigatorFit&&(a.navigatorFit=Z.Utils.getResource("z166"));null===a.navigatorRectangleColor&&(a.navigatorRectangleColor=
Z.Utils.getResource("z169"));null===a.galleryVisible&&(a.galleryVisible=a.slideshow?parseInt(Z.Utils.getResource("DEFAULT_GALLERYVISIBLE"),10):parseInt(Z.Utils.getResource("DEFAULT_GALLERYVISIBLENOTSLIDESHOW"),10));null===a.galleryAutoShowHide&&(a.galleryAutoShowHide=2==a.galleryVisible);null===a.galleryW&&(a.galleryW=parseInt(Z.Utils.getResource("DEFAULT_GALLERYWIDTH"),10));null===a.galleryH&&(a.galleryH=parseInt(Z.Utils.getResource("DEFAULT_GALLERYHEIGHT"),10));null===a.galleryM&&(a.galleryM=parseInt(Z.Utils.getResource("DEFAULT_GALLERYMARGIN"),
10));null===a.galleryL&&(a.galleryL=parseInt(Z.Utils.getResource("DEFAULT_GALLERYLEFT"),10));null===a.galleryT&&(a.galleryT=parseInt(Z.Utils.getResource("DEFAULT_GALLERYTOP"),10));null===a.galleryPosition&&(a.galleryPosition=parseFloat(Z.Utils.getResource("DEFAULT_GALLERYPOSITION")));null===a.galleryRectangleColor&&(a.galleryRectangleColor=Z.Utils.getResource("DEFAULT_GALLERYRECTANGLECOLO R"));null===a.clickZoom&&(a.clickZoom="0"!=Z.Utils.getResource("z93"));null===a.doubleClickZoom&&(a.doubleClickZoom=
"0"!=Z.Utils.getResource("DEFAULT_DOUBLECLICKZOOM"));null===a.doubleClickDelay&&(a.doubleClickDelay=parseFloat(Z.Utils.getResource("DEFAULT_DOUBLECLICKDELAY")));null===a.clickPan&&(a.clickPan="0"!=Z.Utils.getResource("z92"));null===a.mousePan&&(a.mousePan="0"!=Z.Utils.getResource("z164"));null===a.constrainPan&&(a.constrainPan="0"!=Z.Utils.getResource("z95"));null===a.constrainPanLimit&&(a.constrainPanLimit=parseInt(Z.Utils.getResource("z95LIMIT"),10));null===a.constrainPanStrict&&(a.constrainPanStrict=
"0"!=Z.Utils.getResource("z95STRICT"));null===a.panBuffer&&(a.panBuffer=Z.mobileDevice?parseFloat(Z.Utils.getResource("z173MOBILE")):a.rotationVisible?parseFloat(Z.Utils.getResource("z173ROTATION")):parseFloat(Z.Utils.getResource("z173")));null===a.smoothPan&&(a.smoothPan=a.useCanvas&&!a.comparison&&"0"!=Z.Utils.getResource("DEFAULT_SMOOTHPAN"));null===a.smoothPanEasing&&(a.smoothPanEasing=parseInt(Z.Utils.getResource("DEFAULT_SMOOTHPANEASING"),10));null===a.smoothPanGlide&&(a.smoothPanGlide=parseInt(Z.Utils.getResource("DEFAULT_SMOOTHPANGLIDE"),
10));null===a.smoothZoom&&(a.smoothZoom="0"!=Z.Utils.getResource("DEFAULT_SMOOTHZOOM"));null===a.smoothZoomEasing&&(a.smoothZoomEasing=parseInt(Z.Utils.getResource("DEFAULT_SMOOTHZOOMEASING"),10));null===a.keys&&(a.keys="0"!=Z.Utils.getResource("z146"));null===a.canvas&&(a.canvas="0"!=Z.Utils.getResource("z88"));null===a.baseZIndex&&(a.baseZIndex=parseInt(Z.Utils.getResource("DEFAULT_BASEZINDEX"),10));null===a.debug&&(a.debug=parseInt(Z.Utils.getResource("z104"),10));null===a.toolbarVisible&&(a.toolbarVisible=
parseInt(Z.Utils.getResource("z223"),10));null===a.toolbarBackgroundVisible&&(a.toolbarBackgroundVisible="0"!=Z.Utils.getResource("DEFAULT_TOOLBARBACKGROUNDVISIBLE"));null===a.toolbarAutoShowHide&&(a.toolbarAutoShowHide=0!=a.toolbarVisible&&1!=a.toolbarVisible&&6!=a.toolbarVisible&&7!=a.toolbarVisible&&8!=a.toolbarVisible);null===a.toolbarPosition&&(a.toolbarPosition=parseFloat(Z.Utils.getResource("z222")));null===a.logoVisible&&(a.logoVisible="0"!=Z.Utils.getResource("z150"));null===a.logoCustomPath&&
(a.logoCustomPath=Z.Utils.getResource("z149"));null===a.minimizeVisible&&(a.minimizeVisible="0"!=Z.Utils.getResource("z162"));null===a.sliderZoomVisible&&(a.sliderZoomVisible="0"!=Z.Utils.getResource("DEFAULT_SLIDERZOOMVISIBLE"));null===a.mouseWheel&&(a.mouseWheel=parseInt(Z.Utils.getResource("DEFAULT_MOUSEWHEEL"),10));null===a.zoomButtonsVisible&&(a.zoomButtonsVisible="0"!=Z.Utils.getResource("DEFAULT_ZOOMBUTTONSVISIBLE"));null===a.panButtonsVisible&&(a.panButtonsVisible="0"!=Z.Utils.getResource("z174"));
null===a.resetVisible&&(a.resetVisible="0"!=Z.Utils.getResource("DEFAULT_RESETVISIBLE"));null===a.tooltipsVisible&&(a.tooltipsVisible="0"!=Z.Utils.getResource("z224"));null===a.helpVisible&&(a.helpVisible=parseInt(Z.Utils.getResource("z128"),10));null===a.helpW&&(a.helpW=parseInt(Z.Utils.getResource("z422"),10));null===a.helpH&&(a.helpH=parseInt(Z.Utils.getResource("z421"),10));null===a.progressVisible&&(a.progressVisible="0"!=Z.Utils.getResource("z184"));null===a.messagesVisible&&(a.messagesVisible=
"0"!=Z.Utils.getResource("DEFAULT_MESSAGESVISIBLE"));null===a.fullViewVisible&&(a.fullViewVisible="0"!=Z.Utils.getResource("z121"));null===a.fullScreenVisible&&(a.fullScreenVisible="0"!=Z.Utils.getResource("z119"));null===a.fullPageVisible&&(a.fullPageVisible="0"!=Z.Utils.getResource("z118"));null===a.initialFullPage&&(a.initialFullPage="0"!=Z.Utils.getResource("z141"));null===a.bookmarksGet&&(a.bookmarksGet="0"!=Z.Utils.getResource("DEFAULT_BOOKMARKSGET"));null===a.bookmarksSet&&(a.bookmarksSet=
"0"!=Z.Utils.getResource("DEFAULT_BOOKMARKSSET"));if(!0!==a.measureVisible){var E=(h="undefined"!==typeof a.parameters&&null!==a.parameters)&&"undefined"!==typeof a.parameters.zMarkupMode&&("1"==a.parameters.zMarkupMode||"2"==a.parameters.zMarkupMode),k=h&&"undefined"!==typeof a.parameters.zEditMode&&("1"==a.parameters.zEditMode||"2"==a.parameters.zEditMode);a.measureVisible=h&&"undefined"!==typeof a.parameters.zMeasureVisible&&"0"==a.parameters.zMeasureVisible?!1:E||k?"0"!=Z.Utils.getResource("z157MARKUPOREDIT"):
"0"!=Z.Utils.getResource("z157")}null===a.rotationVisible&&(a.rotationVisible="0"!=Z.Utils.getResource("z190"));null===a.rotationFree&&(a.rotationFree="0"!=Z.Utils.getResource("DEFAULT_ROTATIONFREE"));null===a.initialR&&(a.initialR=Z.Utils.getResource("DEFAULT_INITIALR"));null!==a.screensaverSpeed||isNaN(parseFloat(Z.Utils.getResource("DEFAULT_SCREENSAVERSPEED")))||(a.screensaverSpeed=parseFloat(Z.Utils.getResource("DEFAULT_SCREENSAVERSPEED")));null!==a.maskScale||isNaN(parseFloat(Z.Utils.getResource("DEFAULT_MASKSCALE")))||
(a.maskScale=parseFloat(Z.Utils.getResource("DEFAULT_MASKSCALE")));null!==a.maskFadeSpeed||isNaN(parseFloat(Z.Utils.getResource("DEFAULT_MASKFADESPEED")))||(a.maskFadeSpeed=parseFloat(Z.Utils.getResource("DEFAULT_MASKFADESPEED")));null===a.maskClearOnUserAction&&(a.maskClearOnUserAction="0"!=Z.Utils.getResource("DEFAULT_MASKCLEARONUSERACTION"));null===a.units&&(a.units=Z.Utils.getResource("z231"));null===a.sourceMagnification&&(a.sourceMagnification=parseInt(Z.Utils.getResource("z212"),10));null===
a.virtualPointerVisible&&(a.virtualPointerVisible="0"!=Z.Utils.getResource("z233"));null===a.crosshairsVisible&&(a.crosshairsVisible="0"!=Z.Utils.getResource("z103"));null===a.zoomRectangle&&(a.zoomRectangle=!1);null===a.rulerVisible&&(a.rulerVisible=parseInt(Z.Utils.getResource("z196"),10));null===a.rulerListType&&(a.rulerListType=Z.Utils.getResource("z193"));null===a.rulerW&&(a.rulerW=parseInt(Z.Utils.getResource("z197"),10));null===a.rulerH&&(a.rulerH=parseInt(Z.Utils.getResource("z191"),10));
null===a.rulerL&&(a.rulerL=parseInt(Z.Utils.getResource("z192"),10));null===a.rulerT&&(a.rulerT=parseInt(Z.Utils.getResource("z195"),10));isNaN(parseFloat(Z.Utils.getResource("z210")))||(a.slideTransitionSpeed=parseFloat(Z.Utils.getResource("z210")));null===a.coordinatesVisible&&(a.coordinatesVisible="0"!=Z.Utils.getResource("z100"));null===a.geoCoordinatesVisible&&(a.geoCoordinatesVisible="0"!=Z.Utils.getResource("DEFAULT_GEOCOORDINATESVISIBLE"));null===a.preloadVisible&&(a.preloadVisible="0"!=Z.Utils.getResource("DEFAULT_PRELOADVISIBLE"));
null===a.saveImageFull&&(a.saveImageFull="0"!=Z.Utils.getResource("DEFAULT_SAVEIMAGEFULL"));null===a.saveImageFilename&&(a.saveImageFilename=Z.Utils.getResource("DEFAULT_SAVEIMAGEFILENAME"));null===a.saveImageFormat&&(a.saveImageFormat=Z.Utils.getResource("DEFAULT_SAVEIMAGEFORMAT"));null===a.saveImageCompression&&(a.saveImageCompression=parseFloat(Z.Utils.getResource("DEFAULT_SAVEIMAGECOMPRESSION")));var I,C;document.body&&(I=document.body.style,I=I.backgroundColor);if(h=Z.Utils.getElementOfViewerById(g,
a.pageContainerID))C=Z.Utils.getElementStyle(h),C=C.backgroundColor;null===a.imageFilters&&(a.imageFilters="0"!=Z.Utils.getResource("DEFAULT_IMAGEFILTERS"));null===a.initialImageFilters&&(a.initialImageFilters="0"!=Z.Utils.getResource("z142"));null===a.brightnessVisible&&(a.brightnessVisible="0"!=Z.Utils.getResource("DEFAULT_BRIGHTNESSVISIBLE"));null===a.contrastVisible&&(a.contrastVisible="0"!=Z.Utils.getResource("DEFAULT_CONTRASTVISIBLE"));null===a.sharpnessVisible&&(a.sharpnessVisible="0"!=Z.Utils.getResource("DEFAULT_SHARPNESSVISIBLE"));
null===a.blurrinessVisible&&(a.blurrinessVisible="0"!=Z.Utils.getResource("DEFAULT_BLURRINESSVISIBLE"));null===a.colorRedVisible&&(a.colorRedVisible="0"!=Z.Utils.getResource("DEFAULT_COLORREDVISIBLE"));null===a.colorGreenVisible&&(a.colorGreenVisible="0"!=Z.Utils.getResource("DEFAULT_COLORGREENVISIBLE"));null===a.colorBlueVisible&&(a.colorBlueVisible="0"!=Z.Utils.getResource("DEFAULT_COLORBLUEVISIBLE"));null===a.colorRedRangeVisible&&(a.colorRedRangeVisible="0"!=Z.Utils.getResource("DEFAULT_COLORREDRANGEVISIBLE"));
null===a.colorGreenRangeVisible&&(a.colorGreenRangeVisible="0"!=Z.Utils.getResource("DEFAULT_COLORGREENRANGEVISIBLE"));null===a.colorBlueRangeVisible&&(a.colorBlueRangeVisible="0"!=Z.Utils.getResource("DEFAULT_COLORBLUERANGEVISIBLE"));null===a.gammaVisible&&(a.gammaVisible="0"!=Z.Utils.getResource("DEFAULT_GAMMAVISIBLE"));null===a.gammaRedVisible&&(a.gammaRedVisible="0"!=Z.Utils.getResource("DEFAULT_GAMMAREDVISIBLE"));null===a.gammaGreenVisible&&(a.gammaGreenVisible="0"!=Z.Utils.getResource("DEFAULT_GAMMAGREENVISIBLE"));
null===a.gammaBlueVisible&&(a.gammaBlueVisible="0"!=Z.Utils.getResource("DEFAULT_GAMMABLUEVISIBLE"));null===a.hueVisible&&(a.hueVisible="0"!=Z.Utils.getResource("DEFAULT_HUEVISIBLE"));null===a.saturationVisible&&(a.saturationVisible="0"!=Z.Utils.getResource("DEFAULT_SATURATIONVISIBLE"));null===a.lightnessVisible&&(a.lightnessVisible="0"!=Z.Utils.getResource("DEFAULT_LIGHTNESSVISIBLE"));null===a.whiteBalanceVisible&&(a.whiteBalanceVisible="0"!=Z.Utils.getResource("DEFAULT_WHITEBALANCEVISIBLE"));null===
a.normalizeVisible&&(a.normalizeVisible="0"!=Z.Utils.getResource("DEFAULT_NORMALIZEVISIBLE"));null===a.equalizeVisible&&(a.equalizeVisible="0"!=Z.Utils.getResource("DEFAULT_EQUALIZEVISIBLE"));null===a.noiseVisible&&(a.noiseVisible="0"!=Z.Utils.getResource("DEFAULT_NOISEVISIBLE"));null===a.grayscaleVisible&&(a.grayscaleVisible="0"!=Z.Utils.getResource("DEFAULT_GRAYSCALEVISIBLE"));null===a.thresholdVisible&&(a.thresholdVisible="0"!=Z.Utils.getResource("DEFAULT_THRESHOLDVISIBLE"));null===a.inversionVisible&&
(a.inversionVisible="0"!=Z.Utils.getResource("DEFAULT_INVERSIONVISIBLE"));null===a.edgesVisible&&(a.edgesVisible="0"!=Z.Utils.getResource("DEFAULT_EDGESVISIBLE"));null===a.sepiaVisible&&(a.sepiaVisible="0"!=Z.Utils.getResource("DEFAULT_SEPIAVISIBLE"));null===a.freehandVisible&&(a.freehandVisible="0"!=Z.Utils.getResource("z116"));null===a.textVisible&&(a.textVisible="0"!=Z.Utils.getResource("z217"));null===a.iconVisible&&(a.iconVisible="0"!=Z.Utils.getResource("z136"));null===a.rectangleVisible&&(a.rectangleVisible=
"0"!=Z.Utils.getResource("z189"));null===a.polygonVisible&&(a.polygonVisible="0"!=Z.Utils.getResource("z181"));null===a.annotationPanelVisible&&(a.annotationPanelVisible=parseInt(Z.Utils.getResource("DEFAULT_ANNOTATIONPANELVISIBLE"),10));null===a.labelIconsInternal&&(a.labelIconsInternal="0"!=Z.Utils.getResource("DEFAULT_LABELICONSINTERNAL"));null===a.annotationsAddMultiple&&(a.annotationsAddMultiple="0"!=Z.Utils.getResource("DEFAULT_ANNOTATIONSADDMULTIPLE"));null===a.annotationsAutoSave&&(a.annotationsAutoSave=
"0"!=Z.Utils.getResource("DEFAULT_ANNOTATIONSAUTOSAVE"));null===a.annotationsAutoSaveImage&&(a.annotationsAutoSaveImage="0"!=Z.Utils.getResource("DEFAULT_ANNOTATIONSAUTOSAVEIMAGE"));null===a.saveButtonVisible&&(a.saveButtonVisible="0"!=Z.Utils.getResource("DEFAULT_ANNOTATIONSAVEBUTTONVISIBLE"));null===a.labelClickSelect&&(a.labelClickSelect="0"!=Z.Utils.getResource("DEFAULT_LABELCLICKSELECT"));null===a.userPanelVisible&&(a.userPanelVisible=Z.Utils.getResource("DEFAULT_USERPANELVISIBLE"));null===a.userNamePrompt&&
(a.userNamePrompt=Z.Utils.getResource("UI_USERNAMEPROMPT"));null===a.userNamePromptRetry&&(a.userNamePromptRetry=Z.Utils.getResource("UI_USERNAMEPROMPTRETRY"));null===a.trackingPanelVisible&&(a.trackingPanelVisible=parseInt(Z.Utils.getResource("DEFAULT_TRACKINGPANELVISIBLE"),10));null===a.initialTrackingOverlayVisible&&(a.initialTrackingOverlayVisible=parseInt(Z.Utils.getResource("DEFAULT_INITIALTRACKINGOVERLAYVISIBLE"),10));null===a.focal&&(a.focal=parseInt(Z.Utils.getResource("z114"),10));null===
a.quality&&(a.quality=parseInt(Z.Utils.getResource("z188"),10));null===a.saveImageBackColor&&(a.saveImageBackColor=Z.Utils.stringValidate(C)&&"transparent"!=C?C:Z.Utils.stringValidate(I)&&"transparent"!=I?I:Z.Utils.getResource("DEFAULT_SAVEIMAGEBACKCOLOR"));null===a.sliderImageSetVisible&&(a.sliderImageSetVisible="0"!=Z.Utils.getResource("DEFAULT_IMAGESETSLIDERVISIBLE"));if("object"===typeof b&&null!==b){I=Z.Utils.getResource("z287");a.annotationPathProvided="undefined"!==typeof b.zHotspotPath||"undefined"!==
typeof b.zAnnotationPath||"undefined"!==typeof b.zAnnotationXMLText||"undefined"!==typeof b.zAnnotationJSONObject;a.saveHandlerProvided="undefined"!==typeof b.zSaveHandlerPath||"undefined"!==typeof b.zNoPost&&"1"==b.zNoPost;a.imageSetPathProvided="undefined"!==typeof b.zAnimationPath||"undefined"!==typeof b.zSlidestackPath;a.saveImageHandlerProvided="undefined"!==typeof b.zSaveImageHandlerPath;a.mouseWheelParmeterProvided="undefined"!==typeof b.zMouseWheel;a.trackingPathProvided="undefined"!==typeof b.zTrackingPath||
"undefined"!==typeof b.zTrackingXMLText||"undefined"!==typeof b.zTrackingJSONObject;a.userPathProvided="undefined"!==typeof b.zUserPath||"undefined"!==typeof b.zUserXMLText||"undefined"!==typeof b.zUserJSONObject;a.slidePathProvided=a.imagePath&&-1!=a.imagePath.indexOf("zSlidePath")||"undefined"!==typeof b.zSlidePath;C=a.slidePathProvided||a.comparison||a.overlays||a.slideshow||a.imageSetPathProvided||a.animation||a.slidestack;for(var q in b)if(!("function"===typeof b[q]&&"zOnAnnotationReady"!==q&&
"zOnReady"!==q||C&&("each"==q||"eachSlice"==q||"all"==q||"any"==q||"collect"==q||"detect"==q||"findAll"==q||"select"==q||"grep"==q||"include"==q||"member"==q||"inGroupsOf"==q||"inject"==q||"invoke"==q||"max"==q||"min"==q||"partition"==q||"pluck"==q||"reject"==q||"sortBy"==q||"toArray"==q||"zip"==q||"size"==q||"inspect"==q||"_reverse"==q||"_each"==q||"clear"==q||"first"==q||"last"==q||"compact"==q||"flatten"==q||"without"==q||"uniq"==q||"intersect"==q||"clone"==q)||-1!=q.indexOf("this.indexOf")))if("undefined"===
typeof a[Z.Utils.stringLowerCaseFirstLetter(q.substr(1))]&&"undefined"===typeof Z[Z.Utils.stringLowerCaseFirstLetter(q.substr(1))])C?console.log(I+" "+q):alert(I+" "+q);else if(pValue=b[q],a.expressParamsEnabled||"zNavigatorVisible"==q)switch(q){case "zViewerID":a.viewerID=pValue;break;case "zOnAnnotationReady":"function"===typeof pValue&&a.setCallback("annotationPanelInitializedViewer",pValue);break;case "zOnReady":"function"===typeof pValue&&a.setCallback("readyViewer",pValue);break;case "zInitialX":isNaN(parseFloat(pValue))||
(a.initialX=parseFloat(pValue));break;case "zInitialY":isNaN(parseFloat(pValue))||(a.initialY=parseFloat(pValue));break;case "zInitialZoom":"fit"==pValue&&(pValue="-1");"fill"==pValue&&(pValue="0");isNaN(parseFloat(pValue))||(a.initialZ=parseFloat(pValue),a.initialZ&&0<a.initialZ&&100>=a.initialZ&&(a.initialZ/=100));break;case "zMinZoom":"fit"==pValue&&(pValue="-1");"fill"==pValue&&(pValue="0");isNaN(parseFloat(pValue))||(a.minZ=parseFloat(pValue),a.minZ&&0<a.minZ&&100>=a.minZ&&(a.minZ/=100));break;
case "zMaxZoom":isNaN(parseFloat(pValue))||(a.maxZ=parseFloat(pValue),a.maxZ&&-1!=a.maxZ&&(a.maxZ/=100));break;case "zNavigatorVisible":a.navigatorVisible=parseInt(pValue,10);break;case "zNavigatorRectangleColor":a.navigatorRectangleColor=pValue;break;case "zToolbarInternal":a.toolbarInternal=pValue;break;case "zToolbarVisible":a.toolbarVisible=parseInt(pValue,10);a.toolbarAutoShowHide=0!=a.toolbarVisible&&1!=a.toolbarVisible&&6!=a.toolbarVisible&&7!=a.toolbarVisible&&8!=a.toolbarVisible;break;case "zToolbarBackgroundVisible":"0"==
pValue&&(a.toolbarBackgroundVisible=!1);break;case "zLogoVisible":"0"==pValue&&(a.logoVisible=!1);break;case "zMinimizeVisible":"0"==pValue&&(a.minimizeVisible=!1);break;case "zSliderVisible":"0"==pValue&&(a.sliderZoomVisible=!1);break;case "zZoomButtonsVisible":"0"==pValue&&(a.zoomButtonsVisible=!1);break;case "zPanButtonsVisible":"0"==pValue&&(a.panButtonsVisible=!1);break;case "zResetVisible":"0"==pValue&&(a.resetVisible=!1);break;case "zFullViewVisible":"1"==pValue?(a.fullScreenVisible=!0,a.fullPageVisible=
!1):"0"==pValue&&(a.fullScreenVisible=!1,a.fullPageVisible=!1);break;case "zFullScreenVisible":"0"==pValue&&(a.fullScreenVisible=!1,a.fullPageVisible=!1);break;case "zFullPageVisible":"1"==pValue&&(a.fullScreenVisible=!1,a.fullPageVisible=!0);break;case "zInitialFullPage":"1"==pValue&&(a.initialFullPage=!0);break;case "zFullPageInitial":alert(Z.Utils.getResource("z275")+" zFullPageInitial is now zInitialFullPage");break;case "zSkinPath":a.skinPath=pValue;break;case "zTooltipsVisible":"0"==pValue&&
(a.tooltipsVisible=!1);break;case "zHelpVisible":a.helpVisible=parseInt(pValue,10);break;case "zHelpPath":a.helpPath=pValue;a.helpCustom=!0;break;case "zHelpWidth":isNaN(parseInt(pValue,10))||(a.helpW=parseInt(pValue,10));break;case "zHelpHeight":isNaN(parseInt(pValue,10))||(a.helpH=parseInt(pValue,10));break;case "zHelpLeft":isNaN(parseInt(pValue,10))||(a.helpL=parseInt(pValue,10));break;case "zHelpTop":isNaN(parseInt(pValue,10))||(a.helpT=parseInt(pValue,10));break;case "zProgressVisible":"0"==
pValue&&(a.progressVisible=!1);break;case "zMessagesVisible":"0"==pValue&&(a.messagesVisible=!1);break;case "zTileSource":"dzi"==pValue.toLowerCase()&&(a.tileSource="DZIFolder");break;default:if(a.proParamsEnabled)switch(q){case "zXMLParametersPath":a.xmlParametersPath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);a.loadParametersXML();break;case "zZoomSpeed":a.zoomSpeed=parseInt(pValue,10);break;case "zPanSpeed":a.panSpeed=parseInt(pValue,10);break;case "zFadeInSpeed":a.fadeInSpeed=parseInt(pValue,
10);a.fadeIn=0<a.fadeInSpeed&&!a.imageFilters;break;case "zInteractive":"0"==pValue&&(a.interactive=!1,a.navigatorVisible=!1,a.toolbarVisible=0,a.clickZoom=!1,a.doubleClickZoom=!1,a.clickPan=!1,a.mousePan=!1,a.keys=!1);break;case "zClickZoom":"0"==pValue&&(a.clickZoom=!1);break;case "zDoubleClickZoom":"0"==pValue&&(a.doubleClickZoom=!1);break;case "zDoubleClickDelay":a.doubleClickDelay=parseInt(pValue,10);break;case "zClickPan":"0"==pValue&&(a.clickPan=!1);break;case "zMousePan":"0"==pValue&&(a.mousePan=
!1);break;case "zKeys":"0"==pValue&&(a.keys=!1);break;case "zConstrainPan":a.constrainPan="0"!=pValue;a.constrainPanLimit=parseInt(pValue,10);a.constrainPanStrict="3"==pValue;break;case "zPanBuffer":h=parseFloat(pValue);isNaN(h)||(a.panBuffer=h);break;case "zSmoothPan":"0"==pValue&&(a.smoothPan=!1);break;case "zSmoothPanEasing":h=parseInt(pValue,10);1<=h&&5>=h&&(a.smoothPanEasing=h);break;case "zSmoothPanGlide":h=parseInt(pValue,10);1<=h&&5>=h&&(a.smoothPanGlide=h);break;case "zSmoothZoom":"0"==pValue&&
(a.smoothZoom=!1);break;case "zSmoothZoomEasing":h=parseInt(pValue,10);1<=h&&4>=h&&(a.smoothZoomEasing=h);break;case "zAutoResize":"1"==pValue&&(a.autoResize=!0);break;case "zCanvas":"0"==pValue&&(a.canvas=!1);a.canvasSupported&&a.canvas||(a.useCanvas=!1);break;case "zBaseZIndex":a.baseZIndex=parseInt(pValue,10);break;case "zDebug":a.debug=parseInt(pValue,10);break;case "zImageProperties":a.imageProperties=pValue;break;case "zNavigatorWidth":!isNaN(parseInt(pValue,10))&&(a.navigatorW=parseInt(pValue,
10),0<a.rulerVisible&&null===a.rulerW||-1==a.rulerW)&&(a.rulerW=a.navigatorW);break;case "zNavigatorHeight":isNaN(parseInt(pValue,10))||(a.navigatorH=parseInt(pValue,10));break;case "zNavigatorLeft":isNaN(parseInt(pValue,10))||(a.navigatorL=parseInt(pValue,10));break;case "zNavigatorTop":isNaN(parseInt(pValue,10))||(a.navigatorT=parseInt(pValue,10));break;case "zNavigatorFit":isNaN(parseFloat(pValue))||(a.navigatorFit=parseInt(pValue,10));break;case "zGalleryVisible":a.galleryVisible=parseInt(pValue,
10);a.galleryAutoShowHide=2==a.galleryVisible;break;case "zGalleryWidth":isNaN(parseInt(pValue,10))||(a.galleryW=parseInt(pValue,10));break;case "zGalleryHeight":isNaN(parseInt(pValue,10))||(a.galleryH=parseInt(pValue,10));break;case "zGalleryLeft":isNaN(parseInt(pValue,10))||(a.galleryL=parseInt(pValue,10));break;case "zGalleryTop":isNaN(parseInt(pValue,10))||(a.galleryT=parseInt(pValue,10));break;case "zGalleryPosition":a.galleryPosition=parseInt(pValue,10);break;case "zToolbarPosition":a.toolbarPosition=
parseInt(pValue,10);break;case "zLogoCustomPath":a.logoCustomPath=pValue;break;case "zLogoLinkURL":Z.Utils.stringValidate(pValue)&&(-1==pValue.indexOf("http")&&(pValue="http://"+pValue),a.logoLinkURL=pValue);break;case "zBookmarksGet":"1"==pValue&&(a.bookmarksGet=!0);break;case "zBookmarksSet":"1"==pValue&&(a.bookmarksSet=!0);break;case "zCopyrightPath":a.copyrightPath=pValue;break;case "zWatermarkPath":a.watermarkPath=pValue;a.watermarks=!0;break;case "zVirtualPointerVisible":"1"==pValue&&(a.virtualPointerVisible=
!0);break;case "zCrosshairsVisible":"1"==pValue&&(a.crosshairsVisible=!0);break;case "zZoomRectangle":"0"==pValue&&(a.zoomRectangle=!1);break;case "zRulerVisible":a.rulerVisible=parseInt(pValue,10);break;case "zRulerListType":Z.Utils.stringValidate(pValue)&&(a.rulerListType=pValue);break;case "zRulerWidth":isNaN(parseInt(pValue,10))||(a.rulerW=parseInt(pValue,10));break;case "zRulerHeight":isNaN(parseInt(pValue,10))||(a.rulerH=parseInt(pValue,10));break;case "zRulerLeft":isNaN(parseInt(pValue,10))||
(a.rulerL=parseInt(pValue,10));break;case "zRulerTop":isNaN(parseInt(pValue,10))||(a.rulerT=parseInt(pValue,10));break;case "zUnits":Z.Utils.stringValidate(pValue)&&(a.units=pValue);break;case "zUnitsPerImage":isNaN(parseFloat(pValue))||(a.unitsPerImage=parseFloat(pValue));break;case "zPixelsPerUnit":isNaN(parseFloat(pValue))||(a.pixelsPerUnit=parseFloat(pValue));break;case "zSourceMagnification":isNaN(parseInt(pValue,10))||(a.sourceMagnification=parseInt(pValue,10));break;case "zMagnification":alert(Z.Utils.getResource("z275")+
" zMagnification is now zSourceMagnification");break;case "zMeasureVisible":a.measureVisible="1"==pValue;break;case "zRotationVisible":"0"!=pValue&&(a.rotationVisible=!0,a.rotationFree="1"==pValue);break;case "zInitialRotation":isNaN(parseFloat(pValue))||(a.initialR=parseInt(pValue,10));break;case "zImageListPath":a.imageListPath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);a.imageList=!0;break;case "zScreensaver":"1"==pValue&&(a.screensaver=!0,a.tour=!0);break;case "zScreensaverSpeed":a.screensaverSpeed=
parseInt(pValue,10);break;case "zTourPath":a.tourPath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);a.hotspotPath=a.tourPath;a.hotspotFolder=a.hotspotPath;".xml"==a.hotspotPath.toLowerCase().substring(a.hotspotPath.length-4,a.hotspotPath.length)&&(a.hotspotFolder=a.hotspotFolder.substring(0,a.hotspotFolder.lastIndexOf("/")));a.tour=!0;break;case "zTourListTitle":a.tourListTitle=pValue;break;case "zComparisonPath":a.imageSetPath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);a.imageSet=
!0;a.comparison=!0;a.smoothPan=!1;break;case "zSyncVisible":"0"==pValue&&(a.syncVisible=!1);break;case "zInitialSync":"0"==pValue&&(a.initialSync=!1);break;case "zSlidePath":a.slidePath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);a.slideshow=!0;break;case "zSlideListTitle":a.slideListTitle=pValue;break;case "zHotspotPath":a.hotspotPath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);a.hotspotFolder=a.hotspotPath;".xml"==a.hotspotPath.toLowerCase().substring(a.hotspotPath.length-4,a.hotspotPath.length)&&
(a.hotspotFolder=a.hotspotFolder.substring(0,a.hotspotFolder.lastIndexOf("/")));a.hotspots=!0;break;case "zHotspotListTitle":a.hotspotListTitle=pValue;break;case "zHotspotsDrawOnlyInView":"0"==pValue&&(a.hotspotsDrawOnlyInView=!1);break;case "zCaptionBoxes":"1"==pValue&&(a.captionBoxes=!0);break;case "zCaptionOffset":a.captionOffset=parseInt(pValue,10);break;case "zCaptionTextColor":a.captionTextColor=Z.Utils.stringValidateColorValue(pValue);a.captionsColorsDefault=!1;break;case "zCaptionBackColor":a.captionBackColor=
Z.Utils.stringValidateColorValue(pValue);a.captionsColorsDefault=!1;break;case "zPolygonLineColor":a.polygonLineColor=Z.Utils.stringValidateColorValue(pValue);break;case "zPolygonFillColor":a.polygonFillColor=Z.Utils.stringValidateColorValue(pValue);break;case "zCaptionTextVisible":"0"==pValue&&(a.captionTextVisible=!1);break;case "zCaptionBackVisible":"0"==pValue&&(a.captionBackVisible=!1);break;case "zPolygonLineVisible":"0"==pValue&&(a.polygonLineVisible=!1);break;case "zPolygonFillVisible":"1"==
pValue&&(a.polygonFillVisible=!0);break;case "zCoordinatesVisible":"1"==pValue&&(a.coordinatesVisible=!0);break;case "zGeoCoordinatesPath":a.geoCoordinatesPath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);a.geoCoordinatesFolder=a.geoCoordinatesPath;".xml"==a.geoCoordinatesPath.toLowerCase().substring(a.geoCoordinatesPath.length-4,a.geoCoordinatesPath.length)&&(a.geoCoordinatesFolder=a.geoCoordinatesFolder.substring(0,a.geoCoordinatesFolder.lastIndexOf("/")));a.geoCoordinatesVisible=!0;a.coordinatesVisible=
!0;break;case "zPreloadVisible":"1"==pValue&&(a.preloadVisible=!0);break;case "zOverlayPath":a.imageSetPath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);a.imageSet=!0;a.overlays=!0;break;case "zOverlayJSONObject":a.overlayJSONObject=pValue;a.imageSet=!0;a.overlays=!0;break;case "zAnimationPath":a.imageSetPath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);a.imageSet=!0;a.animation=!0;a.mouseWheelParmeterProvided||(a.mouseWheel=parseInt(Z.Utils.getResource("DEFAULT_MOUSEWHEELANIMATION"),
10),a.sliderFocus=2==a.mouseWheel?"imageSet":"zoom");a.constrainPanStrict||(a.constrainPanStrict=!0);break;case "zAnimationAxis":a.animationAxis=Z.Utils.stringValidate(pValue)&&"vertical"==pValue?"vertical":"horizontal";break;case "zAnimator":a.animator=Z.Utils.stringValidate(pValue)&&"motion"==pValue?"motion":"position";break;case "zAnimationFlip":"1"==pValue&&(a.animationFlip=!0);break;case "zImageSetSliderVisible":"0"==pValue&&(a.sliderImageSetVisible=!1);break;case "zMouseWheel":a.mouseWheel=
parseInt(pValue,10);a.sliderFocus=2==a.mouseWheel?"imageSet":"zoom";break;case "zTilesPNG":"1"==pValue&&(a.tileType="png");break;case "zTileW":a.tileW=parseInt(pValue,10);break;case "zTileH":a.tileH=parseInt(pValue,10);break;default:if(a.enterpriseParamsEnabled)switch(q){case "zImageFiltersVisible":if(Z.Utils.stringValidate(pValue))switch(pValue){case "all":a.brightnessVisible=!0;a.contrastVisible=!0;a.sharpnessVisible=!0;a.blurrinessVisible=!0;a.colorRedVisible=!0;a.colorGreenVisible=!0;a.colorBlueVisible=
!0;a.colorRedRangeVisible=!0;a.colorGreenRangeVisible=!0;a.colorBlueRangeVisible=!0;a.gammaVisible=!0;a.gammaRedVisible=!0;a.gammaGreenVisible=!0;a.gammaBlueVisible=!0;a.hueVisible=!0;a.saturationVisible=!0;a.lightnessVisible=!0;a.whiteBalanceVisible=!0;a.noiseVisible=!0;a.grayscaleVisible=!0;a.thresholdVisible=!0;a.inversionVisible=!0;a.edgesVisible=!0;a.sepiaVisible=!0;break;case "creative":a.brightnessVisible=!0;a.contrastVisible=!0;a.sharpnessVisible=!0;a.blurrinessVisible=!0;a.colorRedVisible=
!0;a.colorGreenVisible=!0;a.colorBlueVisible=!0;a.gammaVisible=!0;a.whiteBalanceVisible=!0;a.noiseVisible=!0;a.grayscaleVisible=!0;a.inversionVisible=!0;a.sepiaVisible=!0;break;case "hsl":a.hueVisible=!0;a.saturationVisible=!0;a.lightnessVisible=!0;break;case "pathology":a.brightnessVisible=!0;a.contrastVisible=!0;a.sharpnessVisible=!0;a.gammaRedVisible=!0;a.gammaGreenVisible=!0;a.gammaBlueVisible=!0;a.whiteBalanceVisible=!0;a.thresholdVisible=!0;a.edgesVisible=!0;break;case "colors":a.colorRedVisible=
!0;a.colorGreenVisible=!0;a.colorBlueVisible=!0;break;case "ranges":a.colorRedRangeVisible=!0;a.colorGreenRangeVisible=!0;a.colorBlueRangeVisible=!0;break;case "gammaColors":a.gammaRedVisible=!0;a.gammaGreenVisible=!0;a.gammaBlueVisible=!0;break;case "external":a.imageFilters="external",a.imageFiltersVisible=!0,a.fadeIn=!1}break;case "zInitialImageFilters":"0"==pValue&&(a.initialImageFilters=!1);break;case "zBrightnessVisible":"1"==pValue&&(a.brightnessVisible=!0);break;case "zContrastVisible":"1"==
pValue&&(a.contrastVisible=!0);break;case "zSharpnessVisible":"1"==pValue&&(a.sharpnessVisible=!0);break;case "zBlurrinessVisible":"1"==pValue&&(a.blurrinessVisible=!0);break;case "zColorRedVisible":"1"==pValue&&(a.colorRedVisible=!0);break;case "zColorGreenVisible":"1"==pValue&&(a.colorGreenVisible=!0);break;case "zColorBlueVisible":"1"==pValue&&(a.colorBlueVisible=!0);break;case "zColorRedRangeVisible":"1"==pValue&&(a.colorRedRangeVisible=!0);break;case "zColorGreenRangeVisible":"1"==pValue&&(a.colorGreenRangeVisible=
!0);break;case "zColorBlueRangeVisible":"1"==pValue&&(a.colorBlueRangeVisible=!0);break;case "zGammaVisible":"1"==pValue&&(a.gammaVisible=!0);break;case "zGammaRedVisible":"1"==pValue&&(a.gammaRedVisible=!0);break;case "zGammaGreenVisible":"1"==pValue&&(a.gammaGreenVisible=!0);break;case "zGammaBlueVisible":"1"==pValue&&(a.gammaBlueVisible=!0);break;case "zHueVisible":"1"==pValue&&(a.hueVisible=!0);break;case "zSaturationVisible":"1"==pValue&&(a.saturationVisible=!0);break;case "zLightnessVisible":"1"==
pValue&&(a.lightnessVisible=!0);break;case "zWhiteBalanceVisible":"1"==pValue&&(a.whiteBalanceVisible=!0);break;case "zNormalizeVisible":"1"==pValue&&(a.normalizeVisible=!0);break;case "zEqualizeVisible":"1"==pValue&&(a.equalizeVisible=!0);break;case "zNoiseVisible":"1"==pValue&&(a.noiseVisible=!0);break;case "zGrayscaleVisible":"1"==pValue&&(a.grayscaleVisible=!0);break;case "zThresholdVisible":"1"==pValue&&(a.thresholdVisible=!0);break;case "zInversionVisible":"1"==pValue&&(a.inversionVisible=!0);
break;case "zEdgesVisible":"1"==pValue&&(a.edgesVisible=!0);break;case "zSepiaVisible":"1"==pValue&&(a.sepiaVisible=!0);break;case "zAnnotationPath":a.annotationPath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);"undefined"!==typeof a.annotationPath&&Z.Utils.stringValidate(a.annotationPath)?(a.annotationFolder=a.annotationPath,".xml"==a.annotationPath.toLowerCase().substring(a.annotationPath.length-4,a.annotationPath.length)&&(a.annotationFolder=a.annotationFolder.substring(0,a.annotationFolder.lastIndexOf("/"))),
a.annotations=!0):alert(Z.Utils.getResource("ERROR_ANNOTATIONPATHMISSING"));break;case "zAnnotationPanelVisible":a.annotationPanelVisible=parseInt(pValue,10);break;case "zAnnotationXMLText":a.annotationXMLText=pValue;a.annotations=!0;break;case "zLabelIconsInternal":"0"==pValue&&(a.labelIconsInternal=!1);break;case "zAnnotationJSONObject":a.annotationJSONObject=pValue;a.annotations=!0;break;case "zAnnotationsAddMultiple":"0"==pValue&&(a.annotationsAddMultiple=!1);break;case "zAnnotationsAutoSave":"0"==
pValue?a.annotationsAutoSave=!1:"2"==pValue&&(a.annotationsAutoSaveImage=!0);break;case "zSaveButtonVisible":"0"==pValue&&(a.saveButtonVisible=!1);break;case "zLabelClickSelect":"1"==pValue&&(a.labelClickSelect=!0);break;case "zSimplePath":"1"==pValue&&(a.simplePath=!0);break;case "zNoPost":"1"==pValue&&(a.noPost=!0);break;case "zNoPostDefaults":"1"==pValue&&(a.noPostDefaults=!0);break;case "zUnsavedEditsTest":"0"==pValue&&(a.unsavedEditsTest=!1);break;case "zAnnotationSort":a.annotationSort=pValue;
break;case "zMaskVisible":"1"==pValue&&(a.maskVisible=!0);break;case "zMaskScale":a.maskScale=parseFloat(pValue);break;case "zMaskBorder":"1"==pValue&&(a.maskBorder=!0);break;case "zMaskFadeSpeed":a.maskFadeSpeed=parseInt(pValue,10);break;case "zMaskClearOnUserAction":"0"==pValue&&(a.maskClearOnUserAction=!1);break;case "zFreehandVisible":"0"==pValue&&(a.freehandVisible=!1);break;case "zTextVisible":"0"==pValue&&(a.textVisible=!1);break;case "zIconVisible":"0"==pValue&&(a.iconVisible=!1);break;case "zRectangleVisible":"0"==
pValue&&(a.rectangleVisible=!1);break;case "zPolygonVisible":"0"==pValue&&(a.polygonVisible=!1);break;case "zMarkupMode":if("1"==pValue||"2"==pValue)a.annotationPathProvided||a.imageSetPathProvided?(a.editMode="markup",a.editing="addLabel","2"==pValue&&(a.editAdmin=!0)):alert(Z.Utils.getResource("ERROR_ANNOTATIONPATHMISSING"));break;case "zEditMode":if("1"==pValue||"2"==pValue)a.annotationPathProvided||a.imageSetPathProvided?(a.editMode="edit","2"==pValue&&(a.editAdmin=!0)):alert(Z.Utils.getResource("ERROR_ANNOTATIONPATHMISSING"));
break;case "zSlidestackPath":a.imageSetPath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);a.imageSet=!0;a.slidestack=!0;a.mouseWheelParmeterProvided||(a.mouseWheel=parseInt(Z.Utils.getResource("DEFAULT_MOUSEWHEELSLIDESTACK"),10),a.sliderFocus=2==a.mouseWheel?"imageSet":"zoom");break;case "zSaveHandlerPath":a.saveHandlerPath=pValue;break;case "zSaveImageHandlerPath":a.saveImageHandlerPath=pValue;break;case "zSaveImageFull":"1"==pValue&&(a.saveImageFull=!0);break;case "zSaveImageFilename":Z.Utils.stringValidate(pValue)&&
(a.saveImageFilename=pValue);break;case "zSaveImageFormat":switch(pValue.toLowerCase()){case "png":a.saveImageFormat="png";break;default:a.saveImageFormat="jpg"}break;case "zSaveImageCompression":h=parseFloat(pValue);!isNaN(h)&&.1<=h&&1>=h&&(a.saveImageCompression=h);break;case "zSaveImageBackColor":a.saveImageBackColor=Z.Utils.stringValidateColorValue(pValue);break;case "zTrackingPath":a.trackingPath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);"undefined"!==typeof a.trackingPath&&Z.Utils.stringValidate(a.trackingPath)?
(a.trackingFolder=a.trackingPath,".xml"==a.trackingPath.toLowerCase().substring(a.trackingPath.length-4,a.trackingPath.length)&&(a.trackingFolder=a.trackingFolder.substring(0,a.trackingFolder.lastIndexOf("/"))),a.tracking=!0):alert(Z.Utils.getResource("ERROR_TRACKINGPATHMISSING"));break;case "zTrackingEditMode":"1"==pValue&&(a.trackingPathProvided?(a.trackingEditMode="edit",a.markupMode=!0,a.editMode="markup",a.editing="addLabel",a.labelMode="counter"):alert(Z.Utils.getResource("ERROR_TRACKINGPATHMISSING-EDITING")));
break;case "zTrackingAuto":"1"==pValue&&(a.trackingAuto=!0);break;case "zTrackingPanelVisible":a.trackingPanelVisible=parseInt(pValue,10);break;case "zInitialTrackingOverlayVisible":"0"==pValue&&(a.initialTrackingOverlayVisible=!1);break;case "zUserLogin":"1"==pValue?a.userLogin="request":"skip"==pValue?(a.userName=Z.Utils.getResource("CONTENT_SKIPUSERNAME"),a.userInitials=Z.Utils.stringGetInitials(a.userName)):Z.Utils.stringValidate(pValue)&&(a.userName=pValue,a.userInitials=Z.Utils.stringGetInitials(a.userName));
break;case "zUserNamePrompt":Z.Utils.stringValidate(pValue)&&(a.userNamePrompt=pValue);break;case "zUserPath":a.userPath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);"undefined"!==typeof a.userPath&&Z.Utils.stringValidate(a.userPath)?(a.userFolder=a.userPath,".xml"==a.userPath.toLowerCase().substring(a.userPath.length-4,a.userPath.length)&&(a.userFolder=a.userFolder.substring(0,a.userFolder.lastIndexOf("/"))),a.userLogging=!0):alert(Z.Utils.getResource("ERROR_USERPATHMISSING"));break;case "zUserPanelVisible":"0"!=
pValue&&(a.userPathProvided?a.userPanelVisible=parseInt(pValue,10):alert(Z.Utils.getResource("ERROR_USERPATHMISSING")));break;default:if(a.specialStorageEnabled==d)alert(f+" "+q);else switch(q){case "zServerIP":a.serverIP=pValue;break;case "zServerPort":a.serverPort=pValue;break;case "zTileHandlerPath":a.tileHandlerPath=pValue;break;case "zRequestTiles":"1"==pValue&&(a.requestTiles=!0);break;case "zIIIFScheme":a.iiifScheme=pValue;break;case "zIIIFServer":a.iiifServer=pValue;break;case "zIIIFPrefix":a.iiifPrefix=
pValue;break;case "zIIIFIdentifier":a.iiifIdentifier=pValue;break;case "zIIIFRegion":a.iiifRegion=pValue;break;case "zIIIFSize":a.iiifSize=pValue;break;case "zIIIFRotation":a.iiifRotation=pValue;break;case "zIIIFQuality":a.iiifQuality=pValue;break;case "zIIIFFormat":a.iiifFormat=pValue;break;case "zImageW":a.imageW=parseInt(pValue,10);a.imageCtrX=a.imageW/2;null!=a.imageW&&0<a.imageW&&null!=a.imageH&&0<a.imageH&&(a.imageD=Math.round(Math.sqrt(a.imageW*a.imageW+a.imageH*a.imageH)));break;case "zImageH":a.imageH=
parseInt(pValue,10);a.imageCtrY=a.imageH/2;null!=a.imageW&&0<a.imageW&&null!=a.imageH&&0<a.imageH&&(a.imageD=Math.round(Math.sqrt(a.imageW*a.imageW+a.imageH*a.imageH)));break;case "zFocal":a.focal=parseInt(pValue,10);break;case "zQuality":a.quality=parseInt(pValue,10)}}else alert(n+" "+q)}else alert(c+" "+q)}else alert(e+" "+q)}if(Z.Utils.stringValidate(a.annotationPath)||Z.Utils.stringValidate(a.saveHandlerPath)||Z.Utils.stringValidate(a.saveImageHandlerPath))a.enterpriseParamsEnabled?Z.Utils.stringValidate(a.saveHandlerPath)&&
(b=a.saveImageHandlerPath,a.saveHandlerPath=a.saveHandlerPath,a.saveImageHandlerPath=b):(a.annotationPath="",alert(n));P()}function u(a){a=Z.Utils.arrayIndexOfObjectValue(lb,"state",a);return-1==a?!1:lb[a].status}function K(a,b){var c=!1,d=Z.Utils.arrayIndexOfObjectValue(lb,"state",a);-1==d?(c=b,lb[lb.length]={state:a,status:b}):(!lb[d].status&&b&&(c=!0),lb[d].status=b);c&&(Q(a),D(a))}function T(b){var c=!0;if(a.imageSet)for(var d=0,e=a.imageSetLength;d<e;d++)if(!a["Viewport"+d.toString()].getStatus(b)){c=
!1;break}c&&(c=b.indexOf("Viewport"),-1!=c&&(b=b.substring(0,c)),K(b+"Viewer",!0))}function D(b){b=!1;if(a&&a.Viewport&&"undefined"!==typeof a.Viewport.getStatus){b=a.Viewport.getStatus("initializedViewport")&&("unconverted"==a.tileSource||a.Viewport.getStatus("precacheLoadedViewport")&&a.Viewport.getStatus("backfillLoadedViewport")&&a.Viewport.getStatus("backfillDrawnViewport"))&&a.Viewport.getStatus("displayLoadedViewport")&&a.Viewport.getStatus("displayDrawnViewport");var c=!a.hotspots||a.Viewport.getStatus("hotspotsLoadedViewport"),
d=!a.annotations||a.Viewport.getStatus("annotationsLoadedViewport")&&(!a.annotationPanelVisible||a.Viewport.getStatus("annotationPanelInitializedViewport")),e=0==a.toolbarVisible||a.Toolbar&&a.Toolbar.getInitialized(),g=!a.navigatorVisible||a.Navigator&&a.Navigator.getInitialized(),f=!a.galleryVisible||a.Gallery&&a.Gallery.getInitialized(),h=!a.rulerVisible||a.Ruler&&a.Ruler.getInitialized(),n=!a.imageSet||self&&u("initializedViewer")&&("unconverted"==a.tileSource||a.getStatus("precacheLoadedViewer")&&
a.getStatus("backfillLoadedViewer")&&a.getStatus("backfillDrawnViewer"))&&a.getStatus("displayLoadedViewer")&&a.getStatus("displayDrawnViewer"),E=!a.imageSet||!a.hotspots||self&&a.getStatus("hotspotsLoadedViewer"),k=!a.imageSet||!a.annotations||self&&a.getStatus("annotationsLoadedViewer")&&(!a.annotationPanelVisible||a.getStatus("annotationPanelInitializedViewer"));b=b&&c&&d&&e&&g&&f&&h&&n&&E&&k}b&&K("readyViewer",!0);return b}function O(b){if(b=Z.Utils.event(b)){var c=null;if(null!==a.editing&&a.Viewport.verifyEditsUnsaved())return c=
Z.Utils.getResource("ALERT_UNSAVEDEDITSEXIST-BROWSER"),b.returnValue=c}}function P(b){b="undefined"!==typeof b&&Z.Utils.stringValidate(b)?b:a.imagePath;if(null!==b){var c=Z.Utils.getResource("z213");Z.singleFileEnabled=!1;if(-1==b.toLowerCase().indexOf(".zif")||a.requestTiles)if(-1!=b.toLowerCase().indexOf(".jpg")||-1!=b.toLowerCase().indexOf(".png"))a.tileSource="unconverted";else if(-1==b.toLowerCase().indexOf(".pff")||a.requestTiles)if(Z.Utils.stringValidate(a.iiifServer)){a.tileSource="IIIFImageServer";
b="undefined"!=typeof a.iiifScheme&&Z.Utils.stringValidate(a.iiifScheme)?a.iiifScheme+"://":"https://";var c="undefined"!=typeof a.iiifServer&&Z.Utils.stringValidate(a.iiifServer)?a.iiifServer+"/":null,d="undefined"!=typeof a.iiifPrefix&&Z.Utils.stringValidate(a.iiifPrefix)?a.iiifPrefix+"/":null,e="undefined"!=typeof a.iiifIdentifier&&Z.Utils.stringValidate(a.iiifIdentifier)?a.iiifIdentifier:null;a.imagePath=b&&c&&e?b+c+d+e:Z.Utils.getResource("ERROR_SETTINGIIIFIMAGEPATH")}else"DZIFolder"==a.tileSource||
-1!=b.toLowerCase().indexOf(".dzi")?(a.tileSource="DZIFolder",c=b.toLowerCase(),d=b.lastIndexOf("/"),-1==d?(a.dziImageSubfolder=b,a.dziImagePropertiesFilename=a.dziImageSubfolder+".dzi"):(b.substring(0,d).lastIndexOf("/"),e=c.substring(d+1,c.length).indexOf(".dzi"),-1!=e?a.dziImagePropertiesFilename=b.substring(d+1,c.length):(a.dziImagePropertiesFilename=c.substring(d+1,c.length),e=a.dziImagePropertiesFilename.toLowerCase().indexOf(".xml")),a.dziImageSubfolder=a.dziImagePropertiesFilename.substring(0,
e)+"_files",a.imagePath=b.substring(0,d))):Z.Utils.stringValidate(a.tileHandlerPath)?Z.Utils.stringValidate(a.tileHandlerPath)&&(a.specialStorageEnabled?(a.tileSource="ImageServer",b=a.tileHandlerPath,a.tileHandlerPathFull=b):alert(c)):a.tileSource="ZoomifyImageFolder";else a.imageFilename=b.substring(b.toLowerCase().lastIndexOf("/")+1),a.specialStorageEnabled||Z.singleFileSupported?(a.tileSource="ZoomifyPFFFile",Z.singleFileEnabled=!0,Z.Utils.validateResponseArrayFunctionality(a.tileSource,a.tileHandlerPathFull),
Z.localUseEnabled&&Z.localUseSupported&&Z.singleFileEnabled&&null===Z.localFileData&&(a.setCallback("imageFileSelected",Z.createViewer),qa()),a.specialStorageEnabled&&null!==a.tileHandlerPath&&(b=a.tileHandlerPath,a.tileHandlerPathFull=b)):Z.singleFileSupported||null!==a.tileHandlerPath?a.specialStorageEnabled||alert(c):alert(Z.Utils.getResource("ALERT_PFFREQUIRESNEWERBROWSER"));else a.imageFilename=b.substring(b.toLowerCase().lastIndexOf("/")+1),Z.singleFileSupported?(a.tileSource="ZoomifyZIFFile",
Z.singleFileEnabled=!0,Z.Utils.validateResponseArrayFunctionality(a.tileSource,a.tileHandlerPathFull),Z.localUseEnabled&&Z.localUseSupported&&Z.singleFileEnabled&&null===Z.localFileData&&(a.setCallback("imageFileSelected",Z.createViewer),qa())):alert(Z.Utils.getResource("z16"))}else if(a.imageSet||a.slideshow)a.tileSourceMultiple=!0}function qa(){var b=Z.Utils.getContainerSize(a.pageContainer,a.ViewerDisplay);Z.FileAccessDisplay=Z.Utils.createContainerElement(g,"div","FileAccessDisplay","inline-block",
"relative","auto","308px","180px",(b.x-308)/2+"px",(b.y-180)/2+"px","solid","1px","lightGrey","0px","0px","normal",null,!0);a.ViewerDisplay.appendChild(Z.FileAccessDisplay);b=Z.Utils.getResource("ALERT_VALIDATELOCALSINGLEFILEVIEWING-TITLE");b=Z.Utils.createTextElement(g,"titleBox",b,"268px","28px","10px","15px","10px","none","0px",!0,"verdana","13px","none",null,1,"hidden","hidden",null);Z.FileAccessDisplay.appendChild(b);b.firstChild.style.textAlign="center";b.firstChild.style.fontWeight="bold";
b=Z.Utils.getResource("ALERT_VALIDATELOCALSINGLEFILEVIEWING-MESSAGE")+a.imageFilename;b=Z.Utils.createTextElement(g,"messageBox",b,"268px","55px","10px","43px","10px","none","0px",!0,"verdana","13px","none",null,1,"hidden","hidden",null);Z.FileAccessDisplay.appendChild(b);b.firstChild.style.textAlign="center";var b=Z.Utils.createContainerElement(g,"div","inputCont","inline-block","relative","auto","240px","30px","34px","138px","none","0px","lightGrey","0px","0px","normal",null,!0),c=document.createElement("input");
c.setAttribute("type","file");b.appendChild(c);Z.FileAccessDisplay.appendChild(b);Z.Utils.addEventListener(c,"change",fa)}function fa(a){Z.localFileData=a.target.files[0];Z.localFileSelected=!0;Z.FileAccessDisplay.style.display="none";Q("imageFileSelected");Q("readyConfigureViewer")}function Q(b){"undefined"===typeof a.callbacks&&(a.callbacks=[]);var c=a.callbacks.slice(0);Z.Utils.functionCallWithDelay(function(){xa(b,c)},10)}function xa(b,c){for(var d=0,e=c.length;d<e;d++){var g=c[d];if(g&&g.callbackEvent==
b&&"object"===typeof g&&"function"===typeof g.callbackFunction)switch(b){case "viewChanging":g.callbackFunction();break;case "viewPanningGetCurrentCoordinates":var f=a.Viewport.getCoordinates();g.callbackFunction(f);break;case "viewZoomingGetCurrentZoom":f=a.Viewport.getZoom();g.callbackFunction(f);break;case "viewChangingGetCurrentCoordinatesFull":f=a.Viewport.getCoordinatesFull();g.callbackFunction(f);break;case "viewUpdateCompleteGetLabelIDs":f=a.Viewport.getLabelIDsInCurrentView(!1,!0,!0);g.callbackFunction(f);
break;case "viewUpdateCompleteGetLabelInternalIDs":f=a.Viewport.getLabelIDsInCurrentView(!0,!0,!0);g.callbackFunction(f);break;case "labelSavedGetJSONObject":if(f=a.Viewport.getCurrentLabel())f=f.internalID,f=a.Viewport.getLabelJSONObject(f,!0),g.callbackFunction(f);break;case "labelCreatedGetInternalID":a.Viewport&&a.Viewport.getStatus("XMLParsedViewport")&&(f=a.Viewport.getCurrentLabel())&&(f=f.internalID,g.callbackFunction(f));break;case "labelDrawnGetIDs":a.Viewport&&(f=a.Viewport.getCurrentLabel())&&
g.callbackFunction(f.id,f.internalID);break;case "labelSelectedInViewportGetIDs":a.Viewport&&(f=a.Viewport.getCurrentLabel())&&g.callbackFunction(f.id,f.internalID);break;case "currentLabelChangedGetID":a.Viewport&&(f=a.Viewport.getCurrentLabel())&&g.callbackFunction(f.id,f.internalID);break;default:g.callbackFunction()}}Z.Utils.arrayClear(c)}function da(a){Z.HelpDisplay.style.display="none";return!0}function n(b,c,d,e){switch(b){case "1":e=b=40;break;case "2":b=d/2-c/2;e=40;break;case "3":b=d-c-
80;e=40;break;case "4":b=d-c-40;e=0<a.toolbarVisible&&8!=a.toolbarVisible?e-120:e-80;break;case "5":b=d/2-c/2;e=0<a.toolbarVisible&&8!=a.toolbarVisible?e-120:e-80;break;case "6":b=40;e=0<a.toolbarVisible&&8!=a.toolbarVisible?e-120:e-80;break;default:b=d-c,e=40}return new Z.Utils.Point(b,e)}function C(b){ua();a.Viewport&&a.coordinatesVisible&&a.Viewport.setCoordinatesDisplayVisibility(!1);return!0}function E(b,c,d,e,f,h){if(a.messagesVisible){if(!a.MessageDisplay){var E=parseInt(Z.Utils.getResource("z437"),
10),k=parseInt(Z.Utils.getResource("z436"),10),I=n("6",E,a.viewerW,a.viewerH),y=Z.Utils.getResource("z159"),u=Z.Utils.getResource("z158");a.MessageDisplay=Z.Utils.createContainerElement(g,"div","MessageDisplay","inline-block","absolute","auto",E+"px",k+"px",I.x+"px",I.y+"px","solid","1px",y,"0px","0px","normal",null,!0);a.ViewerDisplay.appendChild(a.MessageDisplay);a.MessageDisplay.style.zIndex=(a.baseZIndex+30).toString();I=Z.Utils.createTextElement(g,"messageBox","",E-18+"px",k-40+"px","4px","4px",
"4px","solid","1px",!0,"verdana","12px","none",null,1,"auto","auto",null);a.MessageDisplay.appendChild(I);a.messages=Z.Utils.getElementOfViewerById(g,"messageBox");k=k-18-5;E-=66;I=Z.Utils.getResource("z438");u=new Z.Utils.Button(g,"buttonMessageOk",I,null,null,null,null,"56px","18px",E+"px",k+"px","mousedown",C,"z362","solid","1px",u,"0px","0px",null,null,a.tooltipsVisible);a.MessageDisplay.appendChild(u.elmt)}if("undefined"===typeof h||null===h)h="6";u=parseInt(Z.Utils.getResource("z437"),10);h=
n(h,u,a.viewerW,a.viewerH);a.MessageDisplay.style.left=h.x+"px";a.MessageDisplay.style.top=h.y+"px";a.MessageDisplay.messageTimer&&window.clearTimeout(a.MessageDisplay.messageTimer);h=!0;f&&(-1!=Z.Utils.arrayIndexOf(a.messageDisplayList,b)?h=!1:a.messageDisplayList[a.messageDisplayList.length]=b);if(h&&(a.messages&&(a.messages.value=b),a.MessageDisplay.style.display="inline-block","undefined"!==typeof e&&null!==e&&(b=Z.Utils.getElementOfViewerById(g,"textBoxFor-messageBox"))&&(b.firstChild.style.textAlign=
e),e=Z.Utils.getElementOfViewerById(g,"buttonMessageOk"),b=parseInt(Z.Utils.getResource("z436"),10),"undefined"!==typeof c&&null!==c&&c?(e.style.display="inline-block",a.MessageDisplay.style.height=b+"px"):(e.style.display="none",a.MessageDisplay.style.height=b-22+"px"),"undefined"!==typeof d&&null!==d&&!isNaN(d))){"undefined"!==typeof a.MessageDisplay.messageTimer&&null!==a.MessageDisplay.messageTimer&&window.clearTimeout(a.MessageDisplay.messageTimer);if("undefined"===typeof d||null===d)d=3E3;a.MessageDisplay.messageTimer=
window.setTimeout($a,d)}}}function I(){var b="";a.messages&&Z.Utils.stringValidate(a.messages.value)&&(b=a.messages.value);return b}function ua(){a.MessageDisplay&&(a.MessageDisplay.style.display="none")}function $a(){a.MessageDisplay.messageTimer&&(window.clearTimeout(a.MessageDisplay.messageTimer),a.MessageDisplay.messageTimer=null);a.hideMessage()}function Za(b,c,d){c=c?"\n":"";d=d?"\n\n":"\n";a.TraceDisplay||configureTraceDisplay();a.traces&&(a.traces.value+=c+b+d,2==a.debug&&(a.traces.scrollTop=
a.traces.scrollHeight))}function H(){document.getElementsByTagName("body")?document.getElementsByTagName("body")[0].onorientationchange=nd:window.setTimeout(H,100)}function nd(b){a.interactive&&a.fullView&&(a.Toolbar&&(a.toolbarAutoShowHide&&a.Toolbar.show(!1),!a.annotations||2!=a.annotationPanelVisible&&3!=a.annotationPanelVisible||a.Toolbar.setVisibilityAnnotationPanel(!1),!a.tracking||2!=a.trackingPanelVisible&&3!=a.trackingPanelVisible||a.Toolbar.setVisibilityTrackingPanel(!1),2!=a.userPanelVisible&&
3!=a.trackingPanelVisible||a.Toolbar.setVisibilityUserPanel(!1)),a.Navigator&&1<a.navigatorVisible&&(a.Navigator.setVisibility(!1),a.comparison&&a.Navigator2&&a.Navigator2.setVisibility(!1)),a.Gallery&&a.galleryAutoShowHide&&a.Gallery.setVisibility(!1),a.Viewport&&(a.Viewport.toggleFullViewMode(!1),a.Viewport.toggleFullViewMode(!0)),a.Gallery&&a.galleryAutoShowHide&&a.Gallery.setVisibility(!0),a.Navigator&&1<a.navigatorVisible&&(a.Navigator.setVisibility(!0),a.comparison&&a.Navigator2&&a.Navigator2.setVisibility(!0)),
a.Toolbar&&(!a.annotations||2!=a.annotationPanelVisible&&3!=a.annotationPanelVisible||a.Toolbar.setVisibilityAnnotationPanel(!0),!a.tracking||2!=a.trackingPanelVisible&&3!=a.trackingPanelVisible||a.Toolbar.setVisibilityTrackingPanel(!0),2!=a.userPanelVisible&&3!=a.trackingPanelVisible||a.Toolbar.setVisibilityUserPanel(!0),a.toolbarAutoShowHide&&a.Toolbar.show(!0)))}function Tc(a){a?(Z.Utils.addEventListener(document,"keydown",bc),Z.Utils.addEventListener(document,"keyup",bc)):(Z.Utils.removeEventListener(document,
"keydown",bc),Z.Utils.removeEventListener(document,"keyup",bc))}function bc(b){if(a.interactive&&a.keys&&"INPUT"!=document.activeElement.tagName&&"TEXTAREA"!=document.activeElement.tagName){b=Z.Utils.event(b);var c=b.altKey;18==b.keyCode||b.altKey||(a.viewportCurrent.zoomAndPanAllStop(!0,!0),a.maskingSelection&&a.viewportCurrent.clearLabelMask());if(b){var d=b.type,e=b.keyCode;if("keydown"==d){a.keyIsDown=!0;switch(e){case 90:a.viewportCurrent.zoom("out");break;case 17:a.viewportCurrent.zoom("out");
break;case 65:a.viewportCurrent.zoom("in");break;case 16:a.viewportCurrent.zoom("in");break;case 37:!a.tracking&&!a.animation||a.viewportCurrent.getZoom()!=a.minZ?a.viewportCurrent.pan("left"):a.imageSet&&a.viewportPrior();break;case 38:!a.tracking&&!a.animation||a.viewportCurrent.getZoom()!=a.minZ?a.viewportCurrent.pan("up"):a.imageSet&&a.viewportNext();break;case 40:!a.tracking&&!a.animation||a.viewportCurrent.getZoom()!=a.minZ?a.viewportCurrent.pan("down"):a.imageSet&&a.viewportPrior();break;case 39:!a.tracking&&
!a.animation||a.viewportCurrent.getZoom()!=a.minZ?a.viewportCurrent.pan("right"):a.imageSet&&a.viewportNext();break;case 27:a.fullView?a.viewportCurrent.toggleFullViewMode(!1):a.viewportCurrent.reset();break;case 190:a.rotationVisible&&a.viewportCurrent.rotate("clockwise",c);break;case 188:a.rotationVisible&&a.viewportCurrent.rotate("counterwise",c);break;case 33:a.imageSet&&!a.overlays&&a.viewportNext();break;case 34:a.imageSet&&!a.overlays&&a.viewportPrior()}!a.imageSet||33!=e&&34!=e||(b.preventDefault?
b.preventDefault():b.returnValue=!1)}else"keyup"==d&&(a.keyIsDown=!1,90==e||17==e||65==e||16==e?a.viewportCurrent.zoom("stop"):37==e||39==e||38==e||40==e?a.tracking?37==e?a.viewportCurrent.goToNextCell("left"):39==e?a.viewportCurrent.goToNextCell("right"):38==e?a.viewportCurrent.goToNextCell("up"):40==e&&a.viewportCurrent.goToNextCell("down"):37==e||39==e?a.viewportCurrent.pan("horizontalStop"):38!=e&&40!=e||a.viewportCurrent.pan("verticalStop"):!a.rotationVisible||190!=e&&188!=e?!a.imageSet||33!=
e&&34!=e?32==e&&(a.fullViewVisible||a.fullScreenVisible||a.fullPageVisible)&&a.viewportCurrent.toggleFullViewMode():(a.imageSet&&a.viewportCurrent.updateView(!0),b.preventDefault?b.preventDefault():b.returnValue=!1):a.viewportCurrent.rotate("stop"))}}}function Xb(a){a?(Z.Utils.addEventListener(document,"keydown",Z.Utils.preventDefault),Z.Utils.addEventListener(document,"keyup",Z.Utils.preventDefault)):(Z.Utils.removeEventListener(document,"keydown",Z.Utils.preventDefault),Z.Utils.removeEventListener(document,
"keyup",Z.Utils.preventDefault))}function kb(b){b=Z.Utils.event(b);var c=b.type;if(b&&c){var d=Z.Utils.isRightMouseButton(b),e=b.altKey;if(!("mouseover"!=c&&"mouseout"!=c&&!a.interactive||"mousedown"==c&&(!a.interactive||a.coordinatesVisible&&e)||d)){Z.touchSupport&&!a.clickZoomAndPanBlock&&"touchmove"!=c&&"gesturechange"!=c&&b.preventDefault();switch(c){case "mouseover":a.fullView||"TEXTAREA"==document.activeElement.tagName||Xb(!0);1<Z.viewerCounter&&Tc(!0);break;case "mouseout":a.tracking||Xb(!1),
1<Z.viewerCounter&&Tc(!1)}var g;g=Z.Utils.event(b);var f=g.type;if(g&&f){var h;b=Z.Utils.target(g);d=Z.Utils.relatedTarget(g);"resize"!=f&&(h=Z.Utils.getMousePosition(g));e=g.altKey;"DOMMouseScroll"==f&&(f="mousewheel");switch(f){case "mouseover":e=Z.Utils.nodeIsInViewer(a.viewerInternalID,b);g=Z.Utils.nodeIsInViewer(a.viewerInternalID,d);e&&g||(a.viewportCurrent&&a.viewportCurrent.showLists(!0),a.ToolbarDisplay&&a.Toolbar&&a.toolbarAutoShowHide&&a.Toolbar.show(!0),a.Navigator&&1<a.navigatorVisible&&
(a.Navigator.setVisibility(!0),a.comparison&&a.Navigator2&&a.Navigator2.setVisibility(!0)),a.Gallery&&a.galleryAutoShowHide&&a.Gallery.setVisibility(!0),a.Ruler&&1<a.rulerVisible&&a.Ruler.setVisibility(!0),a.Toolbar&&(!a.annotations||2!=a.annotationPanelVisible&&3!=a.annotationPanelVisible||a.Toolbar.setVisibilityAnnotationPanel(!0),!a.tracking||2!=a.trackingPanelVisible&&3!=a.trackingPanelVisible||a.Toolbar.setVisibilityTrackingPanel(!0),2!=a.userPanelVisible&&3!=a.trackingPanelVisible||a.Toolbar.setVisibilityUserPanel(!0)),
a.mouseOutDownPoint=null);break;case "mouseout":e=Z.Utils.nodeIsInViewer(a.viewerInternalID,b);g=Z.Utils.nodeIsInViewer(a.viewerInternalID,d);e&&g||"[object HTMLSelectElement]"==b||"[object HTMLOptionElement]"==b||"[object HTMLSelectElement]"==d||"[object HTMLOptionElement]"==d||(a.mouseIsDown?a.mouseOutDownPoint=new Z.Utils.Point(h.x,h.y):(a.viewportCurrent&&a.viewportCurrent.showLists(!1),a.ToolbarDisplay&&a.Toolbar&&a.toolbarAutoShowHide&&a.Toolbar.show(!1),a.Navigator&&1<a.navigatorVisible&&(a.Navigator.setVisibility(!1),
a.comparison&&a.Navigator2&&a.Navigator2.setVisibility(!1)),a.Gallery&&a.galleryAutoShowHide&&a.Gallery.setVisibility(!1),a.Ruler&&1<a.rulerVisible&&a.Ruler.setVisibility(!1),a.Toolbar&&(!a.annotations||2!=a.annotationPanelVisible&&3!=a.annotationPanelVisible||a.Toolbar.setVisibilityAnnotationPanel(!1),!a.tracking||2!=a.trackingPanelVisible&&3!=a.trackingPanelVisible||a.Toolbar.setVisibilityTrackingPanel(!1),2!=a.userPanelVisible&&3!=a.userPanelVisible||a.Toolbar.setVisibilityUserPanel(!1))));break;
case "resize":lc||(lc=window.setTimeout(Sb,qh));break;case "mousewheel":0<a.mouseWheel&&(h=Math.max(-1,Math.min(1,g.wheelDelta||-g.detail)),a.viewportCurrent.mouseWheelHandler(h,e))}}if("mousedown"==c||"mousemove"==c)return!1}}}function Sb(){lc&&(window.clearTimeout(lc),lc=null,eb())}function eb(){if(!a.fullScreenEntering){var b=document.getElementById(a.pageContainerID);a.viewerW=b.offsetWidth;a.viewerH=b.offsetHeight;var b=Z.Utils.getContainerSize(a.pageContainer,a.ViewerDisplay),c=a.viewportCurrent.calculateZoomForResize(a.viewportCurrent.getZoom(),
a.viewerW,a.viewerH,b.x,b.y);a.resizeViewer(b.x,b.y,c);if(a.comparison)(b=0==a.viewportCurrent.getViewportID()?a.Viewport1:a.Viewport0)&&b.syncViewportResize(a.imageX,a.imageY,a.imageZ,a.imageR);else if(a.overlays)for(b=0,c=a.imageSetLength-1;b<c;b++)a["Viewport"+b.toString()].syncViewportResize(a.imageX,a.imageY,a.imageZ,a.imageR)}}function ac(b,c,d,e,f,h){function E(b,c,B,d,e,jf,g,f,l,m,t){u();"ZoomifyPFFFile"==a.tileSource&&a.pffJPEGHeadersSeparate||(a.imageW=b,a.imageH=c,a.imageCtrX=a.imageW/
2,a.imageCtrY=a.imageH/2,a.imageD=Math.round(Math.sqrt(b*b+c*c)),Jc=jf,od=g,cc=f,sc=e,ab=B,Ja=d);null!==l&&null!==m&&null!==t&&(a.sourceMagnification=l,a.focal=m,a.quality=t);D();q(X,ca,de,Id);H();Qa>ee?(fb=U(tc,a.initialZ),ga&&Ea.scale(fb,fb)):Ea=Db=ga=null;Kc=U(Ha,a.initialZ);Uc=ma=U(ha,a.initialZ);if(a.useCanvas)try{Ka.scale(ma,ma)}catch(h){a.showMessage(Z.Utils.getResource("ERROR_SCALINGCANVASFORUNCONVERTEDIMAGE"),!1,a.messageDurationStandard,"center"),console.log("In function initializeViewportContinue scaling canvas:  "+
h)}"unconverted"!=a.tileSource&&r.z619();If(a.initialX,a.initialY,a.initialZ,a.initialR,null,!0);a.initialFullPage&&r.toggleFullViewMode(!0);Z.Utils.addEventListener(nb,"mousedown",Mb);Z.Utils.addEventListener(nb,"mousemove",Z.Utils.preventDefault);Z.Utils.addEventListener(nb,"touchstart",Mb);Z.Utils.addEventListener(nb,"touchmove",Mb);Z.Utils.addEventListener(nb,"touchend",Mb);Z.Utils.addEventListener(nb,"touchcancel",Mb);Z.Utils.addEventListener(nb,"gesturestart",Mb);Z.Utils.addEventListener(nb,
"gesturechange",Mb);Z.Utils.addEventListener(nb,"gestureend",Mb);Z.Utils.addEventListener(ra,"contextmenu",Z.Utils.preventDefault);Z.Utils.addEventListener(sa,"contextmenu",Z.Utils.preventDefault);mb&&Z.Utils.addEventListener(mb,"contextmenu",Z.Utils.preventDefault);gb&&Z.Utils.addEventListener(gb,"contextmenu",Z.Utils.preventDefault);ob("initializedViewport",!0);Yb()}function n(Ga,c,B,d,e,g,f,m,t,h,F){ob("initializedViewport",!1);r.clearAll(!0,!1,!0,!0);"ZoomifyPFFFile"==a.tileSource&&a.pffJPEGHeadersSeparate||
(a.imageW=Ga,a.imageH=c,a.imageCtrX=a.imageW/2,a.imageCtrY=a.imageH/2,a.imageD=Math.round(Math.sqrt(Ga*Ga+c*c)),Jc=g,od=f,cc=m,sc=e,ab=B,Ja=d);a.slideshow||a.validateComponents(v);y(a.parameters);a.imageList&&(a.tileW!=B&&(ab=a.tileW),a.tileH!=d&&(Ja=a.tileH));D();null!==a.hotspotPath&&(Lc=a.hotspotPath,dc=a.hotspotFolder);null!==a.annotationPath&&(uc=a.annotationPath,ec=a.annotationFolder);C();u();r.validateXYZDefaults();Qa>ee?(fb=U(tc,a.initialZ),Ea.restore(),Ea.scale(fb,fb)):ga=Db=Ea=null;Kc=U(Ha,
a.initialZ);Uc=ma=U(ha,a.initialZ);a.useCanvas&&(Ka.restore(),Ka.scale(ma,ma));mb&&z582();gb&&(setDrawingColor("buttonColor0"+La,!0),(a.tour||a.hotspots||a.annotations)&&z572(La));a.virtualPointerVisible&&a.createVirtualPointer();"unconverted"!=a.tileSource&&r.z619();a.comparison&&(X*=2);r.setSizeAndPosition(X,ca,de,Id);Ga="undefined"!==typeof a.parameters&&null!==a.parameters&&("undefined"!==typeof a.parameters.zInitialX||"undefined"!==typeof a.parameters.zInitialY||"undefined"!==typeof a.parameters.zInitialZoom);
!a.comparison&&!a.overlays||Ga?If(a.initialX,a.initialY,a.initialZ,a.initialR,null,!0):If(a.priorX,a.priorY,a.priorZ,a.priorR,null,!0);ob("initializedViewport",!0);(Ga=0==b?a.Navigator:a.Navigator2)&&Ga.setImage(r.getImagePath());a.tracking&&loadTrackingXML(La);a.comparison&&(Ga=(0==r.getViewportID()?a.Viewport1:a.Viewport0).getCoordinatesFull(!0),r.setView(Ga.x,Ga.y,Ga.z,Ga.r,null,null));Ga=a["Viewport"+(a.imageSetLength-1).toString()];var v=a.overlays?Ga:a.viewportCurrent;k(v);Yb();Q("reinitializedViewport");
a.slideshowPlaying&&r.nextSlide()}function I(){Qa=1;Ha=ha=0;fe=ge=he=Ia=!1;"undefined"!==typeof pb&&Z.Utils.arrayClear(pb);"undefined"!==typeof Ra&&Z.Utils.arrayClear(Ra);"undefined"!==typeof Sa&&Z.Utils.arrayClear(Sa);"undefined"!==typeof Eb&&Z.Utils.arrayClear(Eb);"undefined"!==typeof Bb&&Z.Utils.arrayClear(Bb);"undefined"!==typeof ie&&Z.Utils.arrayClear(ie);"undefined"!==typeof ta&&Z.Utils.arrayClear(ta);"undefined"!==typeof Vc&&Z.Utils.arrayClear(Vc);"undefined"!==typeof Rg&&Z.Utils.arrayClear(Rg);
"undefined"!==typeof Jd&&Z.Utils.arrayClear(Jd);"undefined"!==typeof De&&Z.Utils.arrayClear(De);"undefined"!==typeof Ta&&Z.Utils.arrayClear(Ta);"undefined"!==typeof Sg&&Z.Utils.arrayClear(Sg);"undefined"!==typeof Jf&&Z.Utils.arrayClear(Jf);"undefined"!==typeof Ua&&Z.Utils.arrayClear(Ua);"undefined"!==typeof Kf&&Z.Utils.arrayClear(Kf)}function C(b){if("undefined"===typeof b||null===b)b=0;b=b.toString();a.useCanvas&&!ga&&(Wc=Z.Utils.createContainerElement(g,"canvas","oversizeDisplay"+b,"inline-block",
"absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),a.ViewerDisplay.appendChild(Wc),ga=Wc,Db=ga.style);a.comparison&&!vc&&(pd=Z.Utils.createContainerElement(g,"div","comparisonMaskContainer"+b,"inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),a.ViewerDisplay.appendChild(pd),vc=pd,Xc=vc.style);nb||(hb=Z.Utils.createContainerElement(g,"div","viewportContainer"+b,"inline-block","absolute","visible",
"1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),a.comparison?pd.appendChild(hb):a.ViewerDisplay.appendChild(hb),nb=hb,J=nb.style);ra||(Kd=Z.Utils.createContainerElement(g,a.useCanvas?"canvas":"div","viewportBackfillDisplay"+b,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),hb.appendChild(Kd),ra=Kd,W=ra.style);sa||(Yc=Z.Utils.createContainerElement(g,a.useCanvas?"canvas":"div","viewportDisplay"+b,"inline-block",
"absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),hb.appendChild(Yc),sa=Yc,oa=sa.style);a.useCanvas&&(ub||(Ld=Z.Utils.createContainerElement(g,"canvas","transitionCanvas","none","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),hb.appendChild(Ld),ub=Ld,mc=ub.style),a.imageFilters&&(Ee||(bg=Z.Utils.createContainerElement(g,"canvas","imageFilterBackfillCanvas","none","absolute","visible","1px","1px","0px",
"0px","none","0px","transparent none","0px","0px","normal"),hb.appendChild(bg),Ee=bg,cg=Ee.style),lf||(dg=Z.Utils.createContainerElement(g,"canvas","imageFilterCanvas","none","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),hb.appendChild(dg),lf=dg)));a.watermarks&&!mb&&(Md=Z.Utils.createContainerElement(g,"div","watermarkDisplay","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),hb.appendChild(Md),
mb=Md,Fb=mb.style);a.maskVisible&&!fc&&(w=Z.Utils.createContainerElement(g,"canvas","maskCanvas","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),hb.appendChild(w),fc=w,wc=fc.style,wc.display="none");b=a.zoomRectangle||a.measureVisible||a.tour&&!a.screensaver||a.hotspots||a.annotations;var c=a.useCanvas&&(b||a.hotspots&&Z.labelIconsInternal),B=a.useCanvas&&(a.zoomRectangle||a.measureVisible||null!==a.editMode),d=c&&a.saveImageHandlerProvided;
c&&!qb&&(F=Z.Utils.createContainerElement(g,"canvas","drawingDisplay","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),hb.appendChild(F),qb=F,Va=qb.style);B&&!Zb&&(eg=Z.Utils.createContainerElement(g,"canvas","editingDisplay","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),hb.appendChild(eg),Zb=eg,gc=Zb.style);b&&!gb&&(Gb=Z.Utils.createContainerElement(g,"div","hotspotDisplay",
"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),hb.appendChild(Gb),gb=Gb,Nb=gb.style,Z.Utils.addEventListener(Gb,"mousedown",Z.Utils.preventDefault));d&&!mf&&(fg=Z.Utils.createContainerElement(g,"canvas","savingDisplay","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),hb.appendChild(fg),mf=fg,Lf=mf.style,Lf.display="none");a.useCanvas||(ra.innerHTML="",sa.innerHTML="");
mb&&(mb.innerHTML="");gb&&(gb.innerHTML="")}function u(){a.useCanvas&&(ga&&(Ea=ga.getContext("2d")),$b=ra.getContext("2d"),Ka=sa.getContext("2d"),hc=ub.getContext("2d"),qb&&(gg=qb.getContext("2d")),Zb&&(hg=Zb.getContext("2d")),fc&&(ig=fc.getContext("2d")),mf&&(ac=mf.getContext("2d")),a.imageFilters&&(eb=lf.getContext("2d"),Tg=Ee.getContext("2d")))}function q(Ga,c,B,d){if("undefined"===typeof B||null===B)B=0;if("undefined"===typeof d||null===d)d=0;a.viewerW=X=Ga;a.viewerH=ca=c;a.comparison&&(X=Ga/
2);ia=X*Fe;la=ca*Fe;Ga=a.imageSet?nf:"unconverted"==a.tileSource&&Z.mobileDevice?of:"unconverted"==a.tileSource&&Z.browser==Z.browsers.FIREFOX?Mf:pf;c=a.constrainPanStrict?a.imageW:2*a.imageW;var e=a.constrainPanStrict?a.imageH:2*a.imageH;ia>Ga&&(ia=Ga);la>Ga&&(la=Ga);ia>c&&(ia=c);la>e&&(la=e);ia<X&&(ia=X);la<ca&&(la=ca);Hb=Z.Utils.roundToFixed(ia/2,4);Ib=Z.Utils.roundToFixed(la/2,4);Y=Z.Utils.roundToFixed(-((ia-X)/2)+B,4);Z.Utils.roundToFixed((ia-X)/2+B,4);ea=Z.Utils.roundToFixed(-((la-ca)/2)+d,
4);Z.Utils.roundToFixed((la-ca)/2+d,4);ga&&(ga.width=X,ga.height=ca,Db.width=X+"px",Db.height=ca+"px",Db.left="0px",Db.top="0px");a.comparison&&(vc.width=X,vc.height=ca,Xc.width=X+"px",Xc.height=ca+"px",Xc.left=0==b?"0px":X+"px",Xc.top="0px");nb.width=ia;nb.height=la;J.width=ia+"px";J.height=la+"px";J.left=Y+"px";J.top=ea+"px";sa.width=ia;sa.height=la;oa.width=ia+"px";oa.height=la+"px";mb&&(mb.width=ia,mb.height=la,Fb.width=ia+"px",Fb.height=la+"px",Fb.zIndex=(Z.baseZIndex+1).toString());fc&&(fc.width=
ia,fc.height=la,wc.width=ia+"px",wc.height=la+"px");gb&&(gb.width=ia,gb.height=la,Nb.width=ia+"px",Nb.height=la+"px",m&&(B=parseInt(Z.Utils.getResource("z133"),10),calculateHotspotListCoords(hotspotListPosition,B,X,ca)));qb&&(qb.width=ia,qb.height=la,Va.width=ia+"px",Va.height=la+"px");Zb&&(Zb.width=ia,Zb.height=la,gc.width=ia+"px",gc.height=la+"px");t&&(B=new r.calculateAnnotationPanelDimensions(poiVisibility,labelVisibility,noteVisibility,commentVisibility),d=r.calculateAnnotationPanelCoords(annotationPanelPosition,
B.w,B.h,X,ca),r.sizeAndPositionAnnotationPanel(bb,B.w,B.h,d.x,d.y));a.imageSet&&a.sizeAndPositionImageSetList();if(a.useCanvas){ga&&(Ea.translate(X/2,ca/2),Ea.save());try{Ka.translate(Hb,Ib)}catch(g){a.showMessage(Z.Utils.getResource("ERROR_TRANSLATINGCANVASFORUNCONVERTEDIMAGE"),!1,a.messageDurationStandard,"center")}Ka.save();fc&&(ig.translate(Hb,Ib),ig.save());qb&&(gg.translate(Hb,Ib),gg.save());Zb&&(hg.translate(Hb,Ib),hg.save())}}function $a(b,c,B){if("ZoomifyZIFFile"==a.tileSource){var d=parseFloat(Z.Utils.getResource("z125")),
e=parseFloat(Z.Utils.getResource("z124"));c.loadByteRange(b,d,e,"header",null,null,B)}else"ZoomifyImageFolder"==a.tileSource?(b=Z.Utils.cacheProofPath(b+"/ImageProperties.xml"),c.loadXML(b,B)):"ZoomifyPFFFile"==a.tileSource?null===a.tileHandlerPathFull?(d=parseFloat(Z.Utils.getResource("z125")),e=parseFloat(Z.Utils.getResource("z123")),c.loadByteRange(b,d,e,"header",null,null,B)):(d=Z.Utils.getResource("z125"),e=Z.Utils.getResource("z123"),b=b.replace(".","%2E"),c.loadXML(a.tileHandlerPathFull+"?file="+
b+"&requestType=1&begin="+d+"&end="+e,B)):"DZIFolder"==a.tileSource?(b=je(b,"properties"),c.loadXML(b,B)):"IIIFImageServer"==a.tileSource&&c.loadJSON(b+"/info.json",B)}function ua(b,c,B,d,e,g,f,l,m,t,h){"ZoomifyPFFFile"==a.tileSource&&a.pffJPEGHeadersSeparate||!isNaN(b)&&0<b&&!isNaN(c)&&0<c&&!isNaN(B)&&0<B&&!isNaN(d)&&0<d&&0<e?Jb("initializedViewport")?n(b,c,B,d,e,g,f,l,m,t,h):E(b,c,B,d,e,g,f,l,m,t,h):a.showMessage(Z.Utils.getResource("z250"),!1,a.messageDurationStandard,"center")}function K(b,c){I();
if("undefined"===typeof r.getStatus)window.setTimeout(function(){K(b,c)},100);else{var B=null,d=null,e=null,g=null,f=null,l=null,m=null,t=null,h=null,F=null,v=null;"ZoomifyImageFolder"==a.tileSource?(B=parseInt(b.documentElement.getAttribute("WIDTH"),10),d=parseInt(b.documentElement.getAttribute("HEIGHT"),10),f=parseInt(b.documentElement.getAttribute("NUMTILES"),10),parseInt(b.documentElement.getAttribute("NUMIMAGES"),10),l=parseInt(b.documentElement.getAttribute("VERSION"),10),e=g=parseInt(b.documentElement.getAttribute("TILESIZE"),
10)):"DZIFolder"==a.tileSource?(l=f=1,B=b.getElementsByTagName("Image")[0],e=g=parseInt(B.getAttribute("TileSize"),10),parseInt(B.getAttribute("Overlap"),10),a.tileType=B.getAttribute("Format"),d=B.getElementsByTagName("Size")[0],B=parseInt(d.getAttribute("Width"),10),d=parseInt(d.getAttribute("Height"),10)):"ZoomifyPFFFile"==a.tileSource?(B=parseInt(b.documentElement.getAttribute("WIDTH"),10),d=parseInt(b.documentElement.getAttribute("HEIGHT"),10),e=g=parseInt(b.documentElement.getAttribute("TILESIZE"),
10),f=parseInt(b.documentElement.getAttribute("NUMTILES"),10),parseInt(b.documentElement.getAttribute("NUMIMAGES"),10),l=parseInt(b.documentElement.getAttribute("VERSION"),10),m=parseInt(b.documentElement.getAttribute("HEADERSIZE"),10),t=1060+m):"IIIFImageServer"==a.tileSource?(B=parseInt(b.documentElement.getAttribute("WIDTH"),10),d=parseInt(b.documentElement.getAttribute("HEIGHT"),10),f=l=e=g=null):"ImageServer"==a.tileSource&&(B=parseInt(b.documentElement.getAttribute("WIDTH"),10),d=parseInt(b.documentElement.getAttribute("HEIGHT"),
10),g=b.documentElement.getAttribute("TILESIZE"),e=Z.Utils.stringValidate(g)?parseInt(g,10):ab,g=Z.Utils.stringValidate(g)?parseInt(g,10):Ja,h=b.documentElement.getAttribute("MAGNIFICATION"),h=Z.Utils.stringValidate(h)?parseInt(h,10):a.sourceMagnification,F=b.documentElement.getAttribute("FOCAL"),F=Z.Utils.stringValidate(F)?parseInt(F,10):a.focal,v=b.documentElement.getAttribute("QUALITY"),v=Z.Utils.stringValidate(v)?parseInt(v,10):a.quality);null!==a.tileW&&(e=a.tileW);null!==a.tileH&&(g=a.tileH);
if("ZoomifyImageFolder"==a.tileSource||"IIIFImageServer"==a.tileSource||"ImageServer"==a.tileSource){if(null===e||isNaN(e))e=ab;if(null===g||isNaN(g))g=Ja;if(null===f||isNaN(f))f=1}!isNaN(B)&&0<B&&!isNaN(d)&&0<d&&!isNaN(e)&&0<e&&!isNaN(g)&&0<g&&0<f?Jb("initializedViewport")?n(B,d,e,g,f,l,m,t,h,F,v,c):E(B,d,e,g,f,l,m,t,h,F,v,c):"ZoomifyImageFolder"==a.tileSource?a.showMessage(Z.Utils.getResource("z252"),!1,a.messageDurationStandard,"center"):a.showMessage(Z.Utils.getResource("z250"),!1,a.messageDurationStandard,
"center")}}function D(){if("unconverted"==a.tileSource)pb[0]=a.imageW,Ra[0]=a.imageH,Sa[0]=1,Eb[0]=1,Qa=Bb[0]=1;else if("ZoomifyZIFFile"==a.tileSource)for(var b=Qa-1;0<=b;b--)Sa[b]=Math.ceil(pb[b]/ab),Eb[b]=Math.ceil(Ra[b]/Ja),Bb[b]=Sa[b]*Eb[b];else{for(var c=a.imageW,B=a.imageH;c>ab||B>Ja;)c/=2,B/=2,Qa++;for(var c=a.imageW,B=a.imageH,b=0,d=Qa-1;0<=d;d--)pb[d]=c,Ra[d]=B,Sa[d]=Math.ceil(pb[d]/ab),Eb[d]=Math.ceil(Ra[d]/Ja),Bb[d]=Sa[d]*Eb[d],c/=2,B/=2,b+=Bb[d];if("DZIFolder"==a.tileSource){c=pb[0];B=
Ra[0];for(d=0;1<c||1<B;)c/=2,B/=2,d++;a.dziSubfoldersToSkip=d-1}if(b!=sc&&("ZoomifyImageFolder"==a.tileSource||"ZoomifyZIFFile"==a.tileSource||"ZoomifyPFFFile"==a.tileSource)){pb=[];Ra=[];Sa=[];Eb=[];Qa=1;b=a.imageW;c=a.imageH;for(B=2;b>ab||c>Ja;)b=Math.floor(a.imageW/B),c=Math.floor(a.imageH/B),B*=2,b%2&&b++,c%2&&c++,Qa++;b=a.imageW;c=a.imageH;B=2;tileCounter=0;for(d=Qa-1;0<=d;d--)Sa[d]=Math.floor(b/ab),b%ab&&Sa[d]++,Eb[d]=Math.floor(c/Ja),c%Ja&&Eb[d]++,Bb[d]=Sa[d]*Eb[d],tileCounter+=Bb[d],pb[d]=
b,Ra[d]=c,b=Math.floor(a.imageW/B),c=Math.floor(a.imageH/B),B*=2,b%2&&b++,c%2&&c++;b=tileCounter;b!=sc&&a.showMessage(Z.Utils.getResource("z254"),!1,a.messageDurationStandard,"center")}}}function H(b){if(b&&(b=a.parameters,isNaN(parseFloat(Z.Utils.getResource("z143")))||(a.initialX=parseFloat(Z.Utils.getResource("z143"))),isNaN(parseFloat(Z.Utils.getResource("z144")))||(a.initialY=parseFloat(Z.Utils.getResource("z144"))),isNaN(parseFloat(Z.Utils.getResource("z145")))||(a.initialZ=parseFloat(Z.Utils.getResource("z145"))),
isNaN(parseFloat(Z.Utils.getResource("z163")))||(a.minZ=parseFloat(Z.Utils.getResource("z163"))),isNaN(parseFloat(Z.Utils.getResource("z153")))||(a.maxZ=parseFloat(Z.Utils.getResource("z153"))),Z.Utils.stringValidate(b)))for(var c=0,B=b.length;c<B;c++){var d=b[c],e=d.indexOf("=");if(0<e){var g=d.substring(0,e),d=d.substring(e+1);if(Z.Utils.stringValidate(d))switch(g){case "zInitialX":isNaN(parseFloat(d))||(a.initialX=parseFloat(d));break;case "zInitialY":isNaN(parseFloat(d))||(a.initialY=parseFloat(d));
break;case "zInitialZoom":"fit"==d&&(d="-1");"fill"==d&&(d="0");isNaN(parseFloat(d))||(a.initialZ=parseFloat(d),a.initialZ&&1<a.initialZ&&(a.initialZ/=100));break;case "zMinZoom":"fit"==d&&(d="-1");"fill"==d&&(d="0");isNaN(parseFloat(d))||(a.minZ=parseFloat(d),a.minZ&&1<a.minZ&&(a.minZ/=100));break;case "zMaxZoom":isNaN(parseFloat(d))||(a.maxZ=parseFloat(d),a.maxZ&&1<a.maxZ&&(a.maxZ/=100))}}}c=parseFloat(Z.Utils.getResource("z143"));g=parseFloat(Z.Utils.getResource("z144"));e=parseFloat(Z.Utils.getResource("z145"));
d=parseFloat(Z.Utils.getResource("DEFAULT_INITIALR"));B=parseFloat(Z.Utils.getResource("z163"));b=parseFloat(Z.Utils.getResource("z153"));c=isNaN(c)?null:c;g=isNaN(g)?null:g;e=isNaN(e)?null:e;d=isNaN(d)?null:d;B=isNaN(B)?null:B;b=isNaN(b)?null:b;a.bookmarksGet?(a.initialX||(a.initialX=c),a.initialY||(a.initialY=g),a.initialZ||(a.initialZ=e),a.initialR||(a.initialR=d),a.minZ||(a.minZ=B),a.maxZ||(a.maxZ=b)):"IIIFImageServer"==a.tileSource?a.iiifRegion&&(b=a.iiifRegion.split(","),c=a.iiifSize.split(","),
a.initialX=Math.round(parseFloat(b[0])+parseFloat(b[2])/2),a.initialY=Math.round(parseFloat(b[1])+parseFloat(b[3])/2),a.initialZ=Math.round(parseFloat(c[0])/parseFloat(b[2])*100)/100,a.initialR=parseInt(a.iiifRotation,10)):a.parameters?(a.parameters.zInitialX||(a.initialX=c),a.parameters.zInitialY||(a.initialY=g),a.parameters.zInitialZoom||(a.initialZ=e),a.parameters.zInitialRotation||(a.initialR=d),a.parameters.zMinZoom||(a.minZ=B),a.parameters.zMaxZoom||(a.maxZ=b)):(a.initialX=c,a.initialY=g,a.initialZ=
e,a.initialR=d,a.minZ=B,a.maxZ=b);null===a.initialX&&(a.initialX=a.imageW/2);null===a.initialY&&(a.initialY=a.imageH/2);a.fitZ=vb(null,null,0);a.fillZ=v(null,null,0);c=Jb("initializedViewport")?r.getRotation():a.initialR;b=vb(null,null,c);c=v(null,null,c);1<a.fitZ&&(null!==a.maxZ?a.fitZ>a.maxZ&&(a.fitZ=a.maxZ):"unconverted"==a.tileSource&&(a.fitZ=1));1<a.fillZ&&(null!==a.maxZ?a.fillZ>a.maxZ&&(a.fillZ=a.maxZ):"unconverted"==a.tileSource&&(a.fillZ=1));null===a.minZ||-1==a.minZ?a.minZ=a.fitZ:0==a.minZ&&
(a.minZ=a.fillZ);if(null===a.maxZ||-1==a.maxZ)a.maxZ=1;null===a.initialZ||-1==a.initialZ?a.initialZ=b:0==a.initialZ&&(a.initialZ=c);a.initialZ<a.minZ&&(a.initialZ=a.minZ);a.initialZ>a.maxZ&&(a.initialZ=a.maxZ)}function M(a){var b=parseFloat(J.left)-Y;a=rb(a);return qd-b/a}function O(a){var b=parseFloat(J.top)-ea;a=rb(a);return Nd-b/a}function rb(a){var b=ma;a&&(b=ma*parseFloat(oa.width)/ia);return va(ha,b)}function P(a,b){for(var c=Sa[a]-1,d=Eb[a]-1,e=0;e<=c;e++)for(var g=0;g<=d;g++)b[b.length]=a+
"-"+e+"-"+g}function da(c,d){if("undefined"===typeof b||null===b)b=0;if(b!=a.viewportCurrentID&&!c){var B=a["Viewport"+b.toString()];a.imageX=B.getX(!0);a.imageY=B.getY(!0);a.imageZ=B.getZoom(!0);a.imageR=B.getRotation(!0)}var e=a.mouseIsDown||a.buttonIsDown||a.keyIsDown||a.mouseWheelIsDown,B=ma!=Uc||rb()!=a.imageZ||a.imageZ!=a.priorZ,g=parseFloat(J.left)!=Y||parseFloat(J.top)!=ea||M()!=a.imageX||O()!=a.imageY,f=a.fullViewPrior;if(B||g||f||"undefined"!==typeof c&&c&&(!e||a.animation)||"undefined"!==
typeof d&&d||"external"==a.imageFilters){Mc();if(a.comparison||a.overlays||!a.imageSet||!a.getStatus("readyViewer")||b>a.viewportCurrentID-1&&b<a.viewportCurrentID+1||d){var m=!1;if(c||parseFloat(oa.width)!=sa.width){if(a.useCanvas){oa.width=sa.width+"px";oa.height=sa.height+"px";oa.left="0px";oa.top="0px";Ka.restore();Ka.save();try{Ka.scale(ma,ma)}catch(t){a.showMessage(Z.Utils.getResource("ERROR_SCALINGCANVASFORUNCONVERTEDIMAGE")),console.log("In function z630 scaling canvas:  "+t)}fc&&(wc.width=
sa.width+"px",wc.height=sa.height+"px",wc.left="0px",wc.top="0px");qb&&(Va.width=qb.width+"px",Va.height=qb.height+"px",Va.left="0px",Va.top="0px");Zb&&(gc.width=Zb.width+"px",gc.height=Zb.height+"px",gc.left="0px",gc.top="0px");ra&&(Ia?(W.width=ra.width+"px",W.height=ra.height+"px",W.left=wb+"px",W.top=Ob+"px",$b.restore(),$b.save(),$b.scale(Kc,Kc)):(W.width=pa+"px",W.height=nc+"px",W.left=wb+"px",W.top=Ob+"px"))}m=!0}if(c||parseFloat(J.left)!=Y||parseFloat(J.top)!=ea)m=parseFloat(J.left)-Y,e=parseFloat(J.top)-
ea,0!=a.imageR&&(e=Z.Utils.rotatePoint(m,e,a.imageR),m=e.x,e=e.y),J.left=Y+"px",J.top=ea+"px",Ia||(wb=parseFloat(W.left)+m,Ob=parseFloat(W.top)+e,W.left=wb+"px",W.top=Ob+"px"),f=rb(),a.imageX=qd=a.imageX-m/f,a.imageY=Nd=a.imageY-e/f,m=!0;m&&(Tb(sa,ha,yb,"centerOut",!1,"1a. Updating view: resetting display positions"),a.maskingSelection&&fc&&displayMask(),Ia&&Tb(ra,Ha,Kb,"simple",!1,"1b. Updating view: resetting backfill positions"));m=!1;if("undefined"!==typeof c&&c||ma!=Uc||rb()!=a.imageZ||!a.getStatus("initializedViewport")||
d){ma!=Uc&&(a.imageZ=rb());a.imageZ<a.minZ&&(a.imageZ=a.minZ);a.imageZ>a.maxZ&&(a.imageZ=a.maxZ);f=Od;for(e=Qa;0<e&&f/2>=a.imageZ;)e--,f/=2;e=0>e-1?0:e-1;f=U(e,a.imageZ);if(e!=ha||f!=ma)a.useCanvas&&(Ka.restore(),Ka.save(),Ka.scale(f,f)),ha!=e&&(kg=!0),ha=e,ma=f;Uc=ma;"unconverted"!=a.tileSource&&(xa(),Tb(ra,Ha,Kb,"simple",!1,"2. Updating view: changing tier - backfill"));!c&&0<oc&&(m=!0)}else Fa("updateView-noChange");"unconverted"!=a.tileSource&&Ia?qa(!0):ga&&Z.Utils.clearDisplay(ga,a)}b==a.viewportCurrentID||
a.comparison||a.overlays||!a.imageSet||d?("unconverted"!=a.tileSource?(qa(),Tb(sa,ha,null,"centerOut",m,"3. Updating view: prior to loading of any new tiles")):"undefined"!==typeof nd&&(m=-a.imageX,e=-a.imageY,Z.Utils.clearDisplay(sa,a),Ka.drawImage(nd,m,e),ob("displayLoadedViewport",!0),ob("displayDrawnViewport",!0),Q("viewUpdateComplete"),Q("viewUpdateCompleteGetLabelIDs")),a.maskingSelection&&updateMask(),0<ja.length&&lg(ja,V,"centerOut","image-display"),Yb(!0,!0,!0,!0,!0,!0,a.comparison&&b==a.viewportCurrentID,
a.overlays&&b==a.viewportCurrentID,a.bookmarksSet,a.tracking)):(ob("displayLoadedViewport",!0),ob("displayDrawnViewport",!0));d&&(m=null!==a.imageSetLength?a.imageSetLength.toString():"",m=(r.getViewportID()+1).toString()+" of "+m,e=a.animation?Z.Utils.getResource("ALERT_PRELOADINGIMAGESET-UPDATINGVIEWIMAGES"):Z.Utils.getResource("ALERT_PRELOADINGIMAGESET-UPDATINGVIEWSLIDES"),a.showMessage(e+"  "+m,!1,a.messageDurationLong,"center"));g&&Q("viewPanned");B&&Q("viewZoomed");(g||B)&&Q("viewChanged")}}
function xa(){Ia=!1;Ha=0;ha>ee?(Ha=ha-rh,Ia=!0):Ha=ha>Ge?Pd:ha>He?ke:Qd;tierBackfillScalePrior=Kc=U(Ha,a.imageZ);var b=pb[Ha],c=Ra[Ha],d=a.imageX*a.imageZ,e=a.imageY*a.imageZ;Ia?(b=qf,pa=ia*b,nc=la*b,wb=-(ia/b),Ob=-(la/b),Wa=Hb*b,Xa=Ib*b,ra.width=pa,ra.height=nc,W.width=ra.width+"px",W.height=ra.height+"px",W.left=wb+"px",W.top=Ob+"px",a.useCanvas&&(ga&&(fb=U(tc,a.imageZ),Ea.restore(),Ea.save(),Ea.scale(fb,fb),0!=a.imageR&&Ea.rotate(a.imageR*Math.PI/180)),$b.restore(),$b.translate(Wa,Xa),$b.save(),
$b.scale(Kc,Kc))):(pa=b*Kc,nc=c*Kc,wb=Hb-d,Ob=Ib-e,ra.width=b,ra.height=c,a.useCanvas&&(W.width=pa+"px",W.height=nc+"px"),W.left=wb+"px",W.top=Ob+"px")}function qa(a){if(a){a=Ie(Ha);Z.Utils.arrayClear(sb);Z.Utils.arrayClear(rd);b=a.l;for(c=a.r;b<=c;b++)for(d=a.t,e=a.b;d<=e;d++)g=Ha+"-"+b+"-"+d,rd[rd.length]=g,sb[sb.length]=g;lg(sb,L,"simple","image-backfill")}else{Z.Utils.arrayClear(xc);Z.Utils.arrayClear(yc);Z.Utils.arrayClear(ic);Z.Utils.arrayClear(ja);a=Ie();for(var b=a.l,c=a.r;b<=c;b++)for(var d=
a.t,e=a.b;d<=e;d++){var g=ha+"-"+b+"-"+d;xc[xc.length]=g;ja[ja.length]=g}if(Jb("initializedViewport")&&0<Kb.length&&(ha==Qd||ha==ke||ha==Pd))for(b=0,c=Kb.length;b<c;b++)(d=Kb[b])&&d.t==ha&&d.c>=a.l&&d.c<=a.r&&d.r>=a.t&&d.r<=a.b&&(ic[ic.length]=d.name,yc[yc.length]=d,e=Z.Utils.arrayIndexOf(ja,d.name),-1!=e&&(ja=Z.Utils.arraySplice(ja,e,1)));b=0;for(c=yb.length;b<c;b++)(d=yb[b])&&d.t==ha&&d.c>=a.l&&d.c<=a.r&&d.r>=a.t&&d.r<=a.b&&(e=Z.Utils.arrayIndexOf(ic,d.name),-1==e&&(ic[ic.length]=d.name,yc[yc.length]=
d),d=Z.Utils.arrayIndexOf(ja,d.name),-1!=d&&(ja=Z.Utils.arraySplice(ja,d,1)));if(0!=sd){b=0;for(c=Ub.length;b<c;b++)d=Ub[b],d.alpha=1;Z.Utils.arrayClear(Ub);Z.Utils.arrayClear(jc)}rf=ja.length;Fa("tilesToDisplay",null,xc.length,xc);Fa("tilesInCache",null,ic.length,ic);Fa("tilesToLoad",null,ja.length,ja)}}function Tb(b,c,d,e,g,f){g||Z.Utils.clearDisplay(b,a);if("canvasCopy"==e)Z.Utils.clearDisplay(sa,a),Ka.restore(),Ka.save(),Ka.scale(1,1),Ka.drawImage(ub,-Hb,-Ib),Ka.restore(),Ka.save(),Ka.scale(ma,
ma);else{g=Ie(c);f=[];if(null===d)for(var l=0,m=yc.length;l<m;l++)f[l]=yc[l];else if(0<d.length)for(l=0,m=d.length;l<m;l++){var t=d[l];t&&t.t==c&&(c==Ha&&!Ia||t.c>=g.l&&t.c<=g.r&&t.r>=g.t&&t.r<=g.b)&&(f[f.length]=d[l])}if(0<f.length)if(Fa("z622-"+b.id,null,null,f),"centerOut"==e)for(l=Math.floor(f.length/2),m=f.length;l<m;l++)ya(b,c,f[l]),f.length-l-1!=l&&ya(b,c,f[f.length-l-1]);else for(l=0,m=f.length;l<m;l++)ya(b,c,f[l]);else Fa("No cached tiles in view");Fa("blankLine")}}function fa(a,b){var c=
Ie();syncTransitionCanvas();for(var d=0,e=b.length;d<e;d++){var g=b[d];g&&g.t==a&&(a==Ha||g.c>=c.l&&g.c<=c.r&&g.r>=c.t&&g.r<=c.b)&&ya(ub,a,g)}}function lg(a,b,c,d){var e="undefined"!==typeof d&&null!==d?"-"+d:"";if(0<a.length){Fa("z577"+e,null,null,a);e=(new Date).getTime();if("centerOut"==c&&4<a.length){var g=[],f=0,l=0,m=0,t=0;for(c=0;c<a.length;c++){var h=a[c];h&&(h=new cb(h,d),g[g.length]=h,0==c?(f=l=h.c,m=t=h.r):(h.c<f?f=h.c:h.c>l&&(l=h.c),h.r<m?m=h.r:h.r>t&&(t=h.r)))}a=f+(l-f)/2;d=m+(t-m)/2;
for(c=0;c<g.length;c++)g[c].r-=d,g[c].c-=a;g.sort(function(a,b){return a.r*a.r+a.c*a.c-(b.r*b.r+b.c*b.c)});for(c=0;c<g.length;c++)g[c].r+=d,g[c].c+=a,N(g[c],e,b)}else for(c=0,g=a.length;c<g;c++)if(h=a[c])h=new cb(h,d),N(h,e,b);Fa("blankLine")}else Fa("z577"+e,"No new tiles requested")}function cb(b,c){this.imagePath=a.imagePath;this.name=b;var d=new ka(b);this.t=d.t;this.c=d.c;this.r=d.r;this.x=Math.floor(this.c*ab);this.y=Math.floor(this.r*Ja);this.image=null;this.alpha=0;this.url=r.formatTilePath(this.t,
this.c,this.r,c);this.style=this.elmt=this.loadTime=null}function ka(a){this.t=parseInt(a.substring(0,a.indexOf("-")),10);this.c=parseInt(a.substring(a.indexOf("-")+1,a.lastIndexOf("-")),10);this.r=parseInt(a.substring(a.lastIndexOf("-")+1),10)}function R(a,b,c){c=b+c*Sa[a];b=8*c+ie[a];c=Math.floor(c/Ya);var d=c*Ya,d=d+Ya>Bb[a]?8*(Bb[a]-d):td;this.chunkStart=ie[a]+c*td;this.chunkEnd=this.chunkStart+d;this.offsetStartInChunk=b-this.chunkStart;this.chunkID=a.toString()+"-"+c.toString()}function S(a,
b,c){c=b+c*Sa[a];b=4*c+Jd[a];c=Math.floor(c/Ya);var d=c*Ya,d=d+Ya>Bb[a]?4*(Bb[a]-d):le;this.chunkStart=Jd[a]+c*le;this.chunkEnd=this.chunkStart+d;this.bcStartInChunk=b-this.chunkStart;this.chunkID=a.toString()+"-"+c.toString()}function je(b,c,d,e,g){"tile"==b?(b=(parseInt(c,10)+a.dziSubfoldersToSkip+1).toString(),d=a.imagePath+"/"+a.dziImageSubfolder+"/"+b+"/"+d+"_"+e+"."+a.tileType):d=a.imagePath+"/"+a.dziImagePropertiesFilename;if(Z.browser==Z.browsers.IE&&9>Z.browserVersion||0==oc)d=Z.Utils.cacheProofPath(d);
return d}function Aa(b,c,d){var e=r.getViewportID();Kf[b]=d;var g=new Z.NetConnector(a);null===a.tileHandlerPathFull?g.loadByteRange(a.imagePath,b,c,"offset",null,d,e):(d=Lb.replace(".","%2E"),g.loadXML(a.tileHandlerPathFull+"?file="+d+"&requestType=2&begin="+b+"&end="+c))}function Ma(a,b){for(var c=0,d=za.length;c<d;c++){var e=za[c].split(",");e[0]==a&&e[5]==b&&("undefined"!==typeof e[4]&&"image-display"==e[4]?Vb[Vb.length]=e[1]+"-"+e[2]+"-"+e[3]:"image-backfill"==e[4]&&(Wb[Wb.length]=e[1]+"-"+e[2]+
"-"+e[3]),za=Z.Utils.arraySplice(za,c,1),c--,d--)}0<Vb.length&&(Vb.sort(),Vb=Z.Utils.arrayUnique(Vb),Fa("selectTilesRetry",Vb),c=Jb("imageSaving")?onTileLoadToSave:V,Na(Vb,c,"simple","image-display"));0<Wb.length&&(Wb.sort(),Wb=Z.Utils.arrayUnique(Wb),c=Jb("imageSaving")?z599ToSave:L,Na(Wb,c,"simple","image-backfill"))}function Na(b,c,d,e){d=(new Date).getTime();for(var g=0,f=b.length;g<f;g++){var l=null;if(l=b[g])b=Z.Utils.arraySplice(b,g,1),g--,f--,index=Z.Utils.arrayIndexOfObjectValue(zc,"name",
l),-1!=index?(l=zc[index],zc=Z.Utils.arraySplice(zc,index,1),l.url=r.formatTilePath(l.t,l.c,l.r,e)):l=new cb(l,e),null!=l&&-1==l.url.indexOf("NaN")?(Fa("z577Retry",l.name+"  "+l.url),N(l,d,c)):-1==l.url.indexOf("NaN")&&a.showMessage(Z.Utils.getResource("z280-ZIF")+l.name+".jpg",!1,a.messageDurationShort,"center",!1)}}function N(b,c,d){var e=b.name;if("z647"==b.url.substr(0,8)){Zc(b);d=b.name;var g=Z.Utils.arrayIndexOf(ja,d);-1!=g&&(ja=Z.Utils.arraySplice(ja,g,1));if("ZoomifyZIFFile"==a.tileSource||
"ZoomifyPFFFile"==a.tileSource)g=Z.Utils.arrayIndexOf(Vb,d),-1!=g&&(Vb=Z.Utils.arraySplice(Vb,g,1));Ub[Ub.length]=b;jc[jc.length]=d}else if("offsetLoading"==b.url)-1==Z.Utils.arrayIndexOfObjectValue(zc,"name",e)&&(zc[zc.length]=b),Fa("z581DelayForOffset",e);else if("offsetLoading"!=b.url){if(d==V||Z.enterpriseParamsEnabled&&d==onTileLoadToSave)g="image-display";else if(d==L||d==z599ToSave)g="image-backfill";var f=b.t==Qd&&he||b.t==ke&&ge||b.t==Pd&&fe;"image-display"==g&&f||(b.loadTime=c,Fa("z581-"+
g,e),c=r.getViewportID(),sh.loadImage(b.url,Z.Utils.createCallback(null,d,b),g,b,c))}}function V(b,c){if(b&&c&&b.imagePath==a.imagePath){b.image=c;var d=b.name,e=Z.Utils.arrayIndexOf(ja,d);if(-1!=e){ja=Z.Utils.arraySplice(ja,e,1);Zc(b);if(a.preloadVisible&&!a.imageSet&&b.t!=ha){e=a.imageSet?a.animation?Z.Utils.getResource("ALERT_PRELOADING-STORINGORDRAWINGTILESANIMATION"):Z.Utils.getResource("ALERT_PRELOADING-STORINGORDRAWINGTILESSLIDES"):Z.Utils.getResource("ALERT_PRELOADING-STORINGORDRAWINGTILESIMAGE");
a.showMessage(e+"   Tile: "+d,!1,a.messageDurationShort/10,"center");b.alpha=1;return}-1==Z.Utils.arrayIndexOf(jc,d)&&(jc[jc.length]=d,Ub[Ub.length]=b);a.preloadVisible&&a.imageSet&&r.getViewportID()!=a.viewportCurrentID&&(d=(r.getViewportID()+1).toString()+" of "+a.imageSetLength.toString()+"   Tile: "+d,e=a.imageSet?a.animation?Z.Utils.getResource("ALERT_PRELOADING-STORINGORDRAWINGTILESANIMATION"):Z.Utils.getResource("ALERT_PRELOADING-STORINGORDRAWINGTILESSLIDES"):Z.Utils.getResource("ALERT_PRELOADING-STORINGORDRAWINGTILESIMAGE"),
a.showMessage(e+d,!1,a.messageDurationShort/10,"center"));$c||($c=window.setInterval(aa,50));sd=ja.length;if(0==sd){a.useCanvas&&0<oc&&(kg?(fa(ha,yb),Tb(sa,ha,yb,"canvasCopy",!1,"4. Updating view: all new tiles loaded"),window.setTimeout(function(){Z.Utils.clearDisplay(ub,a)},200),kg=!1):Tb(sa,ha,yb,"centerOut",!1,"4. Updating view: all new tiles loaded"));for(;kc.length>oc&&yb.length>oc;)kc=Z.Utils.arraySplice(kc,0,1),yb=Z.Utils.arraySplice(yb,0,1);rf=0}Fa("onTileLoad",b.name,b.loadTime);r.updateProgress(rf,
sd)}me==Rd+Ac&&ob("displayLoadedViewport",!0)}else"undefined"!==typeof c&&null!==c||console.log(Z.Utils.getResource("z280")+b.name+".jpg")}function L(b,c){if(b&&c&&b.imagePath==a.imagePath){b.image=c;var d=b.name;Kb[Kb.length]=b;var e=Z.Utils.arrayIndexOf(sb,d);-1!=e&&(sb=Z.Utils.arraySplice(sb,e,1));if("ZoomifyZIFFile"==a.tileSource||"ZoomifyPFFFile"==a.tileSource)d=Z.Utils.arrayIndexOf(Wb,d),-1!=d&&(Wb=Z.Utils.arraySplice(Wb,d,1));b.alpha=1;b.t==Ha&&ya(ra,Ha,b);Fa("onTileBackfillPrecache",b.name);
Zg==ne&&ob("precacheLoadedViewport",!0);Fa("z599",b.name);Je<=0+oe&&ob("backfillLoadedViewport",!0);b.t==ha&&V(b,c)}else if("undefined"===typeof c||null===c)Z.mobileDevice?console.log(Z.Utils.getResource("z280")+b.name+".jpg"):a.showMessage(Z.Utils.getResource("z280")+b.name+".jpg")}function aa(){for(var b=0,c=0,d=Ub.length;c<d;c++){var e=Ub[c];e.t==ha?(a.fadeIn&&0!=pe&&1>e.alpha+pe?e.alpha+=pe:(e.alpha=1,b++),ya(sa,ha,e),b>=d&&(window.clearInterval($c),$c=null,c=d)):(Ub=Z.Utils.arraySplice(Ub,c,
1),jc=Z.Utils.arraySplice(jc,c,1),e=Z.Utils.arrayIndexOf(ja,e.name),-1!=e&&(ja=Z.Utils.arraySplice(ja,e,1)),d--)}}function ya(b,c,d){if("z647"!=d.url.substr(0,8)&&0!=d.image.width&&0!=d.image.height){var e=d.x,f=d.y;c=va(c,1);fb=U(tc,rb());var l=8<fb;a.useCanvas?(b==sa||b==ub||b==ra&&Ia?(e-=a.imageX*c,f-=a.imageY*c):b==ga&&(Ia||l)&&(l=r.calculateCurrentCenterCoordinates(),e-=l.x*c,f-=l.y*c),c=b.getContext("2d"),Z.alphaSupported&&1>d.alpha&&"transitionCanvas"!=b.id&&-1==b.id.indexOf("oversizeDisplay")&&
"savingDisplay"!=b.id&&!ad&&(c.globalAlpha=d.alpha),a.imageFilters&&0!=qe.length?ad?(-1!=b.id.indexOf("oversizeDisplay")?c=Ea:-1!=b.id.indexOf("viewportDisplay")?c=eb:-1!=b.id.indexOf("viewportBackfillDisplay")?c=Tg:-1!=b.id.indexOf("transitionCanvas")?c=eb:"savingDisplay"==b.id&&(c=ac),c.drawImage(d.image,e,f)):(l=z456(d.name,d.image),Z.Utils.clearDisplay(ub,a),hc.putImageData(l,0,0),c.drawImage(ub,e,f)):c.drawImage(d.image,e,f),Z.alphaSupported&&1>d.alpha&&"transitionCanvas"!=b.id&&-1==b.id.indexOf("oversizeDisplay")&&
"savingDisplay"!=b.id&&!ad&&(c.globalAlpha=1),2!=a.debug&&4!=a.debug||kb(b,d.name,e,f,ma)):(b==sa?(e-=a.imageX*c-Hb/ma,f-=a.imageY*c-Ib/ma,c=ma):c=Kc,d.elmt||(d.elmt=Z.Utils.createContainerElement(g,"img"),d.elmt.onmousedown=Z.Utils.preventDefault,Z.Utils.addEventListener(d.elmt,"contextmenu",Z.Utils.preventDefault),d.elmt.src=d.url,d.style=d.elmt.style,d.style.position="absolute",Z.Utils.renderQuality(d,Z.renderQuality),Z.cssTransformsSupported&&(d.style[Z.cssTransformProperty+"Origin"]="0px 0px")),
d.elmt.parentNode!=b&&b.appendChild(d.elmt),l=d.style,l.display="none",Z.cssTransformsSupported?l[Z.cssTransformProperty]=["matrix(",(d.image.width/d.elmt.width*c).toFixed(8),",0,0,",(d.image.height/d.elmt.height*c).toFixed(8),",",(e*c).toFixed(8),Z.cssTransformNoUnits?",":"px,",(f*c).toFixed(8),Z.cssTransformNoUnits?")":"px)"].join(""):(l.width=d.image.width*c+"px",l.height=d.image.height*c+"px",l.left=e*c+"px",l.top=f*c+"px"),l.display="inline-block",Z.Utils.setOpacity(d,d.alpha),2!=a.debug&&4!=
a.debug||kb(b,d.name,e,f,c));b==sa?(Fa("z507",d.name),me==ud&&ob("displayDrawnViewport",!0)):(Fa("displayBackfillTile",d.name),Je<=Ke&&ob("backfillDrawnViewport",!0))}}function kb(b,c,d,e,f){if(a.useCanvas){var l=parseInt(Z.Utils.getResource("z129"),10),m=parseInt(Z.Utils.getResource("z160"),10),t=parseInt(Z.Utils.getResource("z151"),10),l=Math.round(l*f),m=2*(l<m?m:l>t?t:l);b=b.getContext("2d");b.font=m+"px verdana";b.textAlign="left";b.textBaseline="top";m=ab*f/2;f=Ja*f/2;b.fillStyle="#FFFFFF";
b.fillText(c,d+m,e+f);b.fillStyle="#000000";b.fillText(c,d+m+1,e+f+1)}else{var l=parseInt(Z.Utils.getResource("z129"),10),m=parseInt(Z.Utils.getResource("z160"),10),t=parseInt(Z.Utils.getResource("z151"),10),l=Math.round(l*f),h=2*(l<m?m:l>t?t:l),m=parseInt(Z.Utils.getResource("z130"),10)*f,t=Z.Utils.createContainerElement(g,"div","tileNameTextBox","inline-block","absolute","hidden","auto","auto","1px","1px","none","0px","transparent none","0px",m+"px","nowrap"),l=document.createTextNode(c);t.appendChild(l);
b.appendChild(t);Z.Utils.setTextNodeStyle(l,"white","verdana",h+"px","none","normal","normal","normal","normal","1em","center","none");var F=Z.Utils.createContainerElement(g,"div","tileNameTextBox2","inline-block","absolute","hidden","auto","auto","1px","1px","none","0px","transparent none","0px",m+"px","nowrap"),v=document.createTextNode(c);F.appendChild(v);b.appendChild(F);Z.Utils.setTextNodeStyle(v,"black","verdana",h+"px","none","normal","normal","normal","normal","1em","center","none");m=parseFloat(t.style.padding);
b=parseFloat(Z.Utils.getElementStyleProperty(t,"width"));isNaN(b)&&(b=parseFloat(Z.Utils.getResource("z115")),b=parseFloat(t.style.fontSize)/b,b=Math.round(parseFloat(c.length*b)));c=ab*f/2;h=Ja*f/2;t.style.left=d*f+(c-b/2-m)+"px";t.style.top=e*f+h+"px";F.style.left=1+d*f+(c-b/2-m)+"px";F.style.top=1+e*f+h+"px";Z.Utils.addEventListener(t,"contextmenu",Z.Utils.preventDefault);Z.Utils.disableTextInteraction(l);Z.Utils.addEventListener(F,"contextmenu",Z.Utils.preventDefault);Z.Utils.disableTextInteraction(v)}}
function Ie(a,b,c,d){if("undefined"===typeof a||null===a)a=ha;if("undefined"===typeof b||null===b)b=!1;return new Cb(Le(b,c?a:null,d),a)}function Le(b,c,d){var e=parseFloat(J.left)-Y,g=parseFloat(J.top)-ea;if(a.useCanvas)var f=parseFloat(J.width)/nb.width,e=e/f,g=g/f;f=rb();0!=e&&(e/=f);0!=g&&(g/=f);var e=a.imageX-e,g=a.imageY-g,l,m,t;b?(b=-(X/2),m=X/2,l=-(ca/2),t=ca/2):(b=-(ia/2),m=ia/2,l=-(la/2),t=la/2);return new sf(e,g,b,m,l,t,f,c,d)}function Cb(a,b){var c=va(b,1),d=Math.floor(a.l*c/ab),e=Math.floor(a.r*
c/ab),g=Math.floor(a.t*c/Ja),c=Math.floor(a.b*c/Ja);0>d&&(d=0);e>Sa[b]-1&&(e=Sa[b]-1);0>g&&(g=0);c>Eb[b]-1&&(c=Eb[b]-1);this.l=d;this.r=e;this.t=g;this.b=c}function sf(a,b,c,d,e,g,f,l,m){"undefined"===typeof l||null===l?(this.l=a+c/f,this.r=a+d/f,this.t=b+e/f,this.b=b+g/f):(f=X/pb[l],l=ca/Ra[l],this.l=a+c*f,this.r=a+d*f,this.t=b+e*l,this.b=b+g*l);m&&(this.l-=256-this.l%256,this.r+=256-this.r%256,this.t-=256-this.t%256,this.b+=256-this.b%256)}function Me(b,c,d,e){if("undefined"===typeof d||null===
d)d=a.imageZ;if("undefined"===typeof e||null===e)e=a.imageR;0>e&&(e+=360);b=(a.imageX-b)*d;c=(a.imageY-c)*d;0!=a.imageR&&(viewportClickPt=Z.Utils.rotatePoint(b,c,-e),b=viewportClickPt.x,c=viewportClickPt.y);return new Z.Utils.Point(Y+b,ea+c)}function bc(b,c,d,e){if("undefined"===typeof d||null===d)d=a.imageZ;if("undefined"===typeof e||null===e)e=a.imageR;0>e&&(e+=360);b-=Y;c-=ea;0!=a.imageR&&(viewportClickPt=Z.Utils.rotatePoint(b,c,-e),b=viewportClickPt.x,c=viewportClickPt.y);return new Z.Utils.Point(a.imageX-
b/d,a.imageY-c/d)}function vb(b,c,d){if("undefined"===typeof b||null===b)b=a.imageW;if("undefined"===typeof c||null===c)c=a.imageH;var e=b/c>X/ca?X/b:ca/c;if(90==d||270==d)e=b/c>X/ca?X/c:ca/b;return e}function v(b,c,d){if("undefined"===typeof b||null===b)b=a.imageW;if("undefined"===typeof c||null===c)c=a.imageH;var e=b/c>X/ca?ca/c:X/b;if(90==d||270==d)e=b/c>X/ca?ca/b:X/c;return e}function va(b,c){return pb[b]/a.imageW*c}function U(b,c){return c/(pb[b]/a.imageW)}function db(b,c,d,e,g){if(a.constrainPan){d=
"undefined"!==typeof d&&null!==d?d:a.imageZ;e="undefined"!==typeof e&&null!==e?Math.round(e):Math.round(a.imageR);0>e&&(e+=360);var f=b,l=c;"image"==g&&(c=Me(b,c,d,e),b=c.x,c=c.y);var m=a.imageW,t=a.imageH,h=Math.round(m*d),F=Math.round(t*d);Math.round(m*d/2);Math.round(t*d/2);var m=X,t=ca,v=Math.round(.1*X),E=Math.round(.1*ca),n=Math.round(.5*X),p=Math.round(.5*ca),bb,k;bb=n-Y+(a.imageCtrX-a.imageX)*d+b;k=p-ea+(a.imageCtrY-a.imageY)*d+c;var qb=bb+h/2,r=k-F/2,I=bb+h/2,w=k+F/2,Va=bb-h/2,C=k+F/2,va=
Z.Utils.getPositionRotated(bb-h/2,k-F/2,bb,k,e,a.imageR),qb=Z.Utils.getPositionRotated(qb,r,bb,k,e,a.imageR),I=Z.Utils.getPositionRotated(I,w,bb,k,e,a.imageR),C=Z.Utils.getPositionRotated(Va,C,bb,k,e,a.imageR);bb=Math.min(va.x,qb.x,I.x,C.x);k=Math.min(va.y,qb.y,I.y,C.y);Va=Math.max(va.x,qb.x,I.x,C.x);va=Math.max(va.y,qb.y,I.y,C.y);Va-bb>m||!a.constrainPanStrict?3==a.constrainPanLimit?b=0<bb?b-bb:Va<m?b-(Va-m):b:2==a.constrainPanLimit?b=bb>n?b-(bb-n):Va<n?b-(Va-n):b:1==a.constrainPanLimit&&(b=bb>9*
v?b-(bb-9*v):Va<v?b-(Va-v):b):b=bb>n-h/2?b-(bb-(n-h/2)):Va<n+h/2?b-(Va-(n+h/2)):b;va-k>t||!a.constrainPanStrict?3==a.constrainPanLimit?c=0<k?c-k:va<t?c-(va-t):c:2==a.constrainPanLimit?c=k>p?c-(k-p):va<p?c-(va-p):c:1==a.constrainPanLimit&&(c=k>9*E?c-(k-9*E):va<E?c-(va-E):c):c=k>p-F/2?c-(k-(p-F/2)):va<p+F/2?c-(va-(p+F/2)):c;"image"==g&&(c=bc(b,c,d,e),b=c.x,c=c.y);if(b!=f||c!=l)b=Math.round(b),c=Math.round(c),Q("panConstrained")}return new Z.Utils.Point(b,c)}function Oa(b){b>a.maxZ?(b=a.maxZ,Q("zoomConstrainedMax")):
b<a.minZ&&(b=a.minZ,Q("zoomConstrainedMin"));return b}function Ne(b){a.rotationFree||(b=90*Math.round(Math.abs(b)/90)*Z.Utils.getSign(b));-360>=b?b+=360:360<=b&&(b-=360);return b}function Sd(){a.comparison&&0!=La?a.Navigator2&&a.Navigator2.syncToViewport():a.Navigator&&a.Navigator.syncToViewport()}function Zc(a){if(0<oc){var b=Z.Utils.arrayIndexOf(kc,a.name);-1!=b&&(kc=Z.Utils.arraySplice(kc,b,1),yb=Z.Utils.arraySplice(yb,b,1));kc[kc.length]=a.name;yb[yb.length]=a}}function Jb(a){a=Z.Utils.arrayIndexOfObjectValue(Bc,
"state",a);return-1==a?!1:Bc[a].status}function ob(a,b){var c=!1,d=Z.Utils.arrayIndexOfObjectValue(Bc,"state",a);-1==d?(c=b,Bc[Bc.length]={state:a,status:b}):(!Bc[d].status&&b&&(c=!0),Bc[d].status=b);c&&(Q(a),T(a))}function Fa(b,c,d,e){d="undefined"!==typeof d&&null!==d?d:null;c=null!==c?c:"";switch(b){case "tilesToDisplay":me=d;ud=Ac=Td=Rd=0;Cc=d;Nc=0;tilesTimeStart=(new Date).getTime();Ud=0;window.clearTimeout(vd);vd=null;vd=window.setTimeout(Vd,Oe);break;case "tilesInCache":Rd=d;break;case "z581-image-display":Td+=
1;break;case "onTileLoad":Ac+=1;Nc=((new Date).getTime()-d)/1E3;Ud=Ac/Nc;break;case "z507":d=Z.Utils.arrayIndexOf(xc,c);-1!=d&&(xc.splice(d,1),ud+=1,--Cc);break;case "tilesBackfillToPrecache":Zg=d;break;case "onTileBackfillPrecache":ne+=1;break;case "tilesBackfillToDisplay":Pe=Je=d;break;case "z599":oe+=1;break;case "displayBackfillTile":d=Z.Utils.arrayIndexOf(rd,c),-1!=d&&(rd.splice(d,1),Ke+=1,--Pe)}if(2==a.debug||3==a.debug){d=me;var f=Rd,l=Td,m=Ac,t=ud,h=Cc;if(!(F&&v&&n&&E&&bb&&k))var F=Z.Utils.getElementOfViewerById(g,
"tilesRequiredTextElement"),v=Z.Utils.getElementOfViewerById(g,"tilesCachedTextElement"),n=Z.Utils.getElementOfViewerById(g,"tilesRequestedTextElement"),E=Z.Utils.getElementOfViewerById(g,"tilesLoadedTextElement"),bb=Z.Utils.getElementOfViewerById(g,"tilesDisplayedTextElement"),k=Z.Utils.getElementOfViewerById(g,"tilesWaitingTextElement");F&&v&&n&&E&&bb&&k&&("undefined"!==typeof d&&null!==d&&(F.value=d.toString()),"undefined"!==typeof f&&null!==f&&(v.value=f.toString()),"undefined"!==typeof l&&null!==
l&&(n.value=l.toString()),"undefined"!==typeof m&&null!==m&&(E.value=m.toString()),"undefined"!==typeof t&&null!==t&&(bb.value=t.toString()),"undefined"!==typeof h&&null!==h&&(k.value=h.toString()))}if(2==a.debug){v="undefined"!==typeof e&&null!==e&&0<e.length?e.join(", "):"none";F=!0;n="";switch(b){case "updateView-noChange":n="Updating view: no change of tier.";break;case "tilesToDisplay":n="Tiles to display: "+v;break;case "tilesInCache":n="Tiles in cache: "+v;break;case "tilesToLoad":n="Tiles to load: "+
v;break;case "tilesToLoad-backfill":n="Tiles to load-backfill: "+v;break;case "z622-viewportDisplay":b=[];v=0;for(n=e.length;v<n;v++)b[b.length]=e[v].name;n="Tiles from cache-"+c+": "+b.join(", ");break;case "z622-backfillDisplay":b=[];v=0;for(n=e.length;v<n;v++)b[b.length]=e[v].name;n="Tiles from cache-"+c+": "+b.join(", ");break;case "z577-image-display":n="Tile requests for display: "+c+v;break;case "z577-image-backfill":n="Tile requests for backfill: "+c+v;break;case "imageRequestTimeout":n="Image request for "+
c;break;case "z581-image-display":n="Tile request-display: "+c;F=!1;break;case "z581-image-backfill":n="Tile request-backfill: "+c;F=!1;break;case "z581DelayForOffset":n="Tile not yet being loaded - offset chunk loading in progress: "+c;break;case "onTileLoad":n="Tiles received-display: "+c;F=!1;break;case "z599":n="Tiles received-backfill: "+c;0==sb.length&&(n+="\n\nTile loading complete for backfill: all requested tiles received.");F=!1;break;case "z532":n="Tile request recorded for after load offset chunk: "+
c;break;case "selectTilesRetry":n="Requesting tiles after offset chunk received: "+v;break;case "z531":n="Tile request recorded for after load offset chunk: "+c;F=!1;break;case "selectTilesRetry":n="Requesting tiles after offset chunk received: "+v;F=!1;break;case "z577Retry":n=c;break;case "z507":n="Tile displaying: "+c;F=!1;break;case "blankLine":n=" "}""!=n&&Za(n,!1,F)}}function Vd(){window.clearTimeout(vd);vd=null;Nc=((new Date).getTime()-tilesTimeStart)/1E3;var b=Ud*Nc,b=Cc&&Ac<b,c=Cc&&Ac>=Td;
if(2==a.debug||3==a.debug){Za("View validation-time elapsed: "+Nc);0<Cc&&(b?Za("Loading delay - re-calling updateView"):c?Za("Display delay - re-calling updateView"):Za("Progress slow, resetting timer"));Za("");a.traces.scrollTop=a.traces.scrollHeight;var d=Nc,e=Ud;if(!f||!l)var f=Z.Utils.getElementOfViewerById(g,"tilesTimeElapsedTextElement"),l=Z.Utils.getElementOfViewerById(g,"tilesPerSecondTextElement");f&&l&&("undefined"!==typeof d&&null!==d&&(f.value=d.toString()),"undefined"!==typeof e&&null!==
e&&(l.value=Math.round(e).toString()))}0<Cc?Wd<th?b||c?(Wd+=1,da(!0)):vd=window.setTimeout(Vd,Oe):console.log(Z.Utils.getResource("ERROR_VALIDATEVIEW")):(Wd=0,Q("viewUpdateComplete"),Q("viewUpdateCompleteGetLabelIDs"))}function Mc(){a.preventDupCall||(a.priorX=Math.round(a.imageX),a.priorY=Math.round(a.imageY),a.priorZ=a.imageZ,a.priorR=Math.round(a.imageR));a.preventDupCall="undefined"!==typeof called&&null!==called}function If(b,c,d,e,g,f){f||r.zoomAndPanAllStop();a.maskingSelection&&a.maskClearOnUserAction&&
r.clearMask();if("undefined"===typeof b||null===b)b=a.imageW/2;if("undefined"===typeof c||null===c)c=a.imageH/2;"undefined"===typeof d||null===d?d=a.fitZ:1<d&&d>a.maxZ&&(d/=100);if("undefined"===typeof e||null===e)e=a.imageR;d=Oa(d);e=Ne(e);b=db(b,c,d,e,"image");a.imageX=qd=b.x;a.imageY=Nd=b.y;a.imageZ=d;e!=a.imageR&&Z.Utils.rotateElement(J,e,a.imageR);a.imageR=e;da(!0);"function"===typeof g&&g()}function sg(){if(pc&&(0!=Pb||0!=x||0!=zb))if(a.tracking&&0==zb)r.zoomAndPanToView(M()+Pb,O()+x);else{var b=
Pb,c=x,d=zb,e=rb();0!=d&&(e=va(ha,ma*(1+d)),e=Oa(e),e!=a.imageZ&&bd(e));if(0!=b||0!=c)b=parseFloat(J.left)+b,c=parseFloat(J.top)+c,e=db(b,c,e,a.imageR,"container"),J.left=Math.round(e.x)+"px",J.top=Math.round(e.y)+"px",c=e.x-Y,e=e.y-ea,ga&&Ia&&(Z.mobileDevice||Math.abs(c)>X/2||Math.abs(e)>ca/2)&&Tb(ga,tc,Kb,"simple",!1,"Updating backfill oversize display");ba&&30<ba.length?0==wd%2&&Yb():Yb();wd++;pc=window.setTimeout(sg,re)}}function lb(b,c,d,e,g,f,l){if(a.zoomAndPanInProgressID==b.toString()+"-"+
c.toString()+"-"+d.toString()+"-"+e.toString()){cd++;var m=g/f,t=cd*m,h=Z.Utils.easing(a.imageX,b,t,g,a.smoothZoomEasing,a.smoothZoomEasing,a.smoothZoom),F=Z.Utils.easing(a.imageY,c,t,g,a.smoothZoomEasing,a.smoothZoomEasing,a.smoothZoom),v=Z.Utils.easing(a.imageZ,d,t,g,a.smoothZoomEasing,a.smoothZoomEasing,a.smoothZoom),t=Z.Utils.easing(a.imageR,e,t,g,a.smoothZoomEasing,a.smoothZoomEasing,a.smoothZoom),F=Me(h,F,v),h=F.x,F=F.y,n=!1,E=syncOversize=!1;if(parseFloat(J.left)!=h||parseFloat(J.top)!=F)J.left=
h+"px",J.top=F+"px",E=!0,ga&&Ia&&(syncOversize=!0);v!=a.imageZ&&(bd(v,!1),n=E=!0,ga&&Ia&&(Ea.restore(),Ea.save(),Ea.scale(fb,fb),syncOversize=!0));t!=a.imageR&&(Z.Utils.rotateElement(J,t,a.imageR),ga&&Ia&&(Ea.rotate((t-a.imageR)*Math.PI/180),syncOversize=!0),a.imageR=t,E=!0);syncOversize&&Tb(ga,tc,Kb,"simple",!1,"Updating backfill oversize display");Yb(!1,ba&&40>ba.length,!1,!1,!1);0==cd%2&&Yb(!1,!1,n,E,n);v=a.tour&&a.tourStopping&&0==Math.round(a.imageR%90);cd<f+1&&!v?xd=window.setTimeout(function(){lb(b,
c,d,e,g,f,l)},m):(v&&(a.tourPlaying=!1),a.interactive=!0,Oc(),da(),r.toggleWatermarks(!0),ba&&39<ba.length&&r.setHotspotsVisibility(!0),"function"===typeof l&&l())}}function $g(){wd=zb=x=Pb=0;pc&&(window.clearTimeout(pc),pc=null)}function Oc(){if(null!==a.zoomAndPanInProgressID||xd)a.zoomAndPanInProgressID=null,cd=dd,window.clearTimeout(xd),xd=null}function Yb(b,c,d,e,g,f,l,m,t,h){a.Toolbar&&a.sliderZoomVisible&&("undefined"===typeof d||null===d||d)&&(a.Toolbar&&a.ToolbarDisplay&&a.Toolbar.getInitialized()&&
(b=rb(),a.Toolbar.syncSliderToViewportZoom(b)),Q("viewZoomingGetCurrentZoom"));a.Navigator&&a.navigatorVisible&&("undefined"===typeof e||null===e||e)&&Sd();Q("viewChanging")}function bd(b,c){var d=!1,e=U(ha,b);if(e!=ma){ma=e;var d=e/Uc,g=ia*d,f=la*d,l=(ia-g)/2,m=(la-f)/2;e<Uc&&(e=db(parseFloat(J.left),parseFloat(J.top),b,a.imageR,"container"),J.left=e.x+"px",J.top=e.y+"px");if(a.useCanvas)if(oa.width=g+"px",oa.height=f+"px",oa.left=l+"px",oa.top=m+"px",fc&&(wc.width=g+"px",wc.height=f+"px",wc.left=
l+"px",wc.top=m+"px"),qb&&(Va.width=g+"px",Va.height=f+"px",Va.left=l+"px",Va.top=m+"px"),Zb&&(gc.width=g+"px",gc.height=f+"px",gc.left=l+"px",gc.top=m+"px"),fb=U(tc,rb()),e=8<fb,Ia||e){if(null!==Ea&&"undefined"===typeof c||null===c||c&&ga&&("in"!=a.zooming||g>Z.scaleThreshold||f>Z.scaleThreshold))Ea.restore(),Ea.save(),Ea.scale(fb,fb),Ea.rotate(a.imageR*Math.PI/180),Tb(ga,tc,Kb,"simple",!1,"Updating backfill oversize display");Kc=d=U(Ha,b);g=d/tierBackfillScalePrior;d=pa*g;g*=nc;f=wb+(pa-d)/2;e=
Ob+(nc-g)/2;W.width=d+"px";W.height=g+"px";W.left=f+"px";W.top=e+"px"}else ga&&Z.Utils.clearDisplay(ga,a),g=pa*d,f=nc*d,l=wb+a.imageX*(1-d)*a.imageZ,m=Ob+a.imageY*(1-d)*a.imageZ,W.width=g+"px",W.height=f+"px",W.left=l+"px",W.top=m+"px";else Tb(sa,ha,yb,"centerOut",!1,"Scaling: non-canvas zoom"),Ia?(d=qf,pa=ia*d,nc=la*d,wb=-(ia/d),Ob=-(la/d),Wa=Hb*d,Xa=Ib*d,ra.width=pa,ra.height=nc,W.width=ra.width+"px",W.height=ra.height+"px"):(d=Ra[Ha],ra.width=pb[Ha],ra.height=d,d=a.imageY*b,wb=Hb-a.imageX*b,Ob=
Ib-d),W.left=wb+"px",W.top=Ob+"px",Tb(ra,Ha,Kb,"simple",!1,"Scaling: non-canvas zoom - backfill");d=!0}return d}function ah(){if(scaleTimer&&0!=scaleVal){var a=Z.Utils.arrayIndexOfObjectValue(ba,"internalID",ib);if(-1!=a){var a=ba[a],b=a.yScale*(1+scaleVal);r.modifyHotspot(ib,"xScale",a.xScale*(1+scaleVal),!0,!0);r.modifyHotspot(ib,"yScale",b,!1,!0);scaleTimer=window.setTimeout(ah,labelScaleStepDuration)}}}function uh(){r.toggleFullViewMode(!1)}function ed(){Pc&&0!=qc&&(r.rotateStep(qc,!1),Pc=window.setTimeout(ed,
Qe),Yb(!1,ba&&40>ba.length,!1,!0,!1))}function Mb(b){b=Z.Utils.event(b);var c=b.type;if(b&&c){var d=!Dc&&("polygon"==a.labelMode||"measure"==a.labelMode),e=Z.Utils.isRightMouseButton(b),g=b.altKey;if("mouseover"!=c&&"mouseout"!=c&&!a.interactive||"mousedown"==c&&(!a.interactive||a.coordinatesVisible&&g)||e&&!d)a.tourStop=!0;else{if("mousedown"==c||"touchstart"==c||a.tourPlaying&&a.tourStop)r.zoomAndPanAllStop(),a.tour&&r.tourStop(),a.tourStop=!0,a.interactive=!0;a.touchSupport&&!a.clickZoomAndPanBlock&&
"touchmove"!=c&&"gesturechange"!=c&&b.preventDefault();if("mousedown"==c)window.setTimeout(function(){r.zoomAndPanAllStop(!1,!0)},1),a.maskingSelection&&a.maskClearOnUserAction&&r.clearMask();else if("touchstart"==c||"gesturestart"==c)d=!1,Ab=Z.Utils.getFirstTouch(b),"undefined"!==typeof Ab&&null!==Ab&&(e=fd(Ab.target),null===e?d=!0:(e=e.id.substring(3,e.id.length),e=Z.Utils.arrayIndexOfObjectValue(ba,"internalID",e),-1!=e&&(e=ba[e],null!==e&&"function"==e.clickURL&&(d=!0)))),d&&b.preventDefault(),
r.zoomAndPanAllStop(!1,!0),a.maskingSelection&&a.maskClearOnUserAction&&r.clearMask();switch(c){case "mouseover":a.fullView||"TEXTAREA"==document.activeElement.tagName||Xb(!0);break;case "mousedown":!a.fullView&&document.activeElement&&document.activeElement.blur();Tc(!0);Z.Utils.addEventListener(document,"mousemove",Mb);Z.Utils.addEventListener(document,"mouseup",Mb);break;case "mouseup":("undefined"===typeof Dc||Dc)&&Z.Utils.removeEventListener(document,"mousemove",Mb),Z.Utils.removeEventListener(document,
"mouseup",Mb)}Xd(b);if("mousedown"==c||"mousemove"==c)return!1}}}function Xd(b){var c=La.toString();a.annotations&&resetAnnotationPanel();b=Z.Utils.event(b);var d=b.type,e=b.altKey;if(b&&d){var g;if("touchstart"==d||"touchmove"==d||"touchend"==d||"touchcancel"==d){if(Ab=Z.Utils.getFirstTouch(b))g=Ab.target,A=new Z.Utils.Point(Ab.pageX,Ab.pageY);a.gestureSupport||(gd=Z.Utils.getSecondTouch(b))&&(se=new Z.Utils.Point(gd.pageX,gd.pageY))}else g=Z.Utils.target(b),Z.Utils.relatedTarget(b),Z.Utils.isRightMouseButton(b),
"resize"!=d&&(A=Z.Utils.getMousePosition(b));a.smoothPan&&A&&(rc=A);var f=r.getZoom(),l=(100*f).toString(),d=A?r.getClickCoordsInImage(b,f,A):null;se&&!a.gestureSupport&&r.getClickCoordsInImage(b,f,se);var m=b.type,t=b.touches&&1<b.touches.length,h=null;if("gesturestart"==m||"gesturechange"==m||"gestureend"==m)h=m;else if(!Yd)if(("mousedown"==m||"touchstart"==m)&&!Qc)h=t?"pinchstart":"start";else if("mousemove"==m||"touchmove"==m)t||Re||Qc||Se?t&&(h="pinchchange"):h="move";else if("mouseup"==m||"touchend"==
m||"touchcancel"==m)h=t||Re||Qc||Se?"pinchend":"end";Ba=h;switch(Ba){case "start":h=g;f=null;if(a.interactive)if(!ba&&(a.clickZoom||a.clickPan||a.mousePan))f="navigateImage";else{var m="function"!==typeof a.externalEditPermissionFunction||a.externalEditPermissionFunction(),t=null!==a.editMode||"measure"==a.labelMode,F=!e&&("addLabel"==a.editing||"editLabel"==a.editing),t=m&&t&&F,F=fd(h),h=Zd(d,a.labelMode);if(null!==F&&null===h&&Dc)h=r.getLabelEditable(F.internalID),t&&h?f="editLabel":m&&a.labelClickSelect&&
(f="selectLabel");else if(null!==h&&(t||!t&&"measure"==a.labelMode))m=Z.Utils.arrayIndexOfObjectValue(ba,"internalID",ib),-1!=m&&(f=ba[m],f=f.polyClosed||0!=h||2>=f.polygonPts.length||Dc?"editControlPoint":"completeLabelPolygon");else if(0==Ca)"fieldofview"==a.labelMode||"text"==a.labelMode||"counter"==a.labelMode?f="createLabelSimple":"shape"==a.labelMode?f="createLabelShape":!Dc||"editLabel"==a.editing||"freehand"!=a.labelMode&&"polygon"!=a.labelMode&&"measure"!=a.labelMode||(f="createLabelAndControlPoint"),
"counter"!=a.labelMode&&(Ca=1);else if(0!=Ca&&!Dc)f=e?"completeLabelPolygon":"z489";else if("view"==a.labelMode&&e&&a.zoomRectangle)f="zoomRectangleImage";else if(a.clickZoom||a.clickPan||a.mousePan)e||"view"==a.labelMode||r.setEditModeLabel("view",null,null,null,!1,null),f="navigateImage"}Da=f;wa=new Z.Utils.Point(A.x,A.y);jb=(new Date).getTime();a.mouseIsDown=!0;a.altKeyIsDown=e;f=a.captionPosition?a.captionPosition:"8";Re=Se=!1;switch(Da){case "navigateImage":a.smoothPan?1<a.smoothPanEasing&&(hd(void 0),
te=wa,null===Ec&&(Ec=new Z.Utils.Point(parseFloat(J.left),parseFloat(J.top))),null===yd&&(yd=window.setInterval(ue,50))):(nb.mouseXPrior=A.x,nb.mouseYPrior=A.y);break;case "zoomRectangleImage":createZoomRectangle(d);break;case "createLabelSimple":"fieldofview"==a.labelMode?r.createLabelFromParameters(null,null,a.labelMode,null,null,a.imageX.toString(),a.imageY.toString(),l,X,ca,null,null,null,"0","0",null,null,null,"FOV",null,null,$d,null,null,null,null,null,null,null,null,"5","0",null,null):"counter"==
a.labelMode?r.createLabelCounter(d):r.createLabelFromParameters(null,null,a.labelMode,null,null,d.x.toString(),d.y.toString(),l,null,null,null,null,null,"0","0",null,null,null,null,null,null,$d,null,null,null,null,null,null,null,null,"5","0",null,null);"counter"!=a.labelMode&&r.updateAnnotationPanelForNewLabel();break;case "createLabelShape":if(b=document.getElementById("labelShapeList"+c))r.createLabelFromParameters(null,null,a.labelMode,b[b.selectedIndex].value,null,d.x.toString(),d.y.toString(),
l,null,null,null,null,null,"0","0",null,null,null,null,null,null,$d,null,selectedLineColor,selectedFillColor,null,null,null,null,null,f,"0",null,null),r.updateAnnotationPanelForNewLabel(),updateShapeSize(ib);break;case "createLabelAndControlPoint":b=createPolygonPoints(d);Dc=polygonClosed=!1;"freehand"==a.labelMode?Da="z489":null===a.editMode&&"measure"==a.labelMode&&0<ba.length&&r.deleteAllMeasureHotspots();r.createLabelFromParameters(null,null,a.labelMode,"polygon",null,d.x.toString(),d.y.toString(),
l,null,null,null,null,null,"0","0",null,null,null,null,null,null,$d,null,selectedLineColor,null,null,null,null,null,null,f,"0",null,null,null,null,"0",b,null,null,null,null,null,"1");r.updateAnnotationPanelForNewLabel();break;case "z489":z489(ib,!1,d,!0);break;case "selectLabel":(Rc=fd(g))&&updateCurrentLabel(Rc.id.substring(3,Rc.id.length));break;case "completeLabelPolygon":e&&z489(ib,!1,d,!0);case "editLabel":if(Rc=fd(g))updateSavePoint(b,d),updateLabelPositionInHTML(b,wa,Ba),updateCurrentLabel(Rc.id.substring(3,
Rc.id.length),!1);break;case "editControlPoint":Fc=Zd(d,a.labelMode)}break;case "move":new Z.Utils.Point(A.x,A.y);l=(d.x-a.imageX)*f;c=(d.y-a.imageY)*f;switch(Da){case "navigateImage":yd?rc=A:directPan(A);break;case "zoomRectangleImage":jd(ib,Fc,d);break;case "createLabelAndControlPoint":z516(l,c,d);break;case "z489":"freehand"==a.labelMode?a.mouseIsDown&&z511(bh,lc,l,c,d):z516(l,c,d);break;case "editLabel":updateLabelPositionInHTML(b,A,Ba);updateLabelPositionOnCanvas(b,Rc,A);break;case "editControlPoint":updateShapeOrPolygon(ib,
Fc,d)}break;case "end":a.mouseIsDown=!1;switch(Da){case "navigateImage":ch(b,A,f,e);break;case "zoomRectangleImage":ch(b,A,f,e);break;case "createLabelSimple":"fieldofview"==a.labelMode&&r.setEditModeLabel("view");break;case "z489":"freehand"==a.labelMode&&(r.setEditModeLabel("freehand"),z474(ib,!1),bh=lc=null);break;case "completeLabelPolygon":z474(ib,!e);break;case "editLabel":updateLabelPositionInHTML(b,A,Ba);break;case "editControlPoint":updateShapeOrPolygon(ib,Fc,d)}break;case "gesturestart":b=
Z.Utils.event(b);b.preventDefault();ve=Math.round(100*b.scale)/100;Yd||(Yd=window.setInterval(we,Te));break;case "gesturechange":ve=Math.round(100*b.scale)/100;we(b);break;case "gestureend":Yd&&(window.clearInterval(Yd),Re=!0,Yd=null);a.mousePan&&r.updateView();break;case "pinchstart":kd=Z.Utils.calculatePointsDistance(Ab.clientX,Ab.clientY,gd.clientX,gd.clientY);if(d=Z.Utils.event(b))d.preventDefault(),b=Z.Utils.getFirstTouch(d),d=Z.Utils.getSecondTouch(d),"undefined"!==typeof b&&"undefined"!==typeof d&&
(b=Z.Utils.calculatePointsDistance(b.clientX,b.clientY,d.clientX,d.clientY),Sc=Math.round(kd/b*100)/100);Qc||(Qc=window.setInterval(zd,vh));break;case "pinchchange":d=Z.Utils.calculatePointsDistance(Ab.clientX,Ab.clientY,gd.clientX,gd.clientY);Sc=Math.round(d/kd*100)/100;zd(b);break;case "pinchend":Qc&&(window.clearInterval(Qc),Se=!0,Qc=null),a.mousePan&&r.updateView()}}}function fd(a){if("undefined"===typeof a||null===a)a=document.getElementById("progressTextBox");var b=null;-1!=a.id.indexOf("hot")&&
-1==a.id.indexOf("hotspotDisplay")?b=a:a.parentNode&&-1!=a.parentNode.id.indexOf("hot")&&-1==a.parentNode.id.indexOf("hotspotDisplay")?b=a.parentNode:a.parentNode.parentNode&&-1!=a.parentNode.parentNode.id.indexOf("hot")&&-1==a.parentNode.parentNode.id.indexOf("hotspotDisplay")?b=a.parentNode.parentNode:a.parentNode.parentNode.parentNode&&-1!=a.parentNode.parentNode.parentNode.id.indexOf("hot")&&-1==a.parentNode.parentNode.parentNode.id.indexOf("hotspotDisplay")&&(b=a.parentNode.parentNode.parentNode);
return b}function Zd(a,b){var c=null;if(ba)for(var d=(xe+1)/Z.imageZ,e=0,g=ba.length;e<g;e++){var f=ba[e];if("freehand"!=f.mediaType&&f.internalID==ib&&("shape"==f.mediaType||"polygon"==f.media)&&"undefined"!==typeof f.polygonPts&&null!==f.polygonPts)for(var l=f.polygonPts.slice(0),f=0==f.rotation?a:Z.Utils.rotatePointOffCenter(f.x,f.y,a.x,a.y,-f.rotation),m=0,t=l.length;m<t;m++){var h=l[m];if(Z.Utils.calculatePointsDistance(f.x,f.y,h.x,h.y)<d){c=m;break}}}return c}function ch(b,c,d,e){document.mousemove=
null;document.mouseup=null;var f=(new Date).getTime();c=a.mouseOutDownPoint?a.mouseOutDownPoint:new Z.Utils.Point(c.x,c.y);clickPt=r.getClickCoordsInImage(b,d,a.mouseOutDownPoint);d=Z.Utils.calculatePointsDistance(wa.x,wa.y,c.x,c.y);f-=jb;if(d<Sb&&f<ye||!e&&("shape"==a.labelMode||"freehand"==a.labelMode)){if(a.clickZoom||a.clickPan)var g=r.getClickZoomCoords3D(b,wa,ha,ma,na&&a.doubleClickZoom?!0:!1);a.clickZoom?a.doubleClickZoom?na?(clearTimeout(na),na=null,r.zoomAndPanToView(g.x,g.y,g.z)):na=setTimeout(function(a){na=
null;r.zoomAndPanToView(g.x,g.y,g.z)},a.doubleClickDelay):window.setTimeout(function(){r.zoomAndPanToView(g.x,g.y,g.z)},1):a.clickPan&&r.zoomAndPanToView(g.x,g.y,a.imageZ);jd(ib,Fc,clickPt,!0,!0)}else"view"==a.labelMode&&(e||a.altKeyIsDown)&&a.zoomRectangle?jd(ib,Fc,clickPt,!0):a.mousePan&&!a.smoothPan&&a.updateView()}function jd(b,c,d,e,g){Ue&&(e?(c=ba[b].polygonPts,ba.splice(b,1),Ue=null,ib=zoomRectanglePriorID,a.measureVisible||a.tour||a.hotspots||a.annotations||(Nb.display=gc.display=Va.display=
"none",Z.Utils.removeEventListener(Gb,"mousedown",Z.Utils.preventDefault)),g||r.zoomAndPanToZoomRectangle(c)):updateShapeOrPolygon(b,c,d))}function hd(a){null!==yd&&a&&(window.clearInterval(yd),yd=null);Ec=Ad=Bd=Pa=null;xb=tb=Qb=Rb=0}function ue(){if(a.animation&&rb()==a.minZ){a.animationCount++;null===p&&(p=parseFloat(J.left));null===Cd&&(Cd=parseFloat(J.top));var b=p,c=Cd;if(a.mouseIsDown||Pa){var d=(Pa?Ad:rc.x)-te.x,e=(Pa?Bd:rc.y)-te.y,g=b-Ec.x,f=c-Ec.y;if(!(isNaN(d)||isNaN(e)||isNaN(g)||isNaN(f)||
0==d&&0==e&&0==g&&0==f)){var l=Pa?a.smoothPanGlide:1,m=Pa?1:100;xb=Math.round((d-g)/(a.smoothPanEasing*l)*m/m);tb=Math.round((e-f)/(a.smoothPanEasing*l)*m/m);a.mouseIsDown?(Qb=xb,Rb=tb):(Math.abs(xb)>Math.abs(Qb)&&(xb=Qb),Math.abs(tb)>Math.abs(Rb)&&(tb=Rb));c+=tb;p=b+xb;Cd=c;var t,h,F,v;"motion"==a.animator?(t="horizontal"==a.animationAxis?xb:tb,dimensionAxis="horizontal"==a.animationAxis?X:ca,h=Math.round(Pf/a.imageSetLength),F=t/40,v=0):"position"==a.animator&&(t="horizontal"==a.animationAxis?g:
f,dimensionAxis="horizontal"==a.animationAxis?X:ca,h=Math.max(0,Math.round((dimensionAxis/2-Math.abs(t))/Qf)),F=0,v="horizontal"==a.animationAxis?X/10:ca/10);0==h&&h++;0==a.animationCount%h&&(t<-v?a.viewportPrior(F):t>v&&a.viewportNext(F));Pa&&0==Math.round(xb*m)/m&&0==Math.round(tb*m)/m&&(Pa=!1)}}else if(a.mouseIsDown||null!==Pa||0==xb||0==tb)hd(!0),Cd=p=null;else if(0!=Qb||0!=Rb)Ad=rc.x+Qb,Bd=rc.y+Rb,Pa=!0}else if(f=parseFloat(J.left),g=parseFloat(J.top),a.mouseIsDown||Pa)m=(Pa?Ad:rc.x)-te.x,t=
(Pa?Bd:rc.y)-te.y,h=f-Ec.x,F=g-Ec.y,isNaN(m)||isNaN(t)||isNaN(h)||isNaN(F)||0==m&&0==t&&0==h&&0==F||(v=Pa?a.smoothPanGlide:1,b=Pa?1:100,xb=Math.round((m-h)/(a.smoothPanEasing*v)*b/b),tb=Math.round((t-F)/(a.smoothPanEasing*v)*b/b),a.mouseIsDown?(Qb=xb,Rb=tb):(Math.abs(xb)>Math.abs(Qb)&&(xb=Qb),Math.abs(tb)>Math.abs(Rb)&&(tb=Rb)),f+=xb,g+=tb,m=db(f,g,a.imageZ,a.imageR,"container"),J.left=m.x+"px",J.top=m.y+"px",xb-=f-m.x,tb-=g-m.y,ga&&Ia&&Tb(ga,tc,Kb,"simple",!1,"Updating backfill oversize display"),
Pa&&0==Math.round(xb*b)/b&&0==Math.round(tb*b)/b&&(Pa=!1),b=r.calculateCurrentCenterCoordinates(m,a.imageZ,a.imageR),a.comparison&&0!=La?a.Navigator2&&a.Navigator2.z658(b):a.Navigator&&a.Navigator.z658(b),a.tracking&&r.syncTrackingToViewport(),Q("viewChanging"));else if(a.mouseIsDown||null!==Pa||0==xb||0==tb)hd(!0),da();else if(m=db(f+Qb,g+Rb,a.imageZ,a.imageR,"container"),Qb=m.x-f,Rb=m.y-g,0!=Qb||0!=Rb)Ad=rc.x+Qb,Bd=rc.y+Rb,Pa=!0}function we(b){a.mousePan&&(b=va(ha,Uc*ve),b=Oa(b),b!=a.imageZ&&r.scaleTierToZoom(b))}
function zd(b){a.mousePan&&(b=va(ha,Uc*Sc),b=Oa(b),b!=a.imageZ&&r.scaleTierToZoom(b))}function Dd(b){if(b=Z.Utils.event(b)){var c;if(a.geoCoordinatesVisible){if(c="",uf&&vf&&ze&&wf){var d=r.getClickCoordsInImage(b);c=convertPixelsToLatitudeLongitudeString(d)}}else if("IIIFImageServer"==a.tileSource)d=r.getClickCoordsInImage(b),"mousemove"==b.type?c=r.getViewCoordinatesIIIFString(null,d,"show"):"mousedown"==b.type&&b.altKey&&(c=r.getViewCoordinatesIIIFString(null,d,"save")+"\n");else{d=Z.Utils.event(b);
c=rb();var e=r.getClickCoordsInImage(d,c),d=Math.round(e.x).toString(),e=Math.round(e.y).toString();c=(Math.round(1E3*c)/10).toString();c='X="'+d+'"   Y="'+e+'"   ZOOM="'+c+'"'}"mousemove"==b.type?a.showCoordinates(c):"mousedown"==b.type&&b.altKey&&a.saveCoordinates(c)}}var Lc,dc,uc,ec,qd=null,Nd=null,La=0;"undefined"!==typeof b&&null!==b&&(La=b);var Lb;Lb="undefined"!==typeof c&&null!==c?c:a.imagePath;"undefined"===typeof e||null===e?dc=Lc=a.hotspotPath:(dc=Lc=e,".xml"==dc.toLowerCase().substring(dc.length-
4,dc.length)&&(dc=dc.substring(0,dc.lastIndexOf("/"))));"undefined"===typeof d||null===d?(uc=a.annotationPath,ec=a.annotationFolder):(ec=uc=d,".xml"==ec.toLowerCase().substring(ec.length-4,ec.length)&&(ec=ec.substring(0,ec.lastIndexOf("/"))));"undefined"===typeof f||null===f?(trackingPath=a.trackingPath,trackingFolder=a.trackingFolder):(trackingFolder=trackingPath=f,".xml"==trackingFolder.toLowerCase().substring(trackingFolder.length-4,trackingFolder.length)&&(trackingFolder=trackingFolder.substring(0,
trackingFolder.lastIndexOf("/"))));"undefined"===typeof h||null===h?(imageListPath=a.imageListPath,imageListFolder=a.imageListFolder):(imageListFolder=imageListPath=h,".xml"==imageListFolder.toLowerCase().substring(imageListFolder.length-4,imageListFolder.length)&&(imageListFolder=imageListFolder.substring(0,imageListFolder.lastIndexOf("/"))));"undefined"!==typeof Lc&&Z.Utils.stringValidate(Lc)?(a.hotspots=!0,a.annotationPathProvided=!0,a.imageSet&&(a.hotspotPath="multiple")):"undefined"!==typeof uc&&
Z.Utils.stringValidate(uc)&&(a.annotations=!0,a.annotationPathProvided=!0,a.imageSet&&(a.annotationPath="multiple"));"undefined"!==typeof trackingPath&&Z.Utils.stringValidate(trackingPath)&&(a.tracking=!0,a.trackingPathProvided=!0);"undefined"!==typeof imageListPath&&Z.Utils.stringValidate(imageListPath)&&(a.imageListPath=imageListPath,a.imageList=!0);var r=this,Bc=[],Jc=-1,od=0,cc=0,Ya="ZoomifyZIFFile"==a.tileSource?parseInt(Z.Utils.getResource("z90ZIF"),10):parseInt(Z.Utils.getResource("z90PFF"),
10),td=8*Ya,le=4*Ya,sc=0,ab="IIIFImageServer"!=a.tileSource?parseInt(Z.Utils.getResource("z221"),10):parseInt(Z.Utils.getResource("z221IIIF"),10),Ja="IIIFImageServer"!=a.tileSource?parseInt(Z.Utils.getResource("z219"),10):parseInt(Z.Utils.getResource("z219IIIF"),10),Od=parseFloat(Z.Utils.getResource("z218")),Ae=Od/2,oc=parseInt(Z.Utils.getResource("z220"),10),Ed=1==a.toolbarVisible&&a.toolbarBackgroundVisible?a.toolbarH:0,Sb=parseInt(Z.Utils.getResource("DEFAULT_MOUSECLICKTHRESHOLDVIEWPORT"),10),
ye=parseInt(Z.Utils.getResource("DEFAULT_MOUSECLICKTHRESHOLDTIMEVIEWPORT"),10);Z.mobileDevice?parseInt(Z.Utils.getResource("DEFAULT_TOUCHTAPTHRESHOLDVIEWPORTMOBILE"),10):parseInt(Z.Utils.getResource("DEFAULT_TOUCHTAPTHRESHOLDVIEWPORT"),10);parseInt(Z.Utils.getResource("DEFAULT_TOUCHTAPTHRESHOLDTIMEVIEWPORT"),10);var Wc,ga,Db,Ea,pd,vc,Xc,hb,nb,J,Kd,ra,W,$b,Yc,sa,oa,Ka,Ld,ub,mc,hc,Md,mb,Fb,Gb,gb,Nb,m,t,bb,F,qb,Va,gg,eg,Zb,gc,hg,dg,lf,eb,bg,Ee,cg,Tg,bh,lc,w,fc,wc,ig,fg,mf,Lf,ac;C(La);var nd,ie=[],ta=
[],Vc=[],Rg=[],Jd=[],De=[],Ta=[],Sg=[],Jf=[],Ua=[],Kf=[],Qa=1,ha=0,Ha=0,Ia=!1,tc=0,kg=!1,ma,Uc,Kc,fb,pb=[],Ra=[],Sa=[],Eb=[],Bb=[],rd=[],Kb=[],sb=[],Ub=[],jc=[],rf=0,sd=0,Zg=0,ne=0,Je=0,oe=0,Ke=0,Pe,me=0,Rd=0,Td=0,Ac=0,ud=0,Cc=0,Nc=0,Ud=0,xc=[],ja=[],yb=[],kc=[],yc=[],ic=[],vd=null,Wd=0,th=parseInt(Z.Utils.getResource("DEFAULT_VALIDATEVIEWRETRYLIMIT"),10),Oe=parseInt(Z.Utils.getResource("DEFAULT_VALIDATEVIEWRETRYDELAY"),10),Vb=[],za=[],zc=[],Wb=[],sh=new Z.NetConnector(a),Ve=[],We=[],Xe=[],Ye=[],
ee=parseInt(Z.Utils.getResource("z81"),10),rh=parseInt(Z.Utils.getResource("z78"),10),Ge=parseInt(Z.Utils.getResource("z80"),10),Pd=parseInt(Z.Utils.getResource("z77"),10),tc=Pd,He=parseInt(Z.Utils.getResource("z79"),10),ke=parseInt(Z.Utils.getResource("z76"),10),Qd=parseInt(Z.Utils.getResource("z75"),10),he=null,ge=null,fe=null,xf=Z.mobileDevice?parseFloat(Z.Utils.getResource("z173UNCONVERTEDMOBILE")):a.rotationVisible?parseFloat(Z.Utils.getResource("z173UNCONVERTEDROTATION")):parseFloat(Z.Utils.getResource("z173UNCONVERTED")),
Rf=null!==a.panBuffer?a.panBuffer:parseFloat(Z.Utils.getResource("z173")),Fe="unconverted"!=a.tileSource?Rf:xf,qf=Z.mobileDevice?parseFloat(Z.Utils.getResource("z74MOBILE")):parseFloat(Z.Utils.getResource("z74")),pf=parseFloat(Z.Utils.getResource("DEFAULT_z310SIZEMAXBROWSER")),Mf=parseFloat(Z.Utils.getResource("DEFAULT_z310SIZEMAXFIREFOX")),of=parseFloat(Z.Utils.getResource("DEFAULT_z310SIZEMAXMOBILE")),nf=parseFloat(Z.Utils.getResource("DEFAULT_z310SIZEMAXIMAGESET")),X,ca,de,Id,ia,la,Hb,Ib,Y,ea,
pa,nc,Wa,Xa,wb,Ob;X=a.viewerW;ca=a.viewerH;de=Id=0;ca-=Ed;0==a.toolbarPosition&&(Id+=Ed);var na=null,wa,jb,Ba=null,Da=null,Ca="counter"!=Z.labelMode?1:0,Ab=null,A=null,Yd=null,ve=null,Re=!1,Te=parseInt(Z.Utils.getResource("z122"),10),gd=null,se=null,Qc=null,kd,Sc=null,Se=!1,vh=parseInt(Z.Utils.getResource("DEFAULT_PINCHTESTDURATION"),10),Ze=Math.round(parseFloat(Z.Utils.getResource("z176"))*a.panSpeed),Pb=0,x=0,p=null,Cd=null,Pf=parseInt(Z.Utils.getResource("DEFAULT_ANIMATIONOPTIMALMOTIONIMAGES"),
10),Qf=parseInt(Z.Utils.getResource("DEFAULT_ANIMATIONOPTIMALPOSITIONDELTA"),10),yd=null,te=null,Ec=null,rc=null,xb=0,tb=0,Qb=0,Rb=0,Pa=null,Ad=null,Bd=null,Gc=parseFloat(Z.Utils.getResource("z242"))*a.zoomSpeed;Z.mobileDevice&&(Gc/=2);var zb=0,pc=null,wd=0,re=parseInt(Z.Utils.getResource("z238"),10),pe=parseFloat(Z.Utils.getResource("z112"))*a.fadeInSpeed,$c=null,$e=parseInt(Z.Utils.getResource("DEFAULT_ROTATIONSTEPDEGREES"),10),Qe=parseInt(Z.Utils.getResource("DEFAULT_ROTATIONSTEPDURATION"),10),
qc=0,Pc=null,yf=parseFloat(Z.Utils.getResource("z239")),dd=parseFloat(Z.Utils.getResource("z240"));Z.mobileDevice&&(dd/=2);var xd=null,cd=0;if(!a.fullScreenVisible&&!a.fullPageVisible)var Fd,Be,af,bf,Gd,cf,ld,Ce;a.crosshairsVisible&&drawCrosshairs(a.ViewerDisplay,X,ca);if(a.measureVisible||null!==a.editMode)Z.Utils.getResource("z431"),Z.Utils.getResource("z431TOTAL"),Z.Utils.getResource("z433"),Z.Utils.getResource("z430"),Z.Utils.getResource("z434"),parseFloat(Z.Utils.getResource("DEFAULT_MEASURECAPTIONBACKALPHA")),
parseInt(Z.Utils.getResource("z154"),10),parseInt(Z.Utils.getResource("z156"),10);if(a.geoCoordinatesVisible)var ze,wf,uf,vf;if(a.imageFilters)var ad=!1,qe=[],df=[];if(a.watermarks)var ae=[],ef=[];null!==a.imagePath&&(-1!=a.imagePath.indexOf("zComparisonPath")?(a.imageSetPath=a.imagePath.substring(16,a.imagePath.length),a.imageSet=!0,a.comparison=!0):-1!=a.imagePath.indexOf("zSlidePath")?(a.slidePath=a.imagePath.substring(11,a.imagePath.length),a.slideshow=!0):-1!=a.imagePath.indexOf("zAnimationPath")?
(a.imageSetPath=a.imagePath.substring(15,a.imagePath.length),a.imageSet=!0,a.animation=!0):-1!=a.imagePath.indexOf("zSlidestackPath")&&(a.imageSetPath=a.imagePath.substring(16,a.imagePath.length),a.imageSet=!0,a.slidestack=!0));a.slideshow&&(parseFloat(Z.Utils.getResource("z211")),a.slideTransitionTimeout=null,a.slideOpacity=0);if(a.zoomRectangle||a.measureVisible||a.tour||a.hotspots||a.annotations||a.tracking){var Ue=null,ba=[],ff=[],gf=[],ib=null,Rc=null;parseInt(Z.Utils.getResource("DEFAULT_MOUSECLICKTHRESHOLDHOTSPOT"),
10);var Dc=!0,Fc=null;new Z.NetConnector(a);Z.Utils.getResource("DEFAULT_ICONLINEWIDTH");Z.Utils.getResource("z177");parseFloat(Z.Utils.getResource("DEFAULT_POLYGONALPHA"));parseInt(Z.Utils.getResource("z180"),10);Z.Utils.getResource("z96");Z.Utils.getResource("z98");Z.Utils.getResource("z113");Z.Utils.getResource("z216");var xe=parseInt(Z.Utils.getResource("z97"),10);Z.Utils.getResource("z177FREEHAND");var $d=a.captionTextColor?Z.Utils.stringValidateColorValue(a.captionTextColor):Z.Utils.getResource("z89");
a.captionBackColor?Z.Utils.stringValidateColorValue(a.captionBackColor):Z.Utils.getResource("DEFAULT_CAPTIONBACKCOLOR");parseInt(Z.Utils.getResource("z129"),10);parseInt(Z.Utils.getResource("z160"),10);parseInt(Z.Utils.getResource("z151"),10);parseInt(Z.Utils.getResource("z130"),10);parseInt(Z.Utils.getResource("z161"),10);parseInt(Z.Utils.getResource("z152"),10);Z.mobileDevice&&(xe*=2)}if(null!==a.imagePath&&"null"!=a.imagePath){var md=!Z.localUse;if(Z.localUse)"ZoomifyZIFFile"!=a.tileSource||Z.localFileSelected?
"ZoomifyPFFFile"!=a.tileSource||Z.localFileSelected?Z.browser==Z.browsers.CHROME||Z.browser==Z.browsers.OPERA||Z.browser==Z.browsers.IE&&11==Z.browserVersion||Z.browser==Z.browsers.SAFARI&&7<=Z.browserVersion?a.showMessage(Z.Utils.getResource("z288"),!1,a.messageDurationStandard,"center"):md=!0:a.showMessage(Z.Utils.getResource("z289"),!1,Z.messageDurationStort,"center"):a.showMessage(Z.Utils.getResource("z290"),!1,a.messageDurationShort,"center");else if(null!==a.imageW&&null!==a.imageH&&null!==
a.sourceMagnification)"undefined"!==typeof r.getStatus?E(a.imageW,a.imageH,ab,Ja,null,null,null,null,a.sourceMagnification,a.focal,a.quality):window.setTimeout(function(){E(a.imageW,a.imageH,ab,Ja,null,null,null,null,a.sourceMagnification,a.focal,a.quality)},100);else if(null!==a.imageProperties){var zf=Z.Utils.xmlConvertTextToDoc(a.imageProperties),md=!1;K(zf)}else-1==a.imagePath.indexOf("zComparisonPath")&&-1==a.imagePath.indexOf("zSlidePath")&&-1==a.imagePath.indexOf("zOverlayPath")&&-1==a.imagePath.indexOf("zAnimationPath")&&
-1==a.imagePath.indexOf("zSlidestackPath")&&(md=!0);if(md){var Af=new Z.NetConnector(a);$a(Lb,Af,La)}else return}this.clearAll=function(b,c,d,e){b&&(sd=rf=0,"undefined"!==typeof Kb&&Z.Utils.arrayClear(Kb),"undefined"!==typeof sb&&Z.Utils.arrayClear(sb),"undefined"!==typeof rd&&Z.Utils.arrayClear(rd),"undefined"!==typeof xc&&Z.Utils.arrayClear(xc),"undefined"!==typeof ja&&Z.Utils.arrayClear(ja),"undefined"!==typeof yb&&Z.Utils.arrayClear(yb),"undefined"!==typeof kc&&Z.Utils.arrayClear(kc),"undefined"!==
typeof yc&&Z.Utils.arrayClear(yc),"undefined"!==typeof ic&&Z.Utils.arrayClear(ic),"undefined"!==typeof Ub&&Z.Utils.arrayClear(Ub),"undefined"!==typeof jc&&Z.Utils.arrayClear(jc),"undefined"!==typeof zc&&Z.Utils.arrayClear(zc),"undefined"!==typeof za&&Z.Utils.arrayClear(za),"undefined"!==typeof Vb&&Z.Utils.arrayClear(Vb),"undefined"!==typeof Wb&&Z.Utils.arrayClear(Wb),"undefined"!==typeof Ye&&Z.Utils.arrayClear(Ye),"undefined"!==typeof Xe&&Z.Utils.arrayClear(Xe),"undefined"!==typeof We&&Z.Utils.arrayClear(We),
"undefined"!==typeof Ve&&Z.Utils.arrayClear(Ve),"undefined"!==typeof fullImageTilesAllCachedNames&&Z.Utils.arrayClear(fullImageTilesAllCachedNames));c&&I();d&&(mb&&("undefined"!==typeof ae&&Z.Utils.arrayClear(ae),"undefined"!==typeof ef&&Z.Utils.arrayClear(ef)),gb&&("undefined"!==typeof ba&&Z.Utils.arrayClear(ba),"undefined"!==typeof ff&&Z.Utils.arrayClear(ff),"undefined"!==typeof gf&&Z.Utils.arrayClear(gf),null!=hotspotList?(hotspotList.parentNode.removeChild(hotspotList),hotspotList=null,"undefined"!==
typeof hotspotListDP&&Z.Utils.arrayClear(hotspotListDP)):(null!=poiList&&(poiList.parentNode.removeChild(poiList),poiList=null,"undefined"!==typeof poiListDP&&Z.Utils.arrayClear(poiListDP)),null!=labelList&&(labelList.parentNode.removeChild(labelList),labelList=null,"undefined"!==typeof labelListDP&&Z.Utils.arrayClear(labelListDP),"undefined"!==typeof labelListCurrentDP&&Z.Utils.arrayClear(labelListCurrentDP)),null!=noteList&&(noteList.parentNode.removeChild(noteList),noteList=null,"undefined"!==
typeof noteListDP&&Z.Utils.arrayClear(noteListDP),"undefined"!==typeof noteListCurrentDP&&Z.Utils.arrayClear(noteListCurrentDP)))),a.imageFilters&&(ad=!1,"undefined"!==typeof qe&&Z.Utils.arrayClear(qe),"undefined"!==typeof df&&Z.Utils.arrayClear(df)));e&&(ga&&Z.Utils.clearDisplay(ga,a),ra&&Z.Utils.clearDisplay(ra,a),sa&&Z.Utils.clearDisplay(sa,a),ub&&Z.Utils.clearDisplay(ub,a),mb&&Z.Utils.clearDisplay(mb,a),fc&&Z.Utils.clearDisplay(fc,a),gb&&(Z.Utils.clearDisplay(gb,a),gb=null),t&&(r.clearAnnotationPanel(La),
ob("annotationPanelInitializedViewport",!1),t=null),qb&&Z.Utils.clearDisplay(qb,a),Zb&&Z.Utils.clearDisplay(Zb,a),lf&&Z.Utils.clearDisplay(lf,a),Ee&&Z.Utils.clearDisplay(Ee,a))};this.setSizeAndPosition=function(a,b,c,d){q(a,b,c,d)};this.syncViewportResize=function(b,c,d,e){r.setSizeAndPosition(a.viewerW,a.viewerH,0,0);r.resizeViewport(b,c,d,e)};this.resizeViewport=function(a,b,c,d){r.validateXYZDefaults();r.setView(a,b,c,d)};this.loadImageProperties=function(a,b,c){$a(a,b,c)};this.parseZIFHeader=
function(b){I();if(73==b[0]&&73==b[1]&&43==b[2]&&0==b[3]&&8==b[4]&&0==b[5]&&0==b[6]&&0==b[7]&&16==b[8]&&0==b[9]&&0==b[10]&&0==b[11]&&0==b[12]&&0==b[13]&&0==b[14]&&0==b[15]){for(var c=Z.Utils.longValue(b,8),d=Z.Utils.longValue(b,c),e=1,g=null,f=null,l=null,m=null,t=null,h=null,h=2;0!=c;){for(g=0;g<d;g++)switch(f=c+8+20*g,Z.Utils.shortValue(b,f)){case 256:pb[e-1]=Z.Utils.intValue(b,f+12);break;case 257:Ra[e-1]=Z.Utils.intValue(b,f+12);break;case 322:l=Z.Utils.intValue(b,f+12);break;case 323:m=Z.Utils.intValue(b,
f+12);break;case 324:var F=ta[e-1]=Z.Utils.longValue(b,f+4);ie[e-1]=Z.Utils.longValue(b,f+12);t+=F;break;case 325:F=De[e-1]=Z.Utils.longValue(b,f+4),Jd[e-1]=1==F?Z.Utils.intValue(b,f+12):2==F?Z.Utils.intValue(b,f+12)+","+Z.Utils.intValue(b,f+16):Z.Utils.longValue(b,f+12)}c=Z.Utils.longValue(b,c+20*d+8);d=Z.Utils.longValue(b,c);e++}g=pb[0];f=Ra[0];Qa=e-1;pb.reverse();Ra.reverse();ta.reverse();ie.reverse();De.reverse();Jd.reverse();!isNaN(g)&&0<g&&!isNaN(f)&&0<f&&!isNaN(l)&&0<l&&!isNaN(m)&&0<m&&0<t?
Jb("initializedViewport")?n(g,f,l,m,t,h,null,null,null,null,null):E(g,f,l,m,t,h,null,null,null,null,null):a.showMessage(Z.Utils.getResource("z250"),!1,a.messageDurationStandard,"center")}};this.parseZIFOffsetChunk=function(a,b){var c=Z.Utils.arrayIndexOfObjectValue(Vc,"chunkID",b);-1!=c&&(Vc[c].chunk=a,Ma(b,"offset"))};this.parseZIFByteCountChunk=function(a,b){var c=Z.Utils.arrayIndexOfObjectValue(Ta,"chunkID",b);-1!=c&&(Ta[c].chunk=a,Ma(b,"byteCount"))};this.parseZIFImage=function(b,c,d){b="data:image/jpeg;base64,"+
Z.Utils.encodeBase64(b);var e;"image-display"==d?e=Jb("imageSaving")?onTileLoadToSave:V:"image-backfill"==d?e=Jb("imageSaving")?z599ToSave:L:"navigator"==d?a.comparison&&0!=La?a.Navigator2&&(e=a.Navigator2.z556):a.Navigator&&(e=a.Navigator.z556):"gallery"==d&&(e=a.Gallery.initializeGallery);c=Z.Utils.createCallback(null,e,c);Z.Utils.createImageElementFromBytes(b,c)};this.parsePFFImage=function(b,c,d){if(a.pffJPEGHeadersSeparate){var e=Z.Utils.intValue(b,b.length-4,!0);b="data:image/jpeg;base64,"+
Z.Utils.encodeBase64(Jf[e],0)+Z.Utils.encodeBase64(b,0)}else b="data:image/jpeg;base64,"+Z.Utils.encodeBase64(b);var g;"image-display"==d?g=Jb("imageSaving")?onTileLoadToSave:V:"image-backfill"==d?g=Jb("imageSaving")?z599ToSave:L:"navigator"==d?g=a.Navigator.z556:"gallery"==d&&(g=a.Gallery.initializeGallery);c=Z.Utils.createCallback(null,g,c);Z.Utils.createImageElementFromBytes(b,c)};this.parsePFFHeader=function(b){I();if("undefined"!==typeof b&&null!==b){var c=null,d=null,e=null,g=null,f=null,l=
null;Z.Utils.intValue(b,8,!0);g=Z.Utils.intValue(b,108,!0);l=1060+Z.Utils.intValue(b,116,!0);f=Z.Utils.intValue(b,124,!0);Z.Utils.intValue(b,136,!0);a.pffJPEGHeadersSeparate=!0;c=Z.Utils.intValue(b,1052,!0);d=Z.Utils.intValue(b,1056,!0);e=g;a.pffJPEGHeadersSeparate?(a.imageW=c,a.imageH=d,a.imageCtrX=a.imageW/2,a.imageCtrY=a.imageH/2,a.imageD=Math.round(Math.sqrt(c*c+d*d)),od=Jc=null,cc=l,sc=f,ab=e,Ja=g,(new Z.NetConnector(a)).loadByteRange(Lb,1060,l,"jpegHeaders")):ua(c,d,e,g,f,null,null,l,null,null,
null)}};this.parsePFFJPEGHeaders=function(a){if("undefined"!==typeof a&&null!==a){for(var b=Z.Utils.intValue(a,0,!0),c=4,d=0;d<b;d++){var e=Z.Utils.intValue(a,c,!0),c=c+4,g=Z.Utils.dataSlice(a,c,c+e),c=c+e;Jf.push(g)}ua()}};this.z602=function(a,b){K(a,b)};this.validateXYZDefaults=function(a){H(a)};this.getViewW=function(){return X};this.getViewH=function(){return ca};this.getDisplayW=function(){return ia};this.getDisplayH=function(){return la};this.getImagePath=function(){return Lb};this.setImagePath=
function(a){Lb=a};this.getViewportID=function(){return La};this.getTierCount=function(){return Qa};this.getTileW=function(){return ab};this.getTileH=function(){return Ja};this.getTierCurrent=function(){return ha};this.getTierBackfill=function(){return Ha};this.getTierBackfillDynamic=function(){return Ia};this.getTierBackfillOversize=function(){return tc};this.getTierScale=function(){return ma};this.getX=function(a){return M(a)};this.getY=function(a){return O(a)};this.getZoom=function(a){return rb(a)};
this.getRotation=function(b){return a.imageR};this.getCoordinates=function(){return new Z.Utils.Point(M(),O())};this.getCoordinatesBookmark=function(a,b){var c="";return c=b?"?"+r.getViewCoordinatesIIIFString(a,null,"bookmark"):"?"+r.getViewCoordinatesString(a)};this.getViewCoordinatesString=function(a){var b="x="+Math.round(M(a)).toString(),c="&y="+Math.round(O(a)).toString(),d="&z="+Math.round(100*rb(a)).toString();a=Math.round(r.getRotation(a));return b+c+d+(0==a?"":"&r="+a.toString())};this.getCoordinatesFull=
function(a){return new Z.Utils.Coordinates(M(a),O(a),rb(a),r.getRotation(a))};this.getCoordinatesDisplayFull=function(){return new Z.Utils.CoordinatesDisplayStyle(J.left,J.top,oa.width,oa.height,oa.left,oa.top,W.width,W.height,W.left,W.top,J.rotation)};this.getTiersScaleUpMax=function(){return Od};this.getTiersScaleDownMax=function(){return Ae};this.getTilesCacheMax=function(){return oc};this.getTierWs=function(){return pb.join(",")};this.getTierHs=function(){return Ra.join(", ")};this.getTierTileCounts=
function(){return Bb.join(", ")};this.getTilesToLoad=function(){return rf};this.getTilesLoadingNames=function(){return""==ja.join(", ")?"Current view loading complete":ja.join(", ")};this.getTilesToDraw=function(){return Cc};this.getConstrainPan=function(b){return a.constrainPan};this.setConstrainPan=function(b){a.constrainPan="0"!=b;a.constrainPanLimit=parseInt(b,10);a.constrainPanStrict="3"==b;a.constrainPan&&r.toggleConstrainPan(!0)};this.getSmoothPan=function(){return a.smoothPan};this.setSmoothPan=
function(b){a.smoothPan=b};this.getSmoothPanEasing=function(){return a.smoothPanEasing};this.setSmoothPanEasing=function(b){a.smoothPanEasing=b};this.getSmoothPanGlide=function(){return a.smoothPanGlide};this.setSmoothPanGlide=function(b){a.smoothPanGlide=b};this.getSmoothZoom=function(){return a.smoothZoom};this.setSmoothZoom=function(b){a.smoothZoom=b};this.getSmoothZoomEasing=function(){return a.smoothZoomEasing};this.setSmoothZoomEasing=function(b){a.smoothZoomEasing=b};this.setCoordinatesDisplayVisibility=
function(b){b?(Z.Utils.addEventListener(document,"mousemove",Dd),Z.Utils.addEventListener(document,"mousedown",Dd)):(a.coordinatesVisible=!1,Z.Utils.removeEventListener(document,"mousemove",Dd),Z.Utils.removeEventListener(document,"mousedown",Dd))};this.setTourPath=function(a,b){r.setHotspotPath(a,b)};this.setHotspotPath=function(b,c){"undefined"===typeof b||Z.Utils.stringValidate(b)?(a.hotspotPath=Z.Utils.stringRemoveTrailingSlashCharacters(b),a.hotspotFolder=a.hotspotPath,".xml"==a.hotspotPath.toLowerCase().substring(a.hotspotPath.length-
4,a.hotspotPath.length)&&(a.hotspotFolder=a.hotspotFolder.substring(0,a.hotspotFolder.lastIndexOf("/"))),c||(r.deleteAllHotspots(),z572(La))):(a.hotspotPath=null,a.hotspotFolder=null,r.deleteAllHotspots())};this.getHotspotCurrentID=function(){return ib};this.getHotspotCurrentIDExternal=function(){var a=r.getHotspotCurrentID();return currIDExt=ba[a].id};this.getHotspots=function(){return ba};this.setHotspots=function(a){ba=a.slice(0)};this.setAnnotationPath=function(b,c){if("undefined"!==typeof b&&
Z.Utils.stringValidate(b)){a.annotationPath=Z.Utils.stringRemoveTrailingSlashCharacters(b);a.annotationFolder=a.annotationPath;var d=a.annotationPath.toLowerCase();".json"!=d.substring(a.annotationPath.length-5,a.annotationPath.length)&&".xml"!=d.substring(a.annotationPath.length-4,a.annotationPath.length)&&(a.annotationPath=a.annotationPath+"/"+Z.Utils.getResource("z69"));".xml"==d.substring(a.annotationPath.length-4,a.annotationPath.length)&&(a.annotationFolder=a.annotationFolder.substring(0,a.annotationFolder.lastIndexOf("/")));
a.annotations=!0;c||(r.deleteAllAnnotations(),z572(La))}else a.annotationPath=null,a.annotationFolder=null,r.deleteAllAnnotations(),a.annotations=!1};this.getAnnotationsXML=function(){return annotationsXML=z669(annotationsXML)};this.setAnnotationsXML=function(a){annotationsXML=a};this.testSetAnnotationPath=function(){r.setAnnotationPath("Assets/Annotations/annotations2.xml")};this.setXMLCallbackFunction=function(b){a.xmlCallbackFunction=b};this.setLabelsClickDrag=function(b){a.labelsClickDrag=b};
this.setVisibility=function(a){a=a?"inline-block":"none";Wc&&!Db&&(Db=Wc.style);Db&&(Db.display=a);hb&&!J&&(J=hb.style);J&&(J.display=a)};this.setOpacity=function(a){Z.Utils.setOpacity(hb,2<=a?a/100:0>a?0:1<a?1:a)};this.showLists=function(b){a.hotspots&&setVisibilityHotspotChoiceList(b,La.toString());a.imageSet&&!a.comparison&&a.setVisibilityImageSetChoiceList(b)};this.z619=function(c){xa();c||(P(Qd,sb),he=!0);Qa>He&&(c||!Z.multipleViewers||!a.imageSet||a.comparison||b==a.imageSetStart)&&(P(ke,sb),
ge=!0,Qa>Ge&&(P(Pd,sb),fe=!0),ob("backfillPrecachedViewport",!0));sb.sort();sb=Z.Utils.arrayUnique(sb);rd=sb.slice(0);Fa("tilesBackfillToPrecache",null,rd.length);lg(sb,L,"simple","image-backfill")};this.prez581s=function(b){if(a.imageSet)b=a.animation?Z.Utils.getResource("ALERT_PRELOADINGIMAGESET-LOADINGTILESIMAGES"):Z.Utils.getResource("ALERT_PRELOADINGIMAGESET-LOADINGTILESSLIDES"),a.showMessage(b,!1,a.messageDurationLong,"center"),r.updateView(!0,!0);else{a.showMessage(Z.Utils.getResource("ALERT_PRELOADINGONEIMAGE-LOADINGTILES"),
!1,a.messageDurationLong,"center");Z.Utils.arrayClear(ja);b=0;for(var c=Qa;b<c;b++)for(var d=Ie(b,null,!0,!0),e=d.l,g=d.r;e<=g;e++)for(var f=d.t,l=d.b;f<=l;f++){var m=b+"-"+e+"-"+f;ja[ja.length]=m}if(0<ja.length)for(d=(new Date).getTime(),b=0,c=ja.length;b<c;b++)if(m=ja[b])m=new cb(m,"image-display"),N(m,d,V)}};this.updateView=function(a,b){da(a,b)};syncTransitionCanvas=function(){ub&&mc&&hc&&(ub.width=sa.width,ub.height=sa.height,mc.width=oa.width,mc.height=oa.height,mc.left=oa.left,mc.top=oa.top,
hc.restore(),hc.save(),hc.translate(Hb,Ib),hc.scale(ma,ma))};this.formatTilePath=function(b,c,d,e){var g;if("ZoomifyZIFFile"==a.tileSource){var f=r.getViewportID();g="offsetLoading";var l="loading",m="loading",t;if(1==ta[b])l=ie[b];else{var h=new R(b,c,d),F=h.chunkID+","+b+","+c+","+d+","+e+",offset";t=Z.Utils.arrayIndexOfObjectValue(Vc,"chunkID",h.chunkID);-1==t?(Fa("z532",h.chunkID+","+b+","+c+","+d+","+e),-1==Z.Utils.arrayIndexOf(za,F)&&(za[za.length]=F),Vc[Vc.length]={chunkID:h.chunkID,chunk:"loading"},
t=new Z.NetConnector(a),t.loadByteRange(Lb,h.chunkStart,h.chunkEnd,"offset",null,h.chunkID,f)):"loading"==Vc[t].chunk?-1==Z.Utils.arrayIndexOf(za,F)&&(za[za.length]=F):"loading"!=Vc[t].chunk&&(t=Vc[t].chunk,l=Z.Utils.longValue(t,h.offsetStartInChunk))}1==De[b]?m=Jd[b]:(t=c+d*Sa[b],2==De[b]?(b=Jd[b],m=0==t?b.substring(0,b.indexOf(",")):b.substring(b.indexOf(",")+1,b.length)):(h=new S(b,c,d),b=h.chunkID+","+b+","+c+","+d+","+e+",byteCount",t=Z.Utils.arrayIndexOfObjectValue(Ta,"chunkID",h.chunkID),-1==
t?(-1==Z.Utils.arrayIndexOf(za,b)&&(za[za.length]=b),Ta[Ta.length]={chunkID:h.chunkID,chunk:"loading"},t=new Z.NetConnector(a),t.loadByteRange(Lb,h.chunkStart,h.chunkEnd,"byteCount",null,h.chunkID,f)):"loading"==Ta[t].chunk?-1==Z.Utils.arrayIndexOf(za,b)&&(za[za.length]=b):"loading"!=Ta[t].chunk&&(t=Ta[t].chunk,m=Z.Utils.intValue(t,h.bcStartInChunk))));"loading"==l||isNaN(l)||"loading"==m||isNaN(m)||(g=Lb+"?"+l.toString()+","+m.toString())}else if("ZoomifyImageFolder"==a.tileSource){e=d*Sa[b]+c;for(g=
0;g<b;g++)e+=Bb[g];b=Lb+"/TileGroup"+Math.floor(e/256)+"/"+b+"-"+c+"-"+d+"."+a.tileType;if(Z.browser==Z.browsers.IE&&9>Z.browserVersion||0==oc)b=Z.Utils.cacheProofPath(b);g=b}else if("ZoomifyPFFFile"==a.tileSource&&null===a.tileHandlerPathFull){g=r.getViewportID();l="offsetLoading";f=m="loading";f=0;for(m=Qa-1;m>b;m--)f+=Bb[m];f+=d*Sa[b]+c;m=Math.floor(f/Ya);t=cc+Ya*m*8;var h=t+8*Ya,v=f-m*Ya,F=8*v,n=m+","+b+","+c+","+d+","+e+",chunk",f=Z.Utils.arrayIndexOfObjectValue(Ua,"chunkID",m);-1==f?(Fa("z531",
m+","+b+","+c+","+d+","+e),-1==Z.Utils.arrayIndexOf(za,n)&&(za[za.length]=n),Ua[Ua.length]={chunkID:m,chunk:"loading"},(new Z.NetConnector(a)).loadByteRange(Lb,t,h,"offset",null,m,g)):"loading"==Ua[f].chunk?-1==Z.Utils.arrayIndexOf(za,n)&&(za[za.length]=n):(m=Z.Utils.longValue(Ua[f].chunk,8*(v-1),!0),f=Z.Utils.longValue(Ua[f].chunk,F,!0)-m-1,"loading"==m||isNaN(m)||"loading"==f||isNaN(f)||(l=Lb+"?"+m.toString()+","+f.toString()));g=l}else if("ZoomifyPFFFile"==a.tileSource){f="offsetLoading";t=g=0;
for(l=Qa-1;l>b;l--)g+=Bb[l];g+=d*Sa[b]+c;l=Math.floor(g/Ya);t=-1==g-1?0:g-1;m=Math.floor(t/Ya);"undefined"===typeof Ua[l]||"offsetLoading"==Ua[l]||"undefined"===typeof Ua[m]||"offsetLoading"==Ua[m]?(g=l+","+b+","+c+","+d+","+e+",chunk",-1==Z.Utils.arrayIndexOf(za,g)&&(za[za.length]=g),Fa("z531",l+","+b+","+c+","+d+","+e),"undefined"===typeof Ua[l]&&(Ua[l]="offsetLoading",b=cc+Ya*l*8,c=b+8*Ya,Aa(b,c,l)),"undefined"===typeof Ua[m]&&(Ua[m]="offsetLoading",b=cc+Ya*m*8,c=b+8*Ya,Aa(b,c,l))):(e=Math.floor(Ua[l][0]),
f=Math.floor(Ua[m][0]),m=Ua[m][1],l=Ua[l][1],t=t%Ya*9,m=Math.floor(parseFloat(m.substring(t,t+9))),t=g%Ya*9,l=Math.floor(parseFloat(l.substring(t,t+9))),g=0==g?cc+8*sc:f+m,e+=l,f=0<e-g?a.tileHandlerPathFull+"?file="+Lb+"&requestType=0&begin="+g.toString()+"&end="+e.toString()+"&vers="+Jc.toString()+"&head="+od.toString():"z647:"+b+"-"+c+"-"+d);g=f}else"DZIFolder"==a.tileSource?g=je("tile",b,c,d,e):"IIIFImageServer"==a.tileSource?g=formatTilePathIIIFImageServer(b,c,d,e):"ImageServer"==a.tileSource&&
(g=z530(b,c,d,e));return g};this.formatTilePathDZI=function(a,b,c,d){return je("tile",a,b,c,d)};this.formatFilePathDZI=function(a,b,c,d,e){return je(a,b,c,d,e)};this.parsePFFOffsetChunk=function(a,b){var c=Z.Utils.arrayIndexOfObjectValue(Ua,"chunkID",b);-1!=c&&(Ua[c].chunk=a,Ma(b,"chunk"))};this.parsePFFOffsetChunkServlet=function(a){var b=parseInt(a.documentElement.getAttribute("BEGIN"),10);a=a.documentElement.getAttribute("REPLYDATA");var c=Kf[b],b=Math.floor((b-cc)/8/Ya);Ua[b]=[];Ua[b]=a.split(",",
2);Ma(c,"chunk")};this.getClickCoordsAtZoom=function(a,b){var c=this.getClickCoordsInImage(a,b);return new Z.Utils.Point(c.x*b,c.y*b)};this.getClickCoordsInImage=function(a,b,c){a=Z.Utils.event(a);var d=null;if(a){var e=a.type;if("undefined"===typeof b||null==b)b=rb();if("undefined"===typeof c||null===c)"touchstart"==e||"touchend"==e||"touchcancel"==e?(Ab=Z.Utils.getFirstTouch(a),"undefined"!==typeof Ab&&(target=Ab.target,c=new Z.Utils.Point(Ab.pageX,Ab.pageY))):(target=Z.Utils.target(a),relatedTarget=
Z.Utils.relatedTarget(a),c=Z.Utils.getMousePosition(a));"undefined"!==typeof c&&null!==c&&(a=r.z479(c.x,c.y),d=r.z485(a.x,a.y,b))}return d};this.getClickZoomCoords3D=function(b,c,d,e,g){var f=parseFloat(Z.Utils.getResource("z93TIERSKIPTHRESHOLD"));c=r.z479(c.x,c.y);c=r.z485(c.x,c.y,a.imageZ);var l=va(d,e);b=b.altKey;g?b?l=a.fitZ:(g=U(d,a.fitZ),e-g<f?l=a.fitZ:e>1+f?l=va(d,1):0<d?l=va(d-1,1):"unconverted"==a.tileSource&&(l=a.fitZ)):b?l=a.maxZ:e<1-f?l=va(d,1):d<Qa-1?l=va(d+1,1):1<a.maxZ&&(l=a.maxZ);
return new Z.Utils.Point3D(c.x,c.y,l)};this.calculateCurrentCenterCoordinates=function(b,c,d){if("undefined"===typeof b||null===b)b=new Z.Utils.Point(parseFloat(J.left),parseFloat(J.top));if("undefined"===typeof d||null===d)d=r.getRotation();0>d&&(d+=360);if("undefined"===typeof c||null===c)c=rb();var e=Math.round(a.imageX-(b.x-Y)/c);b=Math.round(a.imageY-(b.y-ea)/c);d=Z.Utils.getPositionRotated(e,b,a.imageX,a.imageY,-d,a.imageR);return new Z.Utils.Point(d.x,d.y)};this.z542=function(a,b,c,d){return Ie(a,
b,c,d)};this.z541=function(a,b,c){return Le(a,b,c)};this.HotspotsAllBoundingBoxInPixels=function(){for(var b=new HotspotContext,c=a.imageCtrX,d=a.imageCtrX,e=a.imageCtrY,g=a.imageCtrY,f=0,l=ba.length;f<l;f++){var m=ba[f],t=new HotspotDimensions(m,b,null,!0),h=m.x-t.w/2,F=m.x+t.w/2,v=m.y-t.h/2,m=m.y+t.h/2;h<c&&(c=h);F>d&&(d=F);v<e&&(e=v);m>g&&(g=m)}b=parseInt(Z.Utils.getResource("DEFAULT_SAVEIMAGELABELMARGIN"),10);c-=b;e-=b;d+=b;g+=b;this.l=c;this.r=d;this.t=e;this.b=g;this.x=c+(d-c)/2;this.y=e+(g-
e)/2};this.z480=function(a,b){var c=r.z479(a,b);return new Z.Utils.Point(c.x-Y,c.y-ea)};this.convertViewportDisplayCoordsToPageCoords=function(a,b){var c=r.convertViewportCoordsToPageCoords(a+Y,b+ea);return new Z.Utils.Point(c.x,c.y)};this.z479=function(a,b){var c=Z.Utils.getElementPosition(Yc);return new Z.Utils.Point(a-c.x+Y,b-c.y+ea)};this.convertViewportCoordsToPageCoords=function(a,b){var c=Z.Utils.getElementPosition(Yc);return new Z.Utils.Point(a+c.x-Y,b+c.y-ea)};this.convertPageCoordsToImageCoords=
function(b,c){var d=r.z479(b,c),d=r.z485(d.x,d.y,a.imageZ);return new Z.Utils.Point(d.x,d.y)};this.convertImageCoordsToPageCoords=function(b,c,d,e){b=r.z478(b,c,d,e);b=r.convertViewportCoordsToPageCoords(b.x,b.y,a.imageZ);return new Z.Utils.Point(b.x,b.y)};this.z485=function(b,c,d,e){if("undefined"===typeof d||null===d)d=a.imageZ;if("undefined"===typeof e||null===e)e=a.imageR;0>e&&(e+=360);var g=parseFloat(J.left)+Hb,f=parseFloat(J.top)+Ib;b-=g;c-=f;0!=a.imageR&&(viewportClickPt=Z.Utils.rotatePoint(b,
c,e),b=viewportClickPt.x,c=viewportClickPt.y);return new Z.Utils.Point(b/d+a.imageX,c/d+a.imageY)};this.z478=function(b,c,d,e){if("center"==b||isNaN(parseFloat(b)))b=a.imageCtrX;if("center"==c||isNaN(parseFloat(c)))c=a.imageCtrY;if("undefined"===typeof d||null===d)d=a.imageZ;if("undefined"===typeof e||null===e)e=a.imageR;0>e&&(e+=360);b=(b-a.imageX)*d;c=(c-a.imageY)*d;0!=a.imageR&&(viewportClickPt=Z.Utils.rotatePoint(b,c,-e),b=viewportClickPt.x,c=viewportClickPt.y);e=parseFloat(J.left)+Hb;d=parseFloat(J.top)+
Ib;return new Z.Utils.Point(b+e,c+d)};this.convertImageCoordsToViewportEdgeCoords=function(a,b,c,d){Me(a,b,c,d)};this.convertViewportEdgeCoordsToImageCoords=function(a,b,c,d){bc(a,b,c,d)};this.z468=function(a,b,c){return vb(a,b,c)};this.calculateZoomToFill=function(a,b,c){return v(a,b,c)};this.calculateZoomForResize=function(b,c,d,e,g){var f=b,l=a.imageW*b,m=a.imageH*b;c=e/c;d=g/d;l<e&&m<g?f=b:l==e&&m<g?f=-1:l<e&&m==g?f=-1:l>e&&m<=g?f=b*c:l<=e&&m>g?f=b*d:l>e&&m>g&&(e=1,1<=c&&1<=d?e=c>d?c:d:1>=c&&
1>=d&&(e=c<d?c:d),f=b*e);f<a.minZ&&(f=a.minZ);f>a.maxZ&&(f=a.maxZ);return f};this.z482=function(a,b){return va(a,b)};this.syncViewportToNavigator=function(b){var c=a.imageR;0>c&&(c+=360);var d=db(b.x,b.y,a.imageZ,c,"image");b=a.imageY;var e=d.y,d=dX=a.imageX-d.x;b=dY=b-e;0!=c&&(270<=c?(d=dY,b=-dX):180<=c?(d=-dX,b=-dY):90<=c&&(d=-dY,b=dX));c=d*a.imageZ;b*=a.imageZ;e=b+ea;J.left=c+Y+"px";J.top=e+"px";ga&&Ia&&(Z.mobileDevice||Math.abs(c)>X/2||Math.abs(b)>ca/2)&&Tb(ga,tc,Kb,"simple",!1,"Updating backfill oversize display")};
this.getStatus=function(a){return Jb(a)};this.setStatus=function(a,b){ob(a,b)};this.traceDebugValues=function(a,b,c,d){Fa(a,b,c,d)};this.updateProgress=function(b,c){var d;0==b&&0==c?(Q("loadingTilesComplete"),Q("loadingTilesCompleteGetLabelIDs"),d=void 0):(d=Math.round(100-c/b*100),d=Math.round(d/10));a.updateViewPercent=d;a.Toolbar&&a.ToolbarDisplay&&a.Toolbar.getInitialized()&&a.Toolbar.updateProgress(b,c)};this.setViewNoUpdate=function(a,b,c,d,e,g,f,l,m,t,h){J.left=a;J.top=b;oa.width=c;oa.height=
d;oa.left=e;oa.top=g;W.width=f;W.height=l;W.left=m;W.top=t;J.rotation=h};this.setView=function(a,b,c,d,e,g){If(a,b,c,d,e,g)};this.zoom=function(b){if("stop"!=b||"stop"!=a.zooming){switch(b){case "out":0<=zb&&(zb-=Gc);break;case "in":0>=zb&&(zb+=Gc);break;case "stop":zb=0}a.zooming=0==zb?"stop":0<zb?"in":"out";if(0!=zb){if(!pc){if(0>zb&&a.imageZ>a.minZ||0<zb&&a.imageZ<a.maxZ)r.toggleWatermarks(!1),ba&&39<ba.length&&r.setHotspotsVisibility(!1);a.useCanvas||Z.Utils.clearDisplay(mb,a);pc=window.setTimeout(sg,
re)}}else $g(),da(),r.toggleWatermarks(!0),ba&&39<ba.length&&r.setHotspotsVisibility(!0)}};this.pan=function(b){if("horizontalStop"!=b||"stop"!=a.panningX)if("verticalStop"!=b||"stop"!=a.panningY){if(!a.tracking)switch(b){case "left":0>=Pb&&(Pb+=Ze);break;case "up":0>=x&&(x+=Ze);break;case "down":0<=x&&(x-=Ze);break;case "right":0<=Pb&&(Pb-=Ze);break;case "horizontalStop":Pb=0;break;case "verticalStop":x=0;break;case "stop":x=Pb=0}a.panningX=0==Pb?"stop":0<Pb?"left":"right";a.panningY=0==x?"stop":
0<x?"up":"down";va(ha,1);va(ha,1);0!=Pb||0!=x?pc||(r.toggleWatermarks(!1),a.useCanvas||Z.Utils.clearDisplay(mb,a),ba&&39<ba.length&&r.setHotspotsVisibility(!1),pc=window.setTimeout(sg,re)):($g(),da(),r.toggleWatermarks(!0),ba&&39<ba.length&&r.setHotspotsVisibility(!0))}};this.zoomAndPanToView=function(b,c,d,e,g,f,l,m){r.zoomAndPanAllStop();if(!a.clickZoomAndPanBlock||"undefined"!==typeof m&&null!==m&&m){if("undefined"===typeof b||null===b)b=a.imageX;if("undefined"===typeof c||null===c)c=a.imageY;
if("undefined"===typeof d||null===d)d=a.imageZ;if("undefined"===typeof e||null===e)e=a.imageR;if("undefined"===typeof g||null===g)g=yf;if("undefined"===typeof f||null===f)f=dd;if("center"==b||isNaN(parseFloat(b)))b=a.imageCtrX;if("center"==c||isNaN(parseFloat(c)))c=a.imageCtrY;if(-1==d||isNaN(parseFloat(d)))d=a.fitZ;r.toggleWatermarks(!1);a.useCanvas||Z.Utils.clearDisplay(mb,a);ba&&39<ba.length&&r.setHotspotsVisibility(!1);if("undefined"===typeof b||null===b)b=a.initialX;if("undefined"===typeof c||
null===c)c=a.initialY;if("undefined"===typeof e||null===e)e=a.imageR;"undefined"===typeof d||null===d?d=a.initialZ:100<d?d/=100:d>a.maxZ?d=a.maxZ:d<a.maxZ&&d>a.maxZ-.01&&(d=a.maxZ);c=db(b,c,d,e,"image");b=c.x;c=c.y;d=Oa(d);if(Math.round(b)!=Math.round(a.imageX)||Math.round(c)!=Math.round(a.imageY)||Math.round(1E5*d)!=Math.round(1E5*a.imageZ)||Math.round(e)!=Math.round(a.imageR))a.interactive=!1,cd=0,a.zoomAndPanInProgressID=b.toString()+"-"+c.toString()+"-"+d.toString()+"-"+e.toString(),lb(b,c,d,
e,g,f,l)}else a.clickZoomAndPanBlock=!1};this.zoomAndPanAllStop=function(b,c){a.interactive&&((null!==a.zoomAndPanInProgressID||xd)&&Oc(),a.tourPlaying&&c&&(r.tourStop(),b=!1),a.slideshowPlaying&&c&&(r.slideshowStop(),b=!1),a.smoothPan&&null!==yd&&(a.mouseIsDown||hd(!0),b=!0),b||da())};this.syncViewportRelated=function(a,b,c,d,e,g,f,l,m,t){Yb(a,b,c,d,e,g,f,l,m,t)};this.scaleTierToZoom=function(a,b){bd(a,b)&&Yb()};this.reset=function(b){a.maskingSelection&&a.maskClearOnUserAction&&r.clearMask();b?
(Z.Utils.setButtonDefaults(buttonReset,thisToolbar),r.zoomAndPanToView(a.priorX,a.priorY,a.priorZ,a.priorR)):r.zoomAndPanToView(a.initialX,a.initialY,a.initialZ,a.initialR);Mc(!0)};this.labelScale=function(a){switch(a){case "down":0<=scaleVal&&(scaleVal-=labelScaleStepDistance);break;case "up":0>=scaleVal&&(scaleVal+=labelScaleStepDistance);break;case "stop":scaleVal=0}0!=scaleVal?scaleTimer||(scaleTimer=window.setTimeout(ah,labelScaleStepDuration)):(scaleTimer&&(window.clearTimeout(scaleTimer),scaleTimer=
null),scaleVal=0)};this.toggleWatermarks=function(a){if(Fb){var b="inline-block"==Fb.display;Fb.display=("undefined"!==typeof a&&null!==a?a:!b)?"inline-block":"none"}};this.toggleConstrainPan=function(b){a.constrainPan="undefined"!==typeof b&&null!==b?b:!a.constrainPan;if(a.constrainPan){b=parseFloat(oa.left);var c=parseFloat(oa.top);b=db(b,c,a.imageZ,a.imageR,"container");J.left=b.x+"px";J.top=b.y+"px";da()}};this.toggleSmoothPan=function(){hd();a.smoothPan=!a.smoothPan};this.toggleSmoothZoom=function(){Oc();
a.smoothZoom=!a.smoothZoom};this.buttonToggleBackfillHandler=function(){r.toggleBackfill()};this.toggleBackfill=function(a){var b=Z.Utils.getElementOfViewerById(g,"viewportBackfillDisplay"+La.toString());if(b){var b=b.style,c="inline-block"==b.display;b.display=("undefined"!==typeof a&&null!==a?a:!c)?"inline-block":"none"}};this.buttonToggleDisplayHandler=function(){r.toggleDisplay()};this.toggleDisplay=function(a){var b=Z.Utils.getElementOfViewerById(g,"viewportDisplay"+La.toString());b&&(oa=b.style,
b="inline-block"==oa.display,oa.display=("undefined"!==typeof a&&null!==a?a:!b)?"inline-block":"none")};this.toggleDisplaysOther=function(a){a=a?"inline-block":"none";Db&&(Db.display=a);W&&(W.display=a);mc&&(mc.display=a);cg&&(cg.display=a);Fb&&(Fb.display=a);Va&&(Va.display=a);gc&&(gc.display=a);Nb&&(Nb.display=a);Lf&&(Lf.display=a)};this.zoomAndPanToZoomRectangle=function(a){var b=Math.min(a[0].x,a[1].x,a[2].x,a[3].x),c=Math.max(a[0].x,a[1].x,a[2].x,a[3].x),d=Math.min(a[0].y,a[1].y,a[2].y,a[3].y);
a=Math.max(a[0].y,a[1].y,a[2].y,a[3].y);c-=b;a-=d;var b=b+c/2,d=d+a/2,e=r.getRotation(),c=r.z468(c,a,e);r.zoomAndPanToView(b,d,c)};this.toggleFullViewModeExternal=function(){Ce=!0;r.toggleFullViewMode()};this.toggleFullViewMode=function(b,c){a.maskingSelection&&a.maskClearOnUserAction&&r.clearMask();a.ToolbarDisplay&&a.Toolbar&&a.Toolbar.show(!1);var d=null,e=null;a.fullViewPrior=a.fullView;a.fullView="undefined"!==typeof b&&null!==b?b:!a.fullView;var f=document.body.style,l=document.documentElement.style,
m=a.ViewerDisplay.style,d=Z.Utils.getElementStyle(a.pageContainer);a.fullView?(e=Z.Utils.getContainerSize(a.pageContainer,a.ViewerDisplay),Fd=e.x,Be=e.y,af=f.overflow,bf=l.overflow,Gd=Z.Utils.stringValidate(d.backgroundColor)&&"transparent"!=d.backgroundColor?d.backgroundColor:Z.Utils.stringValidate(f.backgroundColor)&&"transparent"!=f.backgroundColor?f.backgroundColor:Z.Utils.getResource("z120"),cf=m.zIndex,Z.fullScreenSupported&&!a.fullPageVisible?(e=Z.Utils.getScreenSize(),a.fullScreenEntering=
!0,Z.Utils.fullScreenView(a.ViewerDisplay,!0,null,r),Q("fullscreenEntered")):(e=Z.Utils.getWindowSize(),Z.mobileDevice?(f.width=e.x,f.height=e.y):(f.width="100%",f.height="100%"),Q("fullpageEntered")),d=e.x,e=e.y,f.overflow="hidden",l.overflow="hidden",m.backgroundColor=Gd,m.position="fixed",m.zIndex="99999999",a.autoResize&&Z.Utils.removeEventListener(window,"resize",a.viewerEventsHandler)):(f.overflow=af,l.overflow=bf,m.backgroundColor=Gd,m.position="relative",m.zIndex=cf,Z.fullScreenSupported&&
!a.fullPageVisible?(Z.Utils.fullScreenView(a.ViewerDisplay,!1,c,r),Q("fullscreenExited")):Q("fullpageExited"),f.width=Fd,f.height=Be,d=Fd,e=Be,isNaN(d)&&(d=a.ViewerDisplay.clientWidth),isNaN(e)&&(e=a.ViewerDisplay.clientHeight),Ce=!1,a.autoResize&&Z.Utils.addEventListener(window,"resize",a.viewerEventsHandler));a.initialFullPage&&r.setSizeAndPosition(d,e);f=a.viewportCurrent.calculateZoomForResize(a.viewportCurrent.getZoom(),a.viewerW,a.viewerH,d,e);a.resizeViewer(d,e,f);f=null;if(a.comparison)(f=
0==r.getViewportID()?a.Viewport1:a.Viewport0)&&f.syncViewportResize(a.imageX,a.imageY,a.imageZ,a.imageR);else if(a.overlays)for(l=0,m=a.imageSetLength-1;l<m;l++)a["Viewport"+l.toString()].syncViewportResize(a.imageX,a.imageY,a.imageZ,a.imageR);a.imageList&&Jb("initializedImageList")&&(r.setSizeAndPositionImageList(),f&&f.getStatus("initializedImageList")&&f.setSizeAndPositionImageList());f=a.fullView;l=Z.Utils.getElementOfViewerById(g,"buttonFullView");m=Z.Utils.getElementOfViewerById(g,"buttonFullViewExit");
l&&m&&(l.style.display=f?"none":"inline-block",m.style.display=f?"inline-block":"none");Ce?(ld||(f=Z.Utils.getResource("z420"),l=parseFloat(a.viewerW)-54,m=parseFloat(a.viewerH)-54,d=Z.Utils.getResource("DEFAULT_FULLVIEWEXITEXTERNALBUTTONCOLOR"),ld=new Z.Utils.Button(g,"buttonFullViewExitExternal",f,null,null,null,null,"34px","34px",l+"px",m+"px","mousedown",uh,"z391EXITEXTERNAL","solid","1px",d,"0px","0px",null,null,a.tooltipsVisible),a.ViewerDisplay.appendChild(ld.elmt)),ld.elmt.style.display="inline-block"):
ld&&(ld.elmt.style.display="none");a.fullViewPrior=!1};this.rotate=function(b,c){Mc();if(!a.rotationFree||c)0!=a.imageR%90&&(a.imageR=90*Math.round(a.imageR/90)),r.rotateStep("clockwise"==b?90:-90,!0);else if("stop"!=b||"stop"!=a.rotating)qc="stop"==b?0:"clockwise"==b?$e:-$e,a.rotating=0==qc?"stop":0<qc?"clockwise":"counterwise",0!=qc?Pc||(Pc=window.setTimeout(ed,Qe)):(qc=0,Pc&&(window.clearTimeout(Pc),Pc=null),da())};this.rotateStep=function(b,c,d){if(a.interactive)if(Z.rotationSupported)if(b=a.imageR+
b,a.rotationFree)Z.Utils.rotateElement(J,b,a.imageR),a.imageR=b,Sd();else{a.interactive=!1;var e=Ne(b);c?r.zoomAndPanToView(a.imageX,a.imageY,a.imageZ,b,600,12,function(){a.imageR=e}):d?(Z.Utils.rotateElement(J,a.imageR,a.imageR,!0),a.interactive=!0):(Z.Utils.rotateElement(J,b,a.imageR),ga&&0!=a.imageR&&Ea.rotate((b-a.imageR)*Math.PI/180),a.imageR=e,r.zoomAndPanToView(a.imageX,a.imageY,a.imageZ))}else a.showMessage(Z.Utils.getResource("z12"))};this.toggleEditModeMeasure=function(b){r.zoomAndPanAllStop();
a.maskingSelection&&a.maskClearOnUserAction&&r.clearMask();"undefined"!==typeof b&&!b||"measure"==a.labelMode?(null===a.editMode&&"measure"==a.labelMode&&0<ba.length&&(r.deleteAllMeasureHotspots(),ib=null),r.setEditModeLabel("view")):r.setEditModeLabel("measure")};this.getTargetHotspot=function(a){return fd(a)};this.getSmoothPanGliding=function(){return Pa};this.setSmoothPanGliding=function(a){Pa=a};this.fullScreenEscapeHandler=function(b){a.fullScreenEntering?a.fullScreenEntering=!1:r.toggleFullViewMode(!1,
!0)};this.mouseWheelHandler=function(b,c){a.mouseWheelIsDown=!0;a.mouseWheelCompleteTimer&&window.clearTimeout(a.mouseWheelCompleteTimer);a.mouseWheelCompleteTimer=window.setTimeout(a.z586,a.mouseWheelCompleteDuration);if(!("zoom"!=a.sliderFocus||a.imageSet&&c)){var d=r.z482(ha,ma*(1+(0<b?Gc:-Gc)));constrainedZ=Oa(d);constrainedZ!=a.imageZ&&(a.zooming=0<b?"in":0>b?"out":"stop",r.scaleTierToZoom(constrainedZ))}else if("imageSet"==a.sliderFocus||c)0<b?a.viewportNext():0>b&&a.viewportPrior()}}var a=
this,lb=[];a.pageContainerID=null;a.pageContainer=null;a.viewerID=null;a.viewerInternalID=null;a.imagePath=null;a.imageFilename=null;a.imagePath2=null;a.parameters=null;a.xmlParametersPath=null;a.xMLParametersPath=null;a.xmlParametersParsing=null;a.xMLParametersParsing=null;a.skinPath=null;a.skinMode=null;a.onReady=null;a.onAnnotationReady=null;a.initialX=null;a.initialY=null;a.initialZ=null;a.initialZoom=null;a.minZ=null;a.minZoom=null;a.maxZ=null;a.maxZoom=null;a.zoomSpeed=null;a.panSpeed=null;
a.smoothPan=null;a.smoothPanEasing=null;a.smoothZoom=null;a.smoothZoomEasing=null;a.smoothPanGlide=null;a.autoResize=null;a.fadeIn=null;a.fadeInSpeed=null;a.toolbarInternal=null;a.toolbarVisible=null;a.toolbarBackgroundVisible=null;a.toolbarAutoShowHide=null;a.toolbarW=null;a.toolbarH=null;a.toolbarPosition=null;a.navigatorVisible=null;a.navigatorW=null;a.navigatorWidth=null;a.navigatorH=null;a.navigatorHeight=null;a.navigatorL=null;a.navigatorLeft=null;a.navigatorT=null;a.navigatorTop=null;a.navigatorFit=
null;a.navigatorRectangleColor=null;a.GalleryScrollPanel=null;a.galleryVisible=null;a.galleryAutoShowHide=null;a.galleryW=null;a.galleryH=null;a.galleryL=null;a.galleryT=null;a.galleryPosition=null;a.galleryRectangleColor=null;a.mouseIsDownGallery=null;a.clickZoom=null;a.doubleClickZoom=null;a.doubleClickDelay=null;a.clickPan=null;a.zoomAndPanInProgressID=null;a.clickZoomAndPanBlock=!1;a.mousePan=null;a.keys=null;a.constrainPan=null;a.constrainPanLimit=null;a.constrainPanStrict=null;a.panBuffer=null;
a.tooltipsVisible=null;a.helpVisible=null;a.helpPath=null;a.helpCustom=!1;a.helpContent=null;a.helpW=null;a.helpWidth=null;a.helpH=null;a.helpHeight=null;a.helpL=null;a.helpLeft=null;a.helpT=null;a.helpTop=null;a.minimizeVisible=null;a.sliderZoomVisible=null;a.sliderVisible=null;a.zoomButtonsVisible=null;a.panButtonsVisible=null;a.resetVisible=null;a.fullViewVisible=null;a.fullScreenVisible=null;a.fullPageVisible=null;a.initialFullPage=null;a.fullPageInitial=null;a.fullScreenEntering=null;a.progressVisible=
null;a.messagesVisible=null;a.logoVisible=null;a.logoLink=null;a.logoLinkURL=null;a.logoCustomPath=null;a.bookmarksGet=null;a.bookmarksSet=null;a.copyrightPath=null;a.copyright=null;a.watermarkPath=null;a.watermarks=null;a.virtualPointerVisible=null;a.virtualPointer=null;a.virtualPointerImage=null;a.virtualPointerPath=Z.Utils.getResource("z232");a.crosshairsVisible=null;a.zoomRectangle=null;a.rulerVisible=null;a.units=null;a.unitsPerImage=null;a.pixelsPerUnit=null;a.sourceMagnification=null;a.magnification=
null;a.rulerListType=null;a.rulerW=null;a.rulerWidth=null;a.rulerH=null;a.rulerHeight=null;a.rulerL=null;a.rulerLeft=null;a.rulerT=null;a.rulerTop=null;a.measureVisible=!1;a.rotationVisible=null;a.rotationFree=null;a.initialR=null;a.initialRotation=null;a.imageListPath=null;a.imageList=null;a.imageListTitle=null;a.imageListFolder=null;a.imageListFileShared=!1;a.imageSetImageListPath=null;a.imageListTimeout=null;a.screensaver=!1;a.screensaverSpeed=null;a.tour=!1;a.tourPath=null;a.tourListTitle=null;
a.tourPlaying=null;a.tourStopping=!1;a.comparison=!1;a.comparisonPath=null;a.syncVisible=null;a.initialSync=null;a.syncComparison=null;a.slideshow=!1;a.slidePath=null;a.slideListTitle=null;a.slideshowPlaying=null;a.slideshowStopping=null;a.slideTransitionTimeout=null;a.slideTransitionSpeed=null;a.slideOpacity=0;a.audioContent=!1;a.audioMuted=!1;a.audioPlaying=null;a.audioNext=null;a.audioStopped=null;a.hotspots=!1;a.hotspotPath=null;a.hotspotFolder=null;a.hotspotListTitle=null;a.hotspotsDrawOnlyInView=
!0;a.captionBoxes=!1;a.captionsColorsDefault=!0;a.captionOffset=null;a.annotations=!1;a.annotationPath=null;a.annotationFolder=null;a.annotationXMLText=null;a.annotationJSONObject=null;a.annotationsAddMultiple=null;a.annotationsAutoSave=null;a.annotationsAutoSaveImage=null;a.annotationPanelVisible=null;a.annotationPanelVisibleState=!1;a.labelIconsInternal=null;a.saveButtonVisible=null;a.labelClickSelect=null;a.simplePath=!1;a.noPost=!1;a.noPostDefaults=!1;a.unsavedEditsTest=!0;a.maskVisible=null;
a.maskScale=null;a.maskBorder=null;a.maskingSelection=!1;a.maskFadeTimeout=null;a.maskFadeSpeed=null;a.maskOpacity=0;a.maskClearOnUserAction=null;a.externalEditPermissionFunction=null;a.annotationSort="none";a.saveHandlerPath=null;a.saveImageHandlerPath=null;a.saveImageFull=null;a.postingXML=!1;a.postingImage=!1;a.coordinatesVisible=null;a.geoCoordinatesPath=null;a.geoCoordinatesVisible=null;a.geoCoordinatesFolder=null;a.preloadVisible=null;a.imageFilters=null;a.imageFiltersVisible=null;a.initialImageFilters=
null;a.brightnessVisible=null;a.contrastVisible=null;a.sharpnessVisible=null;a.blurrinessVisible=null;a.colorRedVisible=null;a.colorGreenVisible=null;a.colorBlueVisible=null;a.colorRedRangeVisible=null;a.colorGreenRangeVisible=null;a.colorBlueRangeVisible=null;a.gammaVisible=null;a.gammaRedVisible=null;a.gammaGreenVisible=null;a.gammaBlueVisible=null;a.hueVisible=null;a.saturationVisible=null;a.lightnessVisible=null;a.whiteBalanceVisible=null;a.normalizeVisible=null;a.equalizeVisible=null;a.noiseVisible=
null;a.grayscaleVisible=null;a.thresholdVisible=null;a.inversionVisible=null;a.edgesVisible=null;a.sepiaVisible=null;a.saveImageFull=null;a.saveImageFilename=null;a.saveImageFormat=null;a.saveImageCompression=null;a.saveImageBackColor=null;a.tracking=!1;a.trackingPath=null;a.trackingFolder=null;a.trackingPathProvided=!1;a.trackingEditMode=!1;a.trackingFileShared=!1;a.imageSetTrackingPath=null;a.trackingPanelPosition=null;a.trackingCounts=[];a.trackingTypeCurrent="0";a.trackingOverlayVisible=!1;a.initialTrackingOverlayVisible=
null;a.trackingCellCurrent=null;a.trackingPanelVisible=null;a.trackingPanelVisibleState=!1;a.userName=null;a.userInitials=null;a.userLogin=null;a.userNamePrompt=null;a.userNamePromptRetry=null;a.userPath=null;a.userFolder=null;a.userPathProvided=!1;a.userList=[];a.userLogging=!1;a.UserPanel=null;a.userPanelVisible=null;a.userPanelVisibleState=!1;a.canvas=null;a.baseZIndex=null;a.debug=null;a.imageProperties=null;a.serverIP=null;a.serverPort=null;a.tileHandlerPath=null;a.tileHandlerPathFull=null;a.iiifInfoJSONObject=
null;a.iiifScheme=null;a.iIIFScheme=null;a.iiifServer=null;a.iIIFServer=null;a.iiifPrefix=null;a.iIIFPrefix=null;a.iiifIdentifier=null;a.iIIFIdentifier=null;a.iiifRegion=null;a.iIIFRegion=null;a.iiifSize=null;a.iIIFSize=null;a.iiifRotation=null;a.iIIFRotation=null;a.iiifQuality=null;a.iIIFQuality=null;a.iiifFormat=null;a.iIIFFormat=null;a.tileW=null;a.tileH=null;a.tileType="jpg";a.tilesPNG=null;a.freehandVisible=null;a.textVisible=null;a.iconVisible=null;a.rectangleVisible=null;a.polygonVisible=null;
a.captionTextColor=null;a.captionBackColor=null;a.polygonLineColor=null;a.polygonFillColor=null;a.captionTextVisible=!0;a.captionBackVisible=!0;a.polygonFillVisible=!1;a.polygonLineVisible=!0;a.annotationPathProvided=!1;a.saveHandlerProvided=!1;a.imageSetPathProvided=!1;a.slidePathProvided=!1;a.saveImageHandlerProvided=!1;a.tileSource=null;a.requestTiles=!1;a.tileSourceMultiple=null;a.pffJPEGHeadersSeparate=!1;a.dziSubfoldersToSkip=null;a.dziImagePropertiesFilename=null;a.dziImageSubfolder=null;a.focal=
null;a.quality=null;a.markupMode=null;a.editMode=null;a.editAdmin=!1;a.editing=null;a.labelMode="view";a.editModePrior=a.editMode;a.xmlCallbackFunction=null;a.labelsClickDrag=!1;a.sliderFocus="zoom";a.overlayPath=null;a.overlays=!1;a.overlayJSONObject=null;a.overlaysInitialVisibility=null;a.animation=!1;a.animationPath=null;a.animationCount=0;a.animationAxis=null;a.animator=null;a.animationFlip=null;a.slidestack=!1;a.slidestackPath=null;a.imageSet=!1;a.imageSetPath=null;a.imageSetObjects=[];a.imageSetListDP=
[];a.imageSetList=null;a.imageSetLength=null;a.imageSetListPosition=null;a.imageSetListTitle=null;a.imageSetStart=null;a.imageSetLoop=null;a.sliderImageSetVisible=null;a.mouseWheelParmeterProvided=null;a.mouseWheel=null;a.imageSetHotspotPath=null;a.hotspotFileShared=!1;a.imageSetAnnotationPath=null;a.annotationFileShared=!1;a.messageDurationLong=parseInt(Z.Utils.getResource("DEFAULT_MESSAGEDURATIONLONG"),10);a.messageDurationStandard=parseInt(Z.Utils.getResource("DEFAULT_MESSAGEDURATIONSTANDARD"),
10);a.messageDurationShort=parseInt(Z.Utils.getResource("DEFAULT_MESSAGEDURATIONSHORT"),10);a.messageDurationVeryShort=parseInt(Z.Utils.getResource("DEFAULT_MESSAGEDURATIONVERYSHORT"),10);a.Viewer=null;a.ViewerDisplay=null;a.Viewport=null;a.Toolbar=null;a.ToolbarDisplay=null;a.ToolbarMinimized=!1;a.TooltipDisplay=null;a.Navigator=null;a.Navigator2=null;a.NavigatorDisplay=null;a.MessageDisplay=null;a.messages=null;a.messageDisplayList=[];a.overlayMessage=null;a.CoordinatesDisplay=null;a.coordinates=
null;a.coordinatesSave=null;a.CopyrightDisplay=null;a.AnnotationPanelDisplay=null;a.imageW=null;a.imageH=null;a.imageD=null;a.imageCtrX=null;a.imageCtrY=null;a.imageX=0;a.imageY=0;a.imageZ=0;a.imageR=0;a.priorX=0;a.priorY=0;a.priorZ=0;a.priorR=0;a.preventDupCall=!1;a.fitZ=null;a.fillZ=null;a.zooming="stop";a.panningX="stop";a.panningY="stop";a.rotating="stop";a.fullView=!1;a.fullViewPrior=!1;a.interactive=!0;a.useCanvas=!0;a.expressParamsEnabled=null;a.proParamsEnabled=null;a.specialStorageEnabled=
null;a.enterpriseParamsEnabled=null;a.updateViewPercent=0;a.TraceDisplay=null;a.traces=null;a.mouseIsDown=!1;a.buttonIsDown=!1;a.keyIsDown=!1;a.mouseWheelIsDown=!1;a.mouseWheelCompleteDuration=null;a.mouseWheelCompleteTimer=null;a.mouseOutDownPoint=null;a.viewportCurrentID=0;a.viewportCurrent=null;a.viewportChangeTimeout=null;a.viewerInternalID=Z.viewerCounter-1;var g=a.viewerInternalID.toString();this.setCallback=function(b,c){"undefined"===typeof a.callbacks&&(a.callbacks=[]);var d=Z.Utils.arrayIndexOfObjectTwoValues(a.callbacks,
"callbackEvent",b,null,"callbackFunction",c);-1==d&&(d=a.callbacks.length);a.callbacks[d]={callbackEvent:b,callbackFunction:c}};this.loadParametersXML=function(){a.xmlParametersParsing=!0;var b=new Z.NetConnector(a),c=Z.Utils.cacheProofPath(a.xmlParametersPath);b.loadXML(c)};this.setEditPermissionFunction=function(b){a.externalEditPermissionFunction=b};this.clearCallback=function(b,c){var d=Z.Utils.arrayIndexOfObjectTwoValues(a.callbacks,"callbackEvent",b,null,"callbackFunction",c);-1!=d&&(a.callbacks=
Z.Utils.arraySplice(a.callbacks,d,1))};var Bf="undefined"!==typeof c&&Z.Utils.stringValidate(c),wh="undefined"!==typeof d&&("string"===typeof d&&-1!=d.indexOf("zIIIFServer")||"object"===typeof d&&"undefined"!==typeof d.zIIIFServer);Bf&&-1!=c.indexOf("zXMLParametersPath")?(c=c.substring(19,c.length),a.xmlParametersPath=Z.Utils.stringRemoveTrailingSlashCharacters(c)):a.imagePath=wh?"IIIFImageServer":Bf?Z.Utils.stringRemoveTrailingSlashCharacters(c):null;"undefined"!==typeof d&&("string"===typeof d&&
(d=unescape(d),d=Z.Utils.stringUnescapeAmpersandCharacters(d)),a.parameters=Z.Utils.parseParameters(d));a.ViewerDisplay=Z.Utils.createContainerElement(g,"div","ViewerDisplay","inline-block","relative","hidden","100%","100%","0px","0px","none","0px","transparent none","0px","0px","normal","pointer");a.pageContainerID=b;a.pageContainer=document.getElementById(a.pageContainerID);Z.Utils.getElementStyle(a.pageContainer);Z.Utils.preventSelection(a.ViewerDisplay);b=Z.Utils.getContainerSize(a.pageContainer,
a.ViewerDisplay);a.viewerW=b.x;a.viewerH=b.y;a.pageContainer.innerHTML="";a.pageContainer.appendChild(a.ViewerDisplay);a.autoResize=a.autoResize||Z.Utils.isElementFluid(a.pageContainer);var qh=parseInt(Z.Utils.getResource("DEFAULT_AUTORESIZESKIPDURATION"),10),lc;a.mouseWheelCompleteDuration=parseInt(Z.Utils.getResource("z165"),10);a.setCallback("readyConfigureViewer",f);e();this.initializeViewer=function(){e()};Q("readyConfigureViewer");a.configureViewer=function(){f()};this.validateComponents=function(b){"undefined"!==
typeof a.parameters&&null!==a.parameters&&(Object.keys(a.parameters),a.clearComponent(a.Navigator),a.clearComponent(a.Gallery),a.clearComponent(a.Ruler),a.clearComponent(a.Toolbar))};this.configureComponents=function(a){k(a)};this.receiveHelpHTML=function(b){4==b.readyState&&200==b.status&&Z.Utils.stringValidate(b.responseText)&&(a.helpContent=b.responseText)};this.setSizeAndPosition=function(b,c,d,e,f){a.viewerW=b;a.viewerH=c;a.ViewerDisplay.style.width=b+"px";a.ViewerDisplay.style.height=c+"px";
a.Viewport&&a.Viewport.getStatus("initializedViewport")&&a.Viewport.setSizeAndPosition(b,c,d,e);var g=a.toolbarBackgroundVisible?0:parseInt(Z.Utils.getResource("DEFAULT_TOOLBARBACKGROUNDVISIBLEADJUST"),10),g=1==a.toolbarPosition?c-a.toolbarH-g:0+g;a.Toolbar&&a.ToolbarDisplay&&a.Toolbar.getInitialized()&&(a.Toolbar.setSizeAndPosition(b,null,null,g),0!=a.toolbarVisible&&8!=a.toolbarVisible&&a.Toolbar.show(!0));a.Navigator&&a.Navigator.getInitialized()&&(a.Navigator.setSizeAndPosition(null,null,0==a.navigatorL?
d:a.navigatorL+a.navigatorW>b?b-a.navigatorW:a.navigatorL,0!=a.navigatorT?a.navigatorT:e,a.navigatorFit),1<a.navigatorVisible&&(a.Navigator.setVisibility(!0),a.comparison&&a.Navigator2&&(a.Navigator2.setSizeAndPosition(null,null,b-a.navigatorW,e,a.navigatorFit),a.Navigator2.setVisibility(!0))));a.imageList&&a.Viewport.getStatus("initializedImageList")&&a.Viewport.setSizeAndPositionImageList();Z.slideList&&"undefined"!==typeof slideList&&null!==slideList&&(g=a.Viewport.calculateSlideListCoords(a.viewerW,
a.viewerH),slideList.style.left=g.x+"px",slideList.style.top=g.y+"px");a.Gallery&&a.Gallery.getInitialized()&&(a.Gallery.setSizeAndPosition(b,c,d,e),a.galleryAutoShowHide&&a.Gallery.setVisibility(!0));f&&a.Viewport.updateView(!0)};this.getImagePath=function(){return a.getImage()};this.getImage=function(){return a.imagePath};this.setImagePath=function(b,c){"undefined"!==typeof c&&Z.Utils.stringValidate(c)&&(a.imageProperties=c);a.setImage(b)};this.setImage=function(b,c,d,e){if(a.Viewport&&(a.Viewport.getStatus("initializedViewport")||
d)){a.Viewport.zoomAndPanAllStop(!0);var f=!0;null!==a.editing&&(f=!0,null!==a.editing&&a.Viewport.verifyEditsUnsaved()&&(f=confirm(Z.Utils.getResource("ALERT_UNSAVEDEDITSEXIST-CUSTOM"))));f&&(a.maskingSelection&&a.clearLabelMask(),a.overlays||(a.imagePath=null,a.imagePath2=null,a.parameters=null,a.xmlParametersPath=null,a.xmlParametersParsing=null,a.initialX=null,a.initialY=null,a.initialZ=null,a.minZ=null,a.maxZ=null,a.zoomAndPanInProgressID=null,a.geoCoordinatesPath=null,a.geoCoordinatesVisible=
null,a.geoCoordinatesFolder=null,a.tour=!1,a.tourPath=null,a.tourPlaying=null,a.tourStopping=!1,a.hotspots=!1,a.hotspotPath=null,a.hotspotFolder=null,a.annotations=!1,a.annotationPath=null,a.annotationPanelVisible=null,a.annotationFolder=null,a.annotationJSONObject=null,a.annotationXMLText=null,a.labelIconsInternal=null,a.annotationsAddMultiple=null,a.annotationsAutoSave=null,a.annotationsAutoSaveImage=null,a.postingXML=!1,a.postingImage=!1,a.initialR=null,a.unitsPerImage=null,a.pixelsPerUnit=null,
a.sourceMagnification=null,a.imageProperties=null,a.annotationPathProvided=!1,a.imageSetPathProvided=!1,a.slidePathProvided=!1,a.tileSource=null,a.tileSourceMultiple=null,a.pffJPEGHeadersSeparate=!1,a.focal=null,a.quality=null,a.tracking||(a.markupMode=null,a.editMode=null,a.editAdmin=!1,a.editing=null,a.labelMode="view",a.editModePrior=a.editMode),a.sliderFocus="zoom",a.animation=!1,a.animationPath=null,a.animationCount=0,a.animationAxis=null,a.animator=null,a.animationFlip=null,a.slidestack=!1,
a.slidestackPath=null,a.imageSetHotspotPath=null,a.hotspotFileShared=!1,a.imageSetAnnotationPath=null,a.annotationFileShared=!1,a.imageW=null,a.imageH=null,a.imageD=null,a.imageCtrX=null,a.imageCtrY=null,a.imageX=0,a.imageY=0,a.imageZ=0,a.imageR=0,a.fitZ=null,a.fillZ=null,a.zooming="stop",a.panningX="stop",a.panningY="stop",a.rotating="stop",a.iiifInfoJSONObject=null,a.iiifIdentifier=null,a.iiifRegion=null,a.iiifSize=null,a.iiifRotation=null,a.iiifQuality=null,a.iiifFormat=null),a.imagePath=Z.Utils.stringRemoveTrailingSlashCharacters(b),
P(),f="undefined"===typeof e||null===e||0==e?a.Viewport:a["Viewport"+e.toString()],f.setImagePath(a.imagePath),"undefined"!==typeof c&&null!==c&&(a.parameters=Z.Utils.parseParameters(c)),d&&y(a.parameters),"unconverted"==a.tileSource?f.loadUnconvertedImage(b):a.imageProperties?(e=Z.Utils.xmlConvertTextToDoc(a.imageProperties),f.z602(e)):(b=new Z.NetConnector(a),f.loadImageProperties(a.imagePath,b,e)))}};this.setImageWithFade=function(b,c,d,e){if(a.Viewport&&(a.Viewport.getStatus("initializedViewport")||
d)){if("undefined"===typeof e||null===e)e=50;a.slideTransitionTimeout=window.setTimeout(function(){a.Viewport.slideTransitionTimeoutHandler("out",b,c,d)},1)}};this.setTourPath=function(b,c){a.Viewport&&a.Viewport.getStatus("initializedViewport")&&a.Viewport.setHotspotPath(b,c)};this.setHotspotPath=function(b,c){a.Viewport&&a.Viewport.getStatus("initializedViewport")&&a.Viewport.setHotspotPath(b,c)};this.setAnnotationPath=function(b,c){a.Viewport&&a.Viewport.getStatus("initializedViewport")&&a.Viewport.setAnnotationPath(b,
c)};this.setTrackingPath=function(b,c){a.Viewport&&a.Viewport.getStatus("initializedViewport")&&a.Viewport.setTrackingPath(b,c)};this.initializePageExitEventHandler=function(){Z.Utils.addEventListener(window,"beforeunload",O)};this.getStatus=function(a){return u(a)};this.setStatus=function(a,b){K(a,b)};this.validateViewerStatus=function(a){T(a)};this.validateViewerReady=function(a){D(a)};this.parseParametersXML=function(b){a.xmlParametersParsing=!1;var c="";b=b.getElementsByTagName("ZOOMIFY")[0];
zImagePath=b.getAttribute("IMAGEPATH");zImagePath2=b.getAttribute("IMAGEPATH2");"undefined"!==typeof zImagePath&&Z.Utils.stringValidate(zImagePath)&&(a.imagePath=zImagePath);"undefined"!==typeof zImagePath2&&Z.Utils.stringValidate(zImagePath2)&&(a.imagePath2=zImagePath2);for(var d=Z.Utils.getResource("DEFAULT_PARAMETERLISTTEXT",a).split(","),e=0,f=d.length;e<f;e++){var g=d[e],h=Z.Utils.stringLowerCaseFirstLetter(g.substr(1)).toUpperCase(),h=b.getAttribute(h);"undefined"!==typeof h&&Z.Utils.stringValidate(h)&&
(c+=g+"="+h+"&")}d=b.getAttribute("FULLPAGEINITIAL");"undefined"!==typeof d&&Z.Utils.stringValidate(d)&&(c+="zInitialFullPage="+d+"&");d=b.getAttribute("TOOLBARSKINXMLPATH");"undefined"!==typeof d&&Z.Utils.stringValidate(d)&&(c+="zSkinPath="+d+"&");d=b.getAttribute("TOOLBARTOOLTIPS");"undefined"!==typeof d&&Z.Utils.stringValidate(d)&&(c+="zTooltipsVisible="+d+"&");d=b.getAttribute("SHOWTOOLTIPS");"undefined"!==typeof d&&Z.Utils.stringValidate(d)&&(c+="zTooltipsVisible="+d+"&");d=b.getAttribute("WATERMARKMEDIA");
"undefined"!==typeof d&&Z.Utils.stringValidate(d)&&(c+="zWatermarkPath="+d+"&");d=b.getAttribute("SLIDESXMLPATH");"undefined"!==typeof d&&Z.Utils.stringValidate(d)&&(c+="zSlidePath="+d+"&");d=b.getAttribute("HOTSPOTSXMLPATH");"undefined"!==typeof d&&Z.Utils.stringValidate(d)&&(c+="zHotspotPath="+d+"&");d=b.getAttribute("ANNOTATIONSXMLPATH");"undefined"!==typeof d&&Z.Utils.stringValidate(d)&&(c+="zAnnotationPath="+d+"&");d=b.getAttribute("SAVETOFILE");"undefined"!==typeof d&&Z.Utils.stringValidate(d)&&
(c+="zSaveImageHandlerPath="+d+"&");c="&"==c.slice(-1,c.length)?c.slice(0,c.length-1):c;c=unescape(c);c=Z.Utils.stringUnescapeAmpersandCharacters(c);Z.Utils.arrayClear(a.parameters);a.parameters=Z.Utils.parseParameters(c);a.initializeViewer()};this.validateImagePath=function(a){P(a)};this.validateLocalSingleFileViewing=function(){qa()};this.clearComponent=function(b){switch(b){case a.Toolbar:a.Toolbar=null;Z.Utils.clearDisplay(a.ToolbarDisplay,a);a.toolbarVisible=null;a.toolbarBackgroundVisible=null;
a.skinPath=null;a.sliderZoomVisible=null;a.logoVisible=null;a.minimizeVisible=null;a.zoomButtonsVisible=null;a.sliderVisible=null;a.panButtonsVisible=null;a.logoVisible=null;a.resetVisible=null;a.fullScreenVisible=null;a.tooltipsVisible=null;a.helpVisible=null;a.progressVisible=null;break;case a.Navigator:a.navigatorVisible=null;a.navigatorW=null;a.navigatorH=null;a.navigatorL=null;a.navigatorT=null;a.navigatorFit=null;a.navigatorRectangleColor=null;break;case a.Gallery:Z.Utils.clearDisplay(a.GalleryDisplay,
a);a.Gallery=null;a.galleryVisible=null;a.galleryAutoShowHide=null;a.galleryW=null;a.galleryH=null;a.galleryM=null;a.galleryL=null;a.galleryT=null;a.galleryPosition=null;a.galleryRectangleColor=null;break;case a.Ruler:Z.Utils.clearDisplay(a.RulerDisplay,a),a.Ruler=null,a.rulerVisible=null,a.rulerListType=null,a.rulerW=null,a.rulerH=null,a.rulerL=null,a.rulerT=null}};this.verifyCallback=function(b){var c=!1;if("undefined"!==typeof a.callbacks)for(var d=a.callbacks.slice(0),e=0,f=d.length;e<f;e++){var g=
d[e];g&&g.callbackEvent==b&&"object"===typeof g&&"function"===typeof g.callbackFunction&&(c=!0)}return c};this.getCallbackFunction=function(b){var c=null;if("undefined"!==typeof a.callbacks)for(var d=a.callbacks.slice(0),e=0,f=d.length;e<f;e++){var g=d[e];g&&g.callbackEvent==b&&"object"===typeof g&&"function"===typeof g.callbackFunction&&(c=g.callbackFunction)}return c};this.validateCallback=function(a){Q(a)};this.validateCallbackDelayed=function(a,b){xa(a,b)};this.showHelp=function(b){if(!Z.HelpDisplay){var c=
a.helpW,d=a.helpH;c>=a.viewerW&&(c=a.viewerW-80);d>=a.viewerH&&(d=a.viewerH-80);var e=a.helpL?a.helpL:(a.viewerW-c)/2,f=a.helpT?a.helpT:(a.viewerH-d)/2,h=Z.Utils.getResource("UI_HELPSCREENCOLOR"),n=Z.Utils.getResource("UI_HELPBUTTONCOLOR");Z.HelpDisplay=Z.Utils.createContainerElement(g,"div","HelpDisplay","inline-block","absolute","hidden",c+"px",d+"px",e+"px",f+"px","solid","1px",h,"0px","0px","normal",null,!0);a.ViewerDisplay.appendChild(Z.HelpDisplay);e=Z.Utils.createContainerElement(g,"div","helpTextBox",
"inline-block","absolute","auto",c-50+"px",d-74+"px","4px","4px","solid","1px","white","0px","20px",null);e.style.overflowY="auto";Z.HelpDisplay.appendChild(e);Z.help=Z.Utils.getElementOfViewerById(g,"helpTextBox");Z.HelpDisplay.style.zIndex=(a.baseZIndex+26).toString();d=d-18-5;c-=66;e=Z.Utils.getResource("z423");n=new Z.Utils.Button(g,"buttonHelpOk",e,null,null,null,null,"56px","18px",c+"px",d+"px","mousedown",da,"z342OK","solid","1px",n,"0px","0px",null,null,a.tooltipsVisible);Z.HelpDisplay.appendChild(n.elmt)}Z.help&&
(Z.help.innerHTML=a.helpCustom?a.helpContent:unescape(b),Z.HelpDisplay.style.display="inline-block",Z.Utils.getElementOfViewerById(g,"buttonHelpOk").style.display="inline-block")};this.showMessage=function(a,b,c,d,e,f){E(a,b,c,d,e,f)};this.hideMessage=function(){ua()};z619Delayed=function(){for(var b=0,c=a.imageSetLength;b<c;b++){var d=a["Viewport"+b.toString()];d.getStatus("backfillPrecachedViewport")||d.z619(!0)}};this.initializeViewerKeyEventListeners=function(a){Tc(a)};this.initializeViewerKeyDefaultListeners=
function(a){Xb(a)};this.viewerEventsHandler=function(a){kb(a)};this.autoResizeViewer=function(){eb()};this.resizeViewer=function(b,c,d){a.setSizeAndPosition(b,c,0,0,!1);a.viewportCurrent.resizeViewport(a.imageX,a.imageY,d,a.imageR);if(a.comparison){var e=0==a.viewportCurrent.getViewportID()?a.Viewport1:a.Viewport0;e&&(e.setSizeAndPosition(b,c,0,0,!1),e.resizeViewport(a.imageX,a.imageY,d,a.imageR))}};this.z586=function(b){a.mouseWheelIsDown=!1;a.mouseWheelCompleteTimer&&(window.clearTimeout(a.mouseWheelCompleteTimer),
a.mouseWheelCompleteTimer=null,a.zooming="stop",a.viewportCurrent.updateView(!0))};this.ZoomifyToolbar=function(b){function c(){parseFloat(Z.Utils.getResource("UI_TOOLBARINTERNALBACKGROUNDALPHA"));var b=Z.Utils.getResource("UI_TOOLBARINTERNALBACKGROUNDCOLOR"),d=Z.Utils.getResource("UI_TOOLBARINTERNALBUTTONUPCOLOR"),f=a.viewerW/2-50,h=a.viewerH-25-10,v=Math.round(25),l=Math.round(25/1.5),n=(100-3*v)/4,E=(25-l)/2;a.ToolbarDisplay=Z.Utils.createContainerElement(g,"div","ToolbarDisplay","inline-block",
"absolute","visible","100px","25px",f+"px",h+"px","none","0px","transparent none","0px","0px","normal");cb=a.ToolbarDisplay.style;f=Z.browser==Z.browsers.FIREFOX||Z.browser==Z.browsers.SAFARI?15:17;h=Z.Utils.createContainerElement(g,"div","buttonZoomOutInternal","inline-block","absolute","visible",v+"px",l+"px",n+1+"px",E+1+"px","none","0px",d,"0px","0px","normal");Z.Utils.setOpacity(h,.6,b);h.setAttribute("title",Z.Utils.getResource("z400"));var k=document.createTextNode(Z.Utils.getResource("UI_TOOLBARINTERNALBUTTONZOOMOUTTEXT"));
h.appendChild(k);a.ToolbarDisplay.appendChild(h);O=h.style;O.borderRadius="3px";Z.Utils.setTextNodeStyle(k,"black","verdana","15px","none","normal","normal","normal","bold",f+"px","center","none");Z.Utils.disableTextInteraction(k);k=Z.Utils.createContainerElement(g,"div","buttonResetInternal","inline-block","absolute","visible",v+"px",l+"px",2*n+v+1+"px",E+1+"px","none","0px",d,"0px","0px","normal");Z.Utils.setOpacity(k,.6,b);k.setAttribute("title",Z.Utils.getResource("z378"));var I=document.createTextNode(Z.Utils.getResource("UI_TOOLBARINTERNALBUTTONRESETTEXT"));
k.appendChild(I);a.ToolbarDisplay.appendChild(k);T=k.style;T.borderRadius="3px";Z.Utils.setTextNodeStyle(I,"blue","verdana","15px","none","normal","normal","normal","bold",f+"px","center","none");Z.Utils.disableTextInteraction(I);d=Z.Utils.createContainerElement(g,"div","buttonZoomInInternal","inline-block","absolute","visible",v+"px",l+"px",3*n+2*v+1+"px",E+1+"px","none","0px",d,"0px","0px","normal");Z.Utils.setOpacity(d,.6,b);d.setAttribute("title",Z.Utils.getResource("z399"));b=document.createTextNode(Z.Utils.getResource("UI_TOOLBARINTERNALBUTTONZOOMINTEXT"));
d.appendChild(b);a.ToolbarDisplay.appendChild(d);H=d.style;H.borderRadius="3px";Z.Utils.setTextNodeStyle(b,"black","verdana","15px","none","normal","normal","normal","bold",f+"px","center","none");Z.Utils.disableTextInteraction(b);Z.Utils.addEventListener(h,"mouseover",C);Z.Utils.addEventListener(h,"mousedown",C);Z.Utils.addEventListener(h,"mouseup",C);Z.Utils.addEventListener(h,"mouseout",C);Z.Utils.addEventListener(k,"mouseover",C);Z.Utils.addEventListener(k,"mousedown",C);Z.Utils.addEventListener(k,
"mouseup",C);Z.Utils.addEventListener(k,"mouseout",C);Z.Utils.addEventListener(d,"mouseover",C);Z.Utils.addEventListener(d,"mousedown",C);Z.Utils.addEventListener(d,"mouseup",C);Z.Utils.addEventListener(d,"mouseout",C);cb.zIndex=(a.baseZIndex+2).toString();a.ViewerDisplay.appendChild(a.ToolbarDisplay);Z.Utils.addEventListener(a.ToolbarDisplay,"mouseover",Z.Utils.stopPropagation);e(!0)}function d(){window.clearInterval(ya);ya=null;var a=Z.Utils.getElementOfViewerById(g,"progressTextBoxCenteredDiv");
a&&(a=a.firstChild)&&(a.nodeValue="")}function e(b){!Za&&b&&(Za=!0,Q("toolbarInitialized"),a.validateViewerReady("toolbarInitialized"))}function f(b){4>a.toolbarVisible&&!Z.mobileDevice||8==a.toolbarVisible||a.toolbarInternal?h(b):n(!b)}function h(a){cb&&(cb.display=a?"inline-block":"none")}function n(b){a.ToolbarMinimized=b;if(cb){var c=Z.Utils.getElementOfViewerById(g,"buttonContainer"),d=Z.Utils.getElementOfViewerById(g,"toolbarBackground"),e=Z.Utils.getElementOfViewerById(g,"buttonMinimize"),
f=Z.Utils.getElementOfViewerById(g,"buttonExpand"),h=Z.Utils.getElementOfViewerById(g,"logoDivider"),v=0;f&&!Cb&&(v=parseFloat(f.style.left)+parseFloat(f.style.width)+4);if(a.imageFilters)var l=Z.Utils.getElementOfViewerById(g,"imageFilterPanelBackground"),k=Z.Utils.getElementOfViewerById(g,"buttonContainerImageFilter");var E=Z.toolbarCurrentW;b?(c&&(c.style.display="none"),e&&f&&!Cb&&(h&&(h.style.display="none"),e.style.display="none",f.style.display="inline-block"),cb.width=v+"px",d&&(d.style.width=
v+"px"),l&&k&&(l.style.width="0px",k.style.display="none")):(c&&(c.style.display="inline-block"),e&&f&&!Cb&&(h&&(h.style.display="inline-block"),e.style.display="inline-block",f.style.display="none"),cb.width=E+"px",d&&(d.style.width=E+"px"),l&&k&&Sd&&(l.style.width=Ne+"px",k.style.display="inline-block"))}}function E(b){if("undefined"!==typeof V&&"undefined"!==typeof aa){b=(b-a.minZ)/(a.maxZ-a.minZ);var c=parseFloat(V.left),d=parseFloat(V.left)+parseFloat(V.width)-parseFloat(aa.width)-c;aa.left=
b*d+c+"px"}}function k(a){"undefined"!==typeof L&&(Aa=!0,a=Z.Utils.getMousePosition(a),L.mouseXPrior=a.x,L.mouseYPrior=a.y)}function I(){if("undefined"!==typeof V&&"undefined"!==typeof L&&"undefined"!==typeof aa){var c=parseFloat(V.left),d=parseFloat(V.left)+parseFloat(V.width)-parseFloat(aa.width),e=parseFloat(aa.left)+(Na.x-L.mouseXPrior);e<c?e=c:e>d?e=d:L.mouseXPrior=Na.x;aa.left=e+"px";c=a.minZ+(e-c)/(d-c)*(a.maxZ-a.minZ);d=c-b.getZoom();a.zooming=0<d?"in":0>d?"out":"stop";b.scaleTierToZoom(c)}}
function C(a){if(a=Z.Utils.event(a)){var c=a.type,d=Z.Utils.target(a);if(d){O.background=xa;T.background=xa;H.background=xa;var e=d.id,e=Z.Utils.stringSubtract(e,g);a=a.altKey;switch(c){case "mouseover":d.style.background=da;break;case "mousedown":d.style.background=P;"buttonZoomInInternal"==e?a||b.zoom("in"):"buttonZoomOutInternal"==e&&(a||b.zoom("out"));break;case "mouseup":d.style.background=da,b.zoom("stop"),"buttonResetInternal"==e&&b.reset(a)}}}}function q(c){if(c=Z.Utils.event(c)){var d=c.type,
e=Z.Utils.target(c);if(e){var f=e.parentNode;if(f)var h=f,n=f.id,n=Z.Utils.stringSubtract(n,g)}e=Z.Utils.relatedTarget(c)}"mousedown"==d&&b&&"buttonAudioOn"!=n&&"buttonAudioMuted"!=n&&(b.zoomAndPanAllStop(!1,!0),a.maskingSelection&&a.maskClearOnUserAction&&b.clearMask());if((a.interactive||"mousedown"!=d&&"mouseup"!=d||"buttonRotateClockwise"==n||"buttonRotateCounterwise"==n)&&(!e||"[object HTMLSelectElement]"!=e&&"[object HTMLOptionElement]"!=e)&&!Z.Utils.isRightMouseButton(c)){Z.touchSupport&&c.preventDefault();
if(n&&-1!=n.indexOf("viewportContainer")||Aa||db||vb||n&&-1!=n.indexOf("buttonSlider")&&1<Z.viewerCounter){if("buttonSliderZoom"==n||Aa)L=f=Z.Utils.getElementOfViewerById(g,"buttonSliderZoom"),aa=L.style;else if("buttonSliderImageSet"==n||vb)btsiS=f=Z.Utils.getElementOfViewerById(g,"buttonSliderImageSet"),btsisS=btsiS.style;f&&"undefined"!==typeof f.id&&(n=f.id,n=Z.Utils.stringSubtract(n,g))}K(f,d);if(n&&"buttonBackground"!=n&&d)switch(d){case "click":d=-1!=n.toLowerCase().indexOf("checkbox");b&&
d&&u(c,n);break;case "mouseover":if("trackSliderZoom"!=n&&"trackSliderImageSet"!=n)if(Z.Utils.removeEventListener(f.childNodes[0],"mouseover",q),Z.Utils.addEventListener(f.childNodes[1],"mousedown",q),Z.Utils.addEventListener(f.childNodes[1],"mouseout",q),Aa&&h&&Z.Utils.addEventListener(h.childNodes[0],"mouseup",q),vb&&h&&Z.Utils.addEventListener(h.childNodes[0],"mouseup",q),"buttonZoomIn"==n||"buttonSliderZoom"==n||"buttonZoomOut"==n)a.sliderFocus="zoom";else{if("buttonImageSetPrior"==n||"buttonSliderImageSet"==
n||"buttonImageSetNext"==n)a.sliderFocus="imageSet"}else Z.Utils.addEventListener(f.childNodes[0],"mouseout",q),a.sliderFocus="trackSliderImageSet"==n?"imageSet":"zoom";break;case "mousedown":a.buttonIsDown=!0;!a.fullView&&document.activeElement&&document.activeElement.blur();"trackSliderZoom"!=n&&"trackSliderImageSet"!=n&&-1==n.indexOf("trackSliderFilter")?(Z.Utils.removeEventListener(f.childNodes[1],"mousedown",q),Z.Utils.removeEventListener(f.childNodes[1],"mouseout",q),Z.Utils.addEventListener(f.childNodes[2],
"mouseup",q),Z.Utils.addEventListener(f.childNodes[2],"mouseout",q),"buttonSliderZoom"==n?(k(c),$a(c),Z.Utils.addEventListener(document,"mousemove",$a),Ma||(Ma=window.setInterval(I,fa)),Z.Utils.addEventListener(document,"mouseup",q)):-1!=n.indexOf("buttonSliderFilter")?(imageFilterEventsManager(c,n,"sliderStart"),sliderMouseMoveHandlerFilter(c,n),Z.Utils.addEventListener(document,"mousemove",sliderMouseMoveHandlerFilter),Oa||(Oa=window.setInterval(function(){imageFilterEventsManager(c,n,"sliderSlide")},
U)),Z.Utils.addEventListener(document,"mouseup",q)):"buttonSliderImageSet"==n&&(sliderSlideStartImageSet(c),sliderMouseMoveHandlerImageSet(c),Z.Utils.addEventListener(document,"mousemove",sliderMouseMoveHandlerImageSet),v||(v=window.setInterval(sliderSlideImageSet,Xb)),Z.Utils.addEventListener(document,"mouseup",q))):Z.Utils.addEventListener(document,"mouseup",q);b&&u(c,n);break;case "mouseup":a.buttonIsDown=!1;"trackSliderZoom"!=n&&"trackSliderImageSet"!=n&&-1==n.indexOf("trackSliderFilter")?(Z.Utils.removeEventListener(f.childNodes[2],
"mouseup",q),Z.Utils.removeEventListener(f.childNodes[2],"mouseout",q),Z.Utils.addEventListener(f.childNodes[1],"mousedown",q),Z.Utils.addEventListener(f.childNodes[1],"mouseout",q),h&&(Aa||db||vb)&&Z.Utils.removeEventListener(h.childNodes[0],"mouseup",q)):Z.Utils.addEventListener(document,"mouseup",q);b&&u(c,n);break;case "mouseout":if("trackSliderZoom"!=n&&-1==n.indexOf("trackSliderFilter")&&"trackSliderImageSet"!=n){if(Z.Utils.removeEventListener(f.childNodes[1],"mousedown",q),Z.Utils.removeEventListener(f.childNodes[1],
"mouseout",q),Z.Utils.addEventListener(f.childNodes[0],"mouseover",q),b&&u(c,n),"buttonImageSetPrior"==n||"buttonSliderImageSet"==n||"trackSliderImageSet"==n||"buttonImageSetNext"==n||"buttonZoomIn"==n||"buttonSliderZoom"==n||"buttonZoomOut"==n)a.sliderFocus=2==a.mouseWheel?"imageSet":"zoom"}else Z.Utils.removeEventListener(f.childNodes[0],"mouseout",q),a.sliderFocus=2==a.mouseWheel?"imageSet":"zoom";break;case "touchstart":"buttonSliderZoom"==n?(k(c),ua(c),Z.Utils.addEventListener(document,"touchmove",
ua),Ma||(Ma=window.setInterval(I,fa))):-1!=n.indexOf("buttonSliderFilter")?(imageFilterEventsManager(c,n,"sliderStart"),sliderTouchMoveHandlerFilter(c,n),Z.Utils.addEventListener(document,"touchmove",sliderTouchMoveHandlerFilter),Oa||(Oa=window.setInterval(function(){imageFilterEventsManager(c,n,"sliderSlide")},U))):"buttonSliderImageSet"==n&&(sliderSlideStartImageSet(c),sliderTouchMoveHandlerImageSet(c),Z.Utils.addEventListener(document,"touchmove",sliderTouchMoveHandlerImageSet),v||(v=window.setInterval(sliderSlideImageSet,
Xb)));Z.Utils.addEventListener(f,"touchend",q);Z.Utils.addEventListener(f,"touchcancel",q);b&&u(c,n);break;case "touchend":Z.Utils.addEventListener(f,"touchstart",q);b&&u(c,n);break;case "touchcancel":Z.Utils.addEventListener(f,"touchstart",q);b&&u(c,n);break;case "MSPointerDown":"buttonSliderZoom"==n?(k(c),ua(c),Z.Utils.addEventListener(document,"MSPointerMove",ua),Ma||(Ma=window.setInterval(I,fa))):-1!=n.indexOf("SliderFilter")?(imageFilterEventsManager(c,n,"sliderStart"),sliderTouchMoveHandlerFilter(c,
n),Z.Utils.addEventListener(document,"MSPointerMove",sliderTouchMoveHandlerFilter),Oa||(Oa=window.setInterval(function(){imageFilterEventsManager(c,n,"sliderSlide")},U))):"buttonSliderImageSet"==n&&(sliderSlideStartImageSet(c),sliderTouchMoveHandlerImageSet(c),Z.Utils.addEventListener(document,"MSPointerMove",sliderTouchMoveHandlerImageSet),v||(v=window.setInterval(sliderSlideImageSet,Xb)));Z.Utils.addEventListener(f,"MSPointerUp",q);b&&u(c,n);break;case "MSPointerUp":Z.Utils.addEventListener(f,"MSPointerDown",
q),b&&u(c,n)}}}function u(c,d){var e=c.type,f=a.annotationFileShared?"0":D,h=c.altKey;if("click"==e)a.comparison&&-1!=d.indexOf("Sync")?(f=Z.Utils.target(c),a.syncComparison=f.checked,a.syncComparisonViewport(!0)):a.tracking&&-1!=d.indexOf("Count")?b.trackingEventsManager(c,d):a.userLogging&&-1!=d.indexOf("User")?b.trackingEventsManager(c,d):a.imageFilters&&-1!=d.indexOf("Filter")&&imageFilterEventsManager(c,d,"checkbox");else if("mousedown"==e||"touchstart"==e)switch(e=document.activeElement.id,
!Z.Utils.stringValidate(e)||e!="poiNameTextElement"+D&&e!="labelNameTextElement"+D&&"captionTextElement"!=e&&"commentTextElement"!=e&&"tooltipTextElement"!=e&&"clickURLTextElement"!=e&&e!="noteNameTextElement"+D&&e!="noteTextElement"+D||Z.Utils.getElementOfViewerById(g,e).blur(),M.positionButtonBorder(d),a.tracking&&-1!=d.indexOf("buttonCounterListShow")&&(d="buttonCounterListShow"),d){case "buttonMinimize":h?b.setHotspotsVisibility(!b.getHotspotsVisibility()):(M.minimize(!0),a.Navigator&&(a.Navigator.setVisibility(!1),
a.comparison&&a.Navigator2.setVisibility(!1)),a.Gallery&&a.Gallery.setVisibility(!1));break;case "buttonExpand":h?b.setHotspotsVisibility(!b.getHotspotsVisibility()):(M.minimize(!1),a.Navigator&&(a.Navigator.setVisibility(!0),a.comparison&&a.Navigator2.setVisibility(!0)),a.Gallery&&a.Gallery.setVisibility(!0));break;case "buttonZoomOut":h||b.zoom("out");break;case "buttonZoomIn":h||b.zoom("in");break;case "buttonPanLeft":b.pan("left");break;case "buttonPanUp":b.pan("up");break;case "buttonPanDown":b.pan("down");
break;case "buttonPanRight":b.pan("right");break;case "buttonReset":b.reset(h);break;case "buttonFullView":break;case "buttonFullViewExit":break;case "buttonMeasure":b.toggleEditModeMeasure(!0);break;case "buttonMeasureExit":b.toggleEditModeMeasure(!1);break;case "buttonHelp":a.annotations&&null===a.editMode?a.showHelp(Z.Utils.getResource("z32")+Z.Utils.getResource("z30")+Z.Utils.getResource("z29")):a.showHelp(Z.Utils.getResource("z32"));break;case "buttonHelpMarkup"+f:a.showHelp(Z.Utils.getResource("z31"));
break;case "buttonHelpAnnotation"+f:a.showHelp(Z.Utils.getResource("z28"));break;case "buttonRotateClockwise":b.rotate("clockwise",h);break;case "buttonRotateCounterwise":b.rotate("counterwise",h);break;case "buttonTourPrior":b.priorDestination(!0);break;case "buttonTourNext":b.nextDestination(!0);break;case "buttonTourStart":b.tourStart();break;case "buttonTourStop":b.tourStop();break;case "buttonSlideshowPrior":b.priorSlide(!0);break;case "buttonSlideshowNext":b.nextSlide(!0);break;case "buttonSlideshowStart":b.slideshowStart();
break;case "buttonSlideshowStop":b.slideshowStop();break;case "buttonAudioOn":b.audioMute(!0);break;case "buttonAudioMuted":b.audioMute(!1);break;case "buttonImageFilterPanelShow":M.imageFilterPanelShow();break;case "buttonImageFilterPanelHide":M.imageFilterPanelHide();break;case "buttonImageFilterPanelHideOnPanel":M.imageFilterPanelHide();break;case "buttonImageSetPrior":a.animation&&a.viewportChange("backward");break;case "buttonImageSetNext":a.animation&&a.viewportChange("forward");break;case "buttonPreload":a.imageSet?
a.prez581s():a.Viewport.prez581s();break;case "buttonPOIGo"+f:b.goToPOICurrent();break;case "buttonPOIAdd"+f:b.addNewPOI();break;case "buttonPOIEdit"+f:b.editCurrentPOI();break;case "buttonPOIDelete"+f:b.deleteCurrentPOI();break;case "buttonPOICancel"+f:b.cancelEditsPOI();break;case "buttonPOISave"+f:b.saveEditsPOI();break;case "buttonLabelGo"+f:b.goToLabelCurrent();break;case "buttonLabelAdd"+f:b.addNewLabel();break;case "buttonLabelEdit"+f:b.editCurrentLabel();break;case "buttonLabelDelete"+f:b.deleteCurrentLabel();
break;case "buttonLabelCancel"+f:b.cancelEditsLabel();break;case "buttonLabelSave"+f:b.saveEditsLabel(!1,!0,!0);break;case "buttonNoteAdd"+f:b.addNewNote();break;case "buttonNoteEdit"+f:b.editCurrentNote();break;case "buttonNoteDelete"+f:b.deleteCurrentNote();break;case "buttonNoteCancel"+f:b.cancelEditsNote();break;case "buttonNoteSave"+f:b.saveEditsNote();break;case "buttonClearAll"+f:b.deleteAllAnnotations();break;case "buttonViewMode"+f:b.setEditModeLabel("view");break;case "buttonEditColorPicker"+
f:b.toggleLabelColorPicker();break;case "buttonEditModeFreehand"+f:b.setEditModeLabel("freehand");break;case "buttonEditModeText"+f:b.setEditModeLabel("text");break;case "buttonEditModeIcon"+f:b.setEditModeLabel("icon");break;case "buttonEditModeRectangle"+f:b.setEditModeLabel("rectangle");break;case "buttonEditModePolygon"+f:b.setEditModeLabel("polygon");break;case "buttonEditModeMeasure"+f:b.setEditModeLabel("measure");break;case "buttonLabelScaleDown"+f:b.labelScale("down");break;case "buttonLabelScaleUp"+
f:b.labelScale("up");break;case "buttonCounterListShow":b.trackingEventsManager(c,d);break;case "buttonCounterListHide"+f:b.trackingEventsManager(c,d);break;case "buttonToggleTrackingNav"+f:b.trackingEventsManager(c,d);break;case "buttonTrackingClearLast"+f:b.trackingEventsManager(c,d);break;case "buttonTrackingClearType"+f:b.trackingEventsManager(c,d);break;case "buttonTrackingClearAll"+f:b.trackingEventsManager(c,d);break;case "buttonTrackingSave"+f:b.trackingEventsManager(c,d);break;default:"buttonColor"==
d.substr(0,11)&&b.setDrawingColor(d)}else if("mouseup"==e||"touchend"==e||"touchcancel"==e)if("buttonSliderZoom"==d||Aa)Ma&&(window.clearInterval(Ma),Ma=null),y(),Aa=!1,a.zooming="stop",b.updateView();else if("trackSliderZoom"==d)"undefined"!==typeof N&&"undefined"!==typeof V&&(f=Z.Utils.getElementPosition(N),f=Z.Utils.getMousePosition(c).x-f.x,h=parseFloat(V.width),f=a.minZ+(f-0)/(h-0)*(a.maxZ-a.minZ),f<a.minZ+.1&&(f=a.minZ),f>a.maxZ-.1&&(f=a.maxZ),h=f-b.getZoom(),a.zooming=0<h?"in":0>h?"out":"stop",
b.scaleTierToZoom(f),a.zooming="stop",b.updateView());else if(-1!=d.indexOf("buttonSliderFilter")||db)Oa&&(window.clearInterval(Oa),Oa=null),y(),imageFilterEventsManager(c,d,"sliderEnd");else if(-1!=d.indexOf("trackSliderFilter"))imageFilterEventsManager(c,d,"sliderSnap");else if("buttonImageFilterPlus"==d||"buttonImageFilterMinus"==d)imageFilterEventsManager(c,d);else if("buttonSliderImageSet"==d||vb)v&&(window.clearInterval(v),v=null),y(),sliderSlideEndImageSet();else if("buttonZoomOut"==d||"buttonZoomIn"==
d)b.zoom("stop"),"buttonZoomOut"==d&&h&&b.toggleSmoothZoom(),"buttonZoomIn"==d&&h&&b.toggleEditMode();else if("buttonPanLeft"==d||"buttonPanRight"==d)a.tracking?"buttonPanLeft"==d?a.viewportCurrent.goToNextCell("left"):a.viewportCurrent.goToNextCell("right"):b.pan("horizontalStop"),"buttonPanLeft"==d&&h&&b.toggleSmoothPan();else if("buttonPanUp"==d||"buttonPanDown"==d)a.tracking?"buttonPanUp"==d?a.viewportCurrent.goToNextCell("up"):a.viewportCurrent.goToNextCell("down"):b.pan("verticalStop");else if("buttonHelp"==
d)0==a.debug&&h&&a.showGlobals();else if("buttonRotateClockwise"==d||"buttonRotateCounterwise"==d)a.rotationFree&&b.rotate("stop");else if(d=="buttonLabelScaleDown"+f||d=="buttonLabelScaleUp"+f)b.labelScale("stop");else if("buttonFullView"==d)b.toggleFullViewMode(!0);else if("buttonFullViewExit"==d)b.toggleFullViewMode(!1);else if("buttonImageFilterClear"==d)b.clearImageFilterLast();else if("buttonImageFiltersClearAll"==d)b.clearImageFiltersAll();else if("trackSliderImageSet"==d)a.slidestack&&sliderSnapImageSet(c);
else{if("buttonImageSetPrior"==d||"buttonImageSetNext"==d)a.animation?a.viewportChange("stop"):a.slidestack&&("buttonImageSetPrior"==d?a.viewportChange("backward"):"buttonImageSetNext"==d&&a.viewportChange("forward"))}else"mouseout"==e&&("buttonZoomOut"==d||"buttonZoomIn"==d?b.zoom("stop"):"buttonPanLeft"==d||"buttonPanRight"==d?b.pan("horizontalStop"):"buttonPanUp"==d||"buttonPanDown"==d?b.pan("verticalStop"):d=="buttonLabelScaleDown"+f||d=="buttonLabelScaleUp"+f?b.labelScale("stop"):"buttonImageSetPrior"!=
d&&"buttonImageSetNext"!=d||a.viewportChange("stop"))}function y(){Aa?(Z.Utils.removeEventListener(document,"mousemove",$a),Z.Utils.removeEventListener(document,"mouseup",q),Z.Utils.removeEventListener(document,"touchmove",ua)):db?(Z.Utils.removeEventListener(document,"mousemove",sliderMouseMoveHandlerFilter),Z.Utils.removeEventListener(document,"mouseup",q),Z.Utils.removeEventListener(document,"touchmove",sliderTouchMoveHandlerFilter)):vb&&(Z.Utils.removeEventListener(document,"mousemove",sliderMouseMoveHandlerImageSet),
Z.Utils.removeEventListener(document,"mouseup",q),Z.Utils.removeEventListener(document,"touchmove",sliderTouchMoveHandlerImageSet));for(var b=a.ToolbarDisplay.childNodes,c=0,d=b.length;c<d;c++){var e=b[c],f=e.id;if(f&&-1!=f.indexOf("button"))if("buttonContainer"!=f&&"buttonContainerImageFilter"!=f)Z.Utils.setButtonDefaults(e,M);else for(var e=e.childNodes,f=0,g=e.length;f<g;f++){var h=e[f],n=h.id;n&&-1!=n.indexOf("button")&&Z.Utils.setButtonDefaults(h,M)}}}function $a(a){Na=new Z.Utils.Point(a.clientX,
a.clientY)}function ua(a){(a=Z.Utils.getFirstTouch(a))&&(Na=new Z.Utils.Point(a.pageX,a.pageY))}function K(a,b){if("undefined"!==typeof a.id&&-1!=a.id.indexOf("button")&&-1==a.id.indexOf("buttonContainer")){var c=a.firstChild,d=a.childNodes[1],e=a.childNodes[2];if(c&&d&&e)if(c=c.style,d=d.style,e=e.style,c.visibility=d.visibility=e.visibility="hidden","mouseover"==b&&-1!=a.id.indexOf("buttonSliderZoom")&&Aa)e.visibility="visible";else if("mouseover"==b&&-1!=a.id.indexOf("buttonSliderFilter")&&db)e.visibility=
"visible";else if("mouseover"==b&&-1!=a.id.indexOf("buttonSliderImageSet")&&vb)e.visibility="visible";else if("mouseover"==b||"mouseup"==b)d.visibility="visible";else if("mousedown"==b||"mousemove"==b||"touchstart"==b||"MSPointerDown"==b)e.visibility="visible";else if("mouseout"==b||"touchend"==b||"touchcancel"==b||"MSPointerUp"==b)c.visibility="visible"}}var M=this,Za=!1,D=b.getViewportID().toString();if(a.toolbarInternal){var H,T,O,da=Z.Utils.getResource("UI_TOOLBARINTERNALBUTTONOVERCOLOR"),P=Z.Utils.getResource("UI_TOOLBARINTERNALBUTTONDOWNCOLOR"),
xa=Z.Utils.getResource("UI_TOOLBARINTERNALBUTTONUPCOLOR");c()}else{a.skinPath=Z.Utils.stringRemoveTrailingSlashCharacters(a.skinPath);(new Z.NetConnector(a)).loadXML(a.skinPath+"/"+Z.Utils.getResource("z200"));var qa,cb,ka=[],R=[],S=[],fa=parseInt(Z.Utils.getResource("z205ZOOM"),10),Aa=!1,Ma=null,Na=null;if(a.sliderZoomVisible)var N,V,L,aa;var ya=null,kb=null,bc,Le,Cb,sf,Me;if(a.imageSet)var Xb=parseInt(Z.Utils.getResource("z205IMAGESET"),10),vb=!1,v=null,va;if(a.imageFilters)var U=parseInt(Z.Utils.getResource("z205FILTER"),
10),db=!1,Oa=null,Ne,Sd=a.initialImageFilters,Zc,Jb,ob,Fa,Vd,Mc,lb,eb,lc,Sb,Oc,Yb,bd,Tc,ac,ed,Mb,Xd,fd,Zd,nd,jd,hd,ue,we,zd,Dd,Lc,dc,uc,ec,qd,Nd,La,Lb,r,Bc,Jc,od,cc,Ya,td,le,sc,ab,Ja,Od,Ae,oc,Ed,Of,ye,Wc,ga,Db,Ea,pd,vc,Xc,hb,nb,J,Kd,ra,W,$b,Yc,sa,oa,Ka,Ld,ub,mc,hc,Md,mb,Fb,Gb,gb,Nb}a.z558=function(c,d){ka=d;a.ToolbarDisplay=Z.Utils.createContainerElement(g,"div","ToolbarDisplay","inline-block","absolute","visible","1px","1px","0px","1px","none","0px","transparent none","0px","0px","normal");cb=a.ToolbarDisplay.style;
cb.textAlign="left";cb.zIndex=(a.baseZIndex+2).toString();var h=new Z.Utils.Graphic(g,"toolbarBackground",a.skinPath,d[0],"1px","1px","0px","0px");parseFloat(Z.Utils.getResource("z82"));var n=Z.Utils.getResource("z83NOALPHA");a.ToolbarDisplay.appendChild(h.elmt);a.toolbarBackgroundVisible||Z.Utils.setOpacity(h.elmt,0,n);S=c;if(a.logoVisible){Z.Utils.stringValidate(a.logoCustomPath)?(h=Z.Utils.cacheProofPath(a.logoCustomPath),h=new Z.Utils.Graphic(g,"toolbarLogo",h,null,"1px","1px","1px","1px")):h=
new Z.Utils.Graphic(g,"toolbarLogo",a.skinPath,d[7],"1px","1px","1px","1px");if(Z.Utils.stringValidate(a.logoLinkURL)){var v=document.createElement("a");v.setAttribute("href",a.logoLinkURL);v.setAttribute("target",Z.Utils.getResource("z427TARGET"));v.setAttribute("title",Z.Utils.getResource("z360"));v.setAttribute("outline","none");v.appendChild(h.elmt);a.ToolbarDisplay.appendChild(v)}else h.elmt.setAttribute("title",Z.Utils.getResource("z427DISPLAY")),a.ToolbarDisplay.appendChild(h.elmt);if(0==a.toolbarVisible||
1==a.toolbarVisible)h=new Z.Utils.Graphic(g,"logoDivider",a.skinPath,d[8],"1px","1px","1px","1px"),a.ToolbarDisplay.appendChild(h.elmt)}h=Z.Utils.createContainerElement(g,"div","buttonContainer","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal","default");a.ToolbarDisplay.appendChild(h);Z.Utils.addEventListener(h,"mousedown",Z.Utils.preventDefault);Z.Utils.addEventListener(h,"mouseover",M.backgroundEventsHandler);Z.Utils.addEventListener(h,
"touchstart",Z.Utils.preventDefault);v=new Z.Utils.Graphic(g,"buttonBackground",a.skinPath,d[0],"1px","1px","0px","0px");h.appendChild(v.elmt);Z.Utils.setOpacity(v.elmt,"0","#FBFAFA");(0!=a.toolbarVisible&&1!=a.toolbarVisible||Z.mobileDevice)&&a.minimizeVisible&&(v=new Z.Utils.Button(g,"buttonMinimize",null,a.skinPath,d[9],d[10],d[11],"1px","1px","1px","1px","mouseover",q,a.hotspots?"z363&TOGGLEHOTSPOTS":a.annotations?"z363&TOGGLEANNOTATIONS":"z363",null,null,null,null,null,null,null,a.tooltipsVisible),
a.ToolbarDisplay.appendChild(v.elmt),v=new Z.Utils.Button(g,"buttonExpand",null,a.skinPath,d[12],d[13],d[14],"1px","1px","1px","1px","mouseover",q,a.hotspots?"z341&TOGGLEHOTSPOTS":a.annotations?"z341&TOGGLEANNOTATIONS":"z341",null,null,null,null,null,null,null,a.tooltipsVisible),a.ToolbarDisplay.appendChild(v.elmt));a.zoomButtonsVisible&&(v=new Z.Utils.Button(g,"buttonZoomOut",null,a.skinPath,d[1],d[2],d[3],"1px","1px","1px","1px","mouseover",q,"z400",null,null,null,null,null,null,null,a.tooltipsVisible),
h.appendChild(v.elmt));a.sliderZoomVisible&&(v=new Z.Utils.Graphic(g,"trackSliderZoom",a.skinPath,d[15],"1px","1px","0px","0px","z385ZOOM"),h.appendChild(v.elmt),Z.Utils.addEventListener(v.elmt,"mousedown",q),Z.Utils.addEventListener(v.elmt,"touchstart",q),Z.Utils.addEventListener(v.elmt,"mouseover",q),v=new Z.Utils.Button(g,"buttonSliderZoom",null,a.skinPath,d[17],d[18],d[19],"1px","1px","1px","1px","mouseover",q,"z385ZOOM",null,null,null,null,null,null,null,a.tooltipsVisible),h.appendChild(v.elmt));
a.zoomButtonsVisible&&(v=new Z.Utils.Button(g,"buttonZoomIn",null,a.skinPath,d[4],d[5],d[6],"1px","1px","1px","1px","mouseover",q,"z399",null,null,null,null,null,null,null,a.tooltipsVisible),h.appendChild(v.elmt));if(a.panButtonsVisible){if(a.zoomButtonsVisible||a.sliderZoomVisible)v=new Z.Utils.Graphic(g,"panDivider",a.skinPath,d[20],"1px","1px","1px","1px"),h.appendChild(v.elmt),a.toolbarBackgroundVisible||Z.Utils.setOpacity(v.elmt,0,n);v=new Z.Utils.Button(g,"buttonPanLeft",null,a.skinPath,d[21],
d[22],d[23],"1px","1px","1px","1px","mouseover",q,"z370",null,null,null,null,null,null,null,a.tooltipsVisible);h.appendChild(v.elmt);v=new Z.Utils.Button(g,"buttonPanUp",null,a.skinPath,d[24],d[25],d[26],"1px","1px","1px","1px","mouseover",q,"z372",null,null,null,null,null,null,null,a.tooltipsVisible);h.appendChild(v.elmt);v=new Z.Utils.Button(g,"buttonPanDown",null,a.skinPath,d[27],d[28],d[29],"1px","1px","1px","1px","mouseover",q,"z369",null,null,null,null,null,null,null,a.tooltipsVisible);h.appendChild(v.elmt);
v=new Z.Utils.Button(g,"buttonPanRight",null,a.skinPath,d[30],d[31],d[32],"1px","1px","1px","1px","mouseover",q,"z371",null,null,null,null,null,null,null,a.tooltipsVisible);h.appendChild(v.elmt)}a.resetVisible&&(v=new Z.Utils.Button(g,"buttonReset",null,a.skinPath,d[33],d[34],d[35],"1px","1px","1px","1px","mouseover",q,"z378",null,null,null,null,null,null,null,a.tooltipsVisible),h.appendChild(v.elmt));if(a.fullScreenVisible||a.fullPageVisible)null===a.editMode&&(v=new Z.Utils.Graphic(g,"fullViewDivider",
a.skinPath,d[36],"1px","1px","1px","1px"),h.appendChild(v.elmt),a.toolbarBackgroundVisible||Z.Utils.setOpacity(v.elmt,0,n)),n=new Z.Utils.Button(g,"buttonFullViewExit",null,a.skinPath,d[40],d[41],d[42],"1px","1px","1px","1px","mouseover",q,"z391EXIT",null,null,null,null,null,null,null,a.tooltipsVisible),h.appendChild(n.elmt),n=new Z.Utils.Button(g,"buttonFullView",null,a.skinPath,d[37],d[38],d[39],"1px","1px","1px","1px","mouseover",q,"z391",null,null,null,null,null,null,null,a.tooltipsVisible),h.appendChild(n.elmt);
if(1==a.helpVisible||3==a.helpVisible)n=new Z.Utils.Button(g,"buttonHelp",null,a.skinPath,d[43],d[44],d[45],"1px","1px","1px","1px","mouseover",q,"z342",null,null,null,null,null,null,null,a.tooltipsVisible),h.appendChild(n.elmt);a.progressVisible&&(n=Z.Utils.createContainerElement(g,"div","progressTextBox","inline-block","absolute","hidden","1px","1px","1px","1px","none","0px","transparent none","0px","0px","normal",null,!0),v=S[16],h.appendChild(n),h=document.createTextNode(Z.Utils.getResource("z183")),
n.appendChild(Z.Utils.createCenteredElement(g,h,"progressTextBoxCenteredDiv")),null===kb&&(kb=Z.Utils.getResource("z183COLOR")),Z.Utils.setTextNodeStyle(h,kb,"verdana",v+"px","none","normal","normal","normal","normal","1em","left","none"),Z.Utils.disableTextInteraction(h));a.ViewerDisplay.appendChild(a.ToolbarDisplay);a.toolbarW=S[0];Z.toolbarCurrentW=-1==a.toolbarW?a.viewerW:a.toolbarW;a.toolbarH=qa=S[1];n=a.toolbarBackgroundVisible?0:parseInt(Z.Utils.getResource("DEFAULT_TOOLBARBACKGROUNDVISIBLEADJUST"),
10);M.setSizeAndPosition(Z.toolbarCurrentW,a.toolbarH,0,1==a.toolbarPosition?a.viewerH-a.toolbarH-n:0+n);b&&b.getStatus("initializedViewport")&&(1==a.toolbarVisible&&a.toolbarBackgroundVisible&&(b.setSizeAndPosition(a.viewerW,a.viewerH-a.toolbarH,0,0),b.validateXYZDefaults(!0),b.updateView()),n=b.getZoom(),E(n));f(1==a.toolbarVisible||2==a.toolbarVisible||4==a.toolbarVisible||7==a.toolbarVisible);Z.Utils.addEventListener(a.ToolbarDisplay,"mouseover",Z.Utils.stopPropagation);e(!0)};this.getInitialized=
function(){return Za};this.getSkinArray=function(){return ka};this.getSkinSizes=function(){return S};this.show=function(a){f(a)};this.setVisibility=function(a){h(a)};this.minimize=function(a){n(a)};this.setVisibilityAnnotationPanel=function(c,d){var e=d;if("undefined"===typeof e||null===e)e=a.annotationFileShared?"0":b.getViewportID().toString();if(e=Z.Utils.getElementOfViewerById(g,"AnnotationPanelDisplay"+e))!c||a.measureVisible&&null===a.editMode?(e.style.display="none",a.annotationPanelVisibleState=
!1):(e.style.display="inline-block",a.annotationPanelVisibleState=!0)};this.toggleAnnotationPanelMode=function(a){b.clearAnnotationPanel(D);b.setStatus("annotationPanelInitializedViewport",!1);b.createAnnotationPanel(D)};this.setVisibilityTrackingPanel=function(c,d){var e=d;if("undefined"===typeof e||null===e)e=a.trackingFileShared?"0":b.getViewportID().toString();if(e=Z.Utils.getElementOfViewerById(g,"TrackingPanelDisplay"+e))c?(e.style.display="inline-block",a.trackingPanelVisibleState=!0):(e.style.display=
"none",a.trackingPanelVisibleState=!1)};this.setVisibilityUserPanel=function(b){var c=Z.Utils.getElementOfViewerById(g,"userPanelDisplay");c&&(b?(c.style.display="inline-block",a.userPanelVisibleState=!0):(c.style.display="none",a.userPanelVisibleState=!1))};this.showProgress=function(){var a=Z.Utils.getElementOfViewerById(g,"progressTextBox");a&&(a=a.style)&&(a.display="inline-block")};this.hideProgress=function(){var a=Z.Utils.getElementOfViewerById(g,"progressTextBox");a&&(a=a.style)&&(a.display=
"none")};this.updateProgress=function(b,c){if(a.progressVisible){ya&&window.clearInterval(ya);var e,f=Z.Utils.getElementOfViewerById(g,"progressTextBoxCenteredDiv");f&&(f=f.firstChild)&&(0==b||0==c?(f.nodeValue="llllllllll",ya=window.setInterval(d,parseInt(Z.Utils.getResource("z182"),10))):(e=Math.round(100-c/b*100),e=Math.round(e/10),f.nodeValue=Z.Utils.stringMultiply("l",e)))}};this.setViewport=function(a){b=a;D=b.getViewportID().toString()};this.parseSkinXML=function(b){a.skinMode=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("SKINMODE").nodeValue;
var c,d;1==a.skinMode||0==a.skinMode&&!Z.mobileDevice?(c=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("FOLDERSTANDARD").nodeValue,d="SIZESSTANDARD"):(c=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("FOLDERLARGE").nodeValue,d="SIZESLARGE");var e=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("PROGRESSCOLOR");"undefined"!==typeof e&&null!==e&&(kb=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("PROGRESSCOLOR").nodeValue);e=[];e[e.length]=parseFloat(b.getElementsByTagName(d)[0].attributes.getNamedItem("TOOLBARW").nodeValue);
e[e.length]=parseFloat(b.getElementsByTagName(d)[0].attributes.getNamedItem("TOOLBARH").nodeValue);e[e.length]=parseFloat(b.getElementsByTagName(d)[0].attributes.getNamedItem("LOGOW").nodeValue);e[e.length]=parseFloat(b.getElementsByTagName(d)[0].attributes.getNamedItem("LOGOH").nodeValue);e[e.length]=parseFloat(b.getElementsByTagName(d)[0].attributes.getNamedItem("DIVIDERW").nodeValue);e[e.length]=parseFloat(b.getElementsByTagName(d)[0].attributes.getNamedItem("DIVIDERH").nodeValue);e[e.length]=
parseFloat(b.getElementsByTagName(d)[0].attributes.getNamedItem("BUTTONW").nodeValue);e[e.length]=parseFloat(b.getElementsByTagName(d)[0].attributes.getNamedItem("BUTTONH").nodeValue);e[e.length]=parseFloat(b.getElementsByTagName(d)[0].attributes.getNamedItem("BUTTONSPAN").nodeValue);e[e.length]=parseFloat(b.getElementsByTagName(d)[0].attributes.getNamedItem("SLIDERBUTTONW").nodeValue);e[e.length]=parseFloat(b.getElementsByTagName(d)[0].attributes.getNamedItem("SLIDERBUTTONH").nodeValue);e[e.length]=
parseFloat(b.getElementsByTagName(d)[0].attributes.getNamedItem("SLIDERTRACKW").nodeValue);e[e.length]=parseFloat(b.getElementsByTagName(d)[0].attributes.getNamedItem("SLIDERTRACKH").nodeValue);e[e.length]=parseFloat(b.getElementsByTagName(d)[0].attributes.getNamedItem("SLIDERSPAN").nodeValue);e[e.length]=parseFloat(b.getElementsByTagName(d)[0].attributes.getNamedItem("PROGRESSW").nodeValue);e[e.length]=parseFloat(b.getElementsByTagName(d)[0].attributes.getNamedItem("PROGRESSH").nodeValue);e[e.length]=
parseFloat(b.getElementsByTagName(d)[0].attributes.getNamedItem("PROGRESSFONTSIZE").nodeValue);var f,g,h;d="edit"==a.trackingEditMode?176:a.tracking?164:"edit"==a.editMode||"edit"==a.trackingEditMode?161:"markup"==a.editMode?152:a.imageFilters?100:a.screensaver||a.preloadVisible||a.tourPath||a.slidePath||a.imageSetPath?77:a.rotationVisible?58:a.measureVisible?51:0<a.helpVisible?45:a.fullScreenVisible||a.fullPageVisible?45:a.resetVisible?35:a.panButtonsVisible?32:a.sliderZoomVisible?19:a.minimizeVisible?
14:a.logoVisible?8:6;f=b.getElementsByTagName("FILES")[0].attributes.getNamedItem("SKIN0");null!==f&&(g=f.nodeValue);f=b.getElementsByTagName("FILES")[0].attributes.getNamedItem("SKIN"+d.toString());null!==f&&(h=f.nodeValue);if("undefined"!==typeof g&&Z.Utils.stringValidate(g)&&"undefined"!==typeof h&&Z.Utils.stringValidate(h)){g=!1;h=0;for(d+=1;h<d;h++)f=b.getElementsByTagName("FILES")[0].attributes.getNamedItem("SKIN"+h).nodeValue,Z.Utils.stringValidate(f)?R[h]=c+"/"+f:(R[h]="null",g=!0);g&&a.showMessage(Z.Utils.getResource("z279"));
a.z558(e,R)}else a.showMessage(Z.Utils.getResource("z278"))};this.setSizeAndPosition=function(c,d,e,f){"undefined"===typeof c||null===c?c=0<a.toolbarVisible?Z.toolbarCurrentW:0:Z.toolbarCurrentW=c;if("undefined"===typeof d||null===d)d=0<a.toolbarVisible&&8!=a.toolbarVisible?qa:0;if("undefined"===typeof e||null===e)e=0;if("undefined"===typeof f||null===f)f=1==a.toolbarPosition?a.viewerH-qa:0;cb=a.ToolbarDisplay.style;cb.width=c+"px";cb.height=d+"px";cb.left=e+"px";cb.top=f+"px";var h=c,n=d,v=S[2],
k=S[3],E=S[4],I=S[5],C=S[6],q=S[7],U=S[8],u=S[9],y=S[10],$a=S[11],ua=S[12],db=S[13],D=S[14],Za=S[15],w=0,K=(n-k)/2+1,Oa=(n-I)/2,H=(n-q)/2,T=1.3*H,Q=(n-ua)/2,O=(n-y)/2,ka=1==a.logoVisible?0:U/2,da=1==a.logoVisible?0:U/2,P=U-(C-E),ta=0,R=0;a.zoomButtonsVisible&&(ta+=2);a.panButtonsVisible&&(ta+=4,R+=1);a.resetVisible&&(ta+=1);if(a.fullScreenVisible||a.fullPageVisible)ta+=1,R+=1;a.helpVisible&&(ta+=1,a.fullScreenVisible||a.fullPageVisible||(R+=1));a.measureVisible&&(a.fullScreenVisible||a.fullPageVisible||
(R+=1),ta+=1);a.rotationVisible&&(ta+=2,R+=1);if(a.tour||a.slideshow)ta+=3,R+=1,a.audioContent&&(ta+=1);a.imageFilters&&(ta+=1,R+=1);a.preloadVisible&&(ta+=1,R+=1);a.comparison&&a.syncVisible&&(ta+=1,R+=1);if(a.imageSet&&a.sliderImageSetVisible){var ya=db,xa=$a,Ma=ua;va=!1;ta+=2}a.progressVisible||(D=0);var Ta=ta*U+R*P;a.sliderZoomVisible&&(Ta+=db);a.imageSet&&a.sliderImageSetVisible&&(Ta+=ya);bc=Le=Cb=sf=overrideZoom=!1;var Aa=(1==a.logoVisible?v+2:0)+(0!=a.toolbarVisible&&1!=a.toolbarVisible&&0!=
a.minimizeVisible?U:0),Na=1==a.panButtonsVisible?4*U+P:0,Ua=1==a.zoomButtonsVisible?2*U:0,rb=1==a.resetVisible?U:0,Qa=Aa+20+Ta+20+D;Qa>h&&(bc=!0,Qa-db>h&&(Le=!0,Qa-db-D>h&&(Cb=!0,Qa-db-D-Aa>h&&(Me=!0,Qa-db-D-Aa-rb>h&&(sf=!0,Ta-=Na,Qa-db-D-Aa-rb-Na>h&&(overrideZoom=!0,Ta-=Ua)),Ta-=rb),Aa=0),D=0),Ta-=db);var ha=(h-Ta)/2-20+3,Ha=Z.Utils.getElementOfViewerById(g,"toolbarBackground");Ha&&(Ha.style.width=h+"px",Ha.style.height=n+"px",Ha.firstChild.style.width=h+"px",Ha.firstChild.style.height=n+"px");var Ia=
Z.Utils.getElementOfViewerById(g,"buttonContainer");Ia&&(Ia.style.width=Ta+40+"px",Ia.style.height=n+"px",Ia.style.left=ha+"px");var fa=Z.Utils.getElementOfViewerById(g,"buttonBackground");fa&&(fa.style.width=h+"px",Z.Utils.graphicSize(fa,parseFloat(Ia.style.width),parseFloat(Ia.style.height)),fa.style.left="0px");var kb=Z.Utils.getElementOfViewerById(g,"toolbarLogo");if(kb){var ma=kb.style;if(ma)if(Cb)ma.display="none";else{ma.display="inline-block";Z.Utils.graphicSize(kb,v,k);ma.left=w+"px";ma.top=
K+"px";var w=w+(v+2),vb=Z.Utils.getElementOfViewerById(g,"logoDivider");if(vb){Z.Utils.graphicSize(vb,E,I);var Tb=vb.style;Tb.left=w+"px";Tb.top=Oa+"px"}}}if(0!=a.toolbarVisible&&1!=a.toolbarVisible){var fb=Z.Utils.getElementOfViewerById(g,"buttonMinimize"),pb=Z.Utils.getElementOfViewerById(g,"buttonExpand");if(fb&&pb){var Ra=fb.style,Sa=pb.style;Ra&&Sa&&(Cb?(Ra.display="none",Sa.display="none"):(Ra.display="inline-block",Sa.display="inline-block",Z.Utils.buttonSize(fb,C,q),Z.Utils.buttonSize(pb,
C,q),Ra.left=w+ka+"px",Ra.top=T+"px",Sa.left=w+da+"px",Sa.top=T+"px"))}}w=20;if(!overrideZoom){var Eb=Z.Utils.getElementOfViewerById(g,"buttonZoomOut");if(Eb){Z.Utils.buttonSize(Eb,C,q);var Bb=Eb.style;Bb.left=w+"px";Bb.top=H+"px";w+=U}N=Z.Utils.getElementOfViewerById(g,"trackSliderZoom");L=Z.Utils.getElementOfViewerById(g,"buttonSliderZoom");N&&L&&(V=N.style,aa=L.style,V&&aa&&(bc?(V.display="none",aa.display="none"):(V.display="inline-block",aa.display="inline-block",Z.Utils.graphicSize(N,$a,ua),
V.left=w-2+"px",V.top=Q+"px",Z.Utils.buttonSize(L,u,y),aa.left=parseFloat(V.left)+"px",aa.top=O+"px",w+=db)));var Xb=Z.Utils.getElementOfViewerById(g,"buttonZoomIn");if(Xb){Z.Utils.buttonSize(Xb,C,q);var Kb=Xb.style;Kb.left=w+"px";Kb.top=H+"px";w+=U+1}}if(!sf){var sb=Z.Utils.getElementOfViewerById(g,"panDivider");if(sb){Z.Utils.graphicSize(sb,E,I);var Ub=sb.style;Ub.left=w+"px";Ub.top=Oa+"px";w+=P}var jc=Z.Utils.getElementOfViewerById(g,"buttonPanLeft");if(jc){Z.Utils.buttonSize(jc,C,q);var je=jc.style;
je.left=w+"px";je.top=H+"px";w+=U}var sd=Z.Utils.getElementOfViewerById(g,"buttonPanUp");if(sd){Z.Utils.buttonSize(sd,C,q);var Ng=sd.style;Ng.left=w+"px";Ng.top=H+"px";w+=U}var ne=Z.Utils.getElementOfViewerById(g,"buttonPanDown");if(ne){Z.Utils.buttonSize(ne,C,q);var Je=ne.style;Je.left=w+"px";Je.top=H+"px";w+=U}var oe=Z.Utils.getElementOfViewerById(g,"buttonPanRight");if(oe){Z.Utils.buttonSize(oe,C,q);var Ke=oe.style;Ke.left=w+"px";Ke.top=H+"px";w+=U}}if(!Me){var Pe=Z.Utils.getElementOfViewerById(g,
"buttonReset");if(Pe){Z.Utils.buttonSize(Pe,C,q);var me=Pe.style;me.left=w+"px";me.top=H+"px";w+=U+1}}var Rd=Z.Utils.getElementOfViewerById(g,"fullViewDivider");if(Rd){Z.Utils.graphicSize(Rd,E,I);var Td=Rd.style;Td.left=w+"px";Td.top=Oa+"px";w+=P}var Ac=Z.Utils.getElementOfViewerById(g,"buttonFullViewExit");if(Ac){Z.Utils.buttonSize(Ac,C,q);var ud=Ac.style;ud.left=w+"px";ud.top=H+"px";ud.display=a.fullView?"inline-block":"none"}var Cc=Z.Utils.getElementOfViewerById(g,"buttonFullView");if(Cc){Z.Utils.buttonSize(Cc,
C,q);var Nc=Cc.style;Nc.left=w+"px";Nc.top=H+"px";w+=U+1;Nc.display=a.fullView?"none":"inline-block"}var Ud=Z.Utils.getElementOfViewerById(g,"measureDivider");if(Ud){Z.Utils.graphicSize(Ud,E,I);var xc=Ud.style;xc.left=w+"px";xc.top=Oa+"px";w+=P}if(null===a.editMode){var ja=Z.Utils.getElementOfViewerById(g,"buttonMeasureExit");if(ja){Z.Utils.buttonSize(ja,C,q);var yb=ja.style;yb.left=w+"px";yb.top=H+"px";yb.display="measure"==a.labelMode?"inline-block":"none"}}if(fb=Z.Utils.getElementOfViewerById(g,
"buttonMeasure"))Z.Utils.buttonSize(fb,C,q),Ra=fb.style,Ra.left=w+"px",Ra.top=H+"px",w+=U+1,Ra.display="measure"==a.labelMode?"none":"inline-block";var kc=Z.Utils.getElementOfViewerById(g,"rotateDivider");if(kc){Z.Utils.graphicSize(kc,E,I);var yc=kc.style;yc.left=w+"px";yc.top=Oa+"px";var w=w+P,ic=Z.Utils.getElementOfViewerById(g,"buttonRotateCounterwise");if(ic){Z.Utils.buttonSize(ic,C,q);var vd=ic.style;vd.left=w+"px";vd.top=H+"px";w+=U}var Wd=Z.Utils.getElementOfViewerById(g,"buttonRotateClockwise");
if(Wd){Z.Utils.buttonSize(Wd,C,q);var Qg=Wd.style;Qg.left=w+"px";Qg.top=H+"px";w+=U+1}}if(a.tour){var Oe=Z.Utils.getElementOfViewerById(g,"tourDivider");if(Oe){Z.Utils.graphicSize(Oe,E,I);var Vb=Oe.style;Vb.left=w+"px";Vb.top=Oa+"px";var w=w+P,za=Z.Utils.getElementOfViewerById(g,"buttonTourPrior");if(za){Z.Utils.buttonSize(za,C,q);var zc=za.style;zc.left=w+"px";zc.top=H+"px";w+=U+1}var Wb=Z.Utils.getElementOfViewerById(g,"buttonTourNext");if(Wb){Z.Utils.buttonSize(Wb,C,q);var Yg=Wb.style;Yg.left=
w+"px";Yg.top=H+"px";w+=U+1}var Ve=Z.Utils.getElementOfViewerById(g,"buttonTourStop");if(Ve){Z.Utils.buttonSize(Ve,C,q);var We=Ve.style;We.left=w+"px";We.top=H+"px";We.display=a.tourPlaying?"inline-block":"none"}var Xe=Z.Utils.getElementOfViewerById(g,"buttonTourStart");if(Xe){Z.Utils.buttonSize(Xe,C,q);var Ye=Xe.style;Ye.left=w+"px";Ye.top=H+"px";w+=U+1;Ye.display=a.tourPlaying?"none":"inline-block"}}}else if(a.slideshow){var ee=Z.Utils.getElementOfViewerById(g,"slideshowDivider");if(ee){Z.Utils.graphicSize(ee,
E,I);var Og=ee.style;Og.left=w+"px";Og.top=Oa+"px";var w=w+P,Ge=Z.Utils.getElementOfViewerById(g,"buttonSlideshowPrior");if(Ge){Z.Utils.buttonSize(Ge,C,q);var Pd=Ge.style;Pd.left=w+"px";Pd.top=H+"px";w+=U+1}var He=Z.Utils.getElementOfViewerById(g,"buttonSlideshowNext");if(He){Z.Utils.buttonSize(He,C,q);var ke=He.style;ke.left=w+"px";ke.top=H+"px";w+=U+1}var Qd=Z.Utils.getElementOfViewerById(g,"buttonSlideshowStop");if(Qd){Z.Utils.buttonSize(Qd,C,q);var he=Qd.style;he.left=w+"px";he.top=H+"px";he.display=
a.slideshowPlaying?"inline-block":"none"}var ge=Z.Utils.getElementOfViewerById(g,"buttonSlideshowStart");if(ge){Z.Utils.buttonSize(ge,C,q);var fe=ge.style;fe.left=w+"px";fe.top=H+"px";w+=U+1;fe.display=a.slideshowPlaying?"none":"inline-block"}}}else if(null!==a.imageSetPath&&!a.comparison){var xf=Z.Utils.getElementOfViewerById(g,"imageSetDivider");if(xf){Z.Utils.graphicSize(xf,E,I);var Rf=xf.style;Rf.left=w+"px";Rf.top=Oa+"px";w+=P}var Fe=Z.Utils.getElementOfViewerById(g,"buttonImageSetPrior");if(Fe){Z.Utils.buttonSize(Fe,
C,q);var qf=Fe.style;qf.left=w+"px";qf.top=H+"px";w+=U+1}trsiS=Z.Utils.getElementOfViewerById(g,"trackSliderImageSet");btsiS=Z.Utils.getElementOfViewerById(g,"buttonSliderImageSet");trsiS&&btsiS&&(trsisS=trsiS.style,btsisS=btsiS.style,trsisS&&btsisS&&(va?(trsisS.display="none",btsisS.display="none"):(trsisS.display="inline-block",btsisS.display="inline-block",Z.Utils.graphicSize(trsiS,xa,Ma),trsisS.left=w-2+"px",trsisS.top=Q-4+"px",Z.Utils.buttonSize(btsiS,u,y),btsisS.left=parseFloat(trsisS.left)+
"px",btsisS.top=O+"px",w+=ya)));var pf=Z.Utils.getElementOfViewerById(g,"buttonImageSetNext");if(pf){Z.Utils.buttonSize(pf,C,q);var Mf=pf.style;Mf.left=w+"px";Mf.top=H+"px";w+=U+1}}if(a.tour||a.slideshow){var of=Z.Utils.getElementOfViewerById(g,"buttonAudioMuted");if(of){Z.Utils.buttonSize(of,C,q);var nf=of.style;nf.left=w+"px";nf.top=H+"px";nf.display="none"}var X=Z.Utils.getElementOfViewerById(g,"buttonAudioOn");if(X){Z.Utils.buttonSize(X,C,q);var ca=X.style;ca.left=w+"px";ca.top=H+"px";w+=U+1;
ca.display="none"}b.initializeAudioMuteButtons()}if(a.imageFilters){var de=Z.Utils.getElementOfViewerById(g,"imageFilterDivider");if(de){Z.Utils.graphicSize(de,E,I);var Id=de.style;Id.left=w+"px";Id.top=Oa+"px";var w=w+P,ia=Z.Utils.getElementOfViewerById(g,"buttonImageFilterPanelHide");if(ia){Z.Utils.buttonSize(ia,C,q);var la=ia.style;la.left=w+"px";la.top=H+"px";la.display=Sd?"inline-block":"none"}var Hb=Z.Utils.getElementOfViewerById(g,"buttonImageFilterPanelShow");if(Hb){Z.Utils.buttonSize(Hb,
C,q);var Ib=Hb.style;Ib.left=w+"px";Ib.top=H+"px";w+=U+1;Ib.display=Sd?"none":"inline-block"}var Y=parseInt(Z.Utils.getResource("DEFAULT_IMAGEFILTERPANELLABELFONTSIZE"),10),ea=parseInt(Z.Utils.getResource("DEFAULT_IMAGEFILTERPANELTEXTFONTSIZE"),10),pa=parseInt(Z.Utils.getResource("DEFAULT_IMAGEFILTERTEXTPADDINGSMALL"),10),nc=parseInt(Z.Utils.getResource("DEFAULT_IMAGEFILTERSLIDERWIDTHMULTIPLIER"),10),Wa=S[6],Xa=S[7],wb=S[8],Ob=S[4],na=S[5],wa=S[11]*nc,jb=S[12],Ba=S[9],Da=S[10],Ca=S[13]*nc,Ab=wb-(Wa-
Ob),A=90,Yd=parseInt(Z.Utils.getResource("z137"),10),ve=a.grayscaleVisible+a.thresholdVisible+a.inversionVisible+a.normalizeVisible+a.equalizeVisible+a.edgesVisible+a.sepiaVisible,Re=Math.max(Xa+6+18*(a.brightnessVisible+a.contrastVisible+a.sharpnessVisible+a.blurrinessVisible+a.colorRedVisible+a.colorGreenVisible+a.colorBlueVisible+a.colorRedRangeVisible+a.colorGreenRangeVisible+a.colorBlueRangeVisible+a.gammaVisible+a.gammaRedVisible+a.gammaGreenVisible+a.gammaBlueVisible+a.hueVisible+a.saturationVisible+
a.lightnessVisible+a.whiteBalanceVisible+a.noiseVisible)+10,(Xa+6)*ve),Te=0<ve?2:.96,gd=a.colorRedRangeVisible||a.colorGreenRangeVisible||a.colorBlueRangeVisible?50:0,se=a.colorRedVisible||a.colorGreenVisible||a.colorBlueVisible||a.whiteBalanceVisible||a.gammaRedVisible||a.gammaGreenVisible||a.gammaBlueVisible?0:30,wa=wa+(gd+se),Ca=Ca+(gd+se),Qc=a.colorRedRangeVisible||a.colorGreenRangeVisible||a.colorBlueRangeVisible?42:0,A=A-se,kd=Ne=Math.round(A*Te+wa+2*wb+wb*Te+Ab*Te+15*Te-4+Qc),Sc=20+na+Re,Se=
Sc-na-38,oh=kd-15-Wa,Ze=Sc-10-1.9*Xa,Pb=Sc-10-Xa-1,x=15,p=20,Cd=Z.Utils.getElementOfViewerById(g,"buttonImageFilterPanelShow"),Pf=Z.Utils.getElementOfViewerById(g,"buttonContainerImageFilter"),Qf=Z.Utils.getElementOfViewerById(g,"imageFilterList");if(Pf&&Cd&&Qf){var yd=parseFloat(Cd.style.left),te=parseFloat(Cd.parentNode.style.left),Ec=Pf.style;Ec.width=kd+"px";Ec.height=Sc+"px";Ec.left=yd+te+wb-kd+"px";Ec.top=-(Sc+5)+"px";var rc=Z.Utils.getElementOfViewerById(g,"imageFilterPanelBackground");if(rc){var xb=
rc.style;xb.width=kd+"px";xb.height=Sc+"px"}var tb=Qf.style;tb.width=Yd+"px";tb.left="20px";tb.top=Pb+"px";var Qb=Z.Utils.getElementOfViewerById(g,"labelBrightnessTextBox");Jb=Z.Utils.getElementOfViewerById(g,"trackSliderFilterBrightness");Fa=Z.Utils.getElementOfViewerById(g,"buttonSliderFilterBrightness");var Rb=Z.Utils.getElementOfViewerById(g,"textBoxFor-brightnessTextElement");if(Qb&&Jb&&Fa&&Rb){Zc=Qb.style;ob=Jb.style;Vd=Fa.style;var Pa=Rb.style;Zc&&ob&&Vd&&Pa&&(Zc.width=A+"px",Zc.height="20px",
Zc.left=x+"px",Zc.top=p-3+"px",Zc.visibility="visible",Z.Utils.setTextNodeStyle(Qb,"black","verdana",Y+"px","none","normal","normal","normal","normal","1em","left","none"),ob.display="inline-block",Vd.display="inline-block",Z.Utils.graphicSize(Jb,wa,jb),ob.left=x+A+3+"px",ob.top=p-4+"px",Z.Utils.buttonSize(Fa,Ba,Da),Vd.left=parseFloat(ob.left)+"px",Vd.top=p-4+"px",Pa.width="37px",Pa.height="14px",Pa.left=x+A+3+Ca+"px",Pa.top=p-6+"px",Z.Utils.setTextAreaStyle(Rb,"black","verdana",ea+"px","none","normal",
"normal","normal","normal","1em","center","none",pa+"px"),p+=na)}var Ad=Z.Utils.getElementOfViewerById(g,"labelContrastTextBox");lb=Z.Utils.getElementOfViewerById(g,"trackSliderFilterContrast");lc=Z.Utils.getElementOfViewerById(g,"buttonSliderFilterContrast");var Bd=Z.Utils.getElementOfViewerById(g,"textBoxFor-contrastTextElement");if(Ad&&lb&&lc&&Bd){Mc=Ad.style;eb=lb.style;Sb=lc.style;var Gc=Bd.style;Mc&&eb&&Sb&&Gc&&(Mc.width=A+"px",Mc.height="20px",Mc.left=x+"px",Mc.top=p-3+"px",Mc.visibility="visible",
Z.Utils.setTextNodeStyle(Ad,"black","verdana",Y+"px","none","normal","normal","normal","normal","1em","left","none"),eb.display="inline-block",Sb.display="inline-block",Z.Utils.graphicSize(lb,wa,jb),eb.left=x+A+3+"px",eb.top=p-4+"px",Z.Utils.buttonSize(lc,Ba,Da),Sb.left=parseFloat(eb.left)+"px",Sb.top=p-4+"px",Gc.width="37px",Gc.height="14px",Gc.left=x+A+3+Ca+"px",Gc.top=p-6+"px",Z.Utils.setTextAreaStyle(Bd,"black","verdana",ea+"px","none","normal","normal","normal","normal","1em","center","none",
pa+"px"),p+=na)}var zb=Z.Utils.getElementOfViewerById(g,"labelSharpnessTextBox");Yb=Z.Utils.getElementOfViewerById(g,"trackSliderFilterSharpness");Tc=Z.Utils.getElementOfViewerById(g,"buttonSliderFilterSharpness");var pc=Z.Utils.getElementOfViewerById(g,"textBoxFor-sharpnessTextElement");if(zb&&Yb&&Tc&&pc){Oc=zb.style;bd=Yb.style;ac=Tc.style;var wd=pc.style;Oc&&bd&&ac&&wd&&(Oc.width=A+"px",Oc.height="20px",Oc.left=x+"px",Oc.top=p-3+"px",Oc.visibility="visible",Z.Utils.setTextNodeStyle(zb,"black",
"verdana",Y+"px","none","normal","normal","normal","normal","1em","left","none"),bd.display="inline-block",ac.display="inline-block",Z.Utils.graphicSize(Yb,wa,jb),bd.left=x+A+3+"px",bd.top=p-4+"px",Z.Utils.buttonSize(Tc,Ba,Da),ac.left=parseFloat(bd.left)+"px",ac.top=p-4+"px",wd.width="37px",wd.height="14px",wd.left=x+A+3+Ca+"px",wd.top=p-6+"px",Z.Utils.setTextAreaStyle(pc,"black","verdana",ea+"px","none","normal","normal","normal","normal","1em","center","none",pa+"px"),p+=na)}var re=Z.Utils.getElementOfViewerById(g,
"labelBlurrinessTextBox");Mb=Z.Utils.getElementOfViewerById(g,"trackSliderFilterBlurriness");fd=Z.Utils.getElementOfViewerById(g,"buttonSliderFilterBlurriness");var pe=Z.Utils.getElementOfViewerById(g,"textBoxFor-blurrinessTextElement");if(re&&Mb&&fd&&pe){ed=re.style;Xd=Mb.style;Zd=fd.style;var $c=pe.style;ed&&Xd&&Zd&&$c&&(ed.width=A+"px",ed.height="20px",ed.left=x+"px",ed.top=p-3+"px",ed.visibility="visible",Z.Utils.setTextNodeStyle(re,"black","verdana",Y+"px","none","normal","normal","normal","normal",
"1em","left","none"),Xd.display="inline-block",Zd.display="inline-block",Z.Utils.graphicSize(Mb,wa,jb),Xd.left=x+A+3+"px",Xd.top=p-4+"px",Z.Utils.buttonSize(fd,Ba,Da),Zd.left=parseFloat(Xd.left)+"px",Zd.top=p-4+"px",$c.width="37px",$c.height="14px",$c.left=x+A+3+Ca+"px",$c.top=p-6+"px",Z.Utils.setTextAreaStyle(pe,"black","verdana",ea+"px","none","normal","normal","normal","normal","1em","center","none",pa+"px"),p+=na)}var $e=Z.Utils.getElementOfViewerById(g,"labelColorRedTextBox");nd=Z.Utils.getElementOfViewerById(g,
"trackSliderFilterColorRed");hd=Z.Utils.getElementOfViewerById(g,"buttonSliderFilterColorRed");var Qe=Z.Utils.getElementOfViewerById(g,"textBoxFor-colorRedTextElement");if($e&&nd&&hd&&Qe){lfbtcrS=$e.style;jd=nd.style;ue=hd.style;var qc=Qe.style;lfbtcrS&&jd&&ue&&qc&&(lfbtcrS.width=A+"px",lfbtcrS.height="20px",lfbtcrS.left=x+"px",lfbtcrS.top=p-3+"px",lfbtcrS.visibility="visible",Z.Utils.setTextNodeStyle($e,"black","verdana",Y+"px","none","normal","normal","normal","normal","1em","left","none"),jd.display=
"inline-block",ue.display="inline-block",Z.Utils.graphicSize(nd,wa,jb),jd.left=x+A+3+"px",jd.top=p-4+"px",Z.Utils.buttonSize(hd,Ba,Da),ue.left=parseFloat(jd.left)+"px",ue.top=p-4+"px",qc.width="37px",qc.height="14px",qc.left=x+A+3+Ca+"px",qc.top=p-6+"px",Z.Utils.setTextAreaStyle(Qe,"black","verdana",ea+"px","none","normal","normal","normal","normal","1em","center","none",pa+"px"),p+=na)}var Pc=Z.Utils.getElementOfViewerById(g,"labelColorGreenTextBox");we=Z.Utils.getElementOfViewerById(g,"trackSliderFilterColorGreen");
Dd=Z.Utils.getElementOfViewerById(g,"buttonSliderFilterColorGreen");var yf=Z.Utils.getElementOfViewerById(g,"textBoxFor-colorGreenTextElement");if(Pc&&we&&Dd&&yf){lfbtcgS=Pc.style;zd=we.style;Lc=Dd.style;var dd=yf.style;lfbtcgS&&zd&&Lc&&dd&&(lfbtcgS.width=A+"px",lfbtcgS.height="20px",lfbtcgS.left=x+"px",lfbtcgS.top=p-3+"px",lfbtcgS.visibility="visible",Z.Utils.setTextNodeStyle(Pc,"black","verdana",Y+"px","none","normal","normal","normal","normal","1em","left","none"),zd.display="inline-block",Lc.display=
"inline-block",Z.Utils.graphicSize(we,wa,jb),zd.left=x+A+3+"px",zd.top=p-4+"px",Z.Utils.buttonSize(Dd,Ba,Da),Lc.left=parseFloat(zd.left)+"px",Lc.top=p-4+"px",dd.width="37px",dd.height="14px",dd.left=x+A+3+Ca+"px",dd.top=p-6+"px",Z.Utils.setTextAreaStyle(yf,"black","verdana",ea+"px","none","normal","normal","normal","normal","1em","center","none",pa+"px"),p+=na)}var xd=Z.Utils.getElementOfViewerById(g,"labelColorBlueTextBox");dc=Z.Utils.getElementOfViewerById(g,"trackSliderFilterColorBlue");ec=Z.Utils.getElementOfViewerById(g,
"buttonSliderFilterColorBlue");var cd=Z.Utils.getElementOfViewerById(g,"textBoxFor-colorBlueTextElement");if(xd&&dc&&ec&&cd){lfbtcbS=xd.style;uc=dc.style;qd=ec.style;var Fd=cd.style;lfbtcbS&&uc&&qd&&Fd&&(lfbtcbS.width=A+"px",lfbtcbS.height="20px",lfbtcbS.left=x+"px",lfbtcbS.top=p-3+"px",lfbtcbS.visibility="visible",Z.Utils.setTextNodeStyle(xd,"black","verdana",Y+"px","none","normal","normal","normal","normal","1em","left","none"),uc.display="inline-block",qd.display="inline-block",Z.Utils.graphicSize(dc,
wa,jb),uc.left=x+A+3+"px",uc.top=p-4+"px",Z.Utils.buttonSize(ec,Ba,Da),qd.left=parseFloat(uc.left)+"px",qd.top=p-4+"px",Fd.width="37px",Fd.height="14px",Fd.left=x+A+3+Ca+"px",Fd.top=p-6+"px",Z.Utils.setTextAreaStyle(cd,"black","verdana",ea+"px","none","normal","normal","normal","normal","1em","center","none",pa+"px"),p+=na)}var Be=Z.Utils.getElementOfViewerById(g,"labelColorRedRangeTextBox");Nd=Z.Utils.getElementOfViewerById(g,"trackSliderFilterColorRedRange");Lb=Z.Utils.getElementOfViewerById(g,
"buttonSliderFilterColorRedRange");btfCRR2=Z.Utils.getElementOfViewerById(g,"buttonSliderFilterColorRedRange2");var af=Z.Utils.getElementOfViewerById(g,"textBoxFor-colorRedRangeTextElement"),bf=Z.Utils.getElementOfViewerById(g,"textBoxFor-colorRedRangeTextElement2");if(Be&&Nd&&Lb&&btfCRR2&&af&&bf){lfbtcrrS=Be.style;La=Nd.style;r=Lb.style;btfcrr2S=btfCRR2.style;tbfcrrteS=af.style;var Gd=bf.style;lfbtcrrS&&La&&r&&btfcrr2S&&tbfcrrteS&&Gd&&(lfbtcrrS.width=A+"px",lfbtcrrS.height="20px",lfbtcrrS.left=x+
"px",lfbtcrrS.top=p-3+"px",lfbtcrrS.visibility="visible",Z.Utils.setTextNodeStyle(Be,"black","verdana",Y+"px","none","normal","normal","normal","normal","1em","left","none"),La.display="inline-block",r.display="inline-block",Z.Utils.graphicSize(Nd,wa,jb),La.left=x+A+3+"px",La.top=p-4+"px",Z.Utils.buttonSize(Lb,Ba,Da),r.left=parseFloat(La.left)+"px",r.top=p-4+"px",Z.Utils.buttonSize(btfCRR2,Ba,Da),btfcrr2S.left=parseFloat(La.left)+50+"px",btfcrr2S.top=p-4+"px",tbfcrrteS.width="37px",tbfcrrteS.height=
"14px",tbfcrrteS.left=x+A+3+Ca+"px",tbfcrrteS.top=p-6+"px",Z.Utils.setTextAreaStyle(af,"black","verdana",ea+"px","none","normal","normal","normal","normal","1em","center","none",pa+"px"),Gd.width="37px",Gd.height="14px",Gd.left=x+A+3+Ca+37+5+"px",Gd.top=p-6+"px",Z.Utils.setTextAreaStyle(bf,"black","verdana",ea+"px","none","normal","normal","normal","normal","1em","center","none",pa+"px"),p+=na)}var cf=Z.Utils.getElementOfViewerById(g,"labelColorGreenRangeTextBox");Bc=Z.Utils.getElementOfViewerById(g,
"trackSliderFilterColorGreenRange");od=Z.Utils.getElementOfViewerById(g,"buttonSliderFilterColorGreenRange");btfCGR2=Z.Utils.getElementOfViewerById(g,"buttonSliderFilterColorGreenRange2");var ld=Z.Utils.getElementOfViewerById(g,"textBoxFor-colorGreenRangeTextElement"),Ce=Z.Utils.getElementOfViewerById(g,"textBoxFor-colorGreenRangeTextElement2");if(cf&&Bc&&od&&btfCGR2&&ld&&Ce){lfbtcgrS=cf.style;Jc=Bc.style;cc=od.style;btfcgr2S=btfCGR2.style;tbfcgrteS=ld.style;var ze=Ce.style;lfbtcgrS&&Jc&&cc&&btfcgr2S&&
tbfcgrteS&&ze&&(lfbtcgrS.width=A+"px",lfbtcgrS.height="20px",lfbtcgrS.left=x+"px",lfbtcgrS.top=p-3+"px",lfbtcgrS.visibility="visible",Z.Utils.setTextNodeStyle(cf,"black","verdana",Y+"px","none","normal","normal","normal","normal","1em","left","none"),Jc.display="inline-block",cc.display="inline-block",Z.Utils.graphicSize(Bc,wa,jb),Jc.left=x+A+3+"px",Jc.top=p-4+"px",Z.Utils.buttonSize(od,Ba,Da),cc.left=parseFloat(Jc.left)+"px",cc.top=p-4+"px",Z.Utils.buttonSize(btfCGR2,Ba,Da),btfcgr2S.left=parseFloat(La.left)+
50+"px",btfcgr2S.top=p-4+"px",tbfcgrteS.width="37px",tbfcgrteS.height="14px",tbfcgrteS.left=x+A+3+Ca+"px",tbfcgrteS.top=p-6+"px",Z.Utils.setTextAreaStyle(ld,"black","verdana",ea+"px","none","normal","normal","normal","normal","1em","center","none",pa+"px"),ze.width="37px",ze.height="14px",ze.left=x+A+3+Ca+37+5+"px",ze.top=p-6+"px",Z.Utils.setTextAreaStyle(Ce,"black","verdana",ea+"px","none","normal","normal","normal","normal","1em","center","none",pa+"px"),p+=na)}var wf=Z.Utils.getElementOfViewerById(g,
"labelColorBlueRangeTextBox");Ya=Z.Utils.getElementOfViewerById(g,"trackSliderFilterColorBlueRange");le=Z.Utils.getElementOfViewerById(g,"buttonSliderFilterColorBlueRange");btfCBR2=Z.Utils.getElementOfViewerById(g,"buttonSliderFilterColorBlueRange2");var uf=Z.Utils.getElementOfViewerById(g,"textBoxFor-colorBlueRangeTextElement"),vf=Z.Utils.getElementOfViewerById(g,"textBoxFor-colorBlueRangeTextElement2");if(wf&&Ya&&le&&btfCBR2&&uf&&vf){lfbtcbrS=wf.style;td=Ya.style;sc=le.style;btfcbr2S=btfCBR2.style;
tbfcbrteS=uf.style;var ad=vf.style;lfbtcbrS&&td&&sc&&btfcbr2S&&tbfcbrteS&&ad&&(lfbtcbrS.width=A+"px",lfbtcbrS.height="20px",lfbtcbrS.left=x+"px",lfbtcbrS.top=p-3+"px",lfbtcbrS.visibility="visible",Z.Utils.setTextNodeStyle(wf,"black","verdana",Y+"px","none","normal","normal","normal","normal","1em","left","none"),td.display="inline-block",sc.display="inline-block",Z.Utils.graphicSize(Ya,wa,jb),td.left=x+A+3+"px",td.top=p-4+"px",Z.Utils.buttonSize(le,Ba,Da),sc.left=parseFloat(td.left)+"px",sc.top=p-
4+"px",Z.Utils.buttonSize(btfCBR2,Ba,Da),btfcbr2S.left=parseFloat(La.left)+50+"px",btfcbr2S.top=p-4+"px",tbfcbrteS.width="37px",tbfcbrteS.height="14px",tbfcbrteS.left=x+A+3+Ca+"px",tbfcbrteS.top=p-6+"px",Z.Utils.setTextAreaStyle(uf,"black","verdana",ea+"px","none","normal","normal","normal","normal","1em","center","none",pa+"px"),ad.width="37px",ad.height="14px",ad.left=x+A+3+Ca+37+5+"px",ad.top=p-6+"px",Z.Utils.setTextAreaStyle(vf,"black","verdana",ea+"px","none","normal","normal","normal","normal",
"1em","center","none",pa+"px"),p+=na)}var qe=Z.Utils.getElementOfViewerById(g,"labelGammaTextBox");ab=Z.Utils.getElementOfViewerById(g,"trackSliderFilterGamma");Od=Z.Utils.getElementOfViewerById(g,"buttonSliderFilterGamma");var df=Z.Utils.getElementOfViewerById(g,"textBoxFor-gammaTextElement");if(qe&&ab&&Od&&df){lfbtgS=qe.style;Ja=ab.style;Ae=Od.style;var ae=df.style;lfbtgS&&Ja&&Ae&&ae&&(lfbtgS.width=A+"px",lfbtgS.height="20px",lfbtgS.left=x+"px",lfbtgS.top=p-3+"px",lfbtgS.visibility="visible",Z.Utils.setTextNodeStyle(qe,
"black","verdana",Y+"px","none","normal","normal","normal","normal","1em","left","none"),Ja.display="inline-block",Ae.display="inline-block",Z.Utils.graphicSize(ab,wa,jb),Ja.left=x+A+3+"px",Ja.top=p-4+"px",Z.Utils.buttonSize(Od,Ba,Da),Ae.left=parseFloat(Ja.left)+"px",Ae.top=p-4+"px",ae.width="37px",ae.height="14px",ae.left=x+A+3+Ca+"px",ae.top=p-6+"px",Z.Utils.setTextAreaStyle(df,"black","verdana",ea+"px","none","normal","normal","normal","normal","1em","center","none",pa+"px"),p+=na)}var ef=Z.Utils.getElementOfViewerById(g,
"labelGammaRedTextBox");oc=Z.Utils.getElementOfViewerById(g,"trackSliderFilterGammaRed");Of=Z.Utils.getElementOfViewerById(g,"buttonSliderFilterGammaRed");var Ue=Z.Utils.getElementOfViewerById(g,"textBoxFor-gammaRedTextElement");if(ef&&oc&&Of&&Ue){lfbtgrS=ef.style;Ed=oc.style;ye=Of.style;var ba=Ue.style;lfbtgrS&&Ed&&ye&&ba&&(lfbtgrS.width=A+"px",lfbtgrS.height="20px",lfbtgrS.left=x+"px",lfbtgrS.top=p-3+"px",lfbtgrS.visibility="visible",Z.Utils.setTextNodeStyle(ef,"black","verdana",Y+"px","none","normal",
"normal","normal","normal","1em","left","none"),Ed.display="inline-block",ye.display="inline-block",Z.Utils.graphicSize(oc,wa,jb),Ed.left=x+A+3+"px",Ed.top=p-4+"px",Z.Utils.buttonSize(Of,Ba,Da),ye.left=parseFloat(Ed.left)+"px",ye.top=p-4+"px",ba.width="37px",ba.height="14px",ba.left=x+A+3+Ca+"px",ba.top=p-6+"px",Z.Utils.setTextAreaStyle(Ue,"black","verdana",ea+"px","none","normal","normal","normal","normal","1em","center","none",pa+"px"),p+=na)}var ff=Z.Utils.getElementOfViewerById(g,"labelGammaGreenTextBox");
Wc=Z.Utils.getElementOfViewerById(g,"trackSliderFilterGammaGreen");Db=Z.Utils.getElementOfViewerById(g,"buttonSliderFilterGammaGreen");var gf=Z.Utils.getElementOfViewerById(g,"textBoxFor-gammaGreenTextElement");if(ff&&Wc&&Db&&gf){lfbtggS=ff.style;ga=Wc.style;Ea=Db.style;var ib=gf.style;lfbtggS&&ga&&Ea&&ib&&(lfbtggS.width=A+"px",lfbtggS.height="20px",lfbtggS.left=x+"px",lfbtggS.top=p-3+"px",lfbtggS.visibility="visible",Z.Utils.setTextNodeStyle(ff,"black","verdana",Y+"px","none","normal","normal","normal",
"normal","1em","left","none"),ga.display="inline-block",Ea.display="inline-block",Z.Utils.graphicSize(Wc,wa,jb),ga.left=x+A+3+"px",ga.top=p-4+"px",Z.Utils.buttonSize(Db,Ba,Da),Ea.left=parseFloat(ga.left)+"px",Ea.top=p-4+"px",ib.width="37px",ib.height="14px",ib.left=x+A+3+Ca+"px",ib.top=p-6+"px",Z.Utils.setTextAreaStyle(gf,"black","verdana",ea+"px","none","normal","normal","normal","normal","1em","center","none",pa+"px"),p+=na)}var Rc=Z.Utils.getElementOfViewerById(g,"labelGammaBlueTextBox");pd=Z.Utils.getElementOfViewerById(g,
"trackSliderFilterGammaBlue");Xc=Z.Utils.getElementOfViewerById(g,"buttonSliderFilterGammaBlue");var Dc=Z.Utils.getElementOfViewerById(g,"textBoxFor-gammaBlueTextElement");if(Rc&&pd&&Xc&&Dc){lfbtgbS=Rc.style;vc=pd.style;hb=Xc.style;var Fc=Dc.style;lfbtgbS&&vc&&hb&&Fc&&(lfbtgbS.width=A+"px",lfbtgbS.height="20px",lfbtgbS.left=x+"px",lfbtgbS.top=p-3+"px",lfbtgbS.visibility="visible",Z.Utils.setTextNodeStyle(Rc,"black","verdana",Y+"px","none","normal","normal","normal","normal","1em","left","none"),vc.display=
"inline-block",hb.display="inline-block",Z.Utils.graphicSize(pd,wa,jb),vc.left=x+A+3+"px",vc.top=p-4+"px",Z.Utils.buttonSize(Xc,Ba,Da),hb.left=parseFloat(vc.left)+"px",hb.top=p-4+"px",Fc.width="37px",Fc.height="14px",Fc.left=x+A+3+Ca+"px",Fc.top=p-6+"px",Z.Utils.setTextAreaStyle(Dc,"black","verdana",ea+"px","none","normal","normal","normal","normal","1em","center","none",pa+"px"),p+=na)}var xe=Z.Utils.getElementOfViewerById(g,"labelHueTextBox");nb=Z.Utils.getElementOfViewerById(g,"trackSliderFilterHue");
Kd=Z.Utils.getElementOfViewerById(g,"buttonSliderFilterHue");var $d=Z.Utils.getElementOfViewerById(g,"textBoxFor-hueTextElement");if(xe&&nb&&Kd&&$d){lfbthS=xe.style;J=nb.style;ra=Kd.style;var md=$d.style;lfbthS&&J&&ra&&md&&(lfbthS.width=A+"px",lfbthS.height="20px",lfbthS.left=x+"px",lfbthS.top=p-3+"px",lfbthS.visibility="visible",Z.Utils.setTextNodeStyle(xe,"black","verdana",Y+"px","none","normal","normal","normal","normal","1em","left","none"),J.display="inline-block",ra.display="inline-block",Z.Utils.graphicSize(nb,
wa,jb),J.left=x+A+3+"px",J.top=p-4+"px",Z.Utils.buttonSize(Kd,Ba,Da),ra.left=parseFloat(J.left)+"px",ra.top=p-4+"px",md.width="37px",md.height="14px",md.left=x+A+3+Ca+"px",md.top=p-6+"px",Z.Utils.setTextAreaStyle($d,"black","verdana",ea+"px","none","normal","normal","normal","normal","1em","center","none",pa+"px"),p+=na)}var zf=Z.Utils.getElementOfViewerById(g,"labelSaturationTextBox");W=Z.Utils.getElementOfViewerById(g,"trackSliderFilterSaturation");Yc=Z.Utils.getElementOfViewerById(g,"buttonSliderFilterSaturation");
var Af=Z.Utils.getElementOfViewerById(g,"textBoxFor-saturationTextElement");if(zf&&W&&Yc&&Af){lfbtsaS=zf.style;$b=W.style;sa=Yc.style;var Ga=Af.style;lfbtsaS&&$b&&sa&&Ga&&(lfbtsaS.width=A+"px",lfbtsaS.height="20px",lfbtsaS.left=x+"px",lfbtsaS.top=p-3+"px",lfbtsaS.visibility="visible",Z.Utils.setTextNodeStyle(zf,"black","verdana",Y+"px","none","normal","normal","normal","normal","1em","left","none"),$b.display="inline-block",sa.display="inline-block",Z.Utils.graphicSize(W,wa,jb),$b.left=x+A+3+"px",
$b.top=p-4+"px",Z.Utils.buttonSize(Yc,Ba,Da),sa.left=parseFloat($b.left)+"px",sa.top=p-4+"px",Ga.width="37px",Ga.height="14px",Ga.left=x+A+3+Ca+"px",Ga.top=p-6+"px",Z.Utils.setTextAreaStyle(Af,"black","verdana",ea+"px","none","normal","normal","normal","normal","1em","center","none",pa+"px"),p+=na)}var Zf=Z.Utils.getElementOfViewerById(g,"labelLightnessTextBox");oa=Z.Utils.getElementOfViewerById(g,"trackSliderFilterLightness");Ld=Z.Utils.getElementOfViewerById(g,"buttonSliderFilterLightness");var B=
Z.Utils.getElementOfViewerById(g,"textBoxFor-lightnessTextElement");if(Zf&&oa&&Ld&&B){lfbtlS=Zf.style;Ka=oa.style;ub=Ld.style;var hf=B.style;lfbtlS&&Ka&&ub&&hf&&(lfbtlS.width=A+"px",lfbtlS.height="20px",lfbtlS.left=x+"px",lfbtlS.top=p-3+"px",lfbtlS.visibility="visible",Z.Utils.setTextNodeStyle(Zf,"black","verdana",Y+"px","none","normal","normal","normal","normal","1em","left","none"),Ka.display="inline-block",ub.display="inline-block",Z.Utils.graphicSize(oa,wa,jb),Ka.left=x+A+3+"px",Ka.top=p-4+"px",
Z.Utils.buttonSize(Ld,Ba,Da),ub.left=parseFloat(Ka.left)+"px",ub.top=p-4+"px",hf.width="37px",hf.height="14px",hf.left=x+A+3+Ca+"px",hf.top=p-6+"px",Z.Utils.setTextAreaStyle(B,"black","verdana",ea+"px","none","normal","normal","normal","normal","1em","center","none",pa+"px"),p+=na)}var $f=Z.Utils.getElementOfViewerById(g,"labelWhiteBalanceTextBox");mc=Z.Utils.getElementOfViewerById(g,"trackSliderFilterWhiteBalance");Md=Z.Utils.getElementOfViewerById(g,"buttonSliderFilterWhiteBalance");var jf=Z.Utils.getElementOfViewerById(g,
"textBoxFor-whiteBalanceTextElement");if($f&&mc&&Md&&jf){lfbtwbS=$f.style;hc=mc.style;mb=Md.style;var kf=jf.style;lfbtwbS&&hc&&mb&&kf&&(lfbtwbS.width=A+"px",lfbtwbS.height="20px",lfbtwbS.left=x+"px",lfbtwbS.top=p-3+"px",lfbtwbS.visibility="visible",Z.Utils.setTextNodeStyle($f,"black","verdana",Y+"px","none","normal","normal","normal","normal","1em","left","none"),hc.display="inline-block",mb.display="inline-block",Z.Utils.graphicSize(mc,wa,jb),hc.left=x+A+3+"px",hc.top=p-4+"px",Z.Utils.buttonSize(Md,
Ba,Da),mb.left=parseFloat(hc.left)+"px",mb.top=p-4+"px",kf.width="37px",kf.height="14px",kf.left=x+A+3+Ca+"px",kf.top=p-6+"px",Z.Utils.setTextAreaStyle(jf,"black","verdana",ea+"px","none","normal","normal","normal","normal","1em","center","none",pa+"px"),p+=na)}var be=Z.Utils.getElementOfViewerById(g,"labelNormalizeTextBox");Fb=Z.Utils.getElementOfViewerById(g,"trackSliderFilterNormalize");gb=Z.Utils.getElementOfViewerById(g,"buttonSliderFilterNormalize");var ce=Z.Utils.getElementOfViewerById(g,"textBoxFor-normalizeTextElement");
if(be&&Fb&&gb&&ce){lfbtnS=be.style;Gb=Fb.style;Nb=gb.style;var Ic=ce.style;lfbtnS&&Gb&&Nb&&Ic&&(lfbtnS.width=A+"px",lfbtnS.height="20px",lfbtnS.left=x+"px",lfbtnS.top=p-3+"px",lfbtnS.visibility="visible",Z.Utils.setTextNodeStyle(be,"black","verdana",Y+"px","none","normal","normal","normal","normal","1em","left","none"),Gb.display="inline-block",Nb.display="inline-block",Z.Utils.graphicSize(Fb,wa,jb),Gb.left=x+A+3+"px",Gb.top=p-4+"px",Z.Utils.buttonSize(gb,Ba,Da),Nb.left=parseFloat(Gb.left)+"px",Nb.top=
p-4+"px",Ic.width="37px",Ic.height="14px",Ic.left=x+A+3+Ca+"px",Ic.top=p-6+"px",Z.Utils.setTextAreaStyle(ce,"black","verdana",ea+"px","none","normal","normal","normal","normal","1em","center","none",pa+"px"),p+=na)}var ag=Z.Utils.getElementOfViewerById(g,"labelEqualizeTextBox");trsFE=Z.Utils.getElementOfViewerById(g,"trackSliderFilterEqualize");btfE=Z.Utils.getElementOfViewerById(g,"buttonSliderFilterEqualize");var mg=Z.Utils.getElementOfViewerById(g,"textBoxFor-equalizeTextElement");ag&&trsFE&&btfE&&
mg&&(lfbteS=ag.style,trsfeS=trsFE.style,btfeS=btfE.style,tbfeteS=mg.style,lfbteS&&trsfeS&&btfeS&&tbfeteS&&(lfbteS.width=A+"px",lfbteS.height="20px",lfbteS.left=x+"px",lfbteS.top=p-3+"px",lfbteS.visibility="visible",Z.Utils.setTextNodeStyle(ag,"black","verdana",Y+"px","none","normal","normal","normal","normal","1em","left","none"),trsfeS.display="inline-block",btfeS.display="inline-block",Z.Utils.graphicSize(trsFE,wa,jb),trsfeS.left=x+A+3+"px",trsfeS.top=p-4+"px",Z.Utils.buttonSize(btfE,Ba,Da),btfeS.left=
parseFloat(trsfeS.left)+"px",btfeS.top=p-4+"px",tbfeteS.width="37px",tbfeteS.height="14px",tbfeteS.left=x+A+3+Ca+"px",tbfeteS.top=p-6+"px",Z.Utils.setTextAreaStyle(mg,"black","verdana",ea+"px","none","normal","normal","normal","normal","1em","center","none",pa+"px"),p+=na));be=Z.Utils.getElementOfViewerById(g,"labelNoiseTextBox");Fb=Z.Utils.getElementOfViewerById(g,"trackSliderFilterNoise");gb=Z.Utils.getElementOfViewerById(g,"buttonSliderFilterNoise");ce=Z.Utils.getElementOfViewerById(g,"textBoxFor-noiseTextElement");
be&&Fb&&gb&&ce&&(lfbtnS=be.style,Gb=Fb.style,Nb=gb.style,Ic=ce.style,lfbtnS&&Gb&&Nb&&Ic&&(lfbtnS.width=A+"px",lfbtnS.height="20px",lfbtnS.left=x+"px",lfbtnS.top=p-3+"px",lfbtnS.visibility="visible",Z.Utils.setTextNodeStyle(be,"black","verdana",Y+"px","none","normal","normal","normal","normal","1em","left","none"),Gb.display="inline-block",Nb.display="inline-block",Z.Utils.graphicSize(Fb,wa,jb),Gb.left=x+A+3+"px",Gb.top=p-4+"px",Z.Utils.buttonSize(gb,Ba,Da),Nb.left=parseFloat(Gb.left)+"px",Nb.top=
p-4+"px",Ic.width="37px",Ic.height="14px",Ic.left=x+A+3+Ca+"px",Ic.top=p-6+"px",Z.Utils.setTextAreaStyle(ce,"black","verdana",ea+"px","none","normal","normal","normal","normal","1em","center","none",pa+"px"),p+=na));var x=15+A+wa+15+Qc/2,p=p-5,jg=Z.Utils.getElementOfViewerById(g,"buttonImageFilterMinus");if(jg){Z.Utils.buttonSize(jg,.9*Wa,.9*Xa);var Mg=jg.style;Mg.left=x+"px";Mg.top=p+"px";x+=Wa+3}var ng=Z.Utils.getElementOfViewerById(g,"buttonImageFilterPlus");if(ng){Z.Utils.buttonSize(ng,.9*Wa,
.9*Xa);var Pg=ng.style;Pg.left=x+"px";Pg.top=p+"px";x+=wb}var x=kd-22.5-Wa-A,p=14,og=Z.Utils.getElementOfViewerById(g,"imageFilterStateDivider");if(og){Z.Utils.graphicSize(og,Ob,Se);var Ug=og.style;Ug.left=0<ve?x-15+"px":"-1000px";Ug.top="10px"}var pg=Z.Utils.getElementOfViewerById(g,"labelGrayscaleTextBox"),Vg=Z.Utils.getElementOfViewerById(g,"containerFor-checkboxFilterGrayscale"),qg=Z.Utils.getElementOfViewerById(g,"checkboxFilterGrayscale");if(pg&&Vg&&qg){var tf=pg.style;tf.width=A+"px";tf.height=
"20px";tf.left=x+"px";tf.top=p+3+"px";tf.visibility="visible";Z.Utils.setTextNodeStyle(pg,"black","verdana",Y+"px","none","normal","normal","normal","normal","1em","left","none");var Nf=Vg.style;Nf.width=1.5*Wa+"px";Nf.height=1.5*Xa+"px";Nf.left=x+A+3+"px";Nf.top=p-3+"px";qg.width=Wa;qg.height=Xa;p+=na}var rg=Z.Utils.getElementOfViewerById(g,"labelThresholdTextBox"),Wg=Z.Utils.getElementOfViewerById(g,"containerFor-checkboxFilterThreshold"),tg=Z.Utils.getElementOfViewerById(g,"checkboxFilterThreshold");
if(rg&&Wg&&tg){var Cf=rg.style;Cf.width=A+"px";Cf.height="20px";Cf.left=x+"px";Cf.top=p+3+"px";Cf.visibility="visible";Z.Utils.setTextNodeStyle(rg,"black","verdana",Y+"px","none","normal","normal","normal","normal","1em","left","none");var Sf=Wg.style;Sf.width=1.5*Wa+"px";Sf.height=1.5*Xa+"px";Sf.left=x+A+3+"px";Sf.top=p-3+"px";tg.width=Wa;tg.height=Xa;p+=na}var ug=Z.Utils.getElementOfViewerById(g,"labelInversionTextBox"),Xg=Z.Utils.getElementOfViewerById(g,"containerFor-checkboxFilterInversion"),
vg=Z.Utils.getElementOfViewerById(g,"checkboxFilterInversion");if(ug&&Xg&&vg){var Df=ug.style;Df.width=A+"px";Df.height="20px";Df.left=x+"px";Df.top=p+3+"px";Df.visibility="visible";Z.Utils.setTextNodeStyle(ug,"black","verdana",Y+"px","none","normal","normal","normal","normal","1em","left","none");var Tf=Xg.style;Tf.width=1.5*Wa+"px";Tf.height=1.5*Xa+"px";Tf.left=x+A+3+"px";Tf.top=p-3+"px";vg.width=Wa;vg.height=Xa;p+=na}var wg=Z.Utils.getElementOfViewerById(g,"labelEqualizeTextBox"),Bf=Z.Utils.getElementOfViewerById(g,
"containerFor-checkboxFilterEqualize"),xg=Z.Utils.getElementOfViewerById(g,"checkboxFilterEqualize");if(wg&&Bf&&xg){var Ef=wg.style;Ef.width=A+"px";Ef.height="20px";Ef.left=x+"px";Ef.top=p+3+"px";Ef.visibility="visible";Z.Utils.setTextNodeStyle(wg,"black","verdana",Y+"px","none","normal","normal","normal","normal","1em","left","none");var Uf=Bf.style;Uf.width=1.5*Wa+"px";Uf.height=1.5*Xa+"px";Uf.left=x+A+3+"px";Uf.top=p-3+"px";xg.width=Wa;xg.height=Xa;p+=na}var yg=Z.Utils.getElementOfViewerById(g,
"labelEdgesTextBox"),dh=Z.Utils.getElementOfViewerById(g,"containerFor-checkboxFilterEdges"),zg=Z.Utils.getElementOfViewerById(g,"checkboxFilterEdges");if(yg&&dh&&zg){var Ff=yg.style;Ff.width=A+"px";Ff.height="20px";Ff.left=x+"px";Ff.top=p+3+"px";Ff.visibility="visible";Z.Utils.setTextNodeStyle(yg,"black","verdana",Y+"px","none","normal","normal","normal","normal","1em","left","none");var Vf=dh.style;Vf.width=1.5*Wa+"px";Vf.height=1.5*Xa+"px";Vf.left=x+A+3+"px";Vf.top=p-3+"px";zg.width=Wa;zg.height=
Xa;p+=na}var Ag=Z.Utils.getElementOfViewerById(g,"labelSepiaTextBox"),eh=Z.Utils.getElementOfViewerById(g,"containerFor-checkboxFilterSepia"),Bg=Z.Utils.getElementOfViewerById(g,"checkboxFilterSepia");if(Ag&&eh&&Bg){var Gf=Ag.style;Gf.width=A+"px";Gf.height="20px";Gf.left=x+"px";Gf.top=p+3+"px";Gf.visibility="visible";Z.Utils.setTextNodeStyle(Ag,"black","verdana",Y+"px","none","normal","normal","normal","normal","1em","left","none");var Wf=eh.style;Wf.width=1.5*Wa+"px";Wf.height=1.5*Xa+"px";Wf.left=
x+A+3+"px";Wf.top=p-3+"px";Bg.width=Wa;Bg.height=Xa}var x=kd-15-5*Wa,p=Sc-10-Xa,Cg=Z.Utils.getElementOfViewerById(g,"imageFilterPanelDivider");if(Cg){Z.Utils.graphicSize(Cg,oh,5.5);var fh=Cg.style;fh.left="15px";fh.top=Ze+2+"px"}var Dg=Z.Utils.getElementOfViewerById(g,"buttonImageFilterClear");if(Dg){Z.Utils.buttonSize(Dg,Wa,Xa);var gh=Dg.style;gh.left=x+"px";gh.top=p+"px";x+=wb}var Eg=Z.Utils.getElementOfViewerById(g,"buttonImageFiltersClearAll");if(Eg){Z.Utils.buttonSize(Eg,Wa,Xa);var hh=Eg.style;
hh.left=x+"px";hh.top=p+"px";x+=wb}var Fg=Z.Utils.getElementOfViewerById(g,"imageFilterStateDivider3");if(Fg){Z.Utils.graphicSize(Fg,Ob,na);var ih=Fg.style;ih.left=x+"px";ih.top=p+"px";x+=Ab}var Gg=Z.Utils.getElementOfViewerById(g,"buttonImageFilterPanelHideOnPanel");if(Gg){Z.Utils.buttonSize(Gg,Wa,Xa);var jh=Gg.style;jh.left=x+"px";jh.top=p+"px"}var G=null,Hc=null;a.contrastVisible&&(setFilterReferences(null,"contrast",!0),G=b.getImageFilterDefault("contrast"),M.setImageFilterSlider("contrast",G),
M.setImageFilterText("contrast",G),b.setImageFilterValuePrior("contrast",G));a.sharpnessVisible&&(setFilterReferences(null,"sharpness",!0),G=b.getImageFilterDefault("sharpness"),M.setImageFilterSlider("sharpness",G),M.setImageFilterText("sharpness",G),b.setImageFilterValuePrior("sharpness",G));a.blurrinessVisible&&(setFilterReferences(null,"blurriness",!0),G=b.getImageFilterDefault("blurriness"),M.setImageFilterSlider("blurriness",G),M.setImageFilterText("blurriness",G),b.setImageFilterValuePrior("blurriness",
G));a.colorRedVisible&&(setFilterReferences(null,"colorRed",!0),G=b.getImageFilterDefault("colorRed"),M.setImageFilterSlider("colorRed",G),M.setImageFilterText("colorRed",G),b.setImageFilterValuePrior("colorRed",G));a.colorGreenVisible&&(setFilterReferences(null,"colorGreen",!0),G=b.getImageFilterDefault("colorGreen"),M.setImageFilterSlider("colorGreen",G),M.setImageFilterText("colorGreen",G),b.setImageFilterValuePrior("colorGreen",G));a.colorBlueVisible&&(setFilterReferences(null,"colorBlue",!0),
G=b.getImageFilterDefault("colorBlue"),M.setImageFilterSlider("colorBlue",G),M.setImageFilterText("colorBlue",G),b.setImageFilterValuePrior("colorBlue",G));a.colorRedRangeVisible&&(setFilterReferences(null,"colorRedRange",!0),G=b.getImageFilterDefault("colorRedRange"),M.setImageFilterSlider("colorRedRange",G),M.setImageFilterText("colorRedRange",G),b.setImageFilterValuePrior("colorRedRange",G),setFilterReferences(null,"colorRedRange2",!0),Hc=b.getImageFilterDefault("colorRedRange2"),M.setImageFilterSlider("colorRedRange2",
Hc),M.setImageFilterText("colorRedRange2",Hc),b.setImageFilterValuePrior("colorRedRange2",Hc));a.colorGreenRangeVisible&&(setFilterReferences(null,"colorGreenRange",!0),G=b.getImageFilterDefault("colorGreenRange"),M.setImageFilterSlider("colorGreenRange",G),M.setImageFilterText("colorGreenRange",G),b.setImageFilterValuePrior("colorGreenRange",G),setFilterReferences(null,"colorGreenRange2",!0),Hc=b.getImageFilterDefault("colorGreenRange2"),M.setImageFilterSlider("colorGreenRange2",Hc),M.setImageFilterText("colorGreenRange2",
Hc),b.setImageFilterValuePrior("colorGreenRange2",Hc));a.colorBlueRangeVisible&&(setFilterReferences(null,"colorBlueRange",!0),G=b.getImageFilterDefault("colorBlueRange"),M.setImageFilterSlider("colorBlueRange",G),M.setImageFilterText("colorBlueRange",G),b.setImageFilterValuePrior("colorBlueRange",G),setFilterReferences(null,"colorBlueRange2",!0),Hc=b.getImageFilterDefault("colorBlueRange2"),M.setImageFilterSlider("colorBlueRange2",Hc),M.setImageFilterText("colorBlueRange2",Hc),b.setImageFilterValuePrior("colorBlueRange2",
Hc));a.gammaVisible&&(setFilterReferences(null,"gamma",!0),G=b.getImageFilterDefault("gamma"),M.setImageFilterSlider("gamma",G),M.setImageFilterText("gamma",G),b.setImageFilterValuePrior("gamma",G));a.gammaRedVisible&&(setFilterReferences(null,"gammaRed",!0),G=b.getImageFilterDefault("gammaRed"),M.setImageFilterSlider("gammaRed",G),M.setImageFilterText("gammaRed",G),b.setImageFilterValuePrior("gammaRed",G));a.gammaGreenVisible&&(setFilterReferences(null,"gammaGreen",!0),G=b.getImageFilterDefault("gammaGreen"),
M.setImageFilterSlider("gammaGreen",G),M.setImageFilterText("gammaGreen",G),b.setImageFilterValuePrior("gammaGreen",G));a.gammaBlueVisible&&(setFilterReferences(null,"gammaBlue",!0),G=b.getImageFilterDefault("gammaBlue"),M.setImageFilterSlider("gammaBlue",G),M.setImageFilterText("gammaBlue",G),b.setImageFilterValuePrior("gammaBlue",G));a.hueVisible&&(setFilterReferences(null,"hue",!0),G=b.getImageFilterDefault("hue"),M.setImageFilterSlider("hue",G),M.setImageFilterText("hue",G),b.setImageFilterValuePrior("hue",
G));a.saturationVisible&&(setFilterReferences(null,"saturation",!0),G=b.getImageFilterDefault("saturation"),M.setImageFilterSlider("saturation",G),M.setImageFilterText("saturation",G),b.setImageFilterValuePrior("saturation",G));a.lightnessVisible&&(setFilterReferences(null,"lightness",!0),G=b.getImageFilterDefault("lightness"),M.setImageFilterSlider("lightness",G),M.setImageFilterText("lightness",G),b.setImageFilterValuePrior("lightness",G));a.whiteBalanceVisible&&(setFilterReferences(null,"whiteBalance",
!0),G=b.getImageFilterDefault("whiteBalance"),M.setImageFilterSlider("whiteBalance",G),M.setImageFilterText("whiteBalance",G),b.setImageFilterValuePrior("whiteBalance",G));a.noiseVisible&&(setFilterReferences(null,"noise",!0),G=b.getImageFilterDefault("noise"),M.setImageFilterSlider("noise",G),M.setImageFilterText("noise",G),b.setImageFilterValuePrior("noise",G));a.brightnessVisible&&(setFilterReferences(null,"brightness",!0),G=b.getImageFilterDefault("brightness"),M.setImageFilterSlider("brightness",
G),M.setImageFilterText("brightness",G),b.setImageFilterValuePrior("brightness",G))}}}if(a.preloadVisible){var Hg=Z.Utils.getElementOfViewerById(g,"preloadDivider"),Ig=Z.Utils.getElementOfViewerById(g,"buttonPreload");if(Hg&&Ig){Z.Utils.graphicSize(Hg,E,I);var Jg=Hg.style;Jg.top=Oa+"px";a.imageSet||(Jg.left=w+"px",w+=P);Z.Utils.buttonSize(Ig,C,q);var kh=Ig.style;kh.left=w+"px";kh.top=H+"px";w+=U;a.imageSet&&(Jg.left=w+"px",w+=P);w+=8}}if(1==a.helpVisible||3==a.helpVisible){var Kg=Z.Utils.getElementOfViewerById(g,
"buttonHelp");if(Kg){Z.Utils.buttonSize(Kg,C,q);var lh=Kg.style;lh.left=w+"px";lh.top=H+"px";w+=U+8}}if(a.comparison&&a.syncVisible){var ph=parseInt(Z.Utils.getResource("DEFAULT_TOOLBARLABELFONTSIZE"),10),Lg=Z.Utils.getElementOfViewerById(g,"labelSyncTextBox"),mh=Z.Utils.getElementOfViewerById(g,"containerFor-checkboxSyncComparison"),Xf=Z.Utils.getElementOfViewerById(g,"checkboxSyncComparison");if(Lg&&mh&&Xf){var Hf=Lg.style;Hf.width="28px";Hf.height="20px";Hf.left=w+"px";Hf.top=H+3+"px";Hf.visibility=
"visible";Z.Utils.setTextNodeStyle(Lg,"black","verdana",ph+"px","none","normal","normal","normal","normal","1em","left","none");var Yf=mh.style;Yf.width=1.5*C+"px";Yf.height=1.5*q+"px";Yf.left=w+28+3+"px";Yf.top=H-3+"px";Xf.width=C;Xf.height=q;Xf.checked=a.initialSync}}var nh=Z.Utils.getElementOfViewerById(g,"progressTextBox");if(nh){var Hd=nh.style;Hd&&(Le?Hd.display="none":(Hd.display="inline-block",Hd.width=D+"px",Hd.height=Za+"px",Hd.left=h-parseFloat(Ia.style.left)-parseFloat(Hd.width)+"px",
Hd.top=(n-parseFloat(Hd.height))/2+"px"))}};this.syncSliderToViewportZoom=function(a){E(a)};this.z457=function(a){q(a)};this.backgroundEventsHandler=function(a){a=Z.Utils.event(a);if(a=Z.Utils.relatedTarget(a)){var b=a.parentNode;b&&(b=b.id)&&(Aa||db||vb||-1==b.indexOf("button")||-1!=b.indexOf("buttonContainer")||Z.Utils.setButtonDefaults(a.parentNode,M))}};this.positionButtonBorder=function(b){b=Z.Utils.stringSubtract(b,g);var c=a.annotationFileShared?"0":D;if("buttonColor"==b.substr(0,11))var d=
Z.Utils.getElementOfViewerById(g,"buttonBorderSm"+c);else if(b=="buttonViewMode"+c||b=="buttonEditModeFreehand"+c||b=="buttonEditModeText"+c||b=="buttonEditModeIcon"+c||b=="buttonEditModeRectangle"+c||b=="buttonEditModePolygon"+c||b=="buttonEditModeMeasure"+c)d=Z.Utils.getElementOfViewerById(g,"buttonBorderLg"+c);var e=Z.Utils.getElementOfViewerById(g,b);d&&e&&(b=="buttonClearAll"+c&&(e=Z.Utils.getElementOfViewerById(g,"buttonViewMode"+tbViewportID)),b=d.style,e=e.style,b.left=parseFloat(e.left)-
2+"px",b.top=parseFloat(e.top)-2+"px")};this.imageFilterPanelShow=function(){var a=Z.Utils.getElementOfViewerById(g,"imageFilterPanelBackground"),b=Z.Utils.getElementOfViewerById(g,"buttonContainerImageFilter"),c=Z.Utils.getElementOfViewerById(g,"buttonImageFilterPanelShow"),d=Z.Utils.getElementOfViewerById(g,"buttonImageFilterPanelHide");a&&b&&c&&d&&(a.style.width=Ne+"px",b.style.display="inline-block",c.style.display="none",d.style.display="inline-block");Sd=!0};this.imageFilterPanelHide=function(){var a=
Z.Utils.getElementOfViewerById(g,"imageFilterPanelBackground"),b=Z.Utils.getElementOfViewerById(g,"buttonContainerImageFilter"),c=Z.Utils.getElementOfViewerById(g,"buttonImageFilterPanelShow"),d=Z.Utils.getElementOfViewerById(g,"buttonImageFilterPanelHide");a&&b&&c&&d&&(a.style.width="0px",b.style.display="none",c.style.display="inline-block",d.style.display="none");Sd=!1};this.addFilterToImageFilterList=function(a,b,c,d){var e=Z.Utils.getElementOfViewerById(g,"imageFilterList");if(e){var f=Z.Utils.stringUpperCaseFirstLetter(a),
h=Z.Utils.arrayIndexOfObjectValueSubstring(e.options,"text",f),n="\u00a0\u00a0"+f;"\u00a0\u00a0None"==e.options[e.options.length-1].text&&e.options.remove(e.options.length-1);f="";"undefined"!==typeof b&&null!==b&&(f=Z.Utils.roundToFixed(b,3).toString());b="";"undefined"!==typeof c&&null!==c&&(b="-"+Z.Utils.roundToFixed(c,3).toString());d?(a=e.options[h].text,a=a.substring(0,a.indexOf(":\u00a0\u00a0")+3),e.options[h].text=a+f+b):-1==e.options[e.options.length-1].text.toLowerCase().indexOf(a.toLowerCase())?
(e.options[e.options.length]=new Option(n,a),Z.Utils.stringValidate(f)&&(e.options[e.options.length-1].text+=":\u00a0\u00a0"+f+b)):(a=e.options[e.options.length-1].text,a=a.substring(0,a.indexOf(":\u00a0\u00a0")+3),e.options[e.options.length-1].text=a+f+b)}}};this.ZoomifyNavigator=function(b){function c(b){for(var e=0,f=a.imageSetLength;e<f;e++)d(null,a["Viewport"+e.toString()]);b()}function d(c,e){var f="undefined"!==typeof e&&null!==e?!1:!0,g=f?b:e;if("unconverted"!=a.tileSource)vb="ZoomifyImageFolder"==
a.tileSource?Z.Utils.cacheProofPath(g.getImagePath()+"/TileGroup0/0-0-0."+a.tileType):g.formatTilePath(0,0,0),aa=null,aa=new Image,aa.onload=c,aa.onerror=ua,"offsetLoading"!=vb?(f||(ya[ya.length]={id:e.getViewportID().toString(),image:aa}),"ZoomifyZIFFile"!=a.tileSource&&"ZoomifyPFFFile"!=a.tileSource?aa.src=vb:(f=new Z.NetConnector(a),g=g.getViewportID(),f.loadImage(vb,Z.Utils.createCallback(null,c),"navigator",null,g))):window.setTimeout(function(){d(c)},100);else{var h=g.getUnconvertedImage();
"undefined"!==typeof h&&null!==h?(aa=g.createUnconvertedImageThumbnail(h),f&&"function"===typeof c?c():ya[ya.length]="undefined"!==typeof e?{id:e.getViewportID().toString(),image:aa}:{id:null,image:null}):window.setTimeout(function(){d(c,e)},100)}}function e(b,c){if("ZoomifyZIFFile"==a.tileSource||"ZoomifyPFFFile"==a.tileSource&&null===a.tileHandlerPathFull)aa=c;var d=Z.Utils.createContainerElement(g,"div","testImageContainer","inline-block","absolute","hidden",eb+"px",Cb+"px","0px","0px","none",
"0px","transparent none","0px","0px","normal",null,!0);d.appendChild(aa);d.removeChild(aa);d=null;d=aa.height;if(0!=aa.width&&0!=d){ka=Z.Utils.createContainerElement(g,"div","navigatorDisplay"+fa,"inline-block","absolute","hidden",eb+"px",Cb+"px",lb+"px",Sb+"px","solid","1px","transparent none","0px","0px","normal",null,!0);R=a.NavigatorDisplay=ka;S=R.style;a.slideshow&&Z.Utils.setOpacity(a.NavigatorDisplay,0);S.zIndex=(a.baseZIndex+4).toString();var d=parseFloat(Z.Utils.getResource("z82")),f=Z.Utils.getResource("z83"),
h=Z.Utils.getResource("z83NOALPHA"),f=Z.Utils.createContainerElement(g,"div","navigatorBackground","inline-block","absolute","hidden",eb+"px",Cb+"px","0px","0px","none","0px",f,"0px","0px","normal",null,!0);Z.Utils.setOpacity(f,d,h);ka.appendChild(f);kb=f;Aa=kb.style;d=Z.Utils.createContainerElement(g,"div","navigatorImageContainer","inline-block","absolute","hidden",eb+"px",Cb+"px","0px","0px","none","0px","transparent none","0px","0px","normal",null,!0);d.appendChild(aa);aa.alt=Z.Utils.getResource("z439");
ka.appendChild(d);Ma=d;Na=Ma.style;N=aa;d=N.width;h=N.height;f=Z.Utils.createContainerElement(g,"div","navigatorRectangle","inline-block","absolute","hidden",eb+1+"px",Cb+1+"px",lb+"px",Sb+"px","solid","1px","transparent none","0px","0px","normal",null,!0);f.style.borderColor=Z.Utils.stringValidateColorValue(a.navigatorRectangleColor);ka.appendChild(f);V=f;L=V.style;if(a.comparison){var f=Z.Utils.getResource("DEFAULT_NAVIGATORBORDERCOLOR"),n=Z.Utils.createContainerElement(g,"div","navigatorBorder"+
fa,"inline-block","absolute","hidden",eb+1+"px",Cb+1+"px",lb+"px",Sb+"px","solid","1px","transparent none","0px","0px","normal",null,!0);n.style.borderColor=Z.Utils.stringValidateColorValue(f);ka.appendChild(n);nBO=n;nboS=kb.style}a.ViewerDisplay.appendChild(ka);E(eb,Cb,lb,Sb,ac,d,h);I(1==a.navigatorVisible||2==a.navigatorVisible);Z.Utils.addEventListener(R,"mouseover",Z.Utils.stopPropagation);Z.Utils.addEventListener(R,"mousedown",D);Z.Utils.addEventListener(R,"touchstart",T);Z.Utils.addEventListener(R,
"touchmove",O);Z.Utils.addEventListener(R,"touchend",P);Z.Utils.addEventListener(R,"touchcancel",da);qa||(qa=!0,Q("navigatorInitialized"),a.validateViewerReady("navigatorInitialized"));q()}else window.setTimeout(function(){e(b,c)},100)}function f(){if(ya&&0<ya.length&&null!==ya[0]&&0<ya[0].image.width){var a=Z.Utils.arrayIndexOfObjectValue(ya,"id","0");if(-1!=a){a=ya[a].image;aa=a.cloneNode(!1);a=null;if("undefined"===typeof b)var b=null;e(b,aa)}else window.setTimeout(function(){f()},100)}else window.setTimeout(function(){f()},
100)}function h(b){if(ka){a.slideshow&&Z.Utils.setOpacity(ka,0);if("ZoomifyZIFFile"==a.tileSource||"ZoomifyPFFFile"==a.tileSource&&null===a.tileHandlerPathFull)aa=b;if(Ma&&aa&&0<aa.width&&0<aa.height){b=aa.width;var c=aa.height;Ma.appendChild(aa);N=ka.childNodes[1].firstChild;E(eb,Cb,lb,Sb,ac,b,c);b=a.ToolbarDisplay&&"inline-block"==a.ToolbarDisplay.style.display&&!a.ToolbarMinimized||"undefined"!==typeof slideList&&null!==slideList&&"visible"==slideList.style.visibility;I((1==a.navigatorVisible||
2==a.navigatorVisible)&&b);ka.style.zIndex=(a.baseZIndex+4).toString();q()}else window.setTimeout(function(){h()},100)}}function n(){qa&&(cb&&(window.clearInterval(cb),cb=null),R&&S&&kb&&Aa&&Ma&&Na&&N&&V&&L||(R=ka,S=R.style,kb=ka.firstChild,Aa=kb.style,Ma=ka.childNodes[1],Na=Ma.style,N=ka.childNodes[1].firstChild,V=ka.childNodes[2],L=V.style))}function E(c,d,e,f,g,h,n){g||(g=ac);if("undefined"===typeof c||null===c)c=a.navigatorW;if("undefined"===typeof d||null===d)d=a.navigatorH;if("undefined"===
typeof e||null===e)e=0;if("undefined"===typeof f||null===f)f=0;R||(R=ka);S||(S=R.style);N=R.childNodes[1].firstChild;0==N.width&&"undefined"!==h&&null!==h&&(N.width=h);0==N.height&&"undefined"!==n&&null!==n&&(N.height=n);R&&S&&N&&(a.tracking&&(g=0),"undefined"!==typeof g&&null!==g&&(h=N.width/N.height,n=a.viewerW/a.viewerH,g=0==g?n:h,1<h?d=c/g:(c=d,c*=g)),S.width=c+"px",S.height=d+"px",S.left=e+"px",S.top=f+"px",k(c,d));a.navigatorW=c;a.navigatorH=d;if(a.tracking||a.annotations)a.Ruler&&a.Ruler.getInitialized()&&
(e=-1==a.rulerL&&a.Navigator?a.navigatorL:a.rulerL,f=-1==a.rulerT&&a.Navigator?a.navigatorT+a.navigatorH+1:a.rulerT,a.Ruler.setSizeAndPosition(a.rulerW,a.rulerH,e,f)),a.userPanelVisible&&null!==a.UserPanel&&(c=a.rulerW,d=parseInt(Z.Utils.getResource("DEFAULT_USERPANELHEIGHT"),10),e=calculateUserPanelCoords(Z.userPanelPosition,c,d,a.viewerW,a.viewerH),sizeAndPositionUserPanel(a.UserPanel.style,c,d,e.x,e.y)),a.imageList&&b.getStatus("initializedImageList")&&(b.setSizeAndPositionImageList(),a.comparison&&
(c=0==b.getViewportID()?a.Viewport1:a.Viewport0)&&c.getStatus("initializedImageList")&&c.setSizeAndPositionImageList())}function k(b,c){N||(N=ka.childNodes[1].firstChild);if(N&&0!=N.width&&0!=N.height){if(Aa||(Aa=ka.firstChild.style),Na||(Na=ka.childNodes[1].style),Aa&&Na&&(Aa.width=b+"px",Aa.height=c+"px",C(b,c),Na.width=N.width+"px",Na.height=N.height+"px",Na.left=(b-N.width)/2+"px",Na.top=(c-N.height)/2+"px",q(),a.comparison)){if(!d)var d=Z.Utils.getElementOfViewerById(g,"navigatorBorder"+fa);
d&&(d=d.style,d.width=b-2+"px",d.height=c-2+"px",d.left=parseFloat(Aa.left)+"px",d.top=parseFloat(Aa.top)+"px",d.display=fa==a.viewportCurrentID?"inline-block":"none")}}else window.setTimeout(function(){k(b,c)},100)}function C(a,b){N||(N=ka.childNodes[1].firstChild);if(N){var c=N.width,d=N.height,e=c/d,f=a/c,g=b/d;f<=g?(c=a,d=a/e,navImageT=(b-a/c*d)/2):g<f&&(d=b,c=b*e,navImageL=(a-b/d*c)/2);N.width=c;N.height=d}}function I(a){!S&&ka&&(S=ka.style);S&&(S.display=a?"inline-block":"none")}function q(){if(b&&
b.getStatus("initializedViewport")){y();u();var a=b.calculateCurrentCenterCoordinates();$a(a)}}function u(){if(N&&L){var c=N.width/a.imageW,d=N.height/a.imageH,e=b.getZoom(a.comparison&&fa!=a.viewportCurrentID),c=a.viewerW*c/e;a.comparison&&(c/=2);d=a.viewerH*d/e;L.width=c+"px";L.height=d+"px"}}function y(){!Na&&ka&&(Na=ka.childNodes[1].style);if(Na){var c=b.getRotation();Z.Utils.rotateElement(Na,c,a.imageR,!0)}}function $a(b){if(N&&L&&Na){if("undefined"===typeof b||null===b||0==b.x&&0==b.y)b=new Z.Utils.Point(a.imageX,
a.imageY);if("undefined"===typeof z||null===z)z=a.imageZ;var c=a.imageR;0>c&&(c+=360);var d=parseFloat(N.width),e=parseFloat(N.height),c=Z.Utils.rotatePoint(d/a.imageW*b.x-d/2,e/a.imageH*b.y-e/2,-c);b=c.x-parseFloat(L.width)/2;d=c.y-parseFloat(L.height)/2;c=parseFloat(S.width)/2;d=parseFloat(S.height)/2+d-1;L.left=c+b+(a.comparison?-1:0)+"px";L.top=d+"px"}}function H(c){if(N&&L&&Na){var d=a.imageZ,e=a.imageR;0>e&&(e+=360);var f=parseFloat(N.width),g=parseFloat(N.height),h=f/a.imageW,n=g/a.imageH,
E=a.imageX*h,k=a.imageY*n,C=Z.Utils.getPageScroll(),I=c?C.x:0,C=c?C.y:0,I=parseFloat(L.left)+I,C=parseFloat(L.top)+C,f=I-parseFloat(S.width)/2+parseFloat(L.width)/2+f/2,g=C-parseFloat(S.height)/2+parseFloat(L.height)/2+g/2,E=Z.Utils.getPositionRotated(f,g,E,k,-e,a.imageR),h=Math.round(E.x/h),n=Math.round(E.y/n);c?b.zoomAndPanToView(h,n,d,e):(c=new Z.Utils.Point(h,n),b.syncViewportToNavigator(c));a.tracking&&b.syncTrackingToViewport()}}function ua(){a.showMessage(Z.Utils.getResource("z271"))}function D(c){a.interactive&&
(b.zoomAndPanAllStop(!1,!0),a.mouseIsDown=!0,a.comparison&&a.viewportSelect(parseInt(fa,10)),a.maskingSelection&&a.maskClearOnUserAction&&b.clearMask(),R&&V&&L&&(c=Z.Utils.event(c),V.mouseXPrior=c.clientX,V.mouseYPrior=c.clientY,dragPtStart=new Z.Utils.Point(c.clientX,c.clientY),Z.Utils.addEventListener(R,"mousemove",Za),Z.Utils.addEventListener(R,"mouseup",K),Z.Utils.addEventListener(document,"mouseup",K)))}function Za(b){if(a.interactive&&V&&L){var c=parseFloat(L.left),d=parseFloat(L.top);L.left=
c+(b.clientX-V.mouseXPrior)+"px";L.top=d+(b.clientY-V.mouseYPrior)+"px";V.mouseXPrior=b.clientX;V.mouseYPrior=b.clientY;H(!1);return!1}}function K(c){if(a.interactive&&(a.mouseIsDown=!1,R&&V&&L)){document.mousemove=null;document.mouseup=null;Z.Utils.removeEventListener(R,"mousemove",Za);Z.Utils.removeEventListener(R,"mouseup",K);Z.Utils.removeEventListener(document,"mouseup",K);c=Z.Utils.event(c);var d=new Z.Utils.Point(c.clientX,c.clientY);if(d=Z.Utils.calculatePointsDistance(dragPtStart.x,dragPtStart.y,
d.x,d.y)<Xb){var e=Z.Utils.getElementPosition(ka);L.left=c.clientX-e.x-parseFloat(L.width)/2+"px";L.top=c.clientY-e.y-parseFloat(L.height)/2+"px"}H(d);a.comparison&&d||b.updateView()}}function T(b){a.interactive&&(a.mouseIsDown=!0,b.preventDefault(),R&&V&&L&&(b=Z.Utils.getFirstTouch(b)))&&(b=new Z.Utils.Point(b.pageX,b.pageY),dragPtStart=new Z.Utils.Point(b.x,b.y),V.mouseXPrior=b.x,V.mouseYPrior=b.y)}function O(b){if(a.interactive&&(b.preventDefault(),a.mousePan)){if(V&&L&&(b=Z.Utils.getFirstTouch(b))){b=
new Z.Utils.Point(b.pageX,b.pageY);var c=parseFloat(L.left),d=parseFloat(L.top);L.left=c+(b.x-V.mouseXPrior)+"px";L.top=d+(b.y-V.mouseYPrior)+"px";V.mouseXPrior=b.x;V.mouseYPrior=b.y;H(!1)}return!1}}function P(c){if(a.interactive&&(a.mouseIsDown=!1,R&&V&&L)){if(c=Z.Utils.getFirstTouch(c)){c=new Z.Utils.Point(c.pageX,c.pageY);var d=new Z.Utils.Point(c.x,c.y);if(d=Z.Utils.calculatePointsDistance(dragPtStart.x,dragPtStart.y,d.x,d.y)<bc){var e=Z.Utils.getElementPosition(ka);L.left=c.x-e.x-parseFloat(L.width)/
2+"px";L.top=c.y-e.y-parseFloat(L.height)/2+"px"}}H(d);b.updateView()}}function da(c){if(a.interactive&&(a.mouseIsDown=!1,R&&V&&L)){if(c=Z.Utils.getFirstTouch(c)){c=new Z.Utils.Point(c.pageX,c.pageY);var d=new Z.Utils.Point(c.x,c.y);if(d=Z.Utils.calculatePointsDistance(dragPtStart.x,dragPtStart.y,d.x,d.y)<bc){var e=Z.Utils.getElementPosition(ka);L.left=c.x-e.x-parseFloat(L.width)/2+"px";L.top=c.y-e.y-parseFloat(L.height)/2+"px"}}H(d);b.updateView()}}var xa=this,qa=!1,fa=b.getViewportID().toString(),
cb,ka,R,S,kb,Aa,Ma,Na,N,V,L,aa,ya=[],Xb=parseInt(Z.Utils.getResource("DEFAULT_MOUSECLICKTHRESHOLDNAVIGATOR"),10),bc=Z.mobileDevice?parseInt(Z.Utils.getResource("DEFAULT_TOUCHTAPTHRESHOLDNAVIGATORMOBILE"),10):parseInt(Z.Utils.getResource("DEFAULT_TOUCHTAPTHRESHOLDNAVIGATOR"),10),eb=a.navigatorW,Cb=a.navigatorH,lb=a.navigatorL,Sb=a.navigatorT,ac=a.navigatorFit;a.comparison&&"1"==fa&&(lb=a.viewerW-eb-1);var vb;"multiple"!=a.imagePath||a.comparison||a.overlays&&"0"==b.getViewportID()?d(e):c(f);this.z556=
function(a,b){e(a,b)};this.setImage=function(b){Ma&&aa&&0<Ma.childNodes.length&&(a.tracking&&ka.removeChild(navigatorTrackingOverlay),Ma.innerHTML="");"undefined"===typeof ya||null===ya||0==ya.length?d(h):(b=Z.Utils.arrayIndexOfObjectValue(ya,"id",fa),-1!=b&&(aa=ya[b].image,h(aa)))};this.getInitialized=function(){return qa};this.setVisibility=function(a){I(a)};this.setSelected=function(a){if(!b)var b=Z.Utils.getElementOfViewerById(g,"navigatorBorder"+fa);b&&(b.style.display=a?"inline-block":"none")};
this.syncToViewport=function(){q()};this.z657=function(){u()};this.z659=function(){y()};this.z658=function(a){$a(a)};this.setViewport=function(c){b=c;fa=b.getViewportID().toString();a.overlays||xa.setImage(b.getImagePath())};this.drawNavigatorTrackingOverlay=function(c,d){var e=Z.Utils.getElementOfViewerById(g,"navigatorTrackingOverlay");if("undefined"===typeof e||null===e)e=Z.Utils.createContainerElement(g,"div","navigatorTrackingOverlay","none","absolute","visible",eb+1+"px",Cb+1+"px",lb+"px",Sb+
"px","none","0px","transparent-none","0px","0px","normal",null,!0),ka.appendChild(e);if(e){for(;e.hasChildNodes();)e.removeChild(e.lastChild);if("undefined"===typeof d||null===d)d=a.Navigator.getSizeAndPositionNavigatorImage();if(d)for(var f=d.height/a.imageH,h=Math.round(d.width/a.imageW*a.viewerW),f=Math.round(a.viewerH*f),n=0,E=c.length;n<E;n++){if(c[n].complete){var k=b.getCoordinatesFromTrackingCellID(c[n].id);if(null!==k.x&&null!==k.y&&null!==k.z){var C=k.z/100,I=h/C,q=f/C,u=Math.floor(k.x*
I),k=Math.floor(k.y*q),I=u+I<=d.width?I:d.width-u,q=k+q<=d.height?q:d.height-k,y="cellComp"+n.toString(),C=getTrackingOverlayColor(C);e[y]=Z.Utils.createContainerElement(g,"div",y,"inline-block","absolute","visible",I+"px",q+"px",u+"px",k+"px","solid","1px",C,"0px","0px","normal",null,!0);e.appendChild(e[y]);Z.Utils.setOpacity(e[y],.25)}}}else window.setTimeout(function(){xa.drawNavigatorTrackingOverlay(c)},10)}};getTrackingOverlayColor=function(b){b=Z.Utils.convertZoomPercentToMagnification(100*
b,a.sourceMagnification,!0);return Z.Utils.stringValidateColorValue(Z.Utils.getResource("UI_TRACKINGNAVIGATOROVERLAYCOLOR_UNDER"+(2>b?"1":4>b?"2":10>b?"4":16>b?"10":25>b?"16":40>b?"25":60>b?"40":100>b?"60":"INFINITY")))};this.z682=function(){qa?n():cb=window.setInterval(n,300)};this.setSizeAndPosition=function(a,b,c,d,e,f,g){E(a,b,c,d,e,f,g)};this.getSizeAndPositionNavigatorImage=function(){N||(N=ka.childNodes[1].firstChild);var a=null;"undefined"!==typeof N.parentNode&&null!==N.parentNode&&(a=N.parentNode.style,
a={width:N.width,height:N.height,left:parseFloat(a.left)-1,top:parseFloat(a.top)-1});return a}}};
Z.NetConnector=function(b){function c(b,c,f,h){var u=b.substring(0,b.indexOf("?")),y=parseFloat(b.substring(b.indexOf("?")+1,b.indexOf(","))),D=parseFloat(b.substring(b.indexOf(",")+1,b.length)),y=new Z.Utils.Range(y,y+D);Z.localFileSelected?d(b,h,y,c,f,null):e(u,function(b){k(b,h)},y,c,f)}function d(b,c,d,e,f,h,k){d.end+=1;b=Z.localFileData.slice(d.start,d.end);d=new FileReader;d.onloadend=function(b){b.target.readyState==FileReader.DONE&&y(b.target.result,c,e,f,h)};d.readAsArrayBuffer(b)}function e(c,
d,e,k,u,y,D){var H=f();if(null===H)b.showMessage(Z.Utils.getResource("z295"));else{var K="function"===typeof d;if(K){var T=d;d=function(){window.setTimeout(Z.Utils.createCallback(null,T,H),1)};H.onreadystatechange=function(){4==H.readyState&&(H.onreadystatechange=new Function,d())}}try{if("undefined"===typeof e||null===e)H.open("GET",c,K),"loadHTML"==k&&H.setRequestHeader("Content-Type","text/html"),H.send(null);else if("undefined"!==typeof k&&null!==k)if(Z.localUse&&("postXML"==k||"postImage"==k))b.showMessage(Z.Utils.getResource("ERROR_UNSUPPORTEDLOCALSAVING"),
!1,b.messageDurationStandard,"center",!0);else if("postXML"==k)if(u=null,"annotation"!=D||"undefined"!==typeof b.annotationPath&&Z.Utils.stringValidate(b.annotationPath)?"tracking"!=D||"undefined"!==typeof b.trackingPath&&Z.Utils.stringValidate(b.trackingPath)||(u=Z.Utils.getResource("ERROR_TRACKINGPATHMISSING-EDITING")):u=Z.Utils.getResource("ERROR_ANNOTATIONPATHMISSING"),null!==u)b.showMessage(u,!1,b.messageDurationStandard,"center");else{var O,P,Q,da,fa;"annotation"==D?(O=b.annotationPath,Q=O.toLowerCase(),
fa=Z.Utils.getResource("z69")):"tracking"==D&&(O=b.trackingPath,Q=O.toLowerCase(),fa=Z.Utils.getResource("DEFAULT_TRACKINGXMLFILE"));P=Q.length;".json"!=Q.substring(P-5,P)&&".xml"!=Q.substring(P-4,P)&&(da="/"+fa);"undefined"===typeof da&&(da="");D=O+da;b.postingXML=!0;H.open("POST",c+"?file="+D,!0);Z.Utils.defineObjectProperty(H,"file",{value:D,writable:!1,enumerable:!1,configurable:!1});H.setRequestHeader("Content-Type","application/xml");H.send(e)}else if("postImage"==k){b.showMessage(Z.Utils.getResource("ALERT_IMAGESAVEUPLOADING"),
!1,"none","center");b.postingImage=!0;var qa=new FormData;qa.append("fileToUpload",e);Z.Utils.addEventListener(H.upload,"progress",uploadProgress);H.open("POST",c,!0);Z.Utils.defineObjectProperty(H,"zType",{value:"postingImage",writable:!1,enumerable:!1,configurable:!1});H.setRequestHeader("Content-Type","application/upload");H.send(qa)}else if("ZoomifyZIFFile"==b.tileSource||"ZoomifyPFFFile"==b.tileSource)"tile"!=k&&(c=Z.Utils.cacheProofPath(c)),H.open("GET",c,!0),H.responseType="arraybuffer",Z.Utils.defineObjectProperty(H,
"zType",{value:k,writable:!1,enumerable:!1,configurable:!1}),Z.Utils.defineObjectProperty(H,"zTile",{value:u,writable:!1,enumerable:!1,configurable:!1}),Z.Utils.defineObjectProperty(H,"zChunkNumber",{value:y,writable:!1,enumerable:!1,configurable:!1}),Z.browser==Z.browsers.SAFARI&&H.setRequestHeader("If-Modified-Since","Thu, 01 Dec 1994 16:00:00 GMT"),H.setRequestHeader("Range","bytes="+e.start.toString()+"-"+e.end.toString()),H.send(null)}catch(a){h(a,c,k),H=null,console.log(a)}}}function f(){var b=
null;switch(Z.xmlHttpRequestSupport){case "XMLHttpRequest":b=new XMLHttpRequest;break;case "Msxml2.XMLHTTP.6.0":b=new ActiveXObject("Msxml2.XMLHTTP.6.0");break;case "Msxml2.XMLHTTP.3.0":b=new ActiveXObject("Msxml2.XMLHTTP.3.0");break;case "Microsoft.XMLHTTP":b=new ActiveXObject("Microsoft.XMLHTTP")}return b}function h(c,d,e){console.log(c);1==Z.localUse&&(Z.browser==Z.browsers.CHROME||Z.browser==Z.browsers.OPERA||Z.browser==Z.browsers.IE&&11==Z.browserVersion||Z.browser==Z.browsers.SAFARI&&7<=Z.browserVersion)?
b.showMessage(Z.Utils.getResource("z288"),!1,b.messageDurationStandard,"center"):1==Z.localUse&&"ZoomifyZIFFile"==b.tileSource?b.showMessage(Z.Utils.getResource("z290"),!1,b.messageDurationShort,"center"):1==Z.localUse&&"ZoomifyPFFFile"==b.tileSource?b.showMessage(Z.Utils.getResource("z289"),!1,b.messageDurationShort,"center"):-1!=d.toLowerCase().indexOf(".zif")?b.showMessage(Z.Utils.getResource("z256-ZIFBYTERANGE")+e+".",!1,b.messageDurationShort,"center"):-1!=d.indexOf("ImageProperties.xml")?b.showMessage(Z.Utils.getResource("z256-IMAGEXML"),
!0,null,"left"):-1!=d.toLowerCase().indexOf(".pff")?b.showMessage(Z.Utils.getResource("z256-IMAGEHEADER"),!1,b.messageDurationShort,"center"):-1!=d.toLowerCase().indexOf(".pff")?b.showMessage(Z.Utils.getResource("z256-IMAGEXML-DZI"),!1,b.messageDurationShort,"center"):-1!=d.toLowerCase().indexOf("reply_data")?b.showMessage(Z.Utils.getResource("z256-IMAGEOFFSET"),!1,b.messageDurationShort,"center"):-1!=d.indexOf(Z.Utils.getResource("z200"))?b.showMessage(Z.Utils.getResource("z256-TOOLBARSKINSXML"),
!0,null,"left"):-1!=d.indexOf(Z.Utils.getResource("DEFAULT_IMAGELISTXMLFILE"))?b.showMessage(Z.Utils.getResource("z256-IMAGELISTXML"),!1,b.messageDurationShort,"center"):-1!=d.indexOf(Z.Utils.getResource("DEFAULT_COMPARISONXMLFILE"))?b.showMessage(Z.Utils.getResource("z256-COMPARISONXML"),!1,b.messageDurationShort,"center"):-1!=d.indexOf(Z.Utils.getResource("z209"))?b.showMessage(Z.Utils.getResource("z256-SLIDESXML"),!1,b.messageDurationShort,"center"):-1!=d.indexOf(Z.Utils.getResource("z135"))?b.showMessage(Z.Utils.getResource("z256-HOTSPOTSXML"),
!1,b.messageDurationShort,"center"):-1!=d.indexOf(Z.Utils.getResource("z69"))?(b.showMessage(Z.Utils.getResource("z256-CREATINGANNOTATIONSXMLFILE"),!1,b.messageDurationShort,"center"),b.Viewport.createAnnotationsXMLFile()):-1!=d.indexOf(Z.Utils.getResource("z68"))?b.showMessage(Z.Utils.getResource("z256-ANNOTATIONSJSON"),!1,b.messageDurationShort,"center"):-1!=d.toLowerCase().indexOf(Z.Utils.getResource("z70"))||-1!=d.toLowerCase().indexOf(Z.Utils.getResource("z70"))?b.showMessage(Z.Utils.getResource("z256-ANNOTATIONSSAVEHANDLER"),
!1,b.messageDurationShort,"center"):b.showMessage(Z.Utils.getResource("z256"),!1,b.messageDurationShort,"center")}function k(c,d){if(c)if(200!==c.status&&0!==c.status&&206!==c.status){var e=c.status,f=404==e?"Not Found":c.statusText;if(b.xmlParametersParsing)b.showMessage(Z.Utils.getResource("z256-PARAMETERSXML"),!0,null,"left");else if(b.Toolbar&&!b.Toolbar.getInitialized())b.showMessage(Z.Utils.getResource("z256-TOOLBARSKINSXML"),!0,null,"left");else if(b.Viewport&&null!==b.annotationPath&&b.Viewport.getStatus("initializedViewport")&&
!b.Viewport.getStatus("XMLParsedViewport"))b.showMessage(Z.Utils.getResource("z256-CREATINGANNOTATIONSXMLFILE"),!1,b.messageDurationShort,"center"),b.Viewport.createAnnotationsXMLFile();else if("ZoomifyZIFFile"==b.tileSource)b.showMessage(Z.Utils.getResource("z273RANGEREQUESTS")+e+" - "+f,!0,null,"left");else if("ZoomifyPFFFile"==b.tileSource)b.showMessage(Z.Utils.getResource("z273RANGEREQUESTS")+e+" - "+f,!0,null,"left");else if("DZIFolder"==b.tileSource)b.showMessage(Z.Utils.getResource("z256-IMAGEXML-DZI")+
e+" - "+f,!0,null,"left");else{var h=b.verifyCallback("loadingImageXMLFailed");h?(b.validateCallback("loadingImageXMLFailed"),console.log(Z.Utils.getResource("z273")+e+" - "+f)):b.showMessage(Z.Utils.getResource("z273")+e+" - "+f,!1,b.messageDurationShort,"center")}}else e=null,f="undefined"!==typeof b.annotationPath&&Z.Utils.stringValidate(b.annotationPath)&&".json"==b.annotationPath.toLowerCase().substring(b.annotationPath.length-5,b.annotationPath.length),b.postingImage&&c.zType&&"postingImage"==
c.zType?(b.postingImage=!1,(h=b.verifyCallback("imageSaveComplete"))?(b.hideMessage(),b.validateCallback("imageSaveComplete")):b.showMessage(Z.Utils.getResource("ALERT_IMAGESAVESUCCESSFUL"),!1,b.messageDurationShort,"center")):c.response&&c.zType&&"ZoomifyZIFFile"==b.tileSource?y(c,d):c.response&&c.zType&&"ZoomifyPFFFile"==b.tileSource?y(c,d):c.responseXML&&c.responseXML.documentElement&&!f?(e=c.responseXML,K(e,d)):c.responseText&&(e=c.responseText,-1!=e.indexOf("ZAS")&&f?u(e,d):"IIIFImageServer"==
b.tileSource?u(e,d,!0):b.postingXML?(b.postingXML=!1,b.showMessage(Z.Utils.getResource("z1"),!1,b.messageDurationShort,"center"),b.Viewport&&b.Viewport.setAllHotspotsSaved()):"ZoomifyImageFolder"==b.tileSource?(e=Z.Utils.xmlConvertTextToDoc(e),K(e,d)):"ZoomifyZIFFile"==b.tileSource?(e=Z.Utils.xmlConvertTextToDoc(e),K(e,d)):"ZoomifyPFFFile"==b.tileSource&&(-1!=e.toUpperCase().indexOf("PFFHEADER")?(f=e.indexOf("reply_data=")+11,e=e.substring(f,e.length)):(f=e.indexOf("begin=")+6,h=e.indexOf("&",f),
beginValue=e.substring(f,h),f=e.indexOf("reply_data=")+11,replyDataValue=e.substring(f,e.length),e="<PFFOFFSET BEGIN='"+beginValue+"' REPLYDATA='"+replyDataValue+"' />"),e=Z.Utils.xmlConvertTextToDoc(e),K(e,d)));else b.showMessage(Z.Utils.getResource("z272"),!1,b.messageDurationShort,"center")}function y(c,d,e,f,h){if(b.Viewport){Z.localFileSelected||(e=c.zType,h=c.zChunkNumber,f=c.zTile);var k="undefined"===typeof d||null===d||0==d?b.Viewport:b["Viewport"+d.toString()];c=new Z.Utils.createUint8Array(Z.localFileSelected?
c:c.response,0);if("header"==e)if(null===b.tileSourceMultiple)"ZoomifyZIFFile"==b.tileSource?k.parseZIFHeader(c):"ZoomifyPFFFile"==b.tileSource&&b.Viewport.parsePFFHeader(c);else for(var k=0,u=b.imageSetLength;k<u;k++)"ZoomifyZIFFile"==b.tileSource?d==k&&b["Viewport"+k.toString()].parseZIFHeader(c):"ZoomifyPFFFile"==b.tileSource&&d==k&&b["Viewport"+k.toString()].parsePFFHeader(c);else if("jpegHeaders"==e)if(null===b.tileSourceMultiple)k.parsePFFJPEGHeaders(c);else for(k=0,u=b.imageSetLength;k<u;k++)d==
k&&b["Viewport"+k.toString()].parsePFFJPEGHeaders(c);else if("offset"==e)if(null===b.tileSourceMultiple)"ZoomifyZIFFile"==b.tileSource?k.parseZIFOffsetChunk(c,h):"ZoomifyPFFFile"==b.tileSource&&k.parsePFFOffsetChunk(c,h);else for(k=0,u=b.imageSetLength;k<u;k++)"ZoomifyZIFFile"==b.tileSource?d==k&&b["Viewport"+k.toString()].parseZIFOffsetChunk(c,h):"ZoomifyPFFFile"==b.tileSource&&d==k&&b["Viewport"+k.toString()].parsePFFOffsetChunk(c,h);else if("byteCount"==e)if(null===b.tileSourceMultiple)k.parseZIFByteCountChunk(c,
h);else for(k=0,u=b.imageSetLength;k<u;k++)d==k&&b["Viewport"+k.toString()].parseZIFByteCountChunk(c,h);else if("image"==e.substring(0,5))if(P--,null===b.tileSourceMultiple)"ZoomifyZIFFile"==b.tileSource?k.parseZIFImage(c,f,e):"ZoomifyPFFFile"==b.tileSource&&k.parsePFFImage(c,f,e);else for(k=0,u=b.imageSetLength;k<u;k++)"ZoomifyZIFFile"==b.tileSource?d==k&&b["Viewport"+k.toString()].parseZIFImage(c,f,e):"ZoomifyPFFFile"==b.tileSource&&d==k&&b["Viewport"+k.toString()].parsePFFImage(c,f,e);else if("navigator"==
e)if(null===b.tileSourceMultiple)"ZoomifyZIFFile"==b.tileSource?k.parseZIFImage(c,f,e):"ZoomifyPFFFile"==b.tileSource&&k.parsePFFImage(c,f,e);else for(k=0,u=b.imageSetLength;k<u;k++)"ZoomifyZIFFile"==b.tileSource?d==k&&b["Viewport"+k.toString()].parseZIFImage(c,f,e):"ZoomifyPFFFile"==b.tileSource&&d==k&&b["Viewport"+k.toString()].parsePFFImage(c,f,e);else if("gallery"==e)if(null===b.tileSourceMultiple)"ZoomifyZIFFile"==b.tileSource?k.parseZIFImage(c,f,e):"ZoomifyPFFFile"==b.tileSource&&k.parsePFFImage(c,
f,e);else for(k=0,u=b.imageSetLength;k<u;k++)"ZoomifyZIFFile"==b.tileSource?d==k&&b["Viewport"+k.toString()].parseZIFImage(c,f,e):"ZoomifyPFFFile"==b.tileSource&&d==k&&b["Viewport"+k.toString()].parsePFFImage(c,f,e);else"ZoomifyZIFFile"==b.tileSource?b.showMessage(Z.Utils.getResource("z256-ZIFBYTES"),!1,b.messageDurationShort,"center"):"ZoomifyPFFFile"==b.tileSource&&b.showMessage(Z.Utils.getResource("z256-PFFBYTES"),!1,b.messageDurationShort,"center")}}function u(c,d,e){var f=null;try{f=JSON.parse(c)}catch(h){b.showMessage(h.name+
Z.Utils.getResource("z276")+h.message)}if(f)if(c="undefined"===typeof d||null===d||0==d?b.Viewport:b["Viewport"+d.toString()],e)if(b.iiifInfoJSONObject=f,e='<IMAGE_PROPERTIES WIDTH="'+f.width+'" HEIGHT="'+f.height+'" />',e=Z.Utils.xmlConvertTextToDoc(e),null===b.tileSourceMultiple)c.z602(e);else for(c=0,f=b.imageSetLength;c<f;c++)d==c&&b["Viewport"+c.toString()].z602(e);else if(b.overlays)b.overlayJSONObject=f,e=Z.Utils.jsonConvertObjectToXMLText(f),e=Z.Utils.xmlConvertTextToDoc(e),b.parseImageSetXML(e,
"overlay");else if(b.annotationJSONObject=f,e=Z.Utils.jsonConvertObjectToXMLText(f),e=Z.Utils.xmlConvertTextToDoc(e),null===b.tileSourceMultiple)c.parseAnnotationsXML(e);else for(c=0,f=b.imageSetLength;c<f;c++)d==c&&b["Viewport"+c.toString()].parseAnnotationsXML(e)}function K(c,d){if(c&&c.documentElement){var e="undefined"===typeof d||null===d||0==d?b.Viewport:b["Viewport"+d.toString()],f=c.documentElement.tagName;if(b.xmlParametersParsing)b.parseParametersXML(c);else if("USERDATA"==f)b.parseUsersXML(c);
else if("COPYRIGHT"==f)e=c.documentElement.getAttribute("STATEMENTTEXT"),f=c.documentElement.getAttribute("DECLINEDTEXT"),Z.Utils.stringValidate(e)?b.showCopyright(e,f):b.showMessage(Z.Utils.getResource("z255"),!0);else if("IMAGE_PROPERTIES"==f||"ZIFHEADER"==f||"PFFHEADER"==f||"Image"==f){if("ZoomifyZIFFile"==b.tileSource||"ZoomifyImageFolder"==b.tileSource||"ZoomifyPFFFile"==b.tileSource||"DZIFolder"==b.tileSource||"ImageServer"==b.tileSource)if("multiple"!=b.imagePath)e.z602(c);else for(e=0,f=b.imageSetLength;e<
f;e++)d==e&&b["Viewport"+e.toString()].z602(c)}else if("PFFOFFSET"==f)if("multiple"!=b.imagePath)e.parsePFFOffsetChunkServlet(c);else for(e=0,f=b.imageSetLength;e<f;e++)d==e&&b["Viewport"+e.toString()].parsePFFOffsetChunkServlet(c);else if("SKINDATA"==f)"function"===typeof b.xmlCallbackFunction?b.xmlCallbackFunction(c):b.Toolbar&&b.Toolbar.parseSkinXML(c);else if("GEODATA"==f)e.parseGeoCoordinatesXML(c);else if("IMAGELISTDATA"==f)if(null===b.tileSourceMultiple)e.parseImageListXML(c);else for(e=0,
f=b.imageSetLength;e<f;e++)d==e&&b["Viewport"+e.toString()].parseImageListXML(c,d);else if("SLIDEDATA"==f)e.parseSlidesXML(c);else if("HOTSPOTDATA"==f)if(null===b.tileSourceMultiple)e.parseHotspotsXML(c);else for(e=0,f=b.imageSetLength;e<f;e++)d==e&&b["Viewport"+e.toString()].parseHotspotsXML(c);else if("ZAS"==f)if(null===b.tileSourceMultiple)e.parseAnnotationsXML(c);else for(e=0,f=b.imageSetLength;e<f;e++)d==e&&b["Viewport"+e.toString()].parseAnnotationsXML(c,d);else if("COMPARISONDATA"==f)b&&b.parseImageSetXML(c,
"comparison");else if("OVERLAYDATA"==f)b&&b.parseImageSetXML(c,"overlay");else if("ANIMATIONDATA"==f)b&&b.parseImageSetXML(c,"animation");else if("SLIDESTACKDATA"==f)b&&b.parseImageSetXML(c,"slidestack");else if("TRACKINGDATA"==f)if(null===b.tileSourceMultiple)e.parseTrackingXML(c);else for(e=0,f=b.imageSetLength;e<f;e++)d==e&&b["Viewport"+e.toString()].parseTrackingXML(c,d);else b.postingImage?b.showMessage(Z.Utils.getResource("ERROR_SAVEIMAGEHANDLERPATHINVALID"),!0):b.showMessage(Z.Utils.getResource("z296"),
!0)}else b.showMessage(Z.Utils.getResource("z293"),!0)}function T(d,e,f,h,k){if(P<qa)return P++,("ZoomifyZIFFile"==b.tileSource||"ZoomifyPFFFile"==b.tileSource&&null===b.tileHandlerPathFull)&&("undefined"!==typeof h&&null!==h||"navigator"==f)?c(d,f,h,k):(e=Z.Utils.createCallback(null,D,e),(new O(d,e,f)).start()),!0;-1==Z.Utils.arrayIndexOfObjectValue(da,"sc",d)&&(da[da.length]={sc:d,cb:e,ct:f,t:h},xa||(xa=window.setInterval(function(){var b=da[0];T(b.sc,b.cb,b.ct,b.t)&&(da=Z.Utils.arraySplice(da,
0,1));0==da.length&&xa&&(window.clearInterval(xa),xa=null)},Q)));return!1}function D(c,d,e){P--;if("function"===typeof c)try{c(e)}catch(f){b.showMessage(f.name+Z.Utils.getResource("z245")+d+" "+f.message,!0)}}function O(c,d,e){function f(b){h.onload=null;h.onabort=null;h.onerror=null;k&&window.clearTimeout(k);window.setTimeout(function(){d(c,b?h:null)},1)}var h=null,k=null;this.start=function(){h=new Image;var d=function(){f(!1)};h.onload=function(){f(!0)};h.onabort=d;h.onerror=d;k=window.setTimeout(function(){console.log(Z.Utils.getResource("z253"));
f(!1);b.Viewport.traceDebugValues("imageRequestTimeout",e+" timeout: "+c)},fa);h.src=c}}var P=0,qa=parseInt(Z.Utils.getResource("z140"),10),fa=parseFloat(Z.Utils.getResource("z139")),Q=Z.Utils.getResource("DEFAULT_IMAGELOADQUEUEDELAY"),xa,da=[];this.loadHTML=function(b,c){e(b,c,null)};this.loadXML=function(b,c){"undefined"===typeof c||null===c?e(b,k,null):e(b,function(b){k(b,c)},null)};this.loadJSON=function(b){e(b,k,null)};this.loadByteRange=function(b,c,f,h,u,y,D){c=new Z.Utils.Range(c,f);Z.localFileSelected?
d(b,D,c,h,u,y):e(b,function(b){k(b,D)},c,h,u,y)};this.postXML=function(b,c,d){e(b,k,c,"postXML",null,null,d)};this.postImage=function(b,c){e(b,k,c,"postImage")};this.loadImage=function(b,c,d,e,f){T(b,c,d,e,f)}};
Z.Utils={addCrossBrowserEvents:function(){document.addEventListener?(this.addEventListener=function(b,c,d){b&&("mousewheel"==c&&b.addEventListener("DOMMouseScroll",d,!1),"string"==typeof d&&console.log(d),b.addEventListener(c,d,!1))},this.removeEventListener=function(b,c,d){b&&("mousewheel"==c&&b.removeEventListener("DOMMouseScroll",d,!1),b.removeEventListener(c,d,!1))},this.event=function(b){return b},this.target=function(b){return b.target},this.relatedTarget=function(b){return b.relatedTarget},
this.isRightMouseButton=function(b){var c=!1;if(2==b.which||3==b.which)c=!0;return c},this.preventDefault=function(b){b.preventDefault()},this.stopPropagation=function(b){b.stopPropagation()}):document.attachEvent&&(this.addEventListener=function(b,c,d){if(-1==this._findListener(b,c,d)){var e=function(){var c=window.event;Function.prototype.call?d.call(b,c):(b._currentListener=d,b._currentListener(c),b._currentListener=null)};b.attachEvent("on"+c,e);c={target:b,eventName:c,handler:d,handler2:e};var e=
(b.document||b).parentWindow,f="l"+this._listenerCounter++;e._allListeners||(e._allListeners={});e._allListeners[f]=c;b._listeners||(b._listeners=[]);b._listeners[b._listeners.length]=f;e._unloadListenerAdded||(e._unloadListenerAdded=!0,e.attachEvent("onunload",this._removeAllListeners))}},this.removeEventListener=function(b,c,d){if(b&&(d=this._findListener(b,c,d),-1!=d)){var e=(b.document||b).parentWindow,f=b._listeners[d];b.detachEvent("on"+c,e._allListeners[f].handler2);b._listeners=Z.Utils.arraySplice(b._listeners,
d,1);delete e._allListeners[f]}},this.event=function(b){return window.event},this.target=function(b){return b.srcElement},this.relatedTarget=function(b){var c=null;"mouseover"==b.type?c=b.fromElement:"mouseout"==b.type&&(c=b.toElement);return c},this.isRightMouseButton=function(b){var c=!1;2==b.button&&(c=!0);return c},this.preventDefault=function(b){b&&(b.returnValue=!1)},this.stopPropagation=function(b){b.cancelBubble=!0},this._findListener=function(b,c,d){var e=b._listeners;if(!e)return-1;b=(b.document||
b).parentWindow;for(var f=e.length-1;0<=f;f--){var h=b._allListeners[e[f]];if(h&&h.eventName==c&&h.handler==d)return f}return-1},this._removeAllListeners=function(){for(id in this._allListeners){var b=this._allListeners[id];b.target.detachEvent("on"+b.eventName,b.handler2);delete this._allListeners[id]}},this._listenerCounter=0)},addCrossBrowserFunctions:function(){document.addEventListener?(this.disableTextInteraction=function(b){if(b){var c=b.parentNode.style;c&&(b.parentNode.unselectable="on",
c.userSelect="none",c.MozUserSelect="none",c.webkitUserSelect="none",c.webkitTouchCallout="none",c.webkitTapHighlightColor="transparent")}},this.renderQuality=function(b,c){c&&b.style.setProperty("image-rendering","high"==c?"optimizeQuality":"optimizeSpeed",null)},this.setOpacity=function(b,c,d){Z.alphaSupported?b.style.opacity=c:d&&(b.style.backgroundColor=d)}):document.attachEvent&&(this.disableTextInteraction=function(b){b&&(b.parentNode.unselectable="on",b.parentNode.onselectstart=function(){return!1})},
this.renderQuality=function(b,c){c&&(b.style.msInterpolationMode="high"==c?"bicubic":"nearest-neighbor")},this.setOpacity=function(b,c,d){Z.alphaSupported?(c*=100,b.style.zoom=1,b.style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity="+c+")",b.style.filter="alpha(opacity="+c+")",100==c&&(b.style.filter="")):d&&(b.style.backgroundColor=d)})},declareZoomifyGlobals:function(){Z.viewerCounter=0;Z.multipleViewers=!1;Z.browsers=null;Z.browser=null;Z.browserVersion=null;Z.scaleThreshold=null;Z.canvasSupported=
null;Z.cssTransformsSupported=null;Z.cssTransformProperty=null;Z.cssTransformNoUnits=null;Z.alphaSupported=null;Z.renderQuality=null;Z.rotationSupported=null;Z.fullScreenSupported=null;Z.arrayMapSupported=null;Z.arraySpliceSupported=null;Z.float32ArraySupported=null;Z.uInt8ArraySupported=null;Z.localUseSupported=null;Z.localUseEnabled=null;Z.localFileSelected=null;Z.localFileData=null;Z.singleFileSupported=null;Z.singleFileEnabled=null;Z.xmlHttpRequestSupport=null;Z.definePropertySupported=null;Z.responseArraySupported=
null;Z.responseArrayPrototyped=!1;Z.touchSupport=null;Z.gestureSupport=null;Z.mobileDevice=null;Z.cacheProofCounter=0},detectBrowserFeatures:function(){Z.browsers={UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5,EDGE:6};var b=Z.browsers.UNKNOWN,c=0,d=1E4,e=navigator.appName,f=navigator.appVersion,h=!1,k=!1,y=navigator.userAgent.toLowerCase();if(-1!=y.indexOf("edge"))b=Z.browsers.EDGE,c=f;else if("Microsoft Internet Explorer"==e&&window.attachEvent&&window.ActiveXObject)c=y.indexOf("msie"),b=Z.browsers.IE,
c=parseFloat(y.substring(c+5,y.indexOf(";",c))),h="undefined"!==typeof document.documentMode;else if("Netscape"==e&&-1!=y.indexOf("trident"))b=Z.browsers.IE,c=11;else if("Netscape"==e&&window.addEventListener){var u=y.indexOf("firefox"),e=y.indexOf("safari"),f=y.indexOf("chrome");0<=u?(b=Z.browsers.FIREFOX,c=parseFloat(y.substring(u+8)),d=1E4):0<=e&&(d=y.substring(0,e).lastIndexOf("/"),b=0<=f?Z.browsers.CHROME:Z.browsers.SAFARI,c=parseFloat(y.substring(d+1,e)),d=1E4);e=new Image;e.style.getPropertyValue&&
(k=e.style.getPropertyValue("image-rendering"))}else"Opera"==e&&window.opera&&"[object Opera]"==Object.prototype.toString.call(window.opera)&&(b=Z.browsers.OPERA,c=parseFloat(f));var e=window.File&&window.FileReader&&window.Blob,K;if(window.XMLHttpRequest)netReq=new XMLHttpRequest,K="XMLHttpRequest";else if(window.ActiveXObject)for(var f=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],u=0,T=f.length;u<T;u++)try{netReq=new ActiveXObject(f[u]);K=f[u];break}catch(D){}var f="response"in
XMLHttpRequest.prototype||"mozResponseArrayBuffer"in XMLHttpRequest.prototype||"mozResponse"in XMLHttpRequest.prototype||"responseArrayBuffer"in XMLHttpRequest.prototype,u=document.createElement("canvas"),u=!(!u.getContext||!u.getContext("2d")),T=!(b==Z.browsers.SAFARI&&4>c||b==Z.browsers.CHROME&&2>c),u=u&&T,T=!(b==Z.browsers.CHROME&&2>c),k=h||k?"high":null,O=(document.documentElement||{}).style||{},h=!1,P=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],qa,fa;for(;qa=P.shift();)if("undefined"!==
typeof O[qa]){h=!0;fa=/webkit/i.test(qa);break}var O=h,P="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints,Q=-1<y.indexOf("iphone")||-1<y.indexOf("ipad")||-1<y.indexOf("ipod"),y=-1<y.indexOf("android")||Q,xa=!1;if("undefined"!==typeof document.cancelFullScreen||"undefined"!==typeof document.webkitCancelFullScreen||"undefined"!==typeof document.mozCancelFullScreen||"undefined"!==typeof document.oCancelFullScreen||
"undefined"!==typeof document.msCancelFullScreen||"undefined"!==typeof document.msExitFullscreen)xa=!0;var da=Array.prototype.map,n=Array.prototype.splice,C=!1;try{new Float32Array(1),C=!0}catch(D){}var E=!1;try{new Uint8Array(1),E=!0}catch(D){}var I=!1;if("function"==typeof Object.defineProperty)try{Object.defineProperty({},"x",{}),I=!0}catch(D){}var ua;switch(window.location.protocol){case "http:":ua=!1;break;case "https:":ua=!1;break;case "file:":ua=!0;break;default:ua=null}var $a=!(Z.browser==
Z.browsers.IE&&9>Z.browserVersion||Z.browser==Z.browsers.OPERA&&15>Z.browserVersion||Z.browser==Z.browsers.CHROME&&25>Z.browserVersion&&Z.browser==Z.browsers.FIREFOX&&20>Z.browserVersion&&Z.browser==Z.browsers.SAFARI&&5>Z.browserVersion);Z.browser=b;Z.browserVersion=c;Z.scaleThreshold=d;Z.localUseSupported=e;Z.xmlHttpRequestSupport=K;Z.responseArraySupported=f;Z.canvasSupported=u;Z.useCanvas=Z.canvasSupported;Z.imageFilters=!Z.useCanvas&&Z.imageFilters?!1:Z.imageFilters;Z.cssTransformsSupported=h;
Z.cssTransformProperty=qa;Z.cssTransformNoUnits=fa;Z.alphaSupported=T;Z.renderQuality=k;Z.rotationSupported=O;Z.fullScreenSupported=xa;Z.arrayMapSupported=da;Z.arraySpliceSupported=n;Z.float32ArraySupported=C;Z.uInt8ArraySupported=E;Z.definePropertySupported=I;Z.touchSupport=P;Z.gestureSupport=Q&&P;Z.mobileDevice=y;Z.localUseEnabled=ua;Z.singleFileSupported=$a},parseParameters:function(b){var c=[];if("object"===typeof b)c=b;else if("string"===typeof b){b=b.split("&");for(var d=0,e=b.length;d<e;d++){var f=
b[d],h=f.indexOf("=");if(0<h){var k=f.substring(0,h),f=f.substring(h+1);c[k]=f}}}return c},parametersToDelimitedString:function(b,c){var d="",e;for(e in b)d+=e+"="+b[e].toString()+c;return d=d.slice(0,-1)},readCookie:function(b){b+="=";for(var c=document.cookie.split(";"),d=0,e=c.length;d<e;d++){for(var f=c[d];" "==f.charAt(0);)f=f.substring(1,f.length);if(0==f.indexOf(b))return f.substring(b.length,f.length)}return null},getResource:function(b){var c="";switch(b){case "z110":c="Enable Express parameters";
break;case "z109":c="Changing This Violates License Agreement";break;case "z108":c="Support for this parameter is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Express, Pro, and Enterprise editions: ";break;case "z187":c="Changing This Violates License Agreement";break;case "z186":c="Changing This Violates License Agreement";break;case "z185":c="Support for this parameter is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Pro and Enterprise editions: ";
break;case "z215":c="Enable special storage support";break;case "z214":c="Changing this violates License Agreement";break;case "z213":c="Support for Zoomify Image File (PFF) storage and other special storage options is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Enterprise edition.";break;case "z107":c="Changing this violates License Agreement";break;case "z106":c="Changing this violates License Agreement";break;case "z105":c="Support for this parameter is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Enterprise edition: ";
break;case "DEFAULT_PARAMETERLISTTEXT":c="zAnimationAxis,zAnimationFlip,zAnimationPath,zAnimator,zAnnotationJSONObject,zAnnotationPanelVisible,zAnnotationPath,zAnnotationSort,zAnnotationXMLAperioLoad,zAnnotationXMLAperioPost,zAnnotationXMLText,zAnnotationsAddMultiple,zAnnotationsAutoSave,zAutoResize,zBaseZIndex,zBlurrinessVisible,zBookmarksGet,zBookmarksSet,zBrightnessVisible,zCanvas,zCaptionBackColor,zCaptionBackVisible,zCaptionBoxes,zCaptionOffset,zCaptionPosition,zCaptionTextColor,zCaptionTextVisible,zClickPan,zClickURLEntryVisible,zClickZoom,zColorBlueRangeVisible,zColorBlueVisible,zColorGreenRangeVisible,zColorGreenVisible,zColorRedRangeVisible,zColorRedVisible,zComparisonPath,zConstrainPan,zContrastVisible,zCoordinatesVisible,zCopyrightPath,zCrosshairsVisible,zDebug,zDoubleClickDelay,zDoubleClickZoom,zEdgesVisible,zEditMode,zEqualizeVisible,zFadeInSpeed,zFieldOfViewVisible,zFileHandlerPath,zFocal,zFreehandVisible,zFullPageVisible,zFullScreenVisible,zFullViewVisible,zGalleryHeight,zGalleryLeft,zGalleryPosition,zGalleryTop,zGalleryVisible,zGalleryWidth,zGammaBlueVisible,zGammaGreenVisible,zGammaRedVisible,zGammaVisible,zGeoCoordinatesPath,zGrayscaleVisible,zHelpHeight,zHelpLeft,zHelpPath,zHelpTop,zHelpVisible,zHelpWidth,zHideOverlayBackfill,zHotspotListTitle,zHotspotPath,zHotspotsDrawOnlyInView,zHueVisible,zIIIFFormat,zIIIFIdentifier,zIIIFPrefix,zIIIFQuality,zIIIFRegion,zIIIFRotation,zIIIFScheme,zIIIFServer,zIIIFSize,zImageFiltersVisible,zImageH,zImageListPath,zImageProperties,zImageSetSliderVisible,zImageW,zInitialFullPage,zInitialImageFilters,zInitialRotation,zInitialSync,zInitialTrackingOverlayVisible,zInitialX,zInitialY,zInitialZoom,zInteractive,zInversionVisible,zKeys,zLabelClickSelect,zLabelFillColor,zLabelFillVisible,zLabelHighlight,zLabelLineColor,zLabelLineVisible,zLabelShapesInternal,zLabelsClickDrag,zLightnessVisible,zLogoCustomPath,zLogoLinkURL,zLogoVisible,zMagnification,zMagnifierHeight,zMagnifierLeft,zMagnifierTop,zMagnifierVisible,zMagnifierWidth,zMarkupMode,zMaskBorder,zMaskClearOnUserAction,zMaskFadeSpeed,zMaskScale,zMaskVisible,zMaxZoom,zMeasureVisible,zMessagesVisible,zMinZoom,zMinimizeVisible,zMousePan,zMouseWheel,zNarrativeAnnotationFolderPath,zNarrativeImageFolderPath,zNarrativeMediaFolderPath,zNarrativeMode,zNarrativePath,zNavigatorFit,zNavigatorHeight,zNavigatorLeft,zNavigatorRectangleColor,zNavigatorTop,zNavigatorVisible,zNavigatorWidth,zNoPost,zNoPostDefaults,zNoiseVisible,zNormalizeVisible,zOnAnnotationReady,zOnReady,zOverlayJSONObject,zOverlayPath,zPanBuffer,zPanButtonsVisible,zPanSpeed,zPixelsPerUnit,zPolygonVisible,zPreloadVisible,zProgressVisible,zQuality,zRequestTiles,zResetVisible,zRotationVisible,zRulerHeight,zRulerLeft,zRulerListType,zRulerTop,zRulerVisible,zRulerWidth,zSaturationVisible,zSaveButtonVisible,zSaveHandlerPath,zSaveImageBackColor,zSaveImageCompression,zSaveImageFilename,zSaveImageFormat,zSaveImageFull,zSaveImageHandlerPath,zScreensaver,zScreensaverSpeed,zSepiaVisible,zServerIP,zServerPort,zShapeVisible,zSharpnessVisible,zSimplePath,zSkinPath,zSlideButtonsVisible,zSlideListTitle,zSlidePath,zSliderVisible,zSlidestackPath,zSmoothPan,zSmoothPanEasing,zSmoothPanGlide,zSmoothZoom,zSmoothZoomEasing,zSourceMagnification,zSyncVisible,zTextVisible,zThresholdVisible,zTileH,zTileHandlerPath,zTileSource,zTileW,zTilesPNG,zToolbarBackgroundVisible,zToolbarInternal,zToolbarPosition,zToolbarVisible,zTooltipsVisible,zTourListTitle,zTourPath,zTrackingAuto,zTrackingEditMode,zTrackingPanelVisible,zTrackingPath,zUnits,zUnitsPerImage,zUnsavedEditsTest,zUserLogin,zUserNamePrompt,zUserPanelVisible,zUserPath,zUsingDirectoryExtensions,zVirtualPointerPath,zVirtualPointerVisible,zWatermarkPath,zWhiteBalanceVisible,zXMLParametersPath,zZoomButtonsVisible,zZoomRectangle,zZoomSpeed";
break;case "z125":c="0";break;case "z124":c="8192";break;case "z123":c="1060";break;case "z90":c="ZoomifyZIFFile"==Z.tileSource?"1024":"256";break;case "z221":c="IIIFImageServer"!=Z.tileSource?"256":"512";break;case "z219":c="IIIFImageServer"!=Z.tileSource?"256":"512";break;case "z140":c="300";break;case "z139":c="60000";break;case "DEFAULT_IMAGELOADQUEUEDELAY":c="100";break;case "z218":c="1.15";break;case "z220":c="300";break;case "z81":c="6";break;case "z78":c="3";break;case "z80":c="5";break;case "z77":c=
"3";break;case "z79":c="3";break;case "z76":c="2";break;case "z75":c="0";break;case "z173":c=Z.mobileDevice?"1":"1.5";break;case "z173UNCONVERTED":c=Z.mobileDevice?Z.rotationVisible?"2":"1":"10";break;case "DEFAULT_z310SIZEMAXBROWSER":c="10000";break;case "DEFAULT_z310SIZEMAXFIREFOX":c="4000";break;case "DEFAULT_z310SIZEMAXMOBILE":c="3000";break;case "DEFAULT_z310SIZEMAXIMAGESET":c="1000";break;case "z74":reTxt=Z.mobileDevice?"1":"2";break;case "z88":c="1";break;case "DEFAULT_BASEZINDEX":c="2000";
break;case "DEFAULT_VALIDATEVIEWRETRYLIMIT":c="2";break;case "DEFAULT_VALIDATEVIEWRETRYDELAY":c="1000";break;case "z104":c="0";break;case "DEFAULT_MOUSECLICKTHRESHOLDVIEWPORT":c=4;break;case "DEFAULT_MOUSECLICKTHRESHOLDTIMEVIEWPORT":c=500;break;case "DEFAULT_MOUSECLICKTHRESHOLDHOTSPOT":c=4;break;case "DEFAULT_TOUCHTAPTHRESHOLDVIEWPORT":c=Z.mobileDevice?6:4;break;case "DEFAULT_TOUCHTAPTHRESHOLDTIMEVIEWPORT":c=500;break;case "DEFAULT_MOUSECLICKTHRESHOLDNAVIGATOR":c=4;break;case "DEFAULT_TOUCHTAPTHRESHOLDNAVIGATOR":c=
Z.mobileDevice?6:3;break;case "z175":c="5";break;case "z176":c="10";break;case "z241":c="5";break;case "z242":c="0.02";break;case "z238":c="30";break;case "z240":c="20";break;case "z239":c="800";break;case "z93TIERSKIPTHRESHOLD":c="0.2";break;case "z122":c="10";break;case "DEFAULT_PINCHTESTDURATION":c="10";break;case "DEFAULT_AUTORESIZESKIPDURATION":c="10";break;case "DEFAULT_MOUSEWHEEL":c="1";break;case "DEFAULT_MOUSEWHEELANIMATION":c="1";break;case "DEFAULT_MOUSEWHEELSLIDESTACK":c="1";break;case "z165":c=
"300";break;case "z111":c="5";break;case "z112":c="0.067";break;case "z146":c="1";break;case "z164":c="1";break;case "z92":c="1";break;case "z93":c="1";break;case "DEFAULT_DOUBLECLICKZOOM":c="1";break;case "DEFAULT_DOUBLECLICKDELAY":c="250";break;case "z95":c="1";break;case "z95LIMIT":c="2";break;case "z95STRICT":c="0";break;case "DEFAULT_SMOOTHPAN":c="1";break;case "DEFAULT_SMOOTHPANEASING":c="2";break;case "DEFAULT_SMOOTHPANGLIDE":c="2";break;case "DEFAULT_SMOOTHZOOM":c="1";break;case "DEFAULT_SMOOTHZOOMEASING":c=
"2";break;case "z143":c=null;break;case "z144":c=null;break;case "z145":c=null;break;case "z163":c=null;break;case "z153":c="1";break;case "z83":c="#FBFAFA";break;case "z83NOALPHA":c="#FBFAFA";break;case "z83LIGHT":c="#FEFEFE";break;case "z82":c="0.75";break;case "z82MORE":c="0.9";break;case "DEFAULT_BACKGROUNDSMALLDALPHA":c="0.75";break;case "z87":c="#C0C0C0";break;case "z200":c="skinFiles.xml";break;case "z201":c="Assets/Skins/Default";break;case "z199":c="0";break;case "z171":c="2";break;case "z172":c=
"150";break;case "z167":c="100";break;case "z168":c="-1";break;case "z170":c="-1";break;case "z166":c=null;break;case "z169":c="#0000FF";break;case "DEFAULT_NAVIGATORBORDERCOLOR":c="#FFFFFF";break;case "z223":c="4";break;case "DEFAULT_TOOLBARBACKGROUNDVISIBLE":c="1";break;case "DEFAULT_TOOLBARBACKGROUNDVISIBLEADJUST":c="10";break;case "DEFAULT_TOOLBARHEIGHT":c="30";break;case "z222":c="1";break;case "z224":c="1";break;case "z128":c="1";break;case "z150":c="1";break;case "z149":c=null;break;case "z162":c=
"1";break;case "DEFAULT_SLIDERZOOMVISIBLE":c="1";break;case "z205ZOOM":c="10";break;case "DEFAULT_ZOOMBUTTONSVISIBLE":c="1";break;case "z174":c="1";break;case "DEFAULT_RESETVISIBLE":c="1";break;case "z121":c="1";break;case "z119":c="1";break;case "z120":c="white";break;case "z118":c="0";break;case "z141":c="0";break;case "DEFAULT_BOOKMARKSGET":c="0";break;case "DEFAULT_BOOKMARKSSET":c="0";break;case "DEFAULT_ZOOMRECTANGLE":b=Z.comparison||null!==Z.imagePath&&-1!=Z.imagePath.indexOf("zComparisonPath")||
"undefined"!==typeof Z.parameters&&null!==Z.parameters&&"undefined"!==typeof Z.parameters.zComparisonPath&&("undefined"===typeof Z.parameters.zZoomRectangle||0!=Z.parameters.zZoomRectangle);c=Z.mobileDevice||b||!Z.proParamsEnabled&&!Z.enterpriseParamsEnabled?"0":"1";break;case "z157":c="undefined"===typeof Z.parameters||null===Z.parameters||"undefined"!==typeof Z.parameters.zMeasureVisible&&"0"==Z.parameters.zMeasureVisible||("undefined"===typeof Z.parameters.zMarkupMode||"1"!=Z.parameters.zMarkupMode&&
"2"!=Z.parameters.zMarkupMode)&&("undefined"===typeof Z.parameters.zEditMode||"1"!=Z.parameters.zEditMode&&"2"!=Z.parameters.zEditMode)?"0":"1";break;case "DEFAULT_FULLVIEWEXITEXTERNALBUTTONCOLOR":c="\t#F8F8F8";break;case "DEFAULT_INITIALR":c="0";break;case "z190":c="0";break;case "z184":c="1";break;case "z182":c="500";break;case "z183":c=" ";break;case "z183COLOR":c="#000000";break;case "DEFAULT_MESSAGESVISIBLE":c="1";break;case "z233":c="0";break;case "z103":c="0";break;case "DEFAULT_PRELOADVISIBLE":c=
"0";break;case "DEFAULT_TOOLBARLABELFONTSIZE":c="11";break;case "z159":c="lightgray";break;case "z158":c="white";break;case "DEFAULT_MESSAGEDURATIONLONG":c="5000";break;case "DEFAULT_MESSAGEDURATIONSTANDARD":c="3000";break;case "DEFAULT_MESSAGEDURATIONSHORT":c="1500";break;case "DEFAULT_MESSAGEDURATIONVERYSHORT":c="750";break;case "DEFAULT_TRACEDISPLAYTEXTFONTSIZE":c="11";break;case "DEFAULT_TRACEDISPLAYTEXTPADDINGSMALL":c="2";break;case "z229":c="#D3D3D3";break;case "z228":c="#FFFFFF";break;case "z114":c=
"1";break;case "z188":c="55";break;case "DEFAULT_IMAGESETXMLFILE":c=Z.animation?"animation.xml":Z.overlay?"overlays.xml":"slidestack.xml";break;case "ALERT_VALIDATELOCALZIFVIEWING-TITLE":c="Local Viewing Security";break;case "ALERT_VALIDATELOCALZIFVIEWING-MESSAGE":c="Use button below to verify file to view:\n\n";break;case "z16":c="Viewing Zoomify Images stored in the ZIF format requires a newer browser version. Please consider upgrading to the current release of your browser.";break;case "ALERT_PFFREQUIRESNEWERBROWSER":c=
"Viewing Zoomify Images stored in the PFF format requires a newer browser version. Please consider upgrading to the current release of your browser.";break;case "z8":c="\nClick the '?' button for help.";break;case "ERROR_ERROR":c="error";break;case "z287":c="Parameter unrecognized or deprecated - see the Parameters List documentation: ";break;case "z275":c="Parameter deprecated - please replace: ";break;case "z288":c="Use Firefox for local viewing or see READ ME FIRST\nfile for optional settings for other browsers.";
break;case "z290":c="Browsers allow ZIF file viewing only from a web server.\nPlease use Zoomify Image folders for local viewing.";break;case "z289":c="Browsers allow PFF file viewing only from a web server.\nPlease use Zoomify Image folders for local viewing.";break;case "z249":c="Image failed to load: possible invalid path, missing image, or network error.";break;case "z280":c="Sorry!  Part of this view is not refreshing.  The network may be slow, or the website may be missing a file:  ";break;
case "ERROR_VALIDATEVIEW":c="Sorry!  Part of this view is not refreshing. The network\nmay be slow, or the website may be missing a file.  ";break;case "z280-ZIF":c="Sorry!  Part of this view is not refreshing.  The network may be slow, or the ZIF file may be faulty:  ";break;case "z256-ZIFBYTERANGE":c="Error loading image: ZIF file data request failed. Request content type: ";break;case "z256-ZIFBYTES":c="Error loading image: ZIF file invalid.";break;case "z256-PFFBYTES":c="Error loading image: PFF file invalid.";
break;case "z295":c="Browser does not support XMLHttpRequest.";break;case "z256-IMAGEXML":c="Error loading image: please make sure image path in web page matches image folder location on webserver.";break;case "z256-PFFIMAGEHEADER":c="Error loading image: image header request invalid.";break;case "z256-PFFIMAGEOFFSET":c="Error loading image: image offset request invalid.";break;case "z256-PARAMETERSXML":c="Error loading parameters XML: please make sure the zXMLParametersPath value is correct.";break;
case "z256-TOOLBARSKINSXML":c="Error loading toolbar - skin files not found: please verify that the folders 'Assets/Skins/Default' are in same folder as the web page displaying the Viewer, or add zSkinPath parameter to web page. The zSkinPath parameter may be required if using a content management system such as Drupal, Joomla, or WordPress.";break;case "z256":c="Error making network request:\npossible invalid path or network error.";break;case "z272":c="Error related to network security: ";break;
case "z273":c="Error related to network status: ";break;case "z273RANGEREQUESTSZIF":c="ZIF file not found at the path provided. A MIME type may be needed on the web server. Please see the READ ME FIRST file in the Zoomify product or contact Support. Error: ";break;case "z273RANGEREQUESTSPFF":c="PFF file not found at the path provided. A MIME type may be needed on the web server. Please see the READ ME FIRST file in the Zoomify product or contact Support. Error: ";break;case "z244":c=" converting XML text to XML doc (DOMParser): ";
break;case "z243":c=" converting XML doc to XML text (DOMParser): ";break;case "z294":c="Browser does not support XML DOM.";break;case "z293":c="XML Doc invalid.";break;case "z296":c="XML invalid.";break;case "z255":c="Image XML invalid.";break;case "z252":c="Image properties XML invalid.";break;case "z250":c="Image properties invalid.";break;case "z251":c="Image properties parameter invalid.";break;case "z254":c="Image tile count does not match value in image XML. If the count is invalid display problems can result.";
break;case "z245":c=" while executing callback: ";break;case "z253":c="\nImage tile request not fulfilled within time period expected";break;case "ERROR_UNCONVERTEDIMAGEPATHINVALID":c="Unconverted JPEG or PNG image failed to load: possible invalid path, missing image, or network error.";break;case "ERROR_TRANSLATINGCANVASFORUNCONVERTEDIMAGE":c="\nTranslation of canvas failed";break;case "ERROR_SCALINGCANVASFORUNCONVERTEDIMAGE":c="\nScaling of canvas failed";break;case "ERROR_SETTINGTRANSFORMONCANVASFORUNCONVERTEDIMAGE":c=
"\nTransform on canvas failed";break;case "z271":c="Navigator image failed to load: possible invalid path, missing image, or network error.";break;case "z278":c="Skin XML invalid.";break;case "z279":c="The skin XML file has one or more faulty name lines.";break;case "z283":c="Unknown element style - no known method to identify.";break;case "z284":c="Unknown mouse position - no known method to calculate.";break;case "z285":c="Unknown mouse scroll - no known method to calculate.";break;case "z286":c=
"Unknown window size - no known method to calculate.";break;case "z360ZOOMIFY":c="Open Zoomify Website";break;case "z360GENERIC":c="Launch Website";break;case "z363":b=Z.hotspots?"\nAlt-Click: Toggle Hotspot Visibility":Z.annotations?"\nAlt-Click: Toggle Label Visibility":"";c="Minimize Toolbar"+b;break;case "z341":b=Z.hotspots?"\nAlt-Click: Toggle Hotspot Visibility":Z.annotations?"\nAlt-Click: Toggle Label Visibility":"";c="Expand Toolbar"+b;break;case "z400":c="Zoom Out";break;case "z385ZOOM":c=
"Zoom In And Out";break;case "z399":c="Zoom In";break;case "z370":c="Pan Left";break;case "z372":c="Pan Up";break;case "z369":c="Pan Down";break;case "z371":c="Pan Right";break;case "z378":c="Reset Initial View\nAlt-Click: Prior View";break;case "z391":c="Enter Full View";break;case "z391EXIT":c="Exit Full View";break;case "z391EXITEXTERNAL":c="Exit Full View";break;case "z342":c="Show Help";break;case "z342MARKUP":c="Show Markup Help";break;case "z342ANNOTATION":c="Show Annotation Help";break;case "TIP_IMAGESETPRIOR":c=
Z.animation?"Prior Image":"Prior Slide";break;case "z385IMAGESET":c=Z.animation?"Change Image":"Change Slide";break;case "TIP_IMAGESETNEXT":c=Z.animation?"Next Image":"Next Slide";break;case "TIP_PRELOAD":c=Z.imageSet?Z.animation?"Preload Current View For All Images":"Preload Current View For All Slides":"Preload All Zoom Levels For Current View";break;case "z342OK":c="Close Help Display";break;case "z362":c="Accept And Close Message";break;case "z361":c="Decline And Close Message";break;case "z427ZOOMIFY":c=
"http://www.zoomify.com";break;case "z427":c="http://www.zoomify.com";break;case "z427TARGET":c="_blank";break;case "UI_TOOLBARINTERNALBACKGROUNDALPHA":c="0.75";break;case "UI_TOOLBARINTERNALBACKGROUNDCOLOR":c="lightgray";break;case "UI_TOOLBARINTERNALBUTTONUPCOLOR":c="white";break;case "UI_TOOLBARINTERNALBUTTONOVERCOLOR":c="lightgray";break;case "UI_TOOLBARINTERNALBUTTONDOWNCOLOR":c="darkgray";break;case "UI_TOOLBARINTERNALBUTTONZOOMINTEXT":c="+";break;case "UI_TOOLBARINTERNALBUTTONRESETTEXT":c=
"Z";break;case "UI_TOOLBARINTERNALBUTTONZOOMOUTTEXT":c="-";break;case "z439":c="Navigator Bird's Eye View";break;case "z420":c="X";break;case "z422":c="430";break;case "z421":c="300";break;case "z423":c="OK";break;case "UI_HELPSCREENCOLOR":c="lightgray";break;case "UI_HELPBUTTONCOLOR":c="white";break;case "z437":c="430";break;case "z436":c="90";break;case "z435":c="Cancel";break;case "z438":c="OK";break;case "UI_TRACEDISPLAYTITLE":c="Trace Values\n\n";break;case "z445":c="This panel is enabled using the HTML parameter 'zDebug=1' (basic) or 'zDebug=2' (adds tile tracing). It can be called in JavaScript as follows:\n\n   Z.Utils.trace('value to display');  \n\nThe buttons below display or modify important state values.  Web designers new to JavaScript will also benefit from the console, trace, profiling, and other debugging features of leading browsers.";
break;case "UI_TRACEDISPLAYTILESTATUSTEXT":c="Required Cached Requested Loaded Displayed Waiting";break;case "UI_TRACEDISPLAYELAPSEDTIMETEXT":c="Seconds";break;case "UI_TRACEDISPLAYTILESPERSECONDTEXT":c="Loads / Second";break;case "z446":c="Show Globals";break;case "z449":c="Toggle Display";break;case "z447":c="Toggle Backfill";break;case "z448":c="Toggle Constrain Pan";break;case "z32":c="<p align=%22center%22><font face=%22Arial,Helvetica,sans-serif%22><strong>Viewer Help</strong></font></p><p align=%22justify%22><font face=%22Arial,Helvetica,sans-serif%22>To explore this image, simply <strong>click</strong> the image to zoom in, <strong>double-click</strong> to zoom out, and <strong>click-drag</strong> to pan.<br><br>Shortcuts:<br>&nbsp;&nbsp;&nbsp;<strong>Alt-click-drag</strong> to create a <i>zoom-rectangle</i>.<br>&nbsp;&nbsp;&nbsp;<strong>Alt-click</strong> to zoom fully in.<br>&nbsp;&nbsp;&nbsp;<strong>Alt-double-click</strong> to zoom fully out.<br>&nbsp;&nbsp;&nbsp;<strong>Alt-click-Reset</strong> button to return to the prior view.<br>&nbsp;&nbsp;&nbsp;(Alt is Option on Macintosh).<br><br>The Navigator thumbnail overview can also be clicked or click-dragged to pan.<br><br>Use the Toolbar for exact navigation - if using a mouse, hold it over any button to see a helpful tip.<br><br>Keyboard shortcuts:<br>&nbsp;&nbsp;&nbsp;<strong>A</strong> or <strong>Shift</strong> to zoom in.<br>&nbsp;&nbsp;&nbsp;<strong>Z</strong> or <strong>Ctrl</strong> to zoom out.<br>&nbsp;&nbsp;&nbsp;<strong>Arrows</strong> change image in slideshow/animation.<br>&nbsp;&nbsp;&nbsp;<strong>Space Bar</strong> to toggle fullscreen view.<br>&nbsp;&nbsp;&nbsp;<strong>Escape</strong> to reset initial view or exits fullscreen.<br>&nbsp;&nbsp;&nbsp;<strong>Alt-L</strong> to hide/show hotspots or labels.<br>&nbsp;&nbsp;&nbsp;<strong>Alt-click-Minimize</strong> button - same as Alt-L.<br>&nbsp;&nbsp;&nbsp;<strong>Page Up/Down</strong> change image in a slidestack.<br>&nbsp;&nbsp;&nbsp;<strong>&lt;</strong> or <strong>&gt;</strong> to rotate image if rotation buttons visible.</font></p>";
break;case "z30":c="<p align=%22center%22><font face=%22Arial,Helvetica,sans-serif%22><strong>\\/ \\/ \\/</strong></font></p>";break;case "z29":c="<p align=%22center%22><font face=%22Arial,Helvetica,sans-serif%22><strong>Annotation Help</strong></font></p><p align=%22justify%22><font face=%22Arial,Helvetica,sans-serif%22>The Annotation Panel provides an intuitive display of <i>Points of Interest</i> in a zoomable image, along with associated <i>Labels</i> and <i>Notes</i>, if any.<br><br>A Point Of Interest (POI) is a place in the image that is named and listed so that it can be navigated to easily.<br><br>A Label is a visual element in the image: a freehand drawing, text caption, rectangle or other polygon, or a measurement.<br><br>A Note is text associated with a Point Of Interest. Notes can hold a virtually unlimited number of characters (spaces included). A vertical scrollbar automatically appears when a note requires more lines than fit in the note area.</font></p>";
break;case "CONTENT_RULERUNITSCHOICELISTTITLE":c="Units...";break;case "CONTENT_RULERUNITSCHOICELISTVALUES":c="Pixels,Ym,Zm,Em,Pm,Tm,Gm,Mm,km,hm,dam,m,dm,cm,mm,um,nm,pm,fm,am,zm,ym";break;case "CONTENT_RULERLISTTYPELISTTITLE":c="List Type...";break;case "CONTENT_RULERLISTTYPELISTVALUES":c="None,Magnification,Percentage";break;case "CONTENT_RULERSOURCEMAGNIFICATIONLISTTITLE":c="Source Magnification...";break;case "CONTENT_RULERSOURCEMAGNIFICATIONLISTTEXT":c="1.25x,2.5x,5x,10x,20x,40x,60x,100x";break;
case "CONTENT_RULERSOURCEMAGNIFICATIONLISTVALUES":c="1.25,2.5,5,10,20,40,60,100";break;case "z34":c="New Hotspot ";break;case "z33":c="Caption for hotspot ";break;case "z37":c="New Label ";break;case "z35":c="Caption for label ";break;case "CONTENT_LABELCOMMENT":c="Comment for label ";break;case "z45":c="Polygon ";break;case "z38":c="Tooltip for label ";break;case "z36":c="";break;case "z25":c=Z.captionTextColor?Z.captionTextColor:"#FFFFFF";break;case "z22":c=Z.captionBackColor?Z.captionBackColor:
"#000000";break;case "CONTENT_LABELLINECOLOR":c=Z.labelLineColor?Z.labelLineColor:"#FFFFFF";break;case "CONTENT_LABELFILLCOLOR":c=Z.labelFillColor?Z.labelFillColor:"#FFFFFF";break;case "z26":c=Z.captionTextVisible?"1":"0";break;case "z23":c=Z.captionBackVisible?"1":"0";break;case "CONTENT_LABELLINEVISIBLE":c=Z.labelLineVisible?"1":"0";break;case "CONTENT_LABELFILLVISIBLE":c=Z.labelFillVisible?"1":"0";break;case "z24":c=Z.captionPosition?Z.captionPosition:"8";break;case "CONTENT_EDITABLE":c="1";break;
case "CONTENT_LINESTYLE":c="solid";break;default:c="Unexpected resource request"}return c},clearDisplay:function(b,c){if(b){if("undefined"===typeof c||null===c)c=Z.Viewer;if(Z.useCanvas&&"CANVAS"==b.tagName)Z.Utils.clearCanvas(b,c);else for(;b.hasChildNodes();)b.removeChild(b.lastChild)}},clearCanvas:function(b,c){if("undefined"===typeof c||null===c)c=Z.Viewer;var d=b.getContext("2d");d.save();try{d.setTransform(1,0,0,1,0,0)}catch(e){c.showMessage(Z.Utils.getResource("ERROR_SETTINGTRANSFORMONCANVASFORUNCONVERTEDIMAGE")),
console.log("In function clearCanvas setting transform on canvas:  "+e)}d.clearRect(0,0,d.canvas.width,d.canvas.height);d.restore()},colorCanvas:function(b,c){var d=b.getContext("2d");d.save();d.setTransform(1,0,0,1,0,0);d.fillStyle=c;d.fillRect(0,0,d.canvas.width,d.canvas.height);d.restore()},deleteDiv:function(b,c){var d=Z.Utils.getElementOfViewerById(b,c);if(d){for(;d.hasChildNodes();)d.removeChild(d.lastChild);d.parentNode.removeChild(d)}},createCallback:function(b,c){for(var d=[],e=2,f=arguments.length;e<
f;e++)d[d.length]=arguments[e];return function(){for(var e=d.concat([]),f=0,y=arguments.length;f<y;f++)e[e.length]=arguments[f];return c.apply(b,e)}},getContainerSize:function(b,c){var d=Z.Utils.getElementStyle(b),e=parseFloat(d.width),f=parseFloat(d.height);Z.Utils.stringValidate(d.width)&&-1!=d.width.indexOf("%")&&(e=parseFloat(Z.Utils.getElementStyleProperty(b,"width")));Z.Utils.stringValidate(d.height)&&-1!=d.height.indexOf("%")&&(f=parseFloat(Z.Utils.getElementStyleProperty(b,"height")));isNaN(e)&&
(e=c.clientWidth);isNaN(f)&&(f=c.clientHeight);if(0==e||0==f)winDimensions=Z.Utils.getWindowSize(),0==e&&(b.parentNode.style.width=winDimensions.x+"px",e=b.clientWidth),0==f&&(b.parentNode.style.height=winDimensions.y+"px",f=b.clientHeight);if(isNaN(e)||0==e)e=800;if(isNaN(f)||0==f)f=400;return new Z.Utils.Point(e,f)},createContainerElement:function(b,c,d,e,f,h,k,y,u,K,T,D,O,P,qa,fa,Q,xa,da){var n=document.createElement(c);this.stringValidate(d)&&(n.id=d+b);b=n.style;b.display=this.stringValidate(e)?
e:"inline-block";b.position=this.stringValidate(f)?f:"static";b.overflow=this.stringValidate(h)?h:"hidden";"canvas"==c?(this.stringValidate(k)&&n.setAttribute("width",k),this.stringValidate(y)&&n.setAttribute("height",y)):(this.stringValidate(k)&&(b.width=k),this.stringValidate(y)&&(b.height=y));this.stringValidate(u)&&(b.left=u);this.stringValidate(K)&&(b.top=K);b.borderStyle=this.stringValidate(T)?T:"none";b.borderWidth=this.stringValidate(D)?D:"0px";b.borderColor=this.stringValidate(da)?da:"#696969";
b.background=this.stringValidate(O)?O:"transparent none";b.margin=this.stringValidate(P)?P:"0px";b.padding=this.stringValidate(qa)?qa:"0px";b.whiteSpace=this.stringValidate(fa)?fa:"normal";this.stringValidate(Q)&&(b.cursor=Q);"undefined"!==xa&&xa&&(Z.Utils.addEventListener(n,"touchstart",Z.Utils.preventDefault),Z.Utils.addEventListener(n,"mousedown",Z.Utils.preventDefault),Z.Utils.addEventListener(n,"contextmenu",Z.Utils.preventDefault));return n},createCenteredElement:function(b,c,d){b=this.createContainerElement(b,
"div");var e=[];e[e.length]='<div style="#position:relative; display:table; height:100%; width:100%; border:none; margin:0px; padding:0px; overflow:hidden; text-align:left;">';e[e.length]='<div style="#position:absolute; display:table-cell; #top:50%; width:100%; border:none; margin:0px; padding:0px; vertical-align:middle;">';e[e.length]='<div id="'+d+'"; style="#position:relative; width:100%; #top:-50%; border:none; margin:0px; padding:0px; text-align:center;"></div></div></div>';b.innerHTML=e.join("");
d=b=b.firstChild;for(e=b.getElementsByTagName("div");0<e.length;)d=e[0],e=d.getElementsByTagName("div");d.appendChild(c);return b},createTextElement:function(b,c,d,e,f,h,k,y,u,K,T,D,O,P,qa,fa,Q,xa,da){e=Z.Utils.createContainerElement(b,"div","textBoxFor-"+c,"inline-block","absolute","hidden",e,f,h,k,u,K,"white","0px",y,"normal");f=document.createElement("textarea");e.appendChild(f);h=f.style;f.id=c+b;f.value=d;f.readOnly=T;h.width="100%";h.height="100%";h.margin="0";h.border="0";this.stringValidate(D)&&
(h.fontFamily=D);this.stringValidate(O)&&(h.fontSize=O);this.stringValidate(P)&&(h.resize=P);this.stringValidate(qa)&&(f.columns=qa);this.stringValidate(fa)&&(f.rows=fa);this.stringValidate(Q)&&(h.overflowX=Q);this.stringValidate(xa)&&(h.overflowY=xa);this.stringValidate(da)&&(f.wrap=da,"off"==da&&(h.whiteSpace="nowrap"));return e},createSelectElement:function(b,c,d,e,f,h,k,y,u,K,T){var D=document.createElement("select");D.id=c+b;Z.Utils.stringValidate(d)&&"none"!=d&&(D.options[0]=new Option(d,null));
b=0;for(c=e.length;b<c;b++)D.options[D.options.length]=new Option(e[b].text,e[b].value);Z.Utils.addEventListener(D,"undefined"!==typeof T&&null!==T?T:"change",K);e=D.style;e.width=f+"px";e.position="absolute";e.left=h+"px";e.top=k+"px";e.fontSize=null==y?"11px":y+"px";e.fontFamily="verdana";e.visibility=u;return D},updateSelectElement:function(b,c,d){if(b){var e=-1!=b.selectedIndex?b.selectedIndex:0;b.innerHTML="";for(var f=0,h=c.length;f<h;f++)b.options[b.options.length]=new Option(c[f].text,c[f].value.toString());
"undefined"!==typeof d&&null!==d&&(c=parseInt(Z.Utils.arrayIndexOfObjectValue(c,"value",d),10),-1!=c&&(e=c));c=b.options.length-1;b.selectedIndex=e<=c?e:c}},getChildElementByID:function(b,c){for(var d=null,e=0,f=b.childNodes.length;e<f&&(d=b.childNodes[e],d.id!=c)&&(d=Z.Utils.getChildElementByID(d,c),null===d);e++);return d},getElementOfViewerById:function(b,c){return document.getElementById(c+b)},getElementPosition:function(b){for(var c=0,d=0,e="fixed"==this.getElementStyle(b).position,f=this.getOffsetParent(b,
e);f;)c+=b.offsetLeft,d+=b.offsetTop,e&&(b=this.getPageScroll(),c+=b.x,d+=b.y),b=f,e="fixed"==this.getElementStyle(b).position,f=this.getOffsetParent(b,e);return new this.Point(c,d)},getOffsetParent:function(b,c){return c&&b!=document.body?document.body:b.offsetParent},getElementSize:function(b){return new this.Point(b.clientWidth,b.clientHeight)},getElementStyle:function(b){if(b.currentStyle)return b.currentStyle;if(window.getComputedStyle)return window.getComputedStyle(b,"");alert(this.getResource("z283"))},
getElementStyleProperty:function(b,c){if(window.getComputedStyle)return window.getComputedStyle(b,null).getPropertyValue(c);if(b.currentStyle)return b.currentStyle[c];alert(this.getResource("z283"))},getElementStylePropertyZIndex:function(b){var c=0;window.document.defaultView.getComputedStyle?c=window.document.defaultView.getComputedStyle(b,null).getPropertyValue("z-index"):b.currentStyle?c=b.currentStyle["z-index"]:alert(this.getResource("z283"));return c},isElementFluid:function(b){var c=null,
d=b.cloneNode(!1),e=!1,f=!1,h=null,k=null,y=0,u=0,K=Z.Utils.getElementStyle(b);K&&(y=K.width,u=K.height,c=-1!=y.indexOf("px")&&-1!=u.indexOf("px"));if(Z.browser!=Z.browsers.IE||9<=Z.browserVersion&&!c)window.getComputedStyle?value=window.getComputedStyle(d,null).width:d.currentStyle&&(value=d.currentStyle.width),"undefined"!==typeof value&&null!==value&&""!==value&&(e=-1!=value.toString().indexOf("%")||"auto"==value),e||(window.getComputedStyle?value=window.getComputedStyle(d,null).height:d.currentStyle&&
(value=d.currentStyle.height),"undefined"!==typeof value&&null!==value&&""!=value&&(f=-1!=value.toString().indexOf("%")||"auto"==value)),e||f||(h=Z.Utils.isElementFluidNew(b)),e||f||(k=0!=parseFloat(y)%1||0!=parseFloat(u)%1);return e||f||h||k},isElementFluidNew:function(b){var c=b.cloneNode(!1),d,e,f,h,k;f=e=!1;c.style.margin="0";c.style.padding="0";c.style.maxWidth="none";c.style.minWidth="none";d=document.createElement("testContainer");d.style.display="block";d.style.width="800px";d.style.padding=
"0";d.style.margin="0";d.appendChild(c);b.parentNode.insertBefore(d,b);e=c.offsetWidth;d.style.width="900px";c.offsetWidth==e?(b.parentNode.removeChild(d),e=!1):(h=Math.floor(.125*e),k=Math.floor(100/900*c.offsetWidth),b.parentNode.removeChild(d),e=h==k?!0:!1);e||(c.style.margin="0",c.style.padding="0",c.style.maxHeight="none",c.style.minHeight="none",d=document.createElement("testContainer"),d.style.display="block",d.style.height="800px",d.style.padding="0",d.style.margin="0",d.appendChild(c),b.parentNode.insertBefore(d,
b),f=c.offsetHeight,d.style.height="900px",c.offsetHeight==f?(b.parentNode.removeChild(d),f=!1):(h=Math.floor(.125*f),k=Math.floor(100/900*c.offsetHeight),b.parentNode.removeChild(d),f=h==k?!0:!1));return e||f},getEventTargetCoords:function(b){return getElementPosition(Z.Utils.target(b))},getFirstTouch:function(b){var c=null,d=b.touches;b=b.changedTouches;"undefined"!==typeof d?c=d[0]:"undefined"!==typeof b&&(c=b[0]);return c},getSecondTouch:function(b){var c=null,d=b.touches;b=b.changedTouches;"undefined"!==
typeof d?c=d[1]:"undefined"!==typeof b&&(c=b[1]);return c},getMousePosition:function(b){var c=0,d=0;"DOMMouseScroll"==b.type&&Z.browser==Z.browsers.FIREFOX&&3>Z.browserVersion?(c=b.screenX,d=b.screenY):"number"===typeof b.pageX?(c=b.pageX,d=b.pageY):"number"===typeof b.clientX?(c=b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,d=b.clientY+document.body.scrollTop+document.documentElement.scrollTop):console.log(this.getResource("z284"));return new this.Point(c,d)},getMouseScroll:function(b){var c=
0;"number"===typeof b.wheelDelta?c=b.wheelDelta:"number"===typeof b.detail?c=-1*b.detail:alert(this.getResource("z285"));return c?c/Math.abs(c):0},getPageScroll:function(){var b=0,c=0,d=document.documentElement||{},e=document.body||{};if("number"===typeof window.pageXOffset)b=window.pageXOffset,c=window.pageYOffset;else if(e.scrollLeft||e.scrollTop)b=e.scrollLeft,c=e.scrollTop;else if(d.scrollLeft||d.scrollTop)b=d.scrollLeft,c=d.scrollTop;return new this.Point(b,c)},getScreenSize:function(){return new this.Point(screen.width,
screen.height)},getWindowSize:function(){var b=0,c=0,d=document.documentElement||{},e=document.body||{};"number"===typeof window.innerWidth?(b=window.innerWidth,c=window.innerHeight):d.clientWidth||d.clientHeight?(b=d.clientWidth,c=d.clientHeight):e.clientWidth||e.clientHeight?(b=e.clientWidth,c=e.clientHeight):alert(this.getResource("z286"));return new this.Point(b,c)},Button:function(b,c,d,e,f,h,k,y,u,K,T,D,O,P,qa,fa,Q,xa,da,n,C,E){if("undefined"==typeof E||null==E)E="0"!=Z.Utils.getResource("z224");
c=Z.Utils.createContainerElement(b,"span",c,"inline-block","absolute","hidden",y,u,K,T,qa,fa,Q,xa,da,n,C);if(Z.Utils.stringValidate(d)){var I=document.createTextNode(d);c.appendChild(Z.Utils.createCenteredElement(b,I));Z.Utils.setTextNodeStyle(I,"black","verdana","13px","none","normal","normal","normal","normal","1em","center","none")}else{e=Z.Utils.stringRemoveTrailingSlashCharacters(e);var ua=Z.Utils.createGraphicElement(b,e+"/"+f),$a=Z.Utils.createGraphicElement(b,e+"/"+h),Za=Z.Utils.createGraphicElement(b,
e+"/"+k);ua.style.width=$a.style.width=Za.style.width=y;ua.style.height=$a.style.height=Za.style.height=u;ua.style.position=$a.style.position=Za.style.position="absolute";Z.browser==Z.browsers.FIREFOX&&3>Z.browserVersion&&(ua.style.top=$a.style.top=Za.style.top="");$a.style.visibility=Za.style.visibility="hidden";ua.alt=$a.alt=Za.alt="";"undefined"!==typeof P&&Z.Utils.stringValidate(P)&&(ua.alt=Z.Utils.getResource(P));c.appendChild(ua);c.appendChild($a);c.appendChild(Za)}Z.Utils.addEventListener(c,
"mousedown",Z.Utils.preventDefault);Z.Utils.addEventListener(c,"mouseover",Z.Utils.stopPropagation);Z.Utils.addEventListener(c,"mousedown",Z.Utils.stopPropagation);Z.Utils.addEventListener(c,"mouseup",Z.Utils.stopPropagation);Z.Utils.addEventListener(c,"mouseout",Z.Utils.stopPropagation);"undefined"!==typeof imageUp&&(Z.Utils.addEventListener(ua,"contextmenu",Z.Utils.preventDefault),Z.Utils.addEventListener($a,"contextmenu",Z.Utils.preventDefault),Z.Utils.addEventListener(Za,"contextmenu",Z.Utils.preventDefault));
Z.Utils.addEventListener(c,"touchstart",Z.Utils.preventDefault);Z.Utils.addEventListener(c,"touchend",Z.Utils.preventDefault);Z.Utils.addEventListener(c,"touchcancel",Z.Utils.preventDefault);Z.Utils.stringValidate(d)||(Z.Utils.disableTextInteraction(I),Z.Utils.addEventListener(c,"contextmenu",Z.Utils.preventDefault));E&&Z.Utils.stringValidate(P)&&(c.title=Z.Utils.getResource(P));Z.Utils.setButtonHandler(c,D,O);this.elmt=c},buttonSize:function(b,c,d){var e=b.style;e.width=c+"px";e.height=d+"px";d=
b.firstChild;e=b.childNodes[1];b=b.childNodes[2];d&&e&&b&&(d.style.width=e.style.width=b.style.width=c+"px",d.style.height=e.style.height=b.style.height=c+"px")},setButtonDefaults:function(b,c){if("undefined"===typeof c||null===c)c=Z.Toolbar;c&&(Z.Utils.clearButtonSettings(b),Z.Utils.setButtonState(b,"up"),Z.Utils.setButtonHandler(b,"mouseover",c.z457))},clearButtonSettings:function(b,c){if("undefined"===typeof c||null===c)c=Z.Toolbar;if(c){var d=b.firstChild,e=b.childNodes[1],f=b.childNodes[2];d&&
e&&f&&(d.style.visibility=e.style.visibility=f.style.visibility="hidden",Z.Utils.removeEventListener(d,"mouseover",c.z457),Z.Utils.removeEventListener(e,"mousedown",c.z457),Z.Utils.removeEventListener(e,"mouseout",c.z457),Z.Utils.removeEventListener(f,"mouseup",c.z457),Z.Utils.removeEventListener(b,"touchstart",c.z457),Z.Utils.removeEventListener(b,"touchend",c.z457),Z.Utils.removeEventListener(b,"touchcancel",c.z457));Z.Utils.removeEventListener(b,"mouseover",c.z457);Z.Utils.removeEventListener(b,
"mousedown",c.z457);Z.Utils.removeEventListener(b,"mouseout",c.z457);Z.Utils.removeEventListener(b,"mouseup",c.z457)}},setButtonState:function(b,c){var d="up"==c?b.firstChild:"down"==c?b.childNodes[1]:b.childNodes[2];d&&(d.style.visibility="visible")},setButtonHandler:function(b,c,d){var e="undefined"!==c?c:"mouseover";if("mouseover"==c&&"undefined"!==typeof b.firstChild)b=b.firstChild;else if("mousedown"!=c||"undefined"===typeof b.childNodes[1])"mouseup"==c&&"undefined"!==typeof b.childNodes[2]?
b=b.childNodes[2]:"mouseout"==c&&"undefined"!==typeof b.childNodes[1]&&(b=b.childNodes[1]);var f=Z.Toolbar;if(d="undefined"!==d?d:f?f.z457:null)Z.Utils.addEventListener(b,"mousedown"==c?"touchstart":"touchend",d),Z.Utils.addEventListener(b,e,d)},Checkbox:function(b,c,d,e,f,h,k,y,u,K,T){var D=Z.Utils.createContainerElement(b,"div","containerFor-"+c,"inline-block","absolute","hidden",e,f,h,k,"none","0px","transparent none","0px","0px","normal"),O=document.createElement("input");D.appendChild(O);O.type=
"checkbox";O.id=c+b;O.value=d;O.width=e;O.height=f;b=D.style;b.width=e+"px";b.height=f+"px";b.left=h+"px";b.top=k+"px";Z.Utils.addEventListener(O,y,u);Z.Utils.addEventListener(O,"touchstart",u);T&&Z.Utils.stringValidate(K)&&(O.title=Z.Utils.getResource(K));return D},Graphic:function(b,c,d,e,f,h,k,y,u,K){d=Z.Utils.stringRemoveTrailingSlashCharacters(d);d=Z.Utils.createGraphicElement(b,e?d+"/"+e:d);e=d.style;e.width=f;e.height=h;"undefined"!==typeof u&&Z.Utils.stringValidate(u)?d.alt=Z.Utils.getResource(u):
d.alt="";e=Z.Utils.createContainerElement(b,"span",c,"inline-block","absolute","hidden",f,h,k,y,"none","0px","transparent none","0px","0px","normal");e.appendChild(d);this.elmt=e;Z.Utils.addEventListener(d,"mousedown",Z.Utils.preventDefault);Z.Utils.addEventListener(d,"touchstart",Z.Utils.preventDefault);Z.Utils.addEventListener(d,"contextmenu",Z.Utils.preventDefault);K&&Z.Utils.stringValidate(u)&&(e.title=Z.Utils.getResource(u))},createGraphicElement:function(b,c){var d=this.createContainerElement(b,
"img"),e=null;Z.browser==Z.browsers.IE&&7>Z.browserVersion?(e=this.createContainerElement(b,"span",null,"inline-block"),d.onload=function(){e.style.width=e.style.width||d.width+"px";e.style.height=e.style.height||d.height+"px";d=d.onload=null},e.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+c+'", sizingMethod="scale")'):(e=d,e.src=c);return e},graphicSize:function(b,c,d){var e=b.style;e.width=c+"px";e.height=d+"px";b=b.firstChild.style;b.width=c+"px";b.height=d+"px"},Slider:function(b,
c,d,e,f,h,k,y,u,K){var T=Z.Utils.stringUpperCaseFirstLetter(c),D=c.toUpperCase();u&&(D=labelTxt.substring(0,D.indexOf("RANGE")));u=Z.Utils.createContainerElement(b,"div","label"+T+"TextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);var O=document.createTextNode(Z.Utils.getResource("UI_IMAGEFILTERPANELLABEL"+D));u.appendChild(O);d.appendChild(u);u=new Z.Utils.Graphic(b,"trackSliderFilter"+T,e,f[15],"1px","1px","0px","0px",
"z385"+D,K);d.appendChild(u.elmt);Z.Utils.addEventListener(u.elmt,"mousedown",h);Z.Utils.addEventListener(u.elmt,"touchstart",h);Z.Utils.addEventListener(u.elmt,"mouseover",h);u=new Z.Utils.Button(b,"buttonSliderFilter"+T,null,e,f[17],f[18],f[19],"1px","1px","1px","1px","mouseover",h,"z385"+D,null,null,null,null,null,null,null,K);d.appendChild(u.elmt);y&&(u=new Z.Utils.Button(b,"buttonSliderFilter"+T+"2",null,e,f[17],f[18],f[19],"1px","1px","1px","1px","mouseover",h,"z385"+D+"2",null,null,null,null,
null,null,null,K),d.appendChild(u.elmt));e=Z.Utils.createTextElement(b,c+"TextElement","0","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.Utils.addEventListener(e.firstChild,"focus",k);Z.Utils.addEventListener(e.firstChild,"input",k);Z.Utils.addEventListener(e.firstChild,"change",k);Z.Utils.addEventListener(e.firstChild,"blur",k);d.appendChild(e);y&&(e=Z.Utils.createTextElement(b,c+"TextElement2","0","1px","1px","1px","1px","0px","solid","1px",
!1,"verdana","1px","none",null,1,"hidden","hidden","off"),Z.Utils.addEventListener(e.firstChild,"focus",k),Z.Utils.addEventListener(e.firstChild,"input",k),Z.Utils.addEventListener(e.firstChild,"change",k),Z.Utils.addEventListener(e.firstChild,"blur",k),d.appendChild(e))},Point:function(b,c){this.x="number"===typeof b?b:0;this.y="number"===typeof c?c:0},Point3D:function(b,c,d){this.x="number"===typeof b?b:0;this.y="number"===typeof c?c:0;this.z="number"===typeof d?d:0},preventSelection:function(b){b=
b.style;b["-webkit-touch-callout"]="none";b["-moz-user-select"]="none";b["-khtml-user-select"]="none";b["-webkit-user-select"]="none";b["-ms-user-select"]="none";b["-o-user-select"]="none";b["user-select"]="none"},Coordinates:function(b,c,d,e){this.x="number"===typeof b?b:0;this.y="number"===typeof c?c:0;this.z="number"===typeof d?d:0;this.r="number"===typeof e?e:0},CoordinatesDisplayStyle:function(b,c,d,e,f,h,k,y,u,K,T){this.cLeft=b;this.cTop=c;this.vWidth=d;this.vHeight=e;this.vLeft=f;this.vTop=
h;this.bWidth=k;this.bHeight=y;this.bLeft=u;this.bTop=K;this.cRotation=T},Pair:function(b,c){this.a=b;this.b=c},Trio:function(b,c,d){this.a=b;this.b=c;this.c=d},Range:function(b,c){this.start="number"===typeof b?b:0;this.end="number"===typeof c?c:0},RangeScale:function(b,c){this.min="number"===typeof b?b:0;this.max="number"===typeof c?c:0},swapZIndices:function(b,c,d){var e=Z.Utils.getElementStylePropertyZIndex(c),f=Z.Utils.getElementStylePropertyZIndex(d);if("auto"==e||"auto"==f)e=(b-101).toString(),
f=(b-100).toString();c.style.zIndex=f;d.style.zIndex=e},stringValidate:function(b){return"undefined"!==typeof b&&null!==b&&""!==b&&"null"!==b},stringReadable:function(b){return b.replace(RegExp("%20","g")," ")},stringGetInitials:function(b){var c="";b&&(c=b.replace(/[^a-zA-Z- ]/g,"").match(/\b\w/g).join("").toUpperCase());return c},stringLowerCaseFirstLetter:function(b){return b.charAt(0).toLowerCase()+b.slice(1)},stringUpperCaseFirstLetter:function(b){return b.charAt(0).toUpperCase()+b.slice(1)},
stringSubtract:function(b,c){if("undefined"!==typeof b){var d=b.lastIndexOf(c);-1!=d&&(b=b.substring(0,d))}return b},stringMultiply:function(b,c){var d=Math.ceil(Math.log(c)/Math.LN2),e=b;do e+=e;while(0<--d);return e.slice(0,b.length*c)},stringPadFront:function(b,c,d){return b=Z.Utils.stringMultiply(d,c-b.length)+b},stringRemoveLeadingZeros:function(b){var c="";"undefined"!==typeof b&&null!==b&&(c=1<b.length&&"0"==b.slice(0,1)&&"."!=b.slice(1,2)?b.slice(1,b.length):b);return c},stringRemoveDuplicateDots:function(b){var c=
"";if("undefined"!==typeof b&&null!==b){var d=b.indexOf("."),c=b.replace(/\./g,"");-1!=d&&(c=c.slice(0,d)+"."+c.slice(d))}return c},stringRemoveTrailingSlashCharacters:function(b){return"undefined"===typeof b||null===b?"":"/"==b.slice(-1,b.length)?b.slice(0,b.length-1):b},stringRemoveFileExtension:function(b){var c=b.length;"."==b.slice(c-4,c-3)&&(b=b.slice(0,c-4));return b},stringRemoveTabAndLineWrapCharacters:function(b){b=b.replace(/\n/g,"");b=b.replace(/\r/g,"");return b=b.replace(/\t/g,"")},
stringUnescapeAmpersandCharacters:function(b){b=b.replace(/\n/g,"");b=b.replace(/&#38;/g,"&");b=b.replace(/&#038;/g,"&");return b=b.replace(/&amp;/g,"&")},setHTMLTextDefaultCaptionStyle:function(b,c,d,e,f,h,k,y,u,K,T,D,O){b=b.style;-1==c.indexOf("color=")&&(b.color=d);-1==c.indexOf("font-family=")&&(b.fontFamily=e);-1==c.indexOf("font-size=")&&(b.fontSize=f);-1==c.indexOf("font-size-adjust=")&&(b.fontSizeAdjust=h);-1==c.indexOf("font-style=")&&(b.fontStyle=k);-1==c.indexOf("font-stretch=")&&(b.fontStretch=
y);-1==c.indexOf("font-variant=")&&(b.fontVariant=u);-1==c.indexOf("font-weight=")&&(b.fontWeight=K);-1==c.indexOf("line-height=")&&(b.lineHeight=T);-1==c.indexOf("text-align=")&&(b.textAlign=D);-1==c.indexOf("text-decoration=")&&(b.textDecoration=O)},setHTMLTextStyle:function(b,c,d,e,f,h,k,y,u,K,T,D){b=b.style;b.color=c;b.fontFamily=d;b.fontSize=e;b.fontSizeAdjust=f;b.fontStyle=h;b.fontStretch=k;b.fontVariant=y;b.fontWeight=u;b.lineHeight=K;b.textAlign=T;b.textDecoration=D},setTextAreaStyle:function(b,
c,d,e,f,h,k,y,u,K,T,D,O){b=b.firstChild.style;b.color=c;b.fontFamily=d;b.fontSize=e;b.fontSizeAdjust=f;b.fontStyle=h;b.fontStretch=k;b.fontVariant=y;b.fontWeight=u;b.lineHeight=K;b.textAlign=T;b.textDecoration=D;b.padding=O},setTextNodeStyle:function(b,c,d,e,f,h,k,y,u,K,T,D){b=b.parentNode.style;b.color=c;b.fontFamily=d;b.fontSize=e;b.fontSizeAdjust=f;b.fontStyle=h;b.fontStretch=k;b.fontVariant=y;b.fontWeight=u;b.lineHeight=K;b.textAlign=T;b.textDecoration=D},stringValidateNumberValue:function(b){var c=
"";"undefined"!==typeof b&&Z.Utils.stringValidate(b)&&(c=b.replace(/(?!^-)[^0-9.]/g,""),c=Z.Utils.stringRemoveLeadingZeros(c),c=Z.Utils.stringRemoveDuplicateDots(c));return c},stringValidateColorValue:function(b){Z.Utils.stringValidate(b)||(b="#000000");0!=b.indexOf("#")&&(b="#"+b);return b},hexToRGB:function(b){b=b.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(b,d,e,f){return d+d+e+e+f+f});return(b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(b))?{r:parseInt(b[1],16),g:parseInt(b[2],16),
b:parseInt(b[3],16)}:null},xmlConvertTextToDoc:function(b){var c=null;if(window.ActiveXObject)try{c=new ActiveXObject("Microsoft.XMLDOM"),c.async=!1,c.loadXML(b)}catch(d){alert(d.name+this.getResource("z244")+d.message)}else if(window.DOMParser)try{c=(new DOMParser).parseFromString(b,"text/xml")}catch(d){alert(d.name+this.getResource("z244")+d.message)}else alert(this.getResource("z294"));return c},xmlConvertDocToText:function(b){var c=null;if(window.ActiveXObject)try{c=b.xml}catch(d){alert(d.name+
this.getResource("z243")+d.message)}else if(window.DOMParser)try{c=(new XMLSerializer).serializeToString(b)}catch(d){alert(d.name+this.getResource("z243")+d.message)}else alert(this.getResource("z294"));return c},xmlEscapeMinimal:function(b){var c=null;"undefined"!==typeof b&&null!==b&&(c=b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/\r?\n/g,"%0A"));return c},xmlUnescapeMinimal:function(b){var c=null;"undefined"!==typeof b&&
null!==b&&(c=b.replace(/%0A/g,"\n").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&"));return c},xmlEscapingConvertURIToHTML:function(b){var c=null;"undefined"!==typeof b&&null!==b&&(c=b.replace(/%0A/g,"\n").replace(/%40/g,"&#64;").replace(/%23/g,"&#35;").replace(/%24/g,"&#36;").replace(/%25/g,"&#37;").replace(/%5E/g,"&#94;").replace(/%26/g,"&#38;").replace(/%3D/g,"&#61;").replace(/%2B/g,"&#43;").replace(/%3A/g,"&#58;").replace(/%3B/g,"&#59;").replace(/%22/g,
"&#34;").replace(/%5C/g,"&#92;").replace(/%2F/g,"&#47;").replace(/%3F/g,"&#63;").replace(/%3C/g,"&#60;").replace(/%3E/g,"&#62;").replace(/%5B/g,"&#91;").replace(/%5D/g,"&#93;").replace(/%7B/g,"&#123;").replace(/%7D/g,"&#125;").replace(/%60/g,"&#96;").replace(/%27/g,"&#39;"));return c},xmlEscapingConvertHTMLToURI:function(b){var c=null;"undefined"!==typeof b&&null!==b&&(c=b.replace(/\n/g,"%0A").replace(/&apos;/g,"%27").replace(/&quot;/g,"%22").replace(/&gt;/g,"%3E").replace(/&lt;/g,"%3C").replace(/&amp;/g,
"%26").replace(/&#64;/g,"%40").replace(/&#35;/g,"%23").replace(/&#36;/g,"%24").replace(/&#37;/g,"%25").replace(/&#94;/g,"%5E").replace(/&#38;/g,"%26").replace(/&#61;/g,"%3D").replace(/&#43;/g,"%2B").replace(/&#58;/g,"%3A").replace(/&#59;/g,"%3B").replace(/&#34;/g,"%22").replace(/&#92;/g,"%5C").replace(/&#47;/g,"%2F").replace(/&#63;/g,"%3F").replace(/&#60;/g,"%3C").replace(/&#62;/g,"%3E").replace(/&#91;/g,"%5B").replace(/&#93;/g,"%5D").replace(/&#123;/g,"%7B").replace(/&#125;/g,"%7D").replace(/&#96;/g,
"%60").replace(/&#39;/g,"%27"));return c},jsonConvertObjectToXMLText:function(b){var c=function(b,d){var e="";if(b instanceof Array)for(var y=0,u=b.length;y<u;y++)e+=c(b[y],d)+"\n";else if("object"===typeof b){y=!1;e+="<"+d;for(u in b)"object"!==typeof b[u]?e+=" "+u+'="'+b[u].toString()+'"':y=!0;e+=">";if(y)for(u in b)"#text"==u?e+=b[u]:"object"===typeof b[u]&&(e+=c(b[u],u));e+="</"+d+">"}else e+="<"+d+">"+b.toString()+"</"+d+">";return e},d="",e;for(e in b)d+=c(b[e],e);return d.replace(/&/g,"&amp;").replace(/\t|\n/g,
"")},jsonConvertXMLTextToJSONText:function(b){var c={convertToObject:function(b){var e={};if(1==b.nodeType){if(b.attributes.length)for(var f=0,h=b.attributes.length;f<h;f++)e[b.attributes[f].nodeName]=(b.attributes[f].nodeValue||"").toString();if(b.firstChild){for(var f=0,h=!1,k=b.firstChild;k;k=k.nextSibling)1==k.nodeType?h=!0:3==k.nodeType&&k.nodeValue.match(/[^ \f\n\r\t\v]/)&&f++;if(h)if(2>f)for(c.reduceWhitespace(b),k=b.firstChild;k;k=k.nextSibling)3==k.nodeType?e["#text"]=c.escapeMinimal(k.nodeValue):
e[k.nodeName]?e[k.nodeName]instanceof Array?e[k.nodeName][e[k.nodeName].length]=c.convertToObject(k):e[k.nodeName]=[e[k.nodeName],c.convertToObject(k)]:e[k.nodeName]=c.convertToObject(k);else b.attributes.length?e["#text"]=c.escapeMinimal(c.innerXML(b)):e=c.escapeMinimal(c.innerXML(b));else f&&(b.attributes.length?e["#text"]=c.escapeMinimal(c.innerXML(b)):e=c.escapeMinimal(c.innerXML(b)))}b.attributes.length||b.firstChild||(e=null)}else 9==b.nodeType?e=c.convertToObject(b.documentElement):alert("This node type not supported : "+
b.nodeType);return e},convertToJSONText:function(b,e){var f=e?'"'+e+'"':"";if(b instanceof Array){for(var h=0,k=b.length;h<k;h++)b[h]=c.convertToJSONText(b[h],"","\t");f+=(e?":[":"[")+(1<b.length?"\n\t"+b.join(",\n\t")+"\n":b.join(""))+"]"}else if(null==b)f+=(e&&":")+"null";else if("object"===typeof b){h=[];for(k in b)h[h.length]=c.convertToJSONText(b[k],k,"\t");f+=(e?":{":"{")+(1<h.length?"\n\t"+h.join(",\n\t")+"\n":h.join(""))+"}"}else f="string"==typeof b?f+((e&&":")+'"'+b.toString()+'"'):f+((e&&
":")+b.toString());return f},reduceWhitespace:function(b){b.normalize();for(var e=b.firstChild;e;)if(3==e.nodeType)if(e.nodeValue.match(/[^ \f\n\r\t\v]/))e=e.nextSibling;else{var f=e.nextSibling;b.removeChild(e);e=f}else 1==e.nodeType&&c.reduceWhitespace(e),e=e.nextSibling;return b},escapeMinimal:function(b){return b.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},innerXML:function(b){var c="";if("innerHTML"in b)c=b.innerHTML;else{var f=function(b){var c=
"";if(1==b.nodeType){for(var c=c+("<"+b.nodeName),d=0,e=b.attributes.length;d<e;d++)c+=" "+b.attributes[d].nodeName+"='"+(b.attributes[d].nodeValue||"").toString()+"'";if(b.firstChild){c+=">";for(d=b.firstChild;d;d=d.nextSibling)c+=f(d);c+="</"+b.nodeName+">"}else c+="/>"}else 3==b.nodeType&&(c+=b.nodeValue);return c};for(b=b.firstChild;b;b=b.nextSibling)c+=f(b)}return c}};9==b.nodeType&&(xml=xml.documentElement);return jsonTextOut="{\n  "+c.convertToJSONText(c.convertToObject(c.reduceWhitespace(b)),
b.nodeName,"\t").replace(/\t/g,"  ")+"\n}"},arrayClear:function(b){if(b)for(;0<b.length;)b.pop()},arrayClearObjectValue:function(b,c){for(var d=0,e=b.length;d<e;d++)b[d][c]=null},arrayClone:function(b,c,d){d=[];switch(b){case "pois":b=0;for(var e=c.length;b<e;b++)d[d.length]={text:c[b].text,value:c[b].value,id:c[b].id,x:c[b].x,y:c[b].y,z:c[b].z,user:c[b].user,date:c[b].date,editable:c[b].editable};break;case "labels":b=0;for(e=c.length;b<e;b++)d[d.length]={text:c[b].text,value:c[b].value,poiID:c[b].poiID,
editable:c[b].editable};break;case "hotspots":b=0;for(e=c.length;b<e;b++)d[d.length]={id:c[b].id,name:c[b].name,mediaType:c[b].mediaType,media:c[b].media,audio:c[b].audio,x:c[b].x,y:c[b].y,z:c[b].z,xScale:c[b].xScale,yScale:c[b].yScale,radius:c[b].radius,zMin:c[b].zMin,zMax:c[b].zMax,clickURL:c[b].clickURL,urlTarget:c[b].urlTarget,rollover:c[b].rollover,caption:c[b].caption,tooltip:c[b].tooltip,textColor:c[b].textColor,backColor:c[b].backColor,lineColor:c[b].lineColor,fillColor:c[b].fillColor,textVisible:c[b].textVisible,
backVisible:c[b].backVisible,lineVisible:c[b].lineVisible,fillVisible:c[b].fillVisible,captionPosition:c[b].captionPosition,saved:c[b].saved,visibility:c[b].visibility,internalID:c[b].internalID,poiID:c[b].poiID,captionHTML:c[b].captionHTML,tooltipHTML:c[b].tooltipHTML,polyClosed:c[b].polyClosed,polygonPts:c[b].polygonPts,showFor:c[b].showFor,transition:c[b].transition,changeFor:c[b].changeFor,rotation:c[b].rotation,editable:c[b].editable,popup:c[b].popup,popupOffsetX:c[b].popupOffsetX,popupOffsetY:c[b].popupOffsetY,
comment:c[b].comment,user:c[b].user,date:c[b].date,iW:c[b].iW,iH:c[b].iH,image:c[b].image};break;case "polygon":b=0;for(e=c.length;b<e;b++)d[d.length]={x:c[b].x,y:c[b].y};break;case "notes":b=0;for(e=c.length;b<e;b++)d[d.length]={text:c[b].text,value:c[b].value,noteText:c[b].noteText,poiID:c[b].poiID,id:c[b].id,user:c[b].user,date:c[b].date,editable:c[b].editable};break;case "magnifications":for(b=0,e=c.length;b<e;b++)d[d.length]={text:c[b].text,value:c[b].value}}return d},arrayImageLoadingValidate:function(b){var c=
!1;if(b&&0<b.length)for(var c=!0,d=0,e=b.length;d<e;d++)if(null===b[d]||0==b[d].image.width||0==b[d].image.height)c=!1;return c},arrayIndexOf:function(b,c,d){d?0>d&&(d=Math.max(0,b.length+d)):d=0;for(var e=b.length;d<e;d++)if(b[d]===c)return d;return-1},arrayIndexOfObjectValue:function(b,c,d,e){if("undefined"!==typeof b){e?0>e&&(e=Math.max(0,b.length+e)):e=0;for(var f=b.length;e<f;e++)if(b[e][c]===d)return e}return-1},arrayIndexOfObjectTwoValues:function(b,c,d,e,f,h){if("undefined"!==typeof b){e?
0>e&&(e=Math.max(0,b.length+e)):e=0;for(var k=b.length;e<k;e++)if(b[e][c]===d&&b[e][f].toString()===h.toString())return e}return-1},arrayIndexOfSubstring:function(b,c,d){d?0>d&&(d=Math.max(0,b.length+d)):d=0;for(var e=b.length;d<e;d++)if(-1!=b[d].indexOf(c))return d;return-1},arrayIndexOfObjectValueSubstring:function(b,c,d,e,f){e?0>e&&(e=Math.max(0,b.length+e)):e=0;for(var h=b.length;e<h;e++)if(f){if(-1!=b[e][c].toLowerCase().indexOf(d))return e}else if(-1!=b[e][c].indexOf(d))return e;return-1},arrayIntersect:function(b,
c){for(var d,e,f,h=[],k=0,y=b.length;k<y;k++){d=b[k];f=!1;for(var u=0,K=c.length;u<K&&d>=(e=c[u]);u++)if(e==d){f=!0;break}f&&(h[h.length]=b[k])}return h},arrayMap:function(b,c){var d=[];if(Z.arrayMapSupported)d=b.map(c);else for(var e=0,f=b.length;e<f;e++)d[e]=c(b[e]);return d},arraySplice:function(b,c,d){if(Z.arraySpliceSupported)if(3<arguments.length)for(var e=3,f=arguments.length;e<f;e++)b.splice(c,d,arguments[e]);else b.splice(c,d);else{0>d&&(d=0);var h=[];if(3<arguments.length)for(e=3,f=arguments.length;e<
f;e++)h[h.length]=arguments[e];for(var e=Z.Utils.arraySubarray(b,0,c),k=Z.Utils.arraySubarrayLen(b,c,d),f=Z.Utils.arraySubarray(b,c+d),h=e.concat(h,f),e=b.length=0,f=h.length;e<f;e++)b[b.length]=h[e];b=k}return b},arraySubarraySimple:function(b,c){return this.slice(b,c)},arraySortNumericAscending:function(b,c,d){b.sort(function(b,c){return b-c});return b},arraySortNumericDescending:function(b,c,d){b.sort(function(b,c){return c-b});return b},arraySortByObjectValue:function(b,c,d,e){b.sort(function(b,
d){return b[c]>d[c]});return b},arraySubarray:function(b,c,d){0>c&&(c=0);if(!d||d>b.length)d=b.length;if(c==d)return[];for(var e=[];c<d;c++)e[e.length]=b[c];return e},arraySubarrayLen:function(b,c,d){if(c>=b.length||d&&0>=d)return[];0>c&&(c=Math.abs(c)>b.length?0:b.length+c);if(!d||d+c>b.length)d=b.length-c;for(var e=[],f=c;f<c+d;f++)e[e.length]=b[f];return e},arraySubtract:function(b,c){for(var d=b.slice(0),e=0,f=d.length;e<f;e++){for(var h=d[e],k=!1,y=0,u=c.length;y<u&&h>=(elmt2=c[y]);y++)if(elmt2==
h){k=!0;break}k&&(d=Z.Utils.arraySplice(d,e--,1))}return d},arrayToArrayOfStrings:function(b){for(var c=[],d=0,e=b.length;d<e;d++)c[d]="undefined"!==typeof b[d]&&"undefined"!=b[d]&&null!==b[d]?b[d].toString():"";return c},arrayUnique:function(b){for(var c=1;c<b.length;)b[c-1]==b[c]?b=Z.Utils.arraySplice(b,c,1):c++;return b},arrayUniqueByObjectValue:function(b,c){if("undefined"!==typeof b)for(var d=1;d<b.length;)b[d-1][c]==b[d][c]?b=Z.Utils.arraySplice(b,d,1):d++;return b},dataSlice:function(b,c,d){var e=
d-c;d=new ArrayBuffer(d-c);d=new Uint8Array(d);for(var f=0;f<e;f++)d[f]=b[c+f];return d},calculatePointsDistance:function(b,c,d,e){return Math.sqrt((b-=d)*b+(c-=e)*c)},fullScreenView:function(b,c,d,e){if("undefined"===typeof d||null===d)d=!1;if(c){c=document.documentElement;var f=null;c.requestFullScreen?(b.requestFullScreen(),f="fullscreenchange"):c.mozRequestFullScreen?(b.mozRequestFullScreen(),f="mozfullscreenchange"):c.webkitRequestFullScreen?(b.webkitRequestFullScreen(),f="webkitfullscreenchange"):
c.msRequestFullscreen&&(b.msRequestFullscreen(),f="MSFullscreenChange");f&&Z.Utils.addEventListener(document,f,e.fullScreenEscapeHandler)}else document.cancelFullScreen?(d||document.cancelFullScreen(),f="fullscreenchange"):document.mozCancelFullScreen?(d||document.mozCancelFullScreen(),f="mozfullscreenchange"):document.webkitCancelFullScreen?(d||document.webkitCancelFullScreen(),f="webkitfullscreenchange"):document.msExitFullscreen&&(d||document.msExitFullscreen(),f="MSFullscreenChange"),f&&Z.Utils.removeEventListener(document,
f,e.fullScreenEscapeHandler)},rotatePoint:function(b,c,d){var e=Math.PI/180*-d;d=b*Math.cos(e)-c*Math.sin(e);b=b*Math.sin(e)+c*Math.cos(e);return new Z.Utils.Point(d,b)},rotateElement:function(b,c,d,e){if("undefined"===typeof d||null===d)d=0;if(c!=d||e)c="rotate("+c.toString()+"deg)",b.transform=c,b.msTransform=c,b.mozTransform=c,b.webkitTransform=c,b.oTransform=c},getPositionRotated:function(b,c,d,e,f,h){if("undefined"===typeof f||null===f)f=h;0>f&&(f+=360);f=f*Math.PI/180;b-=d;h=c-e;c=b*Math.cos(f)-
h*Math.sin(f);f=b*Math.sin(f)+h*Math.cos(f);d=Math.round(c+d);e=Math.round(f+e);return new Z.Utils.Point(d,e)},getDisplayPositionRotated:function(b,c,d){if("undefined"===typeof c||null===c)c=d;0>c&&(c+=360);var e=parseFloat(b.left),f=parseFloat(b.top),h=parseFloat(b.width);b=parseFloat(b.height);return Z.Utils.getPositionRotated(e,f,e+h/2,f+b/2,c,d)},translateElement:function(b,c,d){c="translate("+c.toString()+"px,"+d.toString()+"px)";b.transform=c;b.msTransform=c;b.mozTransform=c;b.webkitTransform=
c;b.oTransform=c},scaleElement:function(b,c){var d="scale("+c.toString()+")";b.transform=d;b.msTransform=d;b.mozTransform=d;b.webkitTransform=d;b.oTransform=d},intValue:function(b,c,d){var e=null;return e=d?(b[c+3]+(b[c+2]<<8)|b[c+1]<<16)+16777216*b[c]:(b[c]+(b[c+1]<<8)|b[c+2]<<16)+16777216*b[c+3]},longValue:function(b,c,d){var e=null;if(d){e=0;d=1;for(var f=0;8>f;f++)e+=b[c+7-f]*d,d*=256}else e=(b[c]+(b[c+1]<<8)|b[c+2]<<16)+16777216*b[c+3],0!=b[c+4]&&(e+=4294967296*b[c+4]);return e},shortValue:function(b,
c){return b[c]+(b[c+1]<<8)},createUint8Array:function(b,c){return Z.uInt8ArraySupported?new Uint8Array(b,c):new Z.Utils.TypedArray(b,c)},TypedArray:function(b){var c;if("number"===typeof b){c=Array(b);for(var d=0;d<b;++d)c[d]=0}else c=b.slice(0);c.subarray=Z.Utils.arraySubarraySimple;c.buffer=c;c.byteLength=c.length;c.set=Z.Utils.setSimple;"object"===typeof b&&b.buffer&&(c.buffer=b.buffer);return c},setSimple:function(b,c){2>arguments.length&&(c=0);for(var d=0,e=b.length;d<e;++d,++c)this[c]=b[d]&
255},encodeBase64:function(b){var c,d,e,f,h=0,k=0,y="",y=[];if(!b)return b;do c=b[h++],d=b[h++],e=b[h++],f=c<<16|d<<8|e,c=f>>18&63,d=f>>12&63,e=f>>6&63,f&=63,y[k++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(f);while(h<b.length);y=y.join("");
b=b.length%3;return(b?y.slice(0,b-3):y)+"===".slice(b||3)},validateResponseArrayFunctionality:function(b,c){"ZoomifyZIFFile"!=b&&("ZoomifyPFFFile"!=b||null!==c)||Z.responseArraySupported||Z.responseArrayPrototyped||(Z.Utils.defineObjectProperty(XMLHttpRequest.prototype,"response",{get:function(){return(new VBArray(this.responseBody)).toArray()}}),Z.responseArrayPrototyped=!0)},defineObjectProperty:function(b,c,d){Z.definePropertySupported?Object.defineProperty(b,c,d):(delete b[c],"get"in d&&b.__defineGetter__(c,
d.get),"set"in d&&b.__defineSetter__(c,d.set),"value"in d&&(b.__defineSetter__(c,function(b){this.__defineGetter__(c,function(){return b});return b}),b[c]=d.value))},createImageElementFromBytes:function(b,c){function d(b){e.onload=null;e.onabort=null;e.onerror=null;f&&window.clearTimeout(f);window.setTimeout(function(){c(e)},1)}var e=new Image,f=null,h=parseFloat(this.getResource("z139")),k=function(){d(!1)};e.onload=function(){d(!0)};e.onabort=k;e.onerror=k;f=window.setTimeout(function(){console.log(Z.Utils.getResource("z253"));
d(!1)},h);e.src=b},getCurrentUTCDateAsString:function(){var b=new Date,c=(10>b.getUTCMonth()+1?"0":"")+(b.getUTCMonth()+1),d=(10>b.getUTCDate()?"0":"")+b.getUTCDate(),e=(10>b.getUTCHours()?"0":"")+b.getUTCHours(),f=(10>b.getUTCMinutes()?"0":"")+b.getUTCMinutes(),h=(10>b.getUTCSeconds()?"0":"")+b.getUTCSeconds();return b.getUTCFullYear()+c+d+e+f+h},cacheProofPath:function(b){b+="?t"+(new Date).getTime().toString()+"n"+Z.cacheProofCounter.toString();Z.cacheProofCounter+=1;return b},easing:function(b,
c,d,e,f,h,k){if("undefined"===typeof h||null===h)h=parseInt(Z.Utils.getResource("DEFAULT_SMOOTHZOOMEASING"),10);if("undefined"===typeof smoothZoom||null===smoothZoom)smoothZoom="0"!=Z.Utils.getResource("DEFAULT_SMOOTHZOOM");if("undefined"===typeof f||null===f)f=h;h=c;if(smoothZoom&&1<f)switch(f){case 2:d/=e;d--;h=(c-b)*(d*d*d*d*d+1)+b;break;case 3:h=(c-b)*(-Math.pow(2,-10*d/e)+1)+b;break;case 4:c-=b,h=1>(d/=e/2)?c/2*d*d*d*d*d+b:c/2*((d-=2)*d*d*d*d+2)+b}return h},functionCallWithDelay:function(b,c){window.setTimeout(b,
c)},nodeIsInViewer:function(b,c){for(var d=!1,e=c;0==d;)if(e)e.id?e.id=="ViewerDisplay"+b?d=!0:e=e.parentNode:e=e.parentNode;else break;return d},roundToFixed:function(b,c){var d=Math.round(b).toString().length,d=c-d,d=Math.pow(10,0>d?0:d);return b=Math.round(b*d)/d},getRandomInt:function(b,c){return Math.floor(Math.random()*(c-b+1))+b},getSign:function(b){return b?0>b?-1:1:0}};
