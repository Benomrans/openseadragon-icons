/*
 Zoomify Image Viewer, version on line 25 below. Copyright Zoomify, Inc., 1999-2016. All rights reserved. You may
use this file on private and public websites, for personal and commercial purposes, with or without modifications, so long as this
notice is included. Redistribution via other means is not permitted without prior permission. Additional terms apply. For complete
license terms please see the Zoomify License Agreement in this product and on the Zoomify website at www.zoomify.com.
::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
*/
(function(){(function(){return this}).call().Z={}})();Z.version="4.01 Enterprise";Z.setCallback=function(b,a){"undefined"===typeof Z.callbacks&&(Z.callbacks=[]);var e=Z.Utils.arrayIndexOfObjectTwoValues(Z.callbacks,"callbackEvent",b,null,"callbackFunction",a);-1==e&&(e=Z.callbacks.length);Z.callbacks[e]={callbackEvent:b,callbackFunction:a}};
Z.showImage=function(b,a,e){if(Z.showImage.done)Z.Utils.declareGlobals(),Z.pageContainerID=b,"undefined"!==typeof a&&Z.Utils.stringValidate(a)?Z.imagePath=Z.Utils.stringRemoveTrailingSlashCharacters(a):Z.imagePath=null,"undefined"!==typeof e&&(Z.parameters=Z.Utils.parseParameters(e)),Z.initialize();else{Z.showImage.done=!0;Z.Utils.addCrossBrowserMethods();Z.Utils.addCrossBrowserEvents();Z.Utils.declareGlobals();Z.pageContainerID=b;Z.setEditPermissionFunction=function(b){Z.externalEditPermissionFunction=
b};Z.clearCallback=function(b,a){var e=Z.Utils.arrayIndexOfObjectTwoValues(Z.callbacks,"callbackEvent",b,null,"callbackFunction",a);-1!=e&&(Z.callbacks=Z.Utils.arraySplice(Z.callbacks,e,1))};b="undefined"!==typeof a&&Z.Utils.stringValidate(a);var f="undefined"!==typeof e&&("string"===typeof e&&-1!=e.indexOf("zIIIFServer")||"object"===typeof e&&"undefined"!==typeof e.zIIIFServer);b&&-1!=a.indexOf("zXMLParametersPath")?(a=a.substring(19,a.length),Z.xmlParametersPath=Z.Utils.stringRemoveTrailingSlashCharacters(a)):
Z.imagePath=f?"IIIFImageServer":b?Z.Utils.stringRemoveTrailingSlashCharacters(a):null;"undefined"!==typeof e&&("string"===typeof e&&(e=unescape(e),e=Z.Utils.stringUnescapeAmpersandCharacters(e)),Z.parameters=Z.Utils.parseParameters(e));"complete"!=document.readyState?(Z.Utils.addEventListener(document,"DOMContentLoaded",Z.initialize),Z.Utils.addEventListener(window,"load",Z.initialize)):Z.initialize()}};
Z.initialize=function(){Z.Utils.removeEventListener(document,"DOMContentLoaded",Z.initialize);Z.Utils.removeEventListener(window,"load",Z.initialize);Z.Utils.detectBrowserFeatures();Z.xmlParametersPath&&!Z.parameters?Z.loadParametersXML():null!==Z.parameters&&"undefined"!==typeof Z.parameters.zXMLParametersPath?Z.Utils.setParameters(Z.parameters):(Z.Utils.setParameters(Z.parameters),Z.Viewer=new Z.ZoomifyImageViewer,"request"==Z.userLogin||0!=Z.userPanelVisible?Z.Utils.enforceUserLogin():Z.Utils.stringValidate(Z.copyrightPath)?
Z.Utils.enforceCopyright():Z.Viewer.configureViewer(),1!=Z.debug&&2!=Z.debug&&3!=Z.debug||Z.Utils.trace(Z.Utils.getResource("z445"),!1,!0))};Z.loadParametersXML=function(){Z.xmlParametersParsing=!0;var b=new Z.NetConnector,a=Z.Utils.cacheProofPath(Z.xmlParametersPath);b.loadXML(a)};
Z.ZoomifyImageViewer=function(){function b(b){if(b=Z.Utils.event(b)){var a=null;if(null!==Z.editing&&Z.Viewport.verifyEditsUnsaved())return a=Z.Utils.getResource("ALERT_UNSAVEDEDITSEXIST-BROWSER"),b.returnValue=a}}function a(){Z.Utils.showMessage(Z.Utils.getResource("z291")+this.url,!0)}function e(b){(b=Z.Utils.event(b))&&T&&(Z.Utils.removeEventListener(T,"mousedown",e),Z.Utils.addEventListener(Z.ViewerDisplay,"mousemove",f),Z.Utils.addEventListener(Z.ViewerDisplay,"mouseup",g),b=Z.Utils.getMousePosition(b),
dragPtStart=new Z.Utils.Point(b.x,b.y),new Z.Utils.Point(parseFloat(T.style.left),parseFloat(T.style.top)),T.mouseXPrior=dragPtStart.x,T.mouseYPrior=dragPtStart.y)}function f(b){if((b=Z.Utils.event(b))&&T){b=Z.Utils.getMousePosition(b);dragPtCurrent=new Z.Utils.Point(b.x,b.y);var a=dragPtCurrent.x-T.mouseXPrior,e=dragPtCurrent.y-T.mouseYPrior;T.mouseXPrior=dragPtCurrent.x;T.mouseYPrior=dragPtCurrent.y;b=T.style;a=parseFloat(b.left)+a;e=parseFloat(b.top)+e;b.left=a+"px";b.top=e+"px"}}function g(b){if((b=
Z.Utils.event(b))&&T){b=Z.Utils.getMousePosition(b);b=Z.mouseOutDownPoint?Z.mouseOutDownPoint:new Z.Utils.Point(b.x,b.y);Z.Utils.removeEventListener(Z.ViewerDisplay,"mousemove",f);Z.Utils.removeEventListener(Z.ViewerDisplay,"mouseup",g);Z.Utils.addEventListener(T,"mousedown",e);var a=b.x-T.mouseXPrior,k=b.y-T.mouseYPrior;b=T.style;a=parseFloat(b.left)+a;k=parseFloat(b.top)+k;b.left=a+"px";b.top=k+"px"}}function m(b){if(b=Z.Utils.event(b))if(b.preventDefault(),Z.interactive&&T&&(b=Z.Utils.getFirstTouch(b)))b=
new Z.Utils.Point(b.pageX,b.pageY),dragPtStart=new Z.Utils.Point(b.x,b.y),T.mouseXPrior=b.x,T.mouseYPrior=b.y}function k(b){if(b=Z.Utils.event(b)){b.preventDefault();if(!Z.interactive||!Z.mousePan)return;if(T&&(b=Z.Utils.getFirstTouch(b))){b=new Z.Utils.Point(b.pageX,b.pageY);var a=T.style,e=parseFloat(a.left),f=parseFloat(a.top);a.left=e+(b.x-T.mouseXPrior)+"px";a.top=f+(b.y-T.mouseYPrior)+"px";T.mouseXPrior=b.x;T.mouseYPrior=b.y}}return!1}function t(b){if(b=Z.Utils.event(b))if(b.preventDefault(),
Z.interactive&&T&&(b=Z.Utils.getFirstTouch(b))){b=new Z.Utils.Point(b.pageX,b.pageY);b=new Z.Utils.Point(b.x,b.y);var a=b.x-T.mouseXPrior,e=b.y-T.mouseYPrior;b=T.style;a=parseFloat(b.left)+a;e=parseFloat(b.top)+e;b.left=a+"px";b.top=e+"px"}}function q(b){if(b=Z.Utils.event(b))if(b.preventDefault(),Z.interactive&&T&&(b=Z.Utils.getFirstTouch(b))){b=new Z.Utils.Point(b.pageX,b.pageY);b=new Z.Utils.Point(b.x,b.y);var a=b.x-T.mouseXPrior,e=b.y-T.mouseYPrior;b=T.style;a=parseFloat(b.left)+a;e=parseFloat(b.top)+
e;b.left=a+"px";b.top=e+"px"}}function G(b){function a(){Z.clearCallback("readyViewer",a);Z.viewportCurrent=Z.Viewport0;Z.overlays&&(Z.imageSetStart=Z.imageSetLength-1);M.viewportSelect(Z.imageSetStart)}Z.imagePath="multiple";Z.tileSourceMultiple&&Z.Utils.validateImagePath(b[0].media);Z.setCallback("readyViewer",a);for(var e=0,f=b.length;e<f;e++){Z["Viewport"+e.toString()]=new Z.ZoomifyViewport(e,b[e].media,Z.annotationFileShared?Z.imageSetAnnotationPath:b[e].annotationPath,Z.hotspotFileShared?Z.imageSetHotspotPath:
b[e].hotspotPath,Z.trackingFileShared?Z.imageSetTrackingPath:b[e].trackingPath,Z.imageListFileShared?Z.imageSetImageListPath:b[e].imageListPath);var g=e==Z.imageSetStart;g&&(Z.viewportCurrent=Z["Viewport"+e.toString()],M.viewportSelect(Z.imageSetStart));Z["Viewport"+e.toString()].setVisibility(g||Z.comparison||Z.overlays)}}function w(b,a){if("undefined"===typeof a||null===a)a="0";var e=document.getElementById("HotspotList"+a);e&&(e.style.visibility=b?"visible":"hidden")}function R(b,a){this.id=b.getAttribute("ID");
this.name=b.getAttribute("NAME");this.internalID=a;this.media=b.getAttribute("MEDIA");this.imageListPath=b.getAttribute("IMAGELIST");this.hotspotPath=b.getAttribute("HOTSPOTPATH");this.annotationPath=b.getAttribute("ANNOTATIONPATH");this.trackingPath=b.getAttribute("TRACKINGPATH");this.initialX=b.getAttribute("INITIALX");this.initialY=b.getAttribute("INITIALY");this.initialZoom=b.getAttribute("INITIALZOOM");this.minZoom=b.getAttribute("MINZOOM");this.maxZoom=b.getAttribute("MAXZOOM")}function U(b,
a,e,f){switch(b){case "0":f=b=-1E3;break;case "1":f=b=15;break;case "2":b=e-a-15+2;f=10;break;case "3":b=e-a-15;f=0<Z.toolbarVisible&&8!=Z.toolbarVisible?f-30:f-22.5;break;case "4":b=15;f=0<Z.toolbarVisible&&8!=Z.toolbarVisible?f-30:f-22.5;break;default:b=e-a,f=15}return new Z.Utils.Point(b,f)}function P(b){if(b=Z.Utils.event(b))if(b=Z.Utils.target(b),"null"!=b.options[b.selectedIndex].value){var a=Z.Utils.stringValidate(Z.imageSetListTitle)&&"none"!=Z.imageSetListTitle?1:0;M.viewportSelect(b.selectedIndex-
a)}}function ka(){document.getElementsByTagName("body")?document.getElementsByTagName("body")[0].onorientationchange=ca:window.setTimeout(ka,100)}function ca(b){Z.interactive&&Z.fullView&&(Z.Toolbar&&(Z.toolbarAutoShowHide&&Z.Toolbar.show(!1),!Z.annotations||2!=Z.annotationPanelVisible&&3!=Z.annotationPanelVisible||Z.Toolbar.setVisibilityAnnotationPanel(!1),!Z.tracking||2!=Z.trackingPanelVisible&&3!=Z.trackingPanelVisible||Z.Toolbar.setVisibilityTrackingPanel(!1),2!=Z.userPanelVisible&&3!=Z.trackingPanelVisible||
Z.Toolbar.setVisibilityUserPanel(!1)),Z.Navigator&&1<Z.navigatorVisible&&(Z.Navigator.setVisibility(!1),Z.comparison&&Z.Navigator2&&Z.Navigator2.setVisibility(!1)),Z.Gallery&&Z.galleryAutoShowHide&&Z.Gallery.setVisibility(!1),Z.Viewport&&(Z.Viewport.toggleFullViewMode(!1),Z.Viewport.toggleFullViewMode(!0)),Z.Gallery&&Z.galleryAutoShowHide&&Z.Gallery.setVisibility(!0),Z.Navigator&&1<Z.navigatorVisible&&(Z.Navigator.setVisibility(!0),Z.comparison&&Z.Navigator2&&Z.Navigator2.setVisibility(!0)),Z.Toolbar&&
(!Z.annotations||2!=Z.annotationPanelVisible&&3!=Z.annotationPanelVisible||Z.Toolbar.setVisibilityAnnotationPanel(!0),!Z.tracking||2!=Z.trackingPanelVisible&&3!=Z.trackingPanelVisible||Z.Toolbar.setVisibilityTrackingPanel(!0),2!=Z.userPanelVisible&&3!=Z.trackingPanelVisible||Z.Toolbar.setVisibilityUserPanel(!0),Z.toolbarAutoShowHide&&Z.Toolbar.show(!0)))}function J(b){if(Z.interactive&&Z.keys&&"INPUT"!=document.activeElement.tagName&&"TEXTAREA"!=document.activeElement.tagName){b=Z.Utils.event(b);
var a=b.altKey;18==b.keyCode||b.altKey||(Z.viewportCurrent.zoomAndPanAllStop(!0,!0),Z.maskingSelection&&Z.viewportCurrent.clearLabelMask());if(b){var e=b.type,f=b.keyCode;if("keydown"==e){Z.keyIsDown=!0;switch(f){case 90:Z.viewportCurrent.zoom("out");break;case 17:Z.viewportCurrent.zoom("out");break;case 65:Z.viewportCurrent.zoom("in");break;case 16:Z.viewportCurrent.zoom("in");break;case 37:!Z.tracking&&!Z.animation||Z.viewportCurrent.getZoom()!=Z.minZ?Z.viewportCurrent.pan("left"):Z.imageSet&&M.viewportPrior();
break;case 38:!Z.tracking&&!Z.animation||Z.viewportCurrent.getZoom()!=Z.minZ?Z.viewportCurrent.pan("up"):Z.imageSet&&M.viewportNext();break;case 40:!Z.tracking&&!Z.animation||Z.viewportCurrent.getZoom()!=Z.minZ?Z.viewportCurrent.pan("down"):Z.imageSet&&M.viewportPrior();break;case 39:!Z.tracking&&!Z.animation||Z.viewportCurrent.getZoom()!=Z.minZ?Z.viewportCurrent.pan("right"):Z.imageSet&&M.viewportNext();break;case 27:Z.fullView?Z.viewportCurrent.toggleFullViewMode(!1):Z.viewportCurrent.reset();break;
case 190:Z.rotationVisible&&Z.viewportCurrent.rotate("clockwise",a);break;case 188:Z.rotationVisible&&Z.viewportCurrent.rotate("counterwise",a);break;case 33:Z.imageSet&&!Z.overlays&&M.viewportNext();break;case 34:Z.imageSet&&!Z.overlays&&M.viewportPrior()}!Z.imageSet||33!=f&&34!=f||(b.preventDefault?b.preventDefault():b.returnValue=!1)}else"keyup"==e&&((Z.keyIsDown=!1,90==f||17==f||65==f||16==f)?Z.viewportCurrent.zoom("stop"):37==f||39==f||38==f||40==f?Z.tracking?37==f?Z.viewportCurrent.goToNextCell("left"):
39==f?Z.viewportCurrent.goToNextCell("right"):38==f?Z.viewportCurrent.goToNextCell("up"):40==f&&Z.viewportCurrent.goToNextCell("down"):37==f||39==f?Z.viewportCurrent.pan("horizontalStop"):38!=f&&40!=f||Z.viewportCurrent.pan("verticalStop"):!Z.rotationVisible||190!=f&&188!=f?!Z.imageSet||33!=f&&34!=f||(Z.imageSet&&Z.viewportCurrent.updateView(!0),b.preventDefault?b.preventDefault():b.returnValue=!1):Z.viewportCurrent.rotate("stop"))}}}function ba(b){b=Z.Utils.event(b);var a=b.type;if(b&&a){var e=Z.Utils.isRightMouseButton(b),
f=b.altKey;if(!("mouseover"!=a&&"mouseout"!=a&&!Z.interactive||"mousedown"==a&&(!Z.interactive||Z.coordinatesVisible&&f)||e)){Z.touchSupport&&!Z.clickZoomAndPanBlock&&"touchmove"!=a&&"gesturechange"!=a&&b.preventDefault();switch(a){case "mouseover":Z.fullView||"TEXTAREA"==document.activeElement.tagName||Z.Viewer.initializeViewerKeyDefaultListeners(!0);break;case "mouseout":Z.tracking||Z.Viewer.initializeViewerKeyDefaultListeners(!1)}var g;g=Z.Utils.event(b);var k=g.type;if(g&&k){var m;b=Z.Utils.target(g);
e=Z.Utils.relatedTarget(g);"resize"!=k&&(m=Z.Utils.getMousePosition(g));f=g.altKey;"DOMMouseScroll"==k&&(k="mousewheel");switch(k){case "mouseover":f=Z.Utils.nodeIsInViewer(b);g=Z.Utils.nodeIsInViewer(e);f&&g||(Z.viewportCurrent&&Z.viewportCurrent.showLists(!0),Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!0),Z.Navigator&&1<Z.navigatorVisible&&(Z.Navigator.setVisibility(!0),Z.comparison&&Z.Navigator2&&Z.Navigator2.setVisibility(!0)),Z.Gallery&&Z.galleryAutoShowHide&&Z.Gallery.setVisibility(!0),
Z.Ruler&&1<Z.rulerVisible&&Z.Ruler.setVisibility(!0),Z.Toolbar&&(!Z.annotations||2!=Z.annotationPanelVisible&&3!=Z.annotationPanelVisible||Z.Toolbar.setVisibilityAnnotationPanel(!0),!Z.tracking||2!=Z.trackingPanelVisible&&3!=Z.trackingPanelVisible||Z.Toolbar.setVisibilityTrackingPanel(!0),2!=Z.userPanelVisible&&3!=Z.trackingPanelVisible||Z.Toolbar.setVisibilityUserPanel(!0)),Z.mouseOutDownPoint=null);break;case "mouseout":f=Z.Utils.nodeIsInViewer(b);g=Z.Utils.nodeIsInViewer(e);f&&g||"[object HTMLSelectElement]"==
b||"[object HTMLOptionElement]"==b||"[object HTMLSelectElement]"==e||"[object HTMLOptionElement]"==e||(Z.mouseIsDown?Z.mouseOutDownPoint=new Z.Utils.Point(m.x,m.y):(Z.viewportCurrent&&Z.viewportCurrent.showLists(!1),Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!1),Z.Navigator&&1<Z.navigatorVisible&&(Z.Navigator.setVisibility(!1),Z.comparison&&Z.Navigator2&&Z.Navigator2.setVisibility(!1)),Z.Gallery&&Z.galleryAutoShowHide&&Z.Gallery.setVisibility(!1),Z.Ruler&&1<Z.rulerVisible&&Z.Ruler.setVisibility(!1),
Z.Toolbar&&(!Z.annotations||2!=Z.annotationPanelVisible&&3!=Z.annotationPanelVisible||Z.Toolbar.setVisibilityAnnotationPanel(!1),!Z.tracking||2!=Z.trackingPanelVisible&&3!=Z.trackingPanelVisible||Z.Toolbar.setVisibilityTrackingPanel(!1),2!=Z.userPanelVisible&&3!=Z.userPanelVisible||Z.Toolbar.setVisibilityUserPanel(!1))));break;case "resize":jb||(jb=window.setTimeout(I,E));break;case "mousewheel":0<Z.mouseWheel&&(m=Math.max(-1,Math.min(1,g.wheelDelta||-g.detail)),Z.viewportCurrent.mouseWheelHandler(m,
f))}}if("mousedown"==a||"mousemove"==a)return!1}}}function I(){jb&&(window.clearTimeout(jb),jb=null,W())}function W(){if(!Z.fullScreenEntering){var b=Z.Utils.getContainerSize(Z.pageContainer,Z.ViewerDisplay),a=Z.viewportCurrent.calculateZoomForResize(Z.viewportCurrent.getZoom(),Z.viewerW,Z.viewerH,b.x,b.y);M.resizeViewer(b.x,b.y,a);if(Z.comparison)(b=0==Z.viewportCurrent.getViewportID()?Z.Viewport1:Z.Viewport0)&&b.syncViewportResize(Z.imageX,Z.imageY,Z.imageZ,Z.imageR);else if(Z.overlays)for(b=0,
a=Z.imageSetLength-1;b<a;b++)Z["Viewport"+b.toString()].syncViewportResize(Z.imageX,Z.imageY,Z.imageZ,Z.imageR)}}var M=this,oa=[];Z.ViewerDisplay=Z.Utils.createContainerElement("div","ViewerDisplay","inline-block","relative","hidden","100%","100%","0px","0px","none","0px","transparent none","0px","0px","normal","pointer");Z.pageContainer=document.getElementById(Z.pageContainerID);Z.Utils.getElementStyle(Z.pageContainer);Z.ViewerDisplay.style["-webkit-touch-callout"]="none";Z.ViewerDisplay.style["-moz-user-select"]=
"none";Z.ViewerDisplay.style["-khtml-user-select"]="none";Z.ViewerDisplay.style["-webkit-user-select"]="none";Z.ViewerDisplay.style["-ms-user-select"]="none";Z.ViewerDisplay.style["-o-user-select"]="none";Z.ViewerDisplay.style["user-select"]="none";var ea=Z.Utils.getContainerSize(Z.pageContainer,Z.ViewerDisplay);Z.viewerW=ea.x;Z.viewerH=ea.y;Z.pageContainer.innerHTML="";Z.pageContainer.appendChild(Z.ViewerDisplay);Z.autoResize=Z.autoResize||Z.Utils.isElementFluid(Z.pageContainer);var E=parseInt(Z.Utils.getResource("DEFAULT_AUTORESIZESKIPDURATION"),
10),jb;Z.mouseWheelCompleteDuration=parseInt(Z.Utils.getResource("z165"),10);if(Z.virtualPointerVisible)var bb=Z.Utils.getResource("z232"),T,Ca;if(Z.imageSet)var Y=[],fa=null,pa=[];this.configureViewer=function(){if(!Z.Viewer.getStatus("configureCalled")){var b=function(){Z.clearCallback("readyViewer",b);Z.Utils.getMessage()!=Z.Utils.getResource("ALERT_LOADINGIMAGESET")&&Z.Utils.getMessage()!=Z.Utils.getResource("ALERT_LOADINGANNOTATIONS")||Z.Utils.hideMessage();Z.imageSet&&!Z.comparison&&z619Delayed();
Z.tracking&&Z.viewportCurrent.syncTrackingToViewport()},a=function(){Z.clearCallback(e,a);M.initializeViewerKeyEventListeners(!0);Z.Utils.addEventListener(Z.ViewerDisplay,"mouseover",ba);Z.Utils.addEventListener(Z.ViewerDisplay,"mouseout",ba);Z.Utils.addEventListener(Z.ViewerDisplay,"mousemove",Z.Utils.preventDefault);Z.Utils.addEventListener(Z.ViewerDisplay,"mousewheel",ba);Z.Utils.addEventListener(Z.ViewerDisplay,"mousewheel",Z.Utils.preventDefault);ka();Z.autoResize&&Z.Utils.addEventListener(window,
"resize",Z.Viewer.viewerEventsHandler);Z.tracking&&Z.Viewer.initializeViewerKeyDefaultListeners(!0);var b=Z["Viewport"+(Z.imageSetLength-1).toString()];M.configureComponents(Z.overlays?b:Z.viewportCurrent)};Z.Viewer.setStatus("configureCalled",!0);var e=Z.imageSet?"initializedViewer":"initializedViewport";Z.setCallback(e,a);Z.setCallback("readyViewer",b);if(Z.imageSet)if(Z.Utils.showMessage(Z.Utils.getResource("ALERT_LOADINGIMAGESET"),!1,null,"center"),"undefined"!==typeof Z.overlayJSONObject&&"object"===
typeof Z.overlayJSONObject&&null!==Z.overlayJSONObject){var f=Z.Utils.jsonConvertObjectToXMLText(Z.overlayJSONObject),f=Z.Utils.xmlConvertTextToDoc(f);M.parseImageSetXML(f,"overlay")}else{var g=new Z.NetConnector;".xml"!=Z.imageSetPath.toLowerCase().substring(Z.imageSetPath.length-4,Z.imageSetPath.length)&&(Z.imageSetPath=Z.imageSetPath+"/"+Z.Utils.getResource("DEFAULT_IMAGESETXMLFILE"));f=Z.Utils.cacheProofPath(Z.imageSetPath);g.loadXML(f)}else Z.Viewport=new Z.ZoomifyViewport,Z.viewportCurrent=
Z.Viewport}};this.configureComponents=function(b){0<Z.toolbarVisible&&!Z.Toolbar&&(Z.Toolbar=new Z.ZoomifyToolbar(b));0<Z.navigatorVisible&&(Z.Navigator||(Z.Navigator=new Z.ZoomifyNavigator(b),Z.Navigator&&Z.Navigator.z682()),Z.comparison&&!Z.Navigator2&&(Z.Navigator2=new Z.ZoomifyNavigator(Z.Viewport1),Z.Navigator2&&Z.Navigator2.z682()));0<Z.galleryVisible&&!Z.Gallery&&(Z.Gallery=new Z.ZoomifyGallery(b),Z.Gallery&&Z.Gallery.validateGalleryGlobals());0<Z.rulerVisible&&!Z.Ruler&&(Z.Ruler=new Z.ZoomifyRuler(b));
Z.helpCustom&&(new Z.NetConnector).loadHTML(Z.helpPath,M.receiveHelpHTML,null,"loadHTML")};this.receiveHelpHTML=function(b){4==b.readyState&&200==b.status&&Z.Utils.stringValidate(b.responseText)&&(Z.helpContent=b.responseText)};this.getVersion=function(){return Z.version};this.setSizeAndPosition=function(b,a,e,f,g){Z.viewerW=b;Z.viewerH=a;Z.ViewerDisplay.style.width=b+"px";Z.ViewerDisplay.style.height=a+"px";Z.Viewport&&Z.Viewport.getStatus("initializedViewport")&&Z.Viewport.setSizeAndPosition(b,
a,e,f);var k=1==Z.toolbarPosition?a-Z.toolbarH:0;Z.ToolbarDisplay&&Z.Toolbar.getInitialized()&&(Z.Toolbar.setSizeAndPosition(b,null,null,k),0!=Z.toolbarVisible&&8!=Z.toolbarVisible&&Z.Toolbar.show(!0));Z.Navigator&&Z.Navigator.getInitialized()&&(Z.Navigator.setSizeAndPosition(null,null,0==Z.navigatorL?e:Z.navigatorL+Z.navigatorW>b?b-Z.navigatorW:Z.navigatorL,0!=Z.navigatorT?Z.navigatorT:f,Z.navigatorFit),1<Z.navigatorVisible&&(Z.Navigator.setVisibility(!0),Z.comparison&&Z.Navigator2&&(Z.Navigator2.setSizeAndPosition(null,
null,b-Z.navigatorW,f,Z.navigatorFit),Z.Navigator2.setVisibility(!0))));Z.imageList&&Z.Viewport.getStatus("initializedImageList")&&Z.Viewport.setSizeAndPositionImageList();Z.slideList&&"undefined"!==typeof slideList&&null!==slideList&&(k=Z.Viewport.calculateSlideListCoords(Z.viewerW,Z.viewerH),slideList.style.left=k.x+"px",slideList.style.top=k.y+"px");Z.Gallery&&Z.Gallery.getInitialized()&&(Z.Gallery.setSizeAndPosition(b,a,e,f),Z.galleryAutoShowHide&&Z.Gallery.setVisibility(!0));g&&Z.Viewport.updateView(!0)};
this.getImagePath=function(){return M.getImage()};this.getImage=function(){return Z.imagePath};this.setImagePath=function(b,a){"undefined"!==typeof a&&Z.Utils.stringValidate(a)&&(Z.imageProperties=a);M.setImage(b)};this.setImage=function(b,a,e,f){if(Z.Viewport&&(Z.Viewport.getStatus("initializedViewport")||e)){Z.Viewport.zoomAndPanAllStop(!0);var g=!0;null!==Z.editing&&(g=!0,null!==Z.editing&&Z.Viewport.verifyEditsUnsaved()&&(g=confirm(Z.Utils.getResource("ALERT_UNSAVEDEDITSEXIST-CUSTOM"))));g&&(Z.maskingSelection&&
M.clearLabelMask(),Z.overlays||Z.Utils.clearImageParameters(),Z.imagePath=Z.Utils.stringRemoveTrailingSlashCharacters(b),Z.Utils.validateImagePath(),g="undefined"===typeof f||null===f||0==f?Z.Viewport:Z["Viewport"+f.toString()],g.setImagePath(Z.imagePath),"undefined"!==typeof a&&null!==a&&(Z.parameters=Z.Utils.parseParameters(a)),e&&Z.Utils.setParameters(Z.parameters),"unconverted"==Z.tileSource?g.loadUnconvertedImage(b):Z.imageProperties?(f=Z.Utils.xmlConvertTextToDoc(Z.imageProperties),g.z602(f)):
(b=new Z.NetConnector,g.loadImageProperties(Z.imagePath,b,f)))}};this.setImageWithFade=function(b,a,e,f){if(Z.Viewport&&(Z.Viewport.getStatus("initializedViewport")||e)){if("undefined"===typeof f||null===f)f=50;Z.slideTransitionTimeout=window.setTimeout(function(){Z.Viewport.slideTransitionTimeoutHandler("out",b,a,e)},1)}};this.setTourPath=function(b,a){Z.Viewport&&Z.Viewport.getStatus("initializedViewport")&&Z.Viewport.setHotspotPath(b,a)};this.setHotspotPath=function(b,a){Z.Viewport&&Z.Viewport.getStatus("initializedViewport")&&
Z.Viewport.setHotspotPath(b,a)};this.setAnnotationPath=function(b,a){Z.Viewport&&Z.Viewport.getStatus("initializedViewport")&&Z.Viewport.setAnnotationPath(b,a)};this.setTrackingPath=function(b,a){Z.Viewport&&Z.Viewport.getStatus("initializedViewport")&&Z.Viewport.setTrackingPath(b,a)};this.initializePageExitEventHandler=function(){Z.Utils.addEventListener(window,"beforeunload",b)};this.getStatus=function(b){b=Z.Utils.arrayIndexOfObjectValue(oa,"state",b);return-1==b?!1:oa[b].status};this.setStatus=
function(b,a){var e=!1,f=Z.Utils.arrayIndexOfObjectValue(oa,"state",b);-1==f?(e=a,oa[oa.length]={state:b,status:a}):(!oa[f].status&&a&&(e=!0),oa[f].status=a);e&&(Z.Utils.validateCallback(b),M.validateViewerReady(b))};this.validateViewerStatus=function(b){var a=!0;if(Z.imageSet)for(var e=0,f=Z.imageSetLength;e<f;e++)if(!Z["Viewport"+e.toString()].getStatus(b)){a=!1;break}a&&(a=b.indexOf("Viewport"),-1!=a&&(b=b.substring(0,a)),M.setStatus(b+"Viewer",!0))};this.validateViewerReady=function(b){b=Z.Viewport&&
Z.Viewport&&Z.Viewport.getStatus("initializedViewport")&&("unconverted"==Z.tileSource||Z.Viewport.getStatus("precacheLoadedViewport")&&Z.Viewport.getStatus("backfillLoadedViewport")&&Z.Viewport.getStatus("backfillDrawnViewport"))&&Z.Viewport.getStatus("displayLoadedViewport")&&Z.Viewport.getStatus("displayDrawnViewport");var a=!Z.hotspots||Z.Viewport&&Z.Viewport.getStatus("hotspotsLoadedViewport"),e=!Z.annotations||Z.Viewport&&Z.Viewport.getStatus("annotationsLoadedViewport")&&(!Z.annotationPanelVisible||
Z.Viewport.getStatus("annotationPanelInitializedViewport")),f=0==Z.ToolbarVisible||Z.Toolbar&&Z.Toolbar.getInitialized(),g=!Z.NavigatorVisible||Z.Navigator&&Z.Navigator.getInitialized(),k=!Z.GalleryVisible||Z.Gallery&&Z.Gallery.getInitialized(),m=!Z.RulerVisible||Z.Ruler&&Z.Ruler.getInitialized(),q=!Z.imageSet||Z.Viewer&&Z.Viewer.getStatus("initializedViewer")&&("unconverted"==Z.tileSource||Z.Viewer.getStatus("precacheLoadedViewer")&&Z.Viewer.getStatus("backfillLoadedViewer")&&Z.Viewer.getStatus("backfillDrawnViewer"))&&
Z.Viewer.getStatus("displayLoadedViewer")&&Z.Viewer.getStatus("displayDrawnViewer"),I=!Z.imageSet||!Z.hotspots||Z.Viewer&&Z.Viewer.getStatus("hotspotsLoadedViewer"),t=!Z.imageSet||!Z.annotations||Z.Viewer&&Z.Viewer.getStatus("annotationsLoadedViewer")&&(!Z.annotationPanelVisible||Z.Viewer.getStatus("annotationPanelInitializedViewer"));(b=b&&a&&e&&f&&g&&k&&m&&q&&I&&t)&&Z.Viewer.setStatus("readyViewer",!0);return b};this.createVirtualPointer=function(){if(Ca){var b=Ca.width,f=Ca.height,g=Z.viewerW/
2+100,I=Z.viewerH-200,J=Ca.cloneNode(!1);J.width=b;J.height=f;T=Z.Utils.createContainerElement("div","piC","inline-block","absolute","hidden",b+"px",f+"px",g+"px",I+"px","none","0px","transparent none","0px","0px","normal");T.appendChild(J);Z.ViewerDisplay.appendChild(T);T.setAttribute("title",Z.Utils.getResource("z398"));T.style.zIndex=(Z.baseZIndex+32).toString();Z.Utils.addEventListener(T,"mousedown",e);Z.Utils.addEventListener(T,"touchstart",m);Z.Utils.addEventListener(T,"touchmove",k);Z.Utils.addEventListener(T,
"touchend",t);Z.Utils.addEventListener(T,"touchcancel",q);Z.Utils.addEventListener(J,"contextmenu",Z.Utils.preventDefault);Z.Utils.addEventListener(J,"mousedown",Z.Utils.preventDefault)}else Ca=new Image,Ca.url=bb,Ca.onload=M.createVirtualPointer,Ca.onerror=a,Ca.src=bb};this.setVirtualPointerVisibility=function(b){T&&(T.style.display=b?"inline-block":"none")};this.setVirtualPointerSizeAndPosition=function(b,a,e,f,g){if(T){if("undefined"===typeof b||null===b)b=Ca.width;if("undefined"===typeof a||null===
a)a=Ca.height;"undefined"!==typeof e&&null!==e&&!isNaN(e)||"undefined"!==typeof T.style.left&&null!==T.style.left||(e=Z.viewerW/2+100);"undefined"!==typeof f&&null!==f&&!isNaN(f)||"undefined"!==typeof T.style.top&&null!==T.style.top||(f=Z.viewerH-200);"undefined"!==typeof g&&null!==g&&(f=Z.Viewport.z478(e,f),e=f.x,f=f.y);T.style.width=b+"px";T.style.height=a+"px";T.firstChild.width=b;T.firstChild.height=a;T.style.left=e+"px";T.style.top=f+"px"}};this.prez581s=function(){if(Z.Viewer.getStatus("readyViewer")){Z.Utils.showMessage(Z.Utils.getResource("ALERT_PRELOADINGIMAGE-DATA"),
!1,Z.messageDurationLong,"center");for(var b=0,a=Z.imageSetLength;b<a;b++)Z["Viewport"+b.toString()].prez581s(!0)}};this.syncComparisonViewport=function(b){if(Z.syncComparison&&Z.Viewport&&Z.Viewport0&&Z.Viewport0.getStatus("initializedViewport")&&Z.Viewport1&&Z.Viewport1.getStatus("initializedViewport")){var a=Z.Viewport.getViewportID(),e=0==a?Z.Viewport0:Z.Viewport1,f=0==a?Z.Viewport1:Z.Viewport0;if(b)a=e.getCoordinatesFull(!0),f.setView(a.x,a.y,a.z,a.r,null,null);else if(b=e.getCoordinatesDisplayFull(),
f.setViewNoUpdate(b.cLeft,b.cTop,b.vWidth,b.vHeight,b.vLeft,b.vTop,b.bWidth,b.bHeight,b.bLeft,b.bTop,b.cRotation),a=0==a?Z.Navigator2:Z.Navigator)"stop"!=Z.zooming?a.syncToViewport():(b=new Z.Utils.Point(parseFloat(b.cLeft),parseFloat(b.cTop)),f=f.calculateCurrentCenterCoordinates(b,Z.imageZ,Z.imageR),a.z658(f))}};this.syncOverlayViewports=function(b,a){var e=Z["Viewport"+(Z.imageSetLength-1).toString()];if(Z.overlays&&e&&e.getStatus("initializedViewport"))if(b)for(var f=e.getCoordinatesFull(!0),
e=0,g=Z.imageSetLength-1;e<g;e++)a!=e&&Z["Viewport"+e.toString()].setView(f.x,f.y,f.z,f.r,null,null);else for(f=e.getCoordinatesDisplayFull(),e=0,g=Z.imageSetLength-1;e<g;e++)Z["Viewport"+e.toString()].setViewNoUpdate(f.cLeft,f.cTop,f.vWidth,f.vHeight,f.vLeft,f.vTop,f.bWidth,f.bHeight,f.bLeft,f.bTop,f.cRotation)};this.parseImageSetXML=function(b,a){Z.Utils.arrayClear(Y);Z.Utils.arrayClear(pa);Z.imageSetListPosition=Z.Utils.getResource("DEFAULT_IMAGESETLISTPOSITION");var e=Z.Utils.getResource("DEFAULT_IMAGESETLISTSOURCE");
Z.imageSetListTitle=Z.Utils.getResource("UI_IMAGESETLISTTITLE");Z.imageSetStart=parseInt(Z.Utils.getResource("UI_IMAGESETSTART"),10);Z.imageSetLoop="1"==Z.Utils.getResource("UI_IMAGESETLOOP");Z.sliderImageSetVisible="1"==Z.Utils.getResource("UI_IMAGESETSLIDER");var f=b.getElementsByTagName("SETUP")[0];if(f){var g=f.getAttribute("CHOICELIST");Z.Utils.stringValidate(g)&&(Z.imageSetListPosition=g);g=f.getAttribute("LISTSOURCE");Z.Utils.stringValidate(g)&&(e=g);g=f.getAttribute("LISTTITLE");Z.Utils.stringValidate(g)&&
(Z.imageSetListTitle=g);g=f.getAttribute("HOTSPOTPATH");Z.Utils.stringValidate(g)&&(Z.imageSetHotspotPath=g,Z.hotspotFileShared=!0);g=f.getAttribute("ANNOTATIONPATH");Z.Utils.stringValidate(g)&&(Z.imageSetAnnotationPath=g,Z.annotationFileShared=!0);g=f.getAttribute("TRACKINGPATH");Z.Utils.stringValidate(g)&&(Z.imageSetTrackingPath=g,Z.trackingFileShared=!0);g=f.getAttribute("IMAGELISTPATH");Z.Utils.stringValidate(g)&&(Z.imageSetImageListPath=g,Z.imageListFileShared=!0);g=f.getAttribute("START");Z.Utils.stringValidate(g)&&
(Z.imageSetStart=parseInt(g,10)-1);g=f.getAttribute("LOOP");Z.Utils.stringValidate(g)&&(Z.imageSetLoop="1"==g);g=f.getAttribute("SLIDER");Z.Utils.stringValidate(g)&&(Z.sliderImageSetVisible="1"==g);Z.overlays&&(g=f.getAttribute("INITIALVISIBILITY"),Z.overlaysInitialVisibility=Z.Utils.stringValidate(g)?"1"==g||"true"==g:"1"==Z.Utils.getResource("DEFAULT_OVERLAYSVISIBLE"));Z.animation&&(g=f.getAttribute("AXIS"),Z.animationAxis=Z.Utils.stringValidate(g)?g:null!==Z.animationAxis?Z.animationAxis:Z.Utils.getResource("DEFAULT_ANIMATIONAXIS"),
g=f.getAttribute("ANIMATOR"),Z.animator=Z.Utils.stringValidate(g)?g:null!==Z.animator?Z.animator:Z.Utils.getResource("DEFAULT_ANIMATOR"),g=f.getAttribute("FLIP"),Z.animationFlip=Z.Utils.stringValidate(g)?"1"==g:null!==Z.animationFlip?Z.animationFlip:"1"==Z.Utils.getResource("DEFAULT_ANIMATIONFLIP"));Z.comparison&&(Z.initialSync="1"==Z.Utils.getResource("DEFAULT_COMPARISONINITIALSYNC"),Z.syncComparison="1"==Z.Utils.getResource("DEFAULT_COMPARISONSYNC"),g=f.getAttribute("INITIALSYNC"),Z.Utils.stringValidate(g)&&
(Z.initialSync="1"==g,Z.initialSync||(Z.syncComparison=!1)),f=f.getAttribute("SYNCVISIBLE"),Z.syncVisible=Z.Utils.stringValidate(f)?"1"==f:"1"==Z.Utils.getResource("DEFAULT_COMPARISONSYNCVISIBLE"))}Z.overlays&&(g=b.createElement("OVERLAY"),g.setAttribute("MEDIA",Z.imagePath),g.setAttribute("NAME","Base Image"),f=b.getElementsByTagName("OVERLAY"),b.documentElement.insertBefore(g,f[0]));for(var f=b.getElementsByTagName("animation"==a||"comparison"==a?"IMAGE":"overlay"==a?"OVERLAY":"SLIDE"),g=0,k=f.length;g<
k;g++){var m=new R(f[g],g);Y[Y.length]=m;var q="NAME"==e?m.name:m.media.substring(m.media.lastIndexOf("/")+1,m.media.length);pa[pa.length]={text:q,value:m.internalID}}Z.animationFlip&&(Y.reverse(),pa.reverse());Z.comparison&&(e=Y[0],f=Y[1],e.initialX!=f.initialX||e.initialY!=f.initialY||e.initialZoom!=f.initialZoom||e.minX!=f.minX||e.maxX!=f.maxX)&&(Z.initialSync=!1);Z.imageSetLength=Y.length;Z.comparison||Z.overlays||(m=Z.imageSetListPosition,e=Z.imageSetListTitle,f=pa,g="0"==m?"hidden":"visible",
k=parseInt(Z.Utils.getResource("DEFAULT_IMAGESETLISTWIDTH"),10),m=U(m,k,Z.viewerW,Z.viewerH),"undefined"===typeof fa||null===fa?(fa=new Z.Utils.createSelectElement("imageSetList",e,f,k,m.x,m.y,null,g,P,"change"),Z.ViewerDisplay.appendChild(fa),e=Z.Utils.stringValidate(Z.imageSetListTitle)&&"none"!=Z.imageSetListTitle?1:0,fa.selectedIndex=e):Z.Utils.arrayClear(f),fa.style.zIndex=(Z.baseZIndex+24).toString());G(Y)};z619Delayed=function(){for(var b=0,a=Z.imageSetLength;b<a;b++){var e=Z["Viewport"+b.toString()];
e.getStatus("backfillPrecachedViewport")||e.z619(!0)}};this.viewportChange=function(b){"stop"!=b?("forward"==b?Z.Viewer.viewportNext():Z.Viewer.viewportPrior(),Z.animation&&(Z.viewportChangeTimeout=window.setTimeout(function(){Z.Viewer.viewportChange(b)},10))):Z.viewportChangeTimeout&&(window.clearTimeout(Z.viewportChangeTimeout),Z.viewportChangeTimeout=null)};this.viewportPrior=function(b){b="undefined"===typeof b||null===b?0:Math.round(b);var a=Z.imageSetLength-1;b=Z.viewportCurrentID-(1-b);0>b&&
(Z.imageSetLoop?(b<-a&&(b=-(-b%a)),0>b&&(b+=a+1)):b=0);M.viewportSelect(b)};this.viewportNext=function(b){b="undefined"===typeof b||null===b?0:Math.round(b);var a=Z.imageSetLength-1;b=Z.viewportCurrentID+(1+b);b>a&&(b=Z.imageSetLoop?b%(a+1):a);M.viewportSelect(b)};this.viewportSelect=function(b,a){var e=Z.mouseIsDown||Z.buttonIsDown||Z.keyIsDown,f=null===Z.Viewport;if("undefined"===typeof b||null===b)b=0;b=Math.abs(b);if(b!=Z.viewportCurrentID||!e){var g=b.toString(),k=Z["Viewport"+g],m=k==Z.viewportCurrent;
"undefined"===typeof k||m&&!f&&e||(e=Z.viewportCurrentID.toString(),f=Z.viewportCurrent,Z.viewportCurrent=k,Z.viewportCurrentID=b,Z.comparison||Z.viewportCurrent.setVisibility(!0),Z.Viewport=Z.viewportCurrent,m||Z.comparison||Z.overlays||f.setVisibility(!1),Z.Utils.validateCallback("viewportChanged"),Z.comparison&&Z.Viewport0&&Z.Viewport1&&(k=document.getElementById("viewportContainer0"),m=document.getElementById("viewportContainer1"),Z.Utils.swapZIndices(k,m),k=b,Z.Navigator&&Z.Navigator.setSelected(0==
k),Z.Navigator2&&Z.Navigator2.setSelected(1==k)),Z.viewportCurrent&&Z.viewportCurrent.getStatus("initializedViewport")&&(k=Z.viewportCurrent.getViewW()!=Z.viewerW||Z.viewportCurrent.getViewH()!=Z.viewerH,Z.comparison||(k?Z.viewportCurrent.syncViewportResize(Z.imageX,Z.imageY,Z.imageZ,Z.imageR):(0!=Z.imageR&&Z.viewportCurrent.rotateStep(Z.imageR,!1,!0),Z.viewportCurrent.updateView(!0))),f&&(Z.hotspotFileShared||Z.annotationFileShared)&&(k=f.getHotspots())&&Z.viewportCurrent.setHotspots(k),!Z.comparison&&
Z.Navigator&&Z.Navigator.getInitialized()&&0<Z.navigatorVisible&&Z.Navigator.setViewport(Z.viewportCurrent),!Z.comparison&&Z.Gallery&&Z.Gallery.getInitialized()&&0<Z.galleryVisible&&(Z.Gallery.setViewport(Z.viewportCurrent),Z.Gallery.syncGalleryToViewport(slideCurrentInList)),Z.Toolbar&&Z.Toolbar.getInitialized()&&(0<Z.toolbarVisible&&8!=Z.toolbarVisible&&(Z.comparison||"undefined"!==typeof a&&null!==a&&a||Z.Toolbar.syncSliderToViewportImageSet(Z.viewportCurrentID),Z.Toolbar.setViewport(Z.viewportCurrent)),
Z.annotationFileShared&&(f=f.getCurrentLabel().internalID,Z.viewportCurrent.setCurrentLabel(f,!0),Z.viewportCurrent.setEditModeLabel(Z.labelMode,!0,null,!0)),Z.annotationPanelVisibleState&&(Z.annotationFileShared?Z.Toolbar.setVisibilityAnnotationPanel(!0,"0"):(Z.Toolbar.setVisibilityAnnotationPanel(!1,e),Z.Toolbar.setVisibilityAnnotationPanel(!0,g))),Z.trackingPanelVisibleState&&(Z.trackingFileShared?Z.Toolbar.setVisibilityTrackingPanel(!0,"0"):(Z.Toolbar.setVisibilityTrackingPanel(!1,e),Z.Toolbar.setVisibilityTrackingPanel(!0,
g))),Z.userPanelVisibleState&&(Z.Toolbar.setVisibilityUserPanel(!1),Z.Toolbar.setVisibilityUserPanel(!0))),Z.hotspots&&(w(!1,e),w(!0,g)),fa&&(fa.blur(),g=Z.Utils.stringValidate(Z.imageSetListTitle)&&"none"!=Z.imageSetListTitle?1:0,fa.selectedIndex=Z.viewportCurrentID+g)))}};this.setVisibilityHotspotChoiceList=function(b,a){w(b,a)};this.sizeAndPositionImageSetList=function(){if(fa){var b=parseInt(Z.Utils.getResource("z65"),10)+2;"markup"==Z.editMode&&(b-=20,fa.style.width=b+"px");b=U(Z.imageSetListPosition,
b,Z.viewerW,Z.viewerH);fa.style.left=b.x+"px";fa.style.top=b.y+"px"}};this.setVisibilityImageSetChoiceList=function(b){var a=document.getElementById("imageSetList");a&&(a.style.visibility=b?"visible":"hidden")};this.syncToolbarImageSetSliderToViewport=function(b){Z.ToolbarDisplay&&Z.Toolbar.getInitialized()&&Z.imageSet&&Z.sliderImageSetVisible&&(b=Z["Viewport"+b].getZoom(),Z.Toolbar.syncSliderToViewportZoom(b))};this.initializeViewerKeyEventListeners=function(b){b?(Z.Utils.addEventListener(document,
"keydown",J),Z.Utils.addEventListener(document,"keyup",J)):(Z.Utils.removeEventListener(document,"keydown",J),Z.Utils.removeEventListener(document,"keyup",J))};this.initializeViewerKeyDefaultListeners=function(b){b?(Z.Utils.addEventListener(document,"keydown",Z.Utils.preventDefault),Z.Utils.addEventListener(document,"keyup",Z.Utils.preventDefault)):(Z.Utils.removeEventListener(document,"keydown",Z.Utils.preventDefault),Z.Utils.removeEventListener(document,"keyup",Z.Utils.preventDefault))};this.viewerEventsHandler=
function(b){ba(b)};this.autoResizeViewer=function(){W()};this.resizeViewer=function(b,a,e){M.setSizeAndPosition(b,a,0,0,!1);Z.viewportCurrent.resizeViewport(Z.imageX,Z.imageY,e,Z.imageR);if(Z.comparison){var f=0==Z.viewportCurrent.getViewportID()?Z.Viewport1:Z.Viewport0;f&&(f.setSizeAndPosition(b,a,0,0,!1),f.resizeViewport(Z.imageX,Z.imageY,e,Z.imageR))}};this.z586=function(b){Z.mouseWheelIsDown=!1;Z.mouseWheelCompleteTimer&&(window.clearTimeout(Z.mouseWheelCompleteTimer),Z.mouseWheelCompleteTimer=
null,Z.zooming="stop",Z.viewportCurrent.updateView(!0))}};
Z.ZoomifyViewport=function(b,a,e,f,g,m){function k(h){h=Z.Utils.getResource("DEFAULT_IMAGELISTXMLFILE");".xml"!=Z.imageListPath.toLowerCase().substring(Z.imageListPath.length-4,Z.imageListPath.length)&&(Z.imageListPath=Z.imageListPath+"/"+h);XMLPath=Z.Utils.cacheProofPath(Z.imageListPath);"undefined"!==typeof XMLPath&&Z.Utils.stringValidate(XMLPath)&&(h=new Z.NetConnector,h.loadXML(XMLPath,b))}function t(h){h=Z.Utils.getResource("z209");".xml"!=Z.slidePath.toLowerCase().substring(Z.slidePath.length-
4,Z.slidePath.length)&&(Z.slidePath=Z.slidePath+"/"+h);XMLPath=Z.Utils.cacheProofPath(Z.slidePath);"undefined"!==typeof XMLPath&&Z.Utils.stringValidate(XMLPath)&&(h=new Z.NetConnector,h.loadXML(XMLPath))}function q(h,b,r,a,e,l,f,g,C,k,m){P();Z.imageW=h;Z.imageH=b;Z.imageCtrX=Z.imageW/2;Z.imageCtrY=Z.imageH/2;Z.imageD=Math.round(Math.sqrt(h*h+b*b));Jf=l;dh=f;eh=g;yh=e;qc=r;rc=a;null!==C&&null!==k&&null!==m&&(Z.sourceMagnification=C,Z.focal=k,Z.quality=m);ba();ka(qa,ra,pg,Re);n.validateXYZDefaults();
Lb>qg?(ic=Ra(Sc,Z.initialZ),Ea&&Yb.scale(ic,ic)):Yb=ud=Ea=null;Ec=Ra(sb,Z.initialZ);ad=Pa=Ra(Da,Z.initialZ);if(Z.useCanvas)try{tb.scale(Pa,Pa)}catch(p){Z.Utils.showMessage(Z.Utils.getResource("ERROR_SCALINGCANVASFORUNCONVERTEDIMAGE"),!1,Z.messageDurationStandard,"center"),console.log("In function initializeViewportContinue scaling canvas:  "+p)}yb&&Sa();Z.screensaver&&(Z.Utils.validateCallback("screensaverStarting"),Z.Utils.functionCallWithDelay(function(){n.tourStart()},750));wa&&(n.setDrawingColor("buttonColor0"+
Ta,!0),(Z.tour||Z.hotspots||Z.annotations)&&Kf(Ta));Z.tracking&&Lf(Ta);Z.virtualPointerVisible&&Z.Viewer.createVirtualPointer();"unconverted"!=Z.tileSource&&n.z619();Eb(Z.initialX,Z.initialY,Z.initialZ,Z.initialR,null,!0);Z.coordinatesVisible&&n.setCoordinatesDisplayVisibility(!0);Z.geoCoordinatesVisible&&Qd();Z.initialFullPage&&n.toggleFullViewMode(!0);Z.Utils.addEventListener(Ua,"mousedown",nb);Z.Utils.addEventListener(Ua,"mousemove",Z.Utils.preventDefault);Z.Utils.addEventListener(Ua,"touchstart",
nb);Z.Utils.addEventListener(Ua,"touchmove",nb);Z.Utils.addEventListener(Ua,"touchend",nb);Z.Utils.addEventListener(Ua,"touchcancel",nb);Z.Utils.addEventListener(Ua,"gesturestart",nb);Z.Utils.addEventListener(Ua,"gesturechange",nb);Z.Utils.addEventListener(Ua,"gestureend",nb);Z.Utils.addEventListener(S,"contextmenu",Z.Utils.preventDefault);Z.Utils.addEventListener(sa,"contextmenu",Z.Utils.preventDefault);yb&&Z.Utils.addEventListener(yb,"contextmenu",Z.Utils.preventDefault);wa&&Z.Utils.addEventListener(wa,
"contextmenu",Z.Utils.preventDefault);n.setStatus("initializedViewport",!0);n.syncViewportRelated();Z.slideshow&&(h=Z.Utils.stringValidate(Z.slideListTitle)&&"none"!=Z.slideListTitle?1:0,"undefined"!==typeof gd&&(gd.selectedIndex=h),gi&&!Z.slideshowPlaying?n.slideshowStart():Z.slideshowPlaying&&n.nextSlide());"multiple"==Z.imagePath&&(h=Z.hotspots?"hotspotsLoadedViewer":Z.annotations?"annotationsLoadedViewer":null,null!==h&&Z.setCallback(h,function(){window.setTimeout(function(){Z.viewportCurrent.z623()},
1500)}))}function G(h,If,r,a,e,l,f,g,C,k,m){n.setStatus("initializedViewport",!1);n.clearAll(!0,!1,!0,!0);Z.imageW=h;Z.imageH=If;Z.imageCtrX=Z.imageW/2;Z.imageCtrY=Z.imageH/2;Z.imageD=Math.round(Math.sqrt(h*h+If*If));Jf=l;dh=f;eh=g;yh=e;qc=r;rc=a;Z.Utils.setParameters(Z.parameters);Z.imageList&&(Z.tileW!=r&&(qc=Z.tileW),Z.tileH!=a&&(rc=Z.tileH));ba();null!==Z.hotspotPath&&(hd=Z.hotspotPath,B=Z.hotspotFolder);null!==Z.annotationPath&&(jd=Z.annotationPath,jc=Z.annotationFolder);U();P();n.validateXYZDefaults();
Lb>qg?(ic=Ra(Sc,Z.initialZ),Yb.restore(),Yb.scale(ic,ic)):Ea=ud=Yb=null;Ec=Ra(sb,Z.initialZ);ad=Pa=Ra(Da,Z.initialZ);Z.useCanvas&&(tb.restore(),tb.scale(Pa,Pa));yb&&Sa();wa&&(n.setDrawingColor("buttonColor0"+Ta,!0),(Z.tour||Z.hotspots||Z.annotations)&&Kf(Ta));Z.virtualPointerVisible&&Z.Viewer.createVirtualPointer();"unconverted"!=Z.tileSource&&n.z619();Z.comparison&&(qa*=2);n.setSizeAndPosition(qa,ra,pg,Re);h="undefined"!==typeof Z.parameters&&null!==Z.parameters&&("undefined"!==typeof Z.parameters.zInitialX||
"undefined"!==typeof Z.parameters.zInitialY||"undefined"!==typeof Z.parameters.zInitialZoom);!Z.comparison&&!Z.overlays||h?Eb(Z.initialX,Z.initialY,Z.initialZ,Z.initialR,null,!0):Eb(Z.priorX,Z.priorY,Z.priorZ,Z.priorR,null,!0);n.setStatus("initializedViewport",!0);(h=0==b?Z.Navigator:Z.Navigator2)&&h.setImage(n.getImagePath());Z.tracking&&Lf(Ta);Z.comparison&&(h=(0==n.getViewportID()?Z.Viewport1:Z.Viewport0).getCoordinatesFull(!0),n.setView(h.x,h.y,h.z,h.r,null,null));n.syncViewportRelated();Z.slideshowPlaying&&
n.nextSlide()}function w(){kb=zb=0;"undefined"!==typeof Zb&&Z.Utils.arrayClear(Zb);"undefined"!==typeof kc&&Z.Utils.arrayClear(kc);"undefined"!==typeof lb&&Z.Utils.arrayClear(lb);"undefined"!==typeof fe&&Z.Utils.arrayClear(fe);"undefined"!==typeof Fa&&Z.Utils.arrayClear(Fa);"undefined"!==typeof Tc&&Z.Utils.arrayClear(Tc);"undefined"!==typeof N&&Z.Utils.arrayClear(N);"undefined"!==typeof x&&Z.Utils.arrayClear(x);"undefined"!==typeof sd&&Z.Utils.arrayClear(sd);"undefined"!==typeof Ma&&Z.Utils.arrayClear(Ma);
"undefined"!==typeof eb&&Z.Utils.arrayClear(eb);"undefined"!==typeof Ld&&Z.Utils.arrayClear(Ld);"undefined"!==typeof Fb&&Z.Utils.arrayClear(Fb);"undefined"!==typeof Tb&&Z.Utils.arrayClear(Tb);"undefined"!==typeof fc&&Z.Utils.arrayClear(fc);"undefined"!==typeof se&&Z.Utils.arrayClear(se);"undefined"!==typeof Rd&&Z.Utils.arrayClear(Rd);"undefined"!==typeof te&&Z.Utils.arrayClear(te);"undefined"!==typeof Sd&&Z.Utils.arrayClear(Sd);"undefined"!==typeof fullImageTilesAllCachedNames&&Z.Utils.arrayClear(fullImageTilesAllCachedNames)}
function R(){Lb=1;sb=Da=0;rg=sg=tg=Gb=!1;"undefined"!==typeof Hb&&Z.Utils.arrayClear(Hb);"undefined"!==typeof lc&&Z.Utils.arrayClear(lc);"undefined"!==typeof Ub&&Z.Utils.arrayClear(Ub);"undefined"!==typeof Na&&Z.Utils.arrayClear(Na);"undefined"!==typeof Qa&&Z.Utils.arrayClear(Qa);"undefined"!==typeof mb&&Z.Utils.arrayClear(mb);"undefined"!==typeof tierTileOffsetsCount&&Z.Utils.arrayClear(tierTileOffsetsCount);"undefined"!==typeof tierTileOffsetChunks&&Z.Utils.arrayClear(tierTileOffsetChunks);"undefined"!==
typeof tierTileOffsetLast&&Z.Utils.arrayClear(tierTileOffsetLast);"undefined"!==typeof ub&&Z.Utils.arrayClear(ub);"undefined"!==typeof tierTileByteCountsCount&&Z.Utils.arrayClear(tierTileByteCountsCount);"undefined"!==typeof tierTileByteCountChunks&&Z.Utils.arrayClear(tierTileByteCountChunks);"undefined"!==typeof tierTileByteCountLast&&Z.Utils.arrayClear(tierTileByteCountLast);"undefined"!==typeof sc&&Z.Utils.arrayClear(sc);"undefined"!==typeof ug&&Z.Utils.arrayClear(ug)}function U(h){if("undefined"===
typeof h||null===h)h=0;h=h.toString();Z.useCanvas&&!Ea&&(zh=Z.Utils.createContainerElement("canvas","oversizeDisplay"+h,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Z.ViewerDisplay.appendChild(zh),Ea=zh,ud=Ea.style);Z.comparison&&!Ah&&(Se=Z.Utils.createContainerElement("div","comparisonMaskContainer"+h,"inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Z.ViewerDisplay.appendChild(Se),
Ah=Se,Bh=Ah.style);Ua||(Uc=Z.Utils.createContainerElement("div","viewportContainer"+h,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Z.comparison?Se.appendChild(Uc):Z.ViewerDisplay.appendChild(Uc),Ua=Uc,ia=Ua.style);S||(zi=Z.Utils.createContainerElement(Z.useCanvas?"canvas":"div","viewportBackfillDisplay"+h,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Uc.appendChild(zi),
S=zi,va=S.style);sa||(Ch=Z.Utils.createContainerElement(Z.useCanvas?"canvas":"div","viewportDisplay"+h,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Uc.appendChild(Ch),sa=Ch,Ka=sa.style);Z.useCanvas&&(kd||(Ai=Z.Utils.createContainerElement("canvas","transitionCanvas","none","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Uc.appendChild(Ai),kd=Ai,Td=kd.style),Z.imageFilters&&(ld||
(vg=Z.Utils.createContainerElement("canvas","imageFilterBackfillCanvas","none","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Uc.appendChild(vg),ld=vg,Te=ld.style),xd||(wg=Z.Utils.createContainerElement("canvas","imageFilterCanvas","none","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Uc.appendChild(wg),xd=wg,xg=xd.style)));Z.watermarks&&!yb&&(Bi=Z.Utils.createContainerElement("div","watermarkDisplay",
"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Uc.appendChild(Bi),yb=Bi,vd=yb.style);Z.maskVisible&&(Z.hotspots||Z.annotations)&&!Ab&&(yg=Z.Utils.createContainerElement("canvas","maskCanvas","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Uc.appendChild(yg),Ab=yg,$b=Ab.style,$b.display="none");h=Z.zoomRectangle||Z.measureVisible||Z.tour&&!Z.screensaver||Z.hotspots||
Z.annotations;var b=Z.useCanvas&&(h||Z.hotspots&&Z.labelIconsInternal),r=Z.useCanvas&&(Z.zoomRectangle||Z.measureVisible||null!==Z.editMode),a=b&&Z.saveImageHandlerProvided;b&&!Kb&&(zg=Z.Utils.createContainerElement("canvas","drawingDisplay","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Uc.appendChild(zg),Kb=zg,Vb=Kb.style);r&&!ob&&(Ag=Z.Utils.createContainerElement("canvas","editingDisplay","inline-block","absolute","visible","1px",
"1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Uc.appendChild(Ag),ob=Ag,mc=ob.style);h&&!wa&&(ge=Z.Utils.createContainerElement("div","hotspotDisplay","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Uc.appendChild(ge),wa=ge,gb=wa.style,Z.Utils.addEventListener(ge,"mousedown",Z.Utils.preventDefault));a&&!ac&&(Bg=Z.Utils.createContainerElement("canvas","savingDisplay","inline-block","absolute","visible","1px",
"1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Uc.appendChild(Bg),ac=Bg,Md=ac.style,Md.display="none");Z.useCanvas||(S.innerHTML="",sa.innerHTML="");yb&&(yb.innerHTML="");wa&&(wa.innerHTML="")}function P(){Z.useCanvas&&(Ea&&(Yb=Ea.getContext("2d")),Fd=S.getContext("2d"),tb=sa.getContext("2d"),Cg=kd.getContext("2d"),Kb&&(Mf=Kb.getContext("2d")),ob&&(db=ob.getContext("2d")),Ab&&(Wa=Ab.getContext("2d")),ac&&(Aa=ac.getContext("2d")),Z.imageFilters&&(Ue=xd.getContext("2d"),Dg=
ld.getContext("2d")))}function ka(h,If,r,a){if("undefined"===typeof r||null===r)r=0;if("undefined"===typeof a||null===a)a=0;Z.viewerW=qa=h;Z.viewerH=ra=If;Z.comparison&&(qa=h/2);Ya=qa*fh;Za=ra*fh;h=Z.imageSet?Dh:"unconverted"==Z.tileSource&&Z.mobileDevice?Eh:"unconverted"==Z.tileSource&&Z.browser==Z.browsers.FIREFOX?Fh:Gh;If=Z.constrainPanStrict?Z.imageW:2*Z.imageW;var e=Z.constrainPanStrict?Z.imageH:2*Z.imageH;Ya>h&&(Ya=h);Za>h&&(Za=h);Ya>If&&(Ya=If);Za>e&&(Za=e);Ya<qa&&(Ya=qa);Za<ra&&(Za=ra);tc=
Z.Utils.roundToFixed(Ya/2,4);zc=Z.Utils.roundToFixed(Za/2,4);bc=Z.Utils.roundToFixed(-((Ya-qa)/2)+r,4);Z.Utils.roundToFixed((Ya-qa)/2+r,4);Mb=Z.Utils.roundToFixed(-((Za-ra)/2)+a,4);Z.Utils.roundToFixed((Za-ra)/2+a,4);Ea&&(Ea.width=qa,Ea.height=ra,ud.width=qa+"px",ud.height=ra+"px",ud.left="0px",ud.top="0px");Z.comparison&&(Ah.width=qa,Ah.height=ra,Bh.width=qa+"px",Bh.height=ra+"px",Bh.left=0==b?"0px":qa+"px",Bh.top="0px");Ua.width=Ya;Ua.height=Za;ia.width=Ya+"px";ia.height=Za+"px";ia.left=bc+"px";
ia.top=Mb+"px";sa.width=Ya;sa.height=Za;Ka.width=Ya+"px";Ka.height=Za+"px";yb&&(yb.width=Ya,yb.height=Za,vd.width=Ya+"px",vd.height=Za+"px");Ab&&(Ab.width=Ya,Ab.height=Za,$b.width=Ya+"px",$b.height=Za+"px");wa&&(wa.width=Ya,wa.height=Za,gb.width=Ya+"px",gb.height=Za+"px",Eg&&(r=parseInt(Z.Utils.getResource("z133"),10),r=Ve(hi,r,qa,ra),Ci.left=r.x+"px",Ci.top=r.y+"px"));Kb&&(Kb.width=Ya,Kb.height=Za,Vb.width=Ya+"px",Vb.height=Za+"px");ob&&(ob.width=Ya,ob.height=Za,mc.width=Ya+"px",mc.height=Za+"px");
ue&&(r=new n.calculateAnnotationPanelDimensions(We,bd,Xe,he),a=n.calculateAnnotationPanelCoords(ii,r.w,r.h,qa,ra),n.sizeAndPositionAnnotationPanel(ve,r.w,r.h,a.x,a.y));Z.imageSet&&Z.Viewer.sizeAndPositionImageSetList();if(Z.useCanvas){Ea&&(Yb.translate(qa/2,ra/2),Yb.save());try{tb.translate(tc,zc)}catch(l){Z.Utils.showMessage(Z.Utils.getResource("ERROR_TRANSLATINGCANVASFORUNCONVERTEDIMAGE"),!1,Z.messageDurationStandard,"center")}tb.save();Ab&&(Wa.translate(tc,zc),Wa.save());Kb&&(Mf.translate(tc,zc),
Mf.save());ob&&(db.translate(tc,zc),db.save())}}function ca(h,b,r){if("ZoomifyImageFile"==Z.tileSource){r=parseFloat(Z.Utils.getResource("z125"));var a=parseFloat(Z.Utils.getResource("z124"));b.loadByteRange(h,r,a,"header")}else if("ZoomifyImageFolder"==Z.tileSource)h=Z.Utils.cacheProofPath(h+"/ImageProperties.xml"),b.loadXML(h,r);else if("ZoomifyPFFFile"==Z.tileSource){var a=Z.Utils.getResource("z125"),e=Z.Utils.getResource("z123");h=h.replace(".","%2E");b.loadXML(Z.tileHandlerPathFull+"?file="+
h+"&requestType=1&begin="+a+"&end="+e,r)}else"IIIFImageServer"==Z.tileSource&&b.loadJSON(h+"/info.json",r)}function J(h,b){R();if("undefined"===typeof n.getStatus)window.setTimeout(function(){J(h,b)},100);else{var r=null,a=null,e=null,l=null,f=null,g=null,C=null,k=null,m=null,p=null,v=null;"ZoomifyImageFolder"==Z.tileSource?(r=parseInt(h.documentElement.getAttribute("WIDTH"),10),a=parseInt(h.documentElement.getAttribute("HEIGHT"),10),f=parseInt(h.documentElement.getAttribute("NUMTILES"),10),parseInt(h.documentElement.getAttribute("NUMIMAGES"),
10),g=parseInt(h.documentElement.getAttribute("VERSION"),10),e=l=parseInt(h.documentElement.getAttribute("TILESIZE"),10)):"ZoomifyPFFFile"==Z.tileSource?(r=parseInt(h.documentElement.getAttribute("WIDTH"),10),a=parseInt(h.documentElement.getAttribute("HEIGHT"),10),e=l=parseInt(h.documentElement.getAttribute("TILESIZE"),10),f=parseInt(h.documentElement.getAttribute("NUMTILES"),10),parseInt(h.documentElement.getAttribute("NUMIMAGES"),10),g=parseInt(h.documentElement.getAttribute("VERSION"),10),C=parseInt(h.documentElement.getAttribute("HEADERSIZE"),
10),k=1060+C):"IIIFImageServer"==Z.tileSource?(r=parseInt(h.documentElement.getAttribute("WIDTH"),10),a=parseInt(h.documentElement.getAttribute("HEIGHT"),10),f=g=e=l=null):"ImageServer"==Z.tileSource&&(r=parseInt(h.documentElement.getAttribute("WIDTH"),10),a=parseInt(h.documentElement.getAttribute("HEIGHT"),10),l=h.documentElement.getAttribute("TILESIZE"),e=Z.Utils.stringValidate(l)?parseInt(l,10):qc,l=Z.Utils.stringValidate(l)?parseInt(l,10):rc,m=h.documentElement.getAttribute("MAGNIFICATION"),m=
Z.Utils.stringValidate(m)?parseInt(m,10):Z.sourceMagnification,p=h.documentElement.getAttribute("FOCAL"),p=Z.Utils.stringValidate(p)?parseInt(p,10):Z.focal,v=h.documentElement.getAttribute("QUALITY"),v=Z.Utils.stringValidate(v)?parseInt(v,10):Z.quality);null!==Z.tileW&&(e=Z.tileW);null!==Z.tileH&&(l=Z.tileH);if("ZoomifyImageFolder"==Z.tileSource||"IIIFImageServer"==Z.tileSource||"ImageServer"==Z.tileSource){if(null===e||isNaN(e))e=qc;if(null===l||isNaN(l))l=rc;if(null===f||isNaN(f))f=1}!isNaN(r)&&
0<r&&!isNaN(a)&&0<a&&!isNaN(e)&&0<e&&!isNaN(l)&&0<l&&0<f?n.getStatus("initializedViewport")?G(r,a,e,l,f,g,C,k,m,p,v,b):q(r,a,e,l,f,g,C,k,m,p,v,b):"ZoomifyImageFolder"==Z.tileSource?Z.Utils.showMessage(Z.Utils.getResource("z252"),!1,Z.messageDurationStandard,"center"):Z.Utils.showMessage(Z.Utils.getResource("z250"),!1,Z.messageDurationStandard,"center")}}function ba(){if("unconverted"==Z.tileSource)Hb[0]=Z.imageW,lc[0]=Z.imageH,Ub[0]=1,Na[0]=1,Lb=Qa[0]=1;else if("ZoomifyImageFile"==Z.tileSource)for(var h=
Lb-1;0<=h;h--)Ub[h]=Math.ceil(Hb[h]/qc),Na[h]=Math.ceil(lc[h]/rc),Qa[h]=Ub[h]*Na[h];else{for(var h=Z.imageW,b=Z.imageH;h>qc||b>rc;)h/=2,b/=2,Lb++;for(var h=Z.imageW,b=Z.imageH,r=0,a=Lb-1;0<=a;a--)Hb[a]=h,lc[a]=b,Ub[a]=Math.ceil(Hb[a]/qc),Na[a]=Math.ceil(lc[a]/rc),Qa[a]=Ub[a]*Na[a],h/=2,b/=2,r+=Qa[a];if(r!=yh&&("ZoomifyImageFolder"==Z.tileSource||"ZoomifyImageFile"==Z.tileSource||"ZoomifyPFFFile"==Z.tileSource)){Hb=[];lc=[];Ub=[];Na=[];Lb=1;h=Z.imageW;b=Z.imageH;for(r=2;h>qc||b>rc;)h=Math.floor(Z.imageW/
r),b=Math.floor(Z.imageH/r),r*=2,h%2&&h++,b%2&&b++,Lb++;h=Z.imageW;b=Z.imageH;r=2;tileCounter=0;for(a=Lb-1;0<=a;a--)Ub[a]=Math.floor(h/qc),h%qc&&Ub[a]++,Na[a]=Math.floor(b/rc),b%rc&&Na[a]++,Qa[a]=Ub[a]*Na[a],tileCounter+=Qa[a],Hb[a]=h,lc[a]=b,h=Math.floor(Z.imageW/r),b=Math.floor(Z.imageH/r),r*=2,h%2&&h++,b%2&&b++;h=tileCounter;h!=yh&&Z.Utils.showMessage(Z.Utils.getResource("z254"),!1,Z.messageDurationStandard,"center")}}}function I(h,b){for(var r=Ub[h]-1,a=Na[h]-1,e=0;e<=r;e++)for(var l=0;l<=a;l++)b[b.length]=
h+"-"+e+"-"+l}function W(h){if(h){h=n.z542(sb);Z.Utils.arrayClear(kc);Z.Utils.arrayClear(lb);b=h.l;for(r=h.r;b<=r;b++)for(a=h.t,e=h.b;a<=e;a++)l=sb+"-"+b+"-"+a,lb[lb.length]=l,kc[kc.length]=l;bb(kc,Q,"simple","image-backfill")}else{Z.Utils.arrayClear(fe);Z.Utils.arrayClear(x);Z.Utils.arrayClear(sd);Z.Utils.arrayClear(Fa);h=n.z542();for(var b=h.l,r=h.r;b<=r;b++)for(var a=h.t,e=h.b;a<=e;a++){var l=Da+"-"+b+"-"+a;fe[fe.length]=l;Fa[Fa.length]=l}if(n.getStatus("initializedViewport")&&0<Zb.length&&(Da==
we||Da==xe||Da==ie))for(b=0,r=Zb.length;b<r;b++)(a=Zb[b])&&a.t==Da&&a.c>=h.l&&a.c<=h.r&&a.r>=h.t&&a.r<=h.b&&(sd[sd.length]=a.name,x[x.length]=a,e=Z.Utils.arrayIndexOf(Fa,a.name),-1!=e&&(Fa=Z.Utils.arraySplice(Fa,e,1)));b=0;for(r=Tc.length;b<r;b++)(a=Tc[b])&&a.t==Da&&a.c>=h.l&&a.c<=h.r&&a.r>=h.t&&a.r<=h.b&&(e=Z.Utils.arrayIndexOf(sd,a.name),-1==e&&(sd[sd.length]=a.name,x[x.length]=a),a=Z.Utils.arrayIndexOf(Fa,a.name),-1!=a&&(Fa=Z.Utils.arraySplice(Fa,a,1)));if(0!=kb){b=0;for(r=Ma.length;b<r;b++)a=
Ma[b],a.alpha=1;Z.Utils.arrayClear(Ma);Z.Utils.arrayClear(eb)}zb=Fa.length;n.traceDebugValues("tilesToDisplay",null,fe.length,fe);n.traceDebugValues("tilesInCache",null,sd.length,sd);n.traceDebugValues("tilesToLoad",null,Fa.length,Fa)}}function M(h,b,r,a,e,l){e||Z.Utils.clearDisplay(h);if("canvasCopy"==a)Z.Utils.clearDisplay(sa),tb.restore(),tb.save(),tb.scale(1,1),tb.drawImage(kd,-tc,-zc),tb.restore(),tb.save(),tb.scale(Pa,Pa);else{e=n.z542(b);l=[];if(null===r)for(var f=0,g=x.length;f<g;f++)l[f]=
x[f];else if(0<r.length)for(f=0,g=r.length;f<g;f++){var C=r[f];C&&C.t==b&&(b==sb&&!Gb||C.c>=e.l&&C.c<=e.r&&C.r>=e.t&&C.r<=e.b)&&(l[l.length]=r[f])}if(0<l.length)if(n.traceDebugValues("z622-"+h.id,null,null,l),"centerOut"==a)for(f=Math.floor(l.length/2),g=l.length;f<g;f++)ha(h,b,l[f]),l.length-f-1!=f&&ha(h,b,l[l.length-f-1]);else for(f=0,g=l.length;f<g;f++)ha(h,b,l[f]);else n.traceDebugValues("No cached tiles in view");n.traceDebugValues("blankLine")}}function oa(h,b){var r=n.z542();syncTransitionCanvas();
for(var a=0,e=b.length;a<e;a++){var l=b[a];l&&l.t==h&&(h==sb||l.c>=r.l&&l.c<=r.r&&l.r>=r.t&&l.r<=r.b)&&ha(kd,h,l)}}function ea(h){Wb=null;Wb=new Image;Wb.onload=E;Wb.onerror=jb;Wb.src=h}function E(){if("undefined"!==typeof Wb){var h=Z.Utils.createContainerElement("div","testImageContainer","inline-block","absolute","hidden",qa+"px",ra+"px","0px","0px","none","0px","transparent none","0px","0px","normal",null,!0);h.appendChild(Wb);h.removeChild(Wb);var h=null,h=Wb.width,b=Wb.height;0!=h&&0!=b?q(h,
b,h,b,null,null,null,null,null,null,null):window.setTimeout(function(){E()},100)}else window.setTimeout(function(){E()},100)}function jb(){Z.Utils.showMessage(Z.Utils.getResource("ERROR_UNCONVERTEDIMAGEPATHINVALID"))}function bb(h,b,r,a){var e="undefined"!==typeof a&&null!==a?"-"+a:"";if(0<h.length){n.traceDebugValues("z577"+e,null,null,h);e=(new Date).getTime();if("centerOut"==r&&4<h.length){var l=[],f=0,g=0,C=0,k=0;for(r=0;r<h.length;r++){var m=h[r];m&&(m=new T(m,a),l[l.length]=m,0==r?(f=g=m.c,
C=k=m.r):(m.c<f?f=m.c:m.c>g&&(g=m.c),m.r<C?C=m.r:m.r>k&&(k=m.r)))}h=f+(g-f)/2;a=C+(k-C)/2;for(r=0;r<l.length;r++)l[r].r-=a,l[r].c-=h;l.sort(function(h,b){return h.r*h.r+h.c*h.c-(b.r*b.r+b.c*b.c)});for(r=0;r<l.length;r++)l[r].r+=a,l[r].c+=h,ta(l[r],e,b)}else for(r=0,l=h.length;r<l;r++)if(m=h[r])m=new T(m,a),ta(m,e,b);n.traceDebugValues("blankLine")}else n.traceDebugValues("z577"+e,"No new tiles requested")}function T(h,b){this.imagePath=Z.imagePath;this.name=h;var r=new Ca(h);this.t=r.t;this.c=r.c;
this.r=r.r;this.x=Math.floor(this.c*qc);this.y=Math.floor(this.r*rc);this.image=null;this.alpha=0;this.url=n.formatTilePath(this.t,this.c,this.r,b);this.style=this.elmt=this.loadTime=null}function Ca(h){this.t=parseInt(h.substring(0,h.indexOf("-")),10);this.c=parseInt(h.substring(h.indexOf("-")+1,h.lastIndexOf("-")),10);this.r=parseInt(h.substring(h.lastIndexOf("-")+1),10)}function Y(h,b,r){r=b+r*Ub[h];b=8*r+mb[h];r=Math.floor(r/cd);var a=r*cd,a=a+cd>Qa[h]?8*(Qa[h]-a):sj;this.chunkStart=mb[h]+r*sj;
this.chunkEnd=this.chunkStart+a;this.offsetStartInChunk=b-this.chunkStart;this.chunkID=h.toString()+"-"+r.toString()}function fa(h,b,r){r=b+r*Ub[h];b=4*r+ub[h];r=Math.floor(r/cd);var a=r*cd,a=a+cd>Qa[h]?4*(Qa[h]-a):gh;this.chunkStart=ub[h]+r*gh;this.chunkEnd=this.chunkStart+a;this.bcStartInChunk=b-this.chunkStart;this.chunkID=h.toString()+"-"+r.toString()}function pa(h,b,r){ug[h]=r;r=Lc.replace(".","%2E");h=Z.tileHandlerPathFull+"?file="+r+"&requestType=2&begin="+h+"&end="+b;(new Z.NetConnector).loadXML(h)}
function L(h,b){for(var r=0,a=Fb.length;r<a;r++){var e=Fb[r].split(",");e[0]==h&&e[5]==b&&(void 0!==e[4]&&"image-display"==e[4]?Tb[Tb.length]=e[1]+"-"+e[2]+"-"+e[3]:"image-backfill"==e[4]&&(fc[fc.length]=e[1]+"-"+e[2]+"-"+e[3]),Fb=Z.Utils.arraySplice(Fb,r,1),r--,a--)}0<Tb.length&&(Tb.sort(),Tb=Z.Utils.arrayUnique(Tb),n.traceDebugValues("z637",Tb),r=n.getStatus("imageSaving")?gc:ib,aa(Tb,r,"simple","image-display"));0<fc.length&&(fc.sort(),fc=Z.Utils.arrayUnique(fc),r=n.getStatus("imageSaving")?cc:
Q,aa(fc,r,"simple","image-backfill"))}function aa(h,b,r,a){r=(new Date).getTime();for(var e=0,l=h.length;e<l;e++){var f=null;if(f=h[e])h=Z.Utils.arraySplice(h,e,1),e--,l--,index=Z.Utils.arrayIndexOfObjectValue(Ld,"name",f),-1!=index?(f=Ld[index],Ld=Z.Utils.arraySplice(Ld,index,1),f.url=n.formatTilePath(f.t,f.c,f.r,a)):f=new T(f,a),null!=f&&-1==f.url.indexOf("NaN")?(n.traceDebugValues("z577Retry",f.name+"  "+f.url),ta(f,r,b)):-1==f.url.indexOf("NaN")&&Z.Utils.showMessage(Z.Utils.getResource("z280-ZIF")+
f.name+".jpg",!1,Z.messageDurationShort,"center",!1)}}function ta(h,b,r){var a=h.name;if("z647"==h.url.substr(0,8)){Db(h);b=h.name;r=Z.Utils.arrayIndexOf(Fa,b);-1!=r&&(Fa=Z.Utils.arraySplice(Fa,r,1));if("ZoomifyImageFile"==Z.tileSource||"ZoomifyPFFFile"==Z.tileSource)r=Z.Utils.arrayIndexOf(Tb,b),-1!=r&&(Tb=Z.Utils.arraySplice(Tb,r,1));Ma[Ma.length]=h;eb[eb.length]=b}else if("offsetLoading"==h.url)-1==Z.Utils.arrayIndexOfObjectValue(Ld,"name",a)&&(Ld[Ld.length]=h),n.traceDebugValues("z581DelayForOffset",
a);else if("offsetLoading"!=h.url){var e;if(r==ib||r==gc)e="image-display";else if(r==Q||r==cc)e="image-backfill";var l=h.t==we&&tg||h.t==xe&&sg||h.t==ie&&rg;"image-display"==e&&l||(h.loadTime=b,n.traceDebugValues("z581-"+e,a),Hh.loadImage(h.url,Z.Utils.createCallback(null,r,h),e,h))}}function ib(h,b){if(h&&b&&h.imagePath==Z.imagePath){h.image=b;var r=h.name,a=Z.Utils.arrayIndexOf(Fa,r);if(-1!=a){Fa=Z.Utils.arraySplice(Fa,a,1);Db(h);if(Z.preloadVisible&&!Z.imageSet&&h.t!=Da){Z.Utils.showMessage(Z.Utils.getResource("ALERT_PRELOADING-STORINGORDRAWINGTILES")+
"   Tile: "+r,!1,Z.messageDurationShort/10,"center");h.alpha=1;return}-1==Z.Utils.arrayIndexOf(eb,r)&&(eb[eb.length]=r,Ma[Ma.length]=h);Z.preloadVisible&&Z.imageSet&&n.getViewportID()!=Z.viewportCurrentID&&(r=(n.getViewportID()+1).toString()+" of "+Z.imageSetLength.toString()+"   Tile: "+r,Z.Utils.showMessage(Z.Utils.getResource("ALERT_PRELOADING-STORINGORDRAWINGTILES")+r,!1,Z.messageDurationShort/10,"center"));Nf||(Nf=window.setInterval(Ba,50));kb=Fa.length;0==kb&&(Z.useCanvas&&0<Of&&(Fg?(oa(Da,
Tc),M(sa,Da,Tc,"canvasCopy",!1,"4. Updating view: all new tiles loaded"),window.setTimeout(function(){Z.Utils.clearDisplay(kd)},200),Fg=!1):M(sa,Da,Tc,"centerOut",!1,"4. Updating view: all new tiles loaded")),Z.imageFilters&&(n.cacheCanvasImage(),Gg&&n.applyImageFilter(null,null,"canvas")),ja(),zb=0);n.traceDebugValues("onTileLoad",h.name,h.loadTime);n.updateProgress(zb,kb)}hh==Ye+Ud&&n.setStatus("displayLoadedViewport",!0)}else"undefined"!==typeof b&&null!==b||console.log(Z.Utils.getResource("z280")+
h.name+".jpg")}function Q(h,b){if(h&&b&&h.imagePath==Z.imagePath){h.image=b;var r=h.name;Zb[Zb.length]=h;var a=Z.Utils.arrayIndexOf(kc,r);-1!=a&&(kc=Z.Utils.arraySplice(kc,a,1));if("ZoomifyImageFile"==Z.tileSource||"ZoomifyPFFFile"==Z.tileSource)r=Z.Utils.arrayIndexOf(fc,r),-1!=r&&(fc=Z.Utils.arraySplice(fc,r,1));h.alpha=1;h.t==sb&&ha(S,sb,h);n.traceDebugValues("onTileBackfillPrecache",h.name);Nb==vb&&n.setStatus("precacheLoadedViewport",!0);n.traceDebugValues("z599",h.name);ih<=0+V&&n.setStatus("backfillLoadedViewport",
!0);h.t==Da&&ib(h,b)}else if("undefined"===typeof b||null===b)Z.mobileDevice?console.log(Z.Utils.getResource("z280")+h.name+".jpg"):Z.Utils.showMessage(Z.Utils.getResource("z280")+h.name+".jpg")}function Ba(){for(var h=0,b=0,r=Ma.length;b<r;b++){var a=Ma[b];a.t==Da?(Z.fadeIn&&0!=Pf&&1>a.alpha+Pf?a.alpha+=Pf:(a.alpha=1,h++),ha(sa,Da,a),h>=r&&(window.clearInterval(Nf),Nf=null,b=r)):(Ma=Z.Utils.arraySplice(Ma,b,1),eb=Z.Utils.arraySplice(eb,b,1),a=Z.Utils.arrayIndexOf(Fa,a.name),-1!=a&&(Fa=Z.Utils.arraySplice(Fa,
a,1)),r--)}}function ha(h,b,r){if("z647"!=r.url.substr(0,8)&&0!=r.image.width&&0!=r.image.height){var a=r.x,e=r.y;b=$a(b,1);ic=Ra(Sc,n.getZoom());var l=8<ic;Z.useCanvas?(h==sa||h==kd||h==S&&Gb?(a-=Z.imageX*b,e-=Z.imageY*b):h==Ea&&(Gb||l)&&(l=n.calculateCurrentCenterCoordinates(),a-=l.x*b,e-=l.y*b),ma(h,r,a,e)):(h==sa?(a-=Z.imageX*b-tc/Pa,e-=Z.imageY*b-zc/Pa,b=Pa):b=Ec,r.elmt||(r.elmt=Z.Utils.createContainerElement("img"),r.elmt.onmousedown=Z.Utils.preventDefault,Z.Utils.addEventListener(r.elmt,"contextmenu",
Z.Utils.preventDefault),r.elmt.src=r.url,r.style=r.elmt.style,r.style.position="absolute",Z.Utils.renderQuality(r,Z.renderQuality),Z.cssTransformsSupported&&(r.style[Z.cssTransformProperty+"Origin"]="0px 0px")),r.elmt.parentNode!=h&&h.appendChild(r.elmt),l=r.style,l.display="none",Z.cssTransformsSupported?l[Z.cssTransformProperty]=["matrix(",(r.image.width/r.elmt.width*b).toFixed(8),",0,0,",(r.image.height/r.elmt.height*b).toFixed(8),",",(a*b).toFixed(8),Z.cssTransformNoUnits?",":"px,",(e*b).toFixed(8),
Z.cssTransformNoUnits?")":"px)"].join(""):(l.width=r.image.width*b+"px",l.height=r.image.height*b+"px",l.left=a*b+"px",l.top=e*b+"px"),l.display="inline-block",Z.Utils.setOpacity(r,r.alpha),2!=Z.debug&&4!=Z.debug||Xa(h,r.name,a,e,b));h==sa?(n.traceDebugValues("z507",r.name),hh==Qf&&n.setStatus("displayDrawnViewport",!0)):(n.traceDebugValues("displayBackfillTile",r.name),ih<=Di&&n.setStatus("backfillDrawnViewport",!0))}}function ma(h,b,r,a){var e=h.getContext("2d");Z.alphaSupported&&1>b.alpha&&"transitionCanvas"!=
h.id&&-1==h.id.indexOf("oversizeDisplay")&&"savingDisplay"!=h.id&&!Gg&&(e.globalAlpha=b.alpha);if(Z.imageFilters&&0!=Ga.length)if(Gg)-1!=h.id.indexOf("oversizeDisplay")?e=Yb:-1!=h.id.indexOf("viewportDisplay")?e=Ue:-1!=h.id.indexOf("viewportBackfillDisplay")?e=Dg:-1!=h.id.indexOf("transitionCanvas")?e=Ue:"savingDisplay"==h.id&&(e=Aa),e.drawImage(b.image,r,a);else{var l;l=b.name;var f=Z.Utils.getImageData(b.image);l=jh(l,f);Z.Utils.clearDisplay(kd);Cg.putImageData(l,0,0);e.drawImage(kd,r,a)}else e.drawImage(b.image,
r,a);Z.alphaSupported&&1>b.alpha&&"transitionCanvas"!=h.id&&"oversizeDisplay"!=h.id&&"savingDisplay"!=h.id&&!Gg&&(e.globalAlpha=1);2!=Z.debug&&4!=Z.debug||Xa(h,b.name,r,a,Pa)}function Xa(h,b,r,a,e){if(Z.useCanvas){var l=parseInt(Z.Utils.getResource("z129"),10),f=parseInt(Z.Utils.getResource("z160"),10),g=parseInt(Z.Utils.getResource("z151"),10),l=Math.round(l*e),f=2*(l<f?f:l>g?g:l);h=h.getContext("2d");h.font=f+"px verdana";h.textAlign="left";h.textBaseline="top";f=qc*e/2;e=rc*e/2;h.fillStyle="#FFFFFF";
h.fillText(b,r+f,a+e);h.fillStyle="#000000";h.fillText(b,r+f+1,a+e+1)}else{var l=parseInt(Z.Utils.getResource("z129"),10),f=parseInt(Z.Utils.getResource("z160"),10),g=parseInt(Z.Utils.getResource("z151"),10),l=Math.round(l*e),C=2*(l<f?f:l>g?g:l),f=parseInt(Z.Utils.getResource("z130"),10)*e,g=Z.Utils.createContainerElement("div","tileNameTextBox","inline-block","absolute","hidden","auto","auto","1px","1px","none","0px","transparent none","0px",f+"px","nowrap"),l=document.createTextNode(b);g.appendChild(l);
h.appendChild(g);Z.Utils.setTextNodeStyle(l,"white","verdana",C+"px","none","normal","normal","normal","normal","1em","center","none");var n=Z.Utils.createContainerElement("div","tileNameTextBox2","inline-block","absolute","hidden","auto","auto","1px","1px","none","0px","transparent none","0px",f+"px","nowrap"),k=document.createTextNode(b);n.appendChild(k);h.appendChild(n);Z.Utils.setTextNodeStyle(k,"black","verdana",C+"px","none","normal","normal","normal","normal","1em","center","none");f=parseFloat(g.style.padding);
h=parseFloat(Z.Utils.getElementStyleProperty(g,"width"));isNaN(h)&&(h=parseFloat(Z.Utils.getResource("z115")),h=parseFloat(g.style.fontSize)/h,h=Math.round(parseFloat(b.length*h)));b=qc*e/2;C=rc*e/2;g.style.left=r*e+(b-h/2-f)+"px";g.style.top=a*e+C+"px";n.style.left=1+r*e+(b-h/2-f)+"px";n.style.top=1+a*e+C+"px";Z.Utils.addEventListener(g,"contextmenu",Z.Utils.preventDefault);Z.Utils.disableTextInteraction(l);Z.Utils.addEventListener(n,"contextmenu",Z.Utils.preventDefault);Z.Utils.disableTextInteraction(k)}}
function Kc(h,b){var r=$a(b,1),a=Math.floor(h.l*r/qc),e=Math.floor(h.r*r/qc),l=Math.floor(h.t*r/rc),r=Math.floor(h.b*r/rc);0>a&&(a=0);e>Ub[b]-1&&(e=Ub[b]-1);0>l&&(l=0);r>Na[b]-1&&(r=Na[b]-1);this.l=a;this.r=e;this.t=l;this.b=r}function dc(h,b,r,a,e,l,f,g,C){"undefined"===typeof g||null===g?(this.l=h+r/f,this.r=h+a/f,this.t=b+e/f,this.b=b+l/f):(f=qa/Hb[g],g=ra/lc[g],this.l=h+r*f,this.r=h+a*f,this.t=b+e*g,this.b=b+l*g);C&&(this.l-=256-this.l%256,this.r+=256-this.r%256,this.t-=256-this.t%256,this.b+=
256-this.b%256)}function $a(h,b){return Hb[h]/Z.imageW*b}function Ra(h,b){return b/(Hb[h]/Z.imageW)}function ua(h,b,r,a,e){if(Z.constrainPan){r="undefined"!==typeof r&&null!==r?r:Z.imageZ;a="undefined"!==typeof a&&null!==a?Math.round(a):Math.round(Z.imageR);0>a&&(a+=360);var l=h,f=b;"image"==e&&(b=n.convertImageCoordsToViewportEdgeCoords(h,b,r,a),h=b.x,b=b.y);var g=Z.imageW,C=Z.imageH,k=Math.round(g*r),m=Math.round(C*r);Math.round(g*r/2);Math.round(C*r/2);var g=qa,C=ra,p=Math.round(.1*qa),v=Math.round(.1*
ra),u=Math.round(.5*qa),q=Math.round(.5*ra),y,D;y=u-bc+(Z.imageCtrX-Z.imageX)*r+h;D=q-Mb+(Z.imageCtrY-Z.imageY)*r+b;var O=y+k/2,I=D-m/2,J=y+k/2,ja=D+m/2,t=y-k/2,B=D+m/2,A=Z.Utils.getPositionRotated(y-k/2,D-m/2,y,D,a),O=Z.Utils.getPositionRotated(O,I,y,D,a),J=Z.Utils.getPositionRotated(J,ja,y,D,a),B=Z.Utils.getPositionRotated(t,B,y,D,a);y=Math.min(A.x,O.x,J.x,B.x);D=Math.min(A.y,O.y,J.y,B.y);t=Math.max(A.x,O.x,J.x,B.x);A=Math.max(A.y,O.y,J.y,B.y);t-y>g||!Z.constrainPanStrict?3==Z.constrainPanLimit?
h=0<y?h-y:t<g?h-(t-g):h:2==Z.constrainPanLimit?h=y>u?h-(y-u):t<u?h-(t-u):h:1==Z.constrainPanLimit&&(h=y>9*p?h-(y-9*p):t<p?h-(t-p):h):h=y>u-k/2?h-(y-(u-k/2)):t<u+k/2?h-(t-(u+k/2)):h;A-D>C||!Z.constrainPanStrict?3==Z.constrainPanLimit?b=0<D?b-D:A<C?b-(A-C):b:2==Z.constrainPanLimit?b=D>q?b-(D-q):A<q?b-(A-q):b:1==Z.constrainPanLimit&&(b=D>9*v?b-(D-9*v):A<v?b-(A-v):b):b=D>q-m/2?b-(D-(q-m/2)):A<q+m/2?b-(A-(q+m/2)):b;"image"==e&&(b=n.convertViewportEdgeCoordsToImageCoords(h,b,r,a),h=b.x,b=b.y);if(h!=l||
b!=f)h=Math.round(h),b=Math.round(b),Z.Utils.validateCallback("panConstrained")}return new Z.Utils.Point(h,b)}function pb(h){h>Z.maxZ?(h=Z.maxZ,Z.Utils.validateCallback("zoomConstrainedMax")):h<Z.minZ&&(h=Z.minZ,Z.Utils.validateCallback("zoomConstrainedMin"));return h}function fb(h){Z.rotationFree||(h=90*Math.round(Math.abs(h)/90)*Z.Utils.getSign(h));-360>=h?h+=360:360<=h&&(h-=360);return h}function Va(){Z.comparison&&0!=Ta?Z.Navigator2&&Z.Navigator2.syncToViewport():Z.Navigator&&Z.Navigator.syncToViewport()}
function ja(h){if(h)for(;Vd.length>Of;)Vd=Z.Utils.arraySplice(Vd,0,1);else for(;N.length>Of&&Tc.length>Of;)N=Z.Utils.arraySplice(N,0,1),Tc=Z.Utils.arraySplice(Tc,0,1)}function Db(h){if(0<Of){var b=Z.Utils.arrayIndexOf(N,h.name);-1!=b&&(N=Z.Utils.arraySplice(N,b,1),Tc=Z.Utils.arraySplice(Tc,b,1));N[N.length]=h.name;Tc[Tc.length]=h}}function u(){window.clearTimeout(Ze);Ze=null;td=((new Date).getTime()-tilesTimeStart)/1E3;var h=kh*td,h=md&&Ud<h,b=md&&Ud>=Rf;if(2==Z.debug||3==Z.debug)Z.Utils.trace("View validation-time elapsed: "+
td),0<md&&(h?Z.Utils.trace("Loading delay - re-calling updateView"):b?Z.Utils.trace("Display delay - re-calling updateView"):Z.Utils.trace("Progress slow, resetting timer")),Z.Utils.trace(""),Z.traces.scrollTop=Z.traces.scrollHeight,Z.Utils.traceTileSpeed(td,kh);0<md?Hg<Tj?h||b?(Hg+=1,n.updateView(!0)):Ze=window.setTimeout(u,ji):console.log(Z.Utils.getResource("ERROR_VALIDATEVIEW")):(Hg=0,Z.Utils.validateCallback("viewUpdateComplete"),Z.Utils.validateCallback("viewUpdateCompleteGetLabelIDs"))}function Sa(){Sf=
new Image;tj=parseFloat(Z.Utils.getResource("z234"));Sf.url=Z.watermarkPath;Sf.onload=Mc;Sf.onerror=Vc;Sf.src=Z.watermarkPath}function Mc(){if(yb)for(var h=parseFloat(Z.Utils.getResource("z235")),b=parseFloat(Z.Utils.getResource("z237")),r=parseFloat(Z.Utils.getResource("z236")),a=n.getZoom(),e=(Z.imageW*a-yb.width)/2,l=(Z.imageH*a-yb.height)/2,f=(Z.imageW/2-Z.imageX)*a,g=(Z.imageH/2-Z.imageY)*a,C=a<h?h:a,b=Math.round(Z.imageW/b),r=Math.round(Z.imageH/r),h=n.z541(),k=Sf.width*C,C=Sf.height*C,m=0,
p=0,v=1;v<=b;v++)for(var u=1;u<=r;u++){var D=Math.round(Z.imageW/(b+1)*v),y=Math.round(Z.imageH/(r+1)*u);if(D>h.l&&D<h.r&&y>h.t&&y<h.b){var q=Math.round(D*a-k/2-e+f),O=Math.round(y*a-C/2-l+g);if(4E3<Z.imageW){y=p+100;if(q<m+100&&O<y)continue;m=q;p=O}var y=k,D=C,t=O,O=Sf.cloneNode(!1);Z.Utils.setOpacity(O,tj);O.width=y;O.height=D;y=Z.Utils.createContainerElement("div","wiC","inline-block","absolute","hidden",y+"px",D+"px",q+"px",t+"px","none","0px","transparent none","0px","0px","normal");y.appendChild(O);
yb.appendChild(y);Z.Utils.addEventListener(O,"contextmenu",Z.Utils.preventDefault);Z.Utils.addEventListener(O,"mousedown",Z.Utils.preventDefault)}}}function Vc(){Z.Utils.showMessage(Z.Utils.getResource("z292")+this.url)}function Wd(h){if(ac&&Md&&Aa){var b=new n.HotspotsAllBoundingBoxInPixels,r=Math.min(b.l,0),a=Math.min(b.t,0),e=Math.max(Z.imageW,b.r),b=Math.max(Z.imageH,b.b),l=2*parseInt(Z.Utils.getResource("DEFAULT_SAVEIMAGELABELMARGIN"),10);if(0>r||0>a||e>Z.imageW||b>Z.imageH)r-=0>r?0:l,a-=0>a?
0:l,e+=e>Z.imageW?0:l,b+=b>Z.imageH?0:l;var f,g;if(h){var l=h?1:n.getZoom(),C=e-r,k=b-a;h=C*l;l*=k;f=h+"px";g=l+"px";a=b-Z.imageH+a;r=parseInt(C/2-(e-Z.imageW+r)/2,10);e=parseInt(k/2-a/2,10)}else h=qa,l=ra,f=qa+"px",g=ra+"px",r=qa/2,e=ra/2;ac.width=h;ac.height=l;Md.width=f;Md.height=g;Aa.restore();Aa.save();Aa.translate(r,e);Z.Utils.colorCanvas(ac,Z.saveImageBackColor)}}function ye(h){Z.setCallback("loadingTilesFullImageComplete",function(){yd(h)});Z.Utils.showMessage(Z.Utils.getResource("ALERT_IMAGESAVELOADINGDATA"),
!1,"none","center");zd()}function zd(){for(var h=Lb-1;1E4<Hb[h]||1E4<Hb[h];)h--;var b=h>Tf?ie:h>Uf?xe:we;w();I(b,Rd);for(var b=0,r=Rd.length;b<r;b++)Fa[Fa.length]=Rd[b];I(h,Sd);b=0;for(r=Sd.length;b<r;b++)Fa[Fa.length]=Sd[b];zb=Fa.length;bb(Rd,cc,"simple","image-backfill");bb(Sd,gc,"simple","image-display")}function cc(h,b){gc(h,b,!0)}function gc(h,b,r){h&&b?(h.image=b,b=Z.Utils.arrayIndexOf(Fa,h.name),Fa=Z.Utils.arraySplice(Fa,b,1),r?(Rd[Rd.length]=h.name,se[se.length]=h):(Sd[Sd.length]=h.name,te[te.length]=
h),kb=Fa.length,0==kb&&(zb=0),n.traceDebugValues("onTileLoad",h.name,h.loadTime),n.updateProgress(zb,kb),Z.Utils.showMessage(Z.Utils.getResource("ALERT_IMAGESAVERECEIVINGTILE")+h.name,!1,"none","center"),0==zb&&Z.Utils.validateCallback("loadingTilesFullImageComplete")):"undefined"!==typeof b&&null!==b||console.log(Z.Utils.getResource("z280")+h.name+".jpg")}function yd(h){if(Aa)if(h)if("unconverted"!=Z.tileSource){for(var b=Lb-1;1E4<Hb[b]||1E4<Hb[b];)b--;var r=b>Tf?ie:b>Uf?xe:we;Aa.save();var a=Ra(r,
1);Aa.scale(a,a);a=-Hb[r]/2;r=-lc[r]/2;Aa.translate(a,r);a=0;for(r=se.length;a<r;a++){var e=se[a];Z.Utils.showMessage(Z.Utils.getResource("ALERT_IMAGESAVEDRAWINGTILE")+e.name,!1,"none","center");ma(ac,e,e.x,e.y)}Aa.restore();Aa.save();a=Ra(b,1);Aa.scale(a,a);a=-Hb[b]/2;r=-lc[b]/2;Aa.translate(a,r);a=0;for(r=te.length;a<r;a++)e=te[a],Z.Utils.showMessage(Z.Utils.getResource("ALERT_IMAGESAVEDRAWINGTILE")+e.name,!1,"none","center"),ma(ac,e,e.x,e.y);Aa.restore()}else Aa.drawImage(Wb,-Wb.width/2,-Wb.height/
2);else Aa.save(),Aa.scale(Ec,Ec),b=$a(sb,1),a=-(Z.imageX-Z.imageW/2)*b,r=-(Z.imageY-Z.imageH/2)*b,Aa.translate(a,r),Gb?Aa.drawImage(Ea,-Ea.width/2,-Ea.height/2,Ea.width,Ea.height):Aa.drawImage(S,-S.width/2,-S.height/2,S.width,S.height),Aa.restore(),Aa.save(),Aa.drawImage(sa,-sa.width/2,-sa.height/2,sa.width,sa.height),Aa.restore();h&&(b=1/n.getZoom(),Aa.scale(b,b));Ig=0;if(wa&&gb&&"inline-block"==gb.display&&0<A.length)for(b=new Ib,a=0,r=A.length;a<r;a++){Z.Utils.showMessage(Z.Utils.getResource("ALERT_IMAGESAVEDRAWINGANNOTATION")+
A[a].name,!1,"none","center");var e=A[a],l=e.media,f=e.mediaType,g=-1!=l.indexOf("/circle.")||-1!=l.indexOf("/square.")||-1!=l.indexOf("/triangle.")||-1!=l.indexOf("/arrowDownLeft.")||-1!=l.indexOf("/arrowDownRight.")||-1!=l.indexOf("/arrowUpLeft.")||-1!=l.indexOf("/arrowUpRight.")||-1!=l.indexOf("/arrowUp.")||-1!=l.indexOf("/arrowDown.")||-1!=l.indexOf("/arrowLeft.")||-1!=l.indexOf("/arrowRight.")||-1!=l.indexOf("/lineHorizontal.")||-1!=l.indexOf("/lineVertical."),C="counter"==l||"circle"==l||"square"==
l||"triangle"==l||"arrowDown"==l||"arrowDownLeft"==l||"arrowLeft"==l||"arrowUpLeft"==l||"arrowUp"==l||"arrowUpRight"==l||"arrowRight"==l||"arrowDownRight"==l||"lineHorizontal"==l||"lineVertical"==l,k=l&&"polygon"==l;"counter"!=f&&"icon"!=f||l&&"External Graphics File"==l||!(C||g&&Z.labelIconsInternal)?k?Ad(e,null,null,null,!0,h,a):lh(e,null,null,null,!0,h,a):($e(e,b,null,null,!0,h),nd(e,b,null,null,null,!0))}else Z.Utils.validateCallback("drawLabelsOnCanvasComplete")}function lh(h,b,r,a,e,l,f){if(h.visibility&&
(Z.Utils.stringValidate(h.media)||"text"==h.mediaType)){var g=new Ib,C=h.z/100;targetCtx=Aa;if("text"==h.mediaType)targetCtx.save(),r=l?Z.imageW/2:Z.imageX,a=l?Z.imageH/2:Z.imageY,hCaption=dd(h,g),wa.appendChild(hCaption),f=new ze(hCaption,C,!0),wa.removeChild(hCaption),targetCtx.translate((h.x-f.w/2/C-r)*Z.imageZ,(h.y-f.h/2/C-a)*Z.imageZ),nd(h,g,b,null,null,!0),targetCtx.restore(),e&&Nc();else{var k=document.createElement("img");k.src=h.media;k.onload=function(){var r=n.getZoom();targetCtx.save();
targetCtx.translate((h.x-k.width/2/C-(l?Z.imageW/2:Z.imageX))*Z.imageZ,(h.y-k.height/2/C-(l?Z.imageH/2:Z.imageY))*Z.imageZ);targetCtx.save();var a=Pa/ad,og=h.xScale/100/C/a*r,r=h.yScale/100/C/a*r;1!=og&&1!=r&&targetCtx.scale(og,r);og=this.rotation;"undefined"!==typeof og&&null!==og&&0!=og&&targetCtx.rotate(og*Math.PI/180);targetCtx.drawImage(k,0,0);targetCtx.restore();nd(h,g,b,null,null,!0);targetCtx.restore();e&&Nc()}}}}function nd(h,b,r,a,e,l,f){if(Z.Utils.stringValidate(h.caption)||Z.Utils.stringValidate(h.captionHTML)||
"measure"==h.mediaType){var g=0,C=0;e=a=0;l=100;var n=20,k=0,m=0,p=Z.captionBoxes||"measure"==h.mediaType;captionFontWeight="normal";var v=!p,u=null,y=Aa,D=Z.Utils.stringValidate(h.textColor)?h.textColor:Ae,q=Z.Utils.stringValidate(h.backColor)?h.backColor:Ei;Z.captionBoxes&&Z.captionsColorsDefault&&"measure"!=h.mediaType&&(D=h.backColor,background=h.textColor);D==q&&("#ffffff"==D?q="#000000":"#000000"==D&&(q="#ffffff"));var O=h.z/100,g=b.currentZ/O;"polygon"!=h.media&&(0<b.constrainedScaleMin&&g<
b.constrainedScaleMin&&(g=b.constrainedScaleMin),0<b.constrainedScaleMax&&g>b.constrainedScaleMax&&(g=b.constrainedScaleMax));u=new Wc(h,b,r);C=u.w;r=u.h;u=dd(h,b);wa.appendChild(u);b=af(u,h.captionPosition,C,r,Z.imageR,K==h.internalID&&"polygon"==h.media);C=h.media;r=-1!=C.indexOf("/circle.")||-1!=C.indexOf("/square.")||-1!=C.indexOf("/triangle.")||-1!=C.indexOf("/arrowDownLeft.")||-1!=C.indexOf("/arrowDownRight.")||-1!=C.indexOf("/arrowUpLeft.")||-1!=C.indexOf("/arrowUpRight.")||-1!=C.indexOf("/arrowUp.")||
-1!=C.indexOf("/arrowDown.")||-1!=C.indexOf("/arrowLeft.")||-1!=C.indexOf("/arrowRight.")||-1!=C.indexOf("/lineHorizontal.")||-1!=C.indexOf("/lineVertical.");if("External Graphics File"!=C&&("counter"==C||"circle"==C||"square"==C||"triangle"==C||"arrowDown"==C||"arrowDownLeft"==C||"arrowLeft"==C||"arrowUpLeft"==C||"arrowUp"==C||"arrowUpRight"==C||"arrowRight"==C||"arrowDownRight"==C||"lineHorizontal"==C||"lineVertical"==C||r&&Z.labelIconsInternal)||C&&"polygon"==C)m=f?Z.imageH/2:Z.imageY,k=(h.x-(f?
Z.imageW/2:Z.imageX)-h.iW/2)*g,m=(h.y-m-h.iH/2)*g;g=b.x+k;C=b.y+m;f=parseFloat(u.style.padding);r=u.style.fontSize;var t=parseInt(Z.Utils.getResource("z160"),10);parseInt(r,10)<t+2&&!p&&(captionFontWeight="bold");p&&(n=new ze(u,O,!0),g+=f,C+=f,a=b.x+k,e=b.y+m,l=n.w+2*f,n=n.h);wa.removeChild(u);p&&(y.beginPath(),y.rect(a,e,l,n),y.fillStyle=q,y.fill(),y.lineWidth=1,y.strokeStyle="#696969",y.stroke());"undefined"!==typeof h.captionHTML&&Z.Utils.stringValidate(h.captionHTML)?Z.Utils.showMessage(Z.Utils.getResource("ALERT_IMAGESAVEHTMLCAPTIONUNSUPPORTED"),
!1,Z.messageDurationShort,"center"):"undefined"!==typeof h.caption&&Z.Utils.stringValidate(h.caption)&&(y.textBaseline="hanging",v&&(y.fillStyle=q,y.font=captionFontWeight+"  "+r+" Verdana",y.fillText(h.caption,g+1,C+1)),y.fillStyle=D,y.font=captionFontWeight+"  "+r+" Verdana",y.fillText(h.caption,g,C))}}function Wc(h,b,r,a){var e,l,f=h.z/100;a=(a?1:b.currentZ)/f;a=a<b.constrainedScaleMin?b.constrainedScaleMin:a>b.constrainedScaleMax?b.constrainedScaleMax:a;"text"==h.mediaType?(b=new Ib,f=h.z/100,
hCaption=dd(h,b),wa.appendChild(hCaption),b=new ze(hCaption,f,!0),wa.removeChild(hCaption),e=b.w,l=b.h):"icon"==h.mediaType?(e=h.iW,l=h.iH):"polygon"==h.mediaType&&(b=Z.Utils.polygonDimensions(h.polygonPts,r),e=b.x,l=b.y);e=h.xScale/100*e*a;l=h.yScale/100*l*a;this.w=e;this.h=l}function Nc(){Ig++;Ig==A.length&&Z.Utils.validateCallback("drawLabelsOnCanvasComplete")}function Qd(){if(Z.Utils.stringValidate(Z.geoCoordinatesPath)){var h=Z.Utils.cacheProofPath(Z.geoCoordinatesPath);(new Z.NetConnector).loadXML(h)}}
function Kf(h){if(Z.Utils.stringValidate(hd))if(Z.simplePath)dataPath=hd;else{if(".xml"!=hd.toLowerCase().substring(hd.length-4,hd.length)){var b=Z.tour?Z.Utils.getResource("z227"):Z.Utils.getResource("z135");hd=hd+"/"+b}dataPath=Z.Utils.cacheProofPath(hd)}else Z.Utils.stringValidate(jd)&&(Z.simplePath?dataPath=jd:(".json"!=jd.toLowerCase().substring(jd.length-5,jd.length)&&".xml"!=jd.toLowerCase().substring(jd.length-4,jd.length)&&(jd=jd+"/"+Z.Utils.getResource("z69")),dataPath=Z.Utils.cacheProofPath(jd)));
"undefined"!==typeof dataPath&&Z.Utils.stringValidate(dataPath)?(vpIDTemp=Z.imageSet?h:null,h=new Z.NetConnector,-1!=dataPath.toLowerCase().indexOf(".xml")?h.loadXML(dataPath,vpIDTemp):-1!=dataPath.toLowerCase().indexOf(".json")&&h.loadJSON(dataPath,vpIDTemp)):"string"===typeof Z.annotationXMLText&&Z.Utils.stringValidate(Z.annotationXMLText)?(h=Z.Utils.xmlConvertTextToDoc(Z.annotationXMLText),n.parseAnnotationsXML(h)):"undefined"!==typeof Z.annotationJSONObject&&"object"===typeof Z.annotationJSONObject&&
null!==Z.annotationJSONObject?(h=Z.Utils.jsonConvertObjectToXMLText(Z.annotationJSONObject),h=Z.Utils.xmlConvertTextToDoc(h),n.parseAnnotationsXML(h)):Z.measureVisible&&null==Z.editMode&&(h=Z.Utils.xmlConvertTextToDoc("<ZAS></ZAS>"),n.parseAnnotationsXML(h))}function bf(h,b){var r=Z.Utils.arrayIndexOfObjectValue(Ac,"media",h.media);if(-1!=r){var a=new Image;a.src=h.media;var e=a.width,a=a.height;Ac[r].element&&(h.image=Ac[r].element.cloneNode(!1));h.iW=e;h.iH=a;b&&(r=new Ib,uc(h,r))}else Ac[Ac.length]=
{media:h.media,element:null},r=(new Date).getTime(),e=h.media,uj.loadImage(e,Z.Utils.createCallback(null,ga,e,r),"hotspot")}function Jg(h){var b;b=h.getAttribute("ID");this.id=""!=b?b:Xb("labelExternal");b=h.getAttribute("INTERNALID");this.internalID=isNaN(parseInt(b))?Oa?Xb("hotspot"):Xb("label"):b;this.poiID=h.getAttribute("POIID");b=h.getAttribute("NAME");this.name=""!=b?b:this.id;this.mediaType=h.getAttribute("MEDIATYPE");this.media=h.getAttribute("MEDIA");this.image=null;b=parseFloat(h.getAttribute("X"));
this.x=isNaN(b)?0:b;b=parseFloat(h.getAttribute("Y"));this.y=isNaN(b)?0:b;b=parseFloat(h.getAttribute("ZOOM"));this.z=isNaN(b)?-1:b;b=parseFloat(h.getAttribute("XSCALE"));this.xScale=isNaN(b)?100:b;b=parseFloat(h.getAttribute("YSCALE"));this.yScale=isNaN(b)?100:b;b=parseFloat(h.getAttribute("RADIUS"));this.radius=isNaN(b)?null:b;b=this.media;var r=this.mediaType,a=!1,e=!1;b&&(a=-1!=b.indexOf("/circle.")||-1!=b.indexOf("/square.")||-1!=b.indexOf("/triangle.")||-1!=b.indexOf("/arrowDownLeft.")||-1!=
b.indexOf("/arrowDownRight.")||-1!=b.indexOf("/arrowUpLeft.")||-1!=b.indexOf("/arrowUpRight.")||-1!=b.indexOf("/arrowUp.")||-1!=b.indexOf("/arrowDown.")||-1!=b.indexOf("/arrowLeft.")||-1!=b.indexOf("/arrowRight.")||-1!=b.indexOf("/lineHorizontal.")||-1!=b.indexOf("/lineVertical."),e="counter"==b||"circle"==b||"square"==b||"triangle"==b||"arrowDown"==b||"arrowDownLeft"==b||"arrowLeft"==b||"arrowUpLeft"==b||"arrowUp"==b||"arrowUpRight"==b||"arrowRight"==b||"arrowDownRight"==b||"lineHorizontal"==b||
"lineVertical"==b);"counter"!=r&&"icon"!=r||b&&"External Graphics File"==b||!(e||a&&Z.labelIconsInternal)?this.iH=this.iW=null:(this.iW=this.radius?2*this.radius:vj,this.iH=this.radius?2*this.radius:wj);b=parseFloat(h.getAttribute("ZMIN"));this.zMin=isNaN(b)?0:b;b=parseFloat(h.getAttribute("ZMAX"));this.zMax=isNaN(b)?0:b;b=parseFloat(h.getAttribute("ROTATION"));this.rotation=isNaN(b)?0:b;this.clickURL=h.getAttribute("CLICKURL");this.urlTarget=h.getAttribute("URLTARGET");b=h.getAttribute("ROLLOVER");
this.rollover="1"==b||"true"==b;this.caption=h.getAttribute("CAPTION");this.comment=h.getAttribute("COMMENT");this.tooltip=h.getAttribute("TOOLTIP");this.user=h.getAttribute("USER");this.initials=h.getAttribute("INITIALS");this.date=h.getAttribute("DATE");this.textColor=Z.Utils.stringValidateColorValue(h.getAttribute("TEXTCOLOR"));this.backColor=Z.Utils.stringValidateColorValue(h.getAttribute("BACKCOLOR"));this.lineColor=Z.Utils.stringValidateColorValue(h.getAttribute("LINECOLOR"));this.fillColor=
Z.Utils.stringValidateColorValue(h.getAttribute("FILLCOLOR"));b=h.getAttribute("TEXTVISIBLE");this.textVisible="false"!=b&&"0"!=b&&Z.captionTextVisible;b=h.getAttribute("BACKVISIBLE");this.backVisible="false"!=b&&"0"!=b&&Z.captionBackVisible;b=h.getAttribute("LINEVISIBLE");this.lineVisible="false"!=b&&"0"!=b&&Z.polygonLineVisible;b=h.getAttribute("FILLVISIBLE");this.fillVisible="false"!=b&&"0"!=b||Z.polygonFillVisible;b=h.getAttribute("CAPTIONPOSITION");this.captionPosition=Z.Utils.stringValidate(b)?
b:"8";b=h.getAttribute("SAVED");this.saved=null===b?!0:b;this.visibility=!0;b=h.getElementsByTagName("CAPTION");0<b.length&&(this.captionHTML=unescape(Z.Utils.xmlConvertDocToText(b[0])));b=h.getElementsByTagName("TOOLTIP");0<b.length&&(this.tooltipHTML=unescape(Z.Utils.xmlConvertDocToText(b[0])));this.popup=h.getAttribute("POPUP");this.popupImage=null;b=parseFloat(h.getAttribute("POPOFFSETX"));this.popupOffsetX=isNaN(b)?0:b;b=parseFloat(h.getAttribute("POPOFFSETY"));this.popupOffsetY=isNaN(b)?0:b;
if(("freehand"==h.getAttribute("MEDIA")||"rectangle"==h.getAttribute("MEDIA")||"polygon"==h.getAttribute("MEDIA")||"measure"==h.getAttribute("MEDIA"))&&0<h.getElementsByTagName("POLYGON").length){b=h.getElementsByTagName("POLYGON")[0];this.polyClosed="0"!=b.getAttribute("CLOSED");b=b.getElementsByTagName("POINT");r=[];a=0;for(e=b.length;a<e;a++){var l=parseFloat(b[a].getAttribute("X")),l=isNaN(l)?0:l,f=parseFloat(b[a].getAttribute("Y")),f=isNaN(f)?0:f;r[r.length]={x:l,y:f}}this.polygonPts=r}this.audio=
h.getAttribute("AUDIO");Z.Utils.stringValidate(this.audio)&&(Z.audioContent=!0);b=parseFloat(h.getAttribute("SHOWFOR"));this.showFor=isNaN(b)?0:b;this.transition=h.getAttribute("TRANSITION");b=parseFloat(h.getAttribute("CHANGEFOR"));this.changeFor=isNaN(b)?0:b;this.category=h.getAttribute("CATEGORY");this.zIndex=A.length.toString();b=h.getAttribute("EDITABLE");this.editable="false"!=b&&"0"!=b}function Kg(h,b,r){if(h&&b&&r){b=new Ib;for(var a=0,e=A.length;a<e;a++){var l=A[a];if(l.popup==h){var f=Z.Utils.arrayIndexOfObjectValue(Xc,
"popup",h);-1!=f?Xc[f].element=r:Xc[Xc.length]={popup:h,element:r};l.popupImage=r.cloneNode(!1);uc(l,b)}}}else Z.Utils.showMessage(Z.Utils.getResource("ERROR_HOTSPOTPOPUPPATHINVALID"),!0,null,"center")}function ga(h,b,r){if(h&&b&&r){b=new Ib;for(var a=0,e=A.length;a<e;a++){var l=A[a];if(l.media==h){var f=Z.Utils.arrayIndexOfObjectValue(Ac,"media",h);-1!=f?Ac[f].element=r:Ac[Ac.length]={media:h,element:r};l.image=r.cloneNode(!1);l.iW=r.width;l.iH=r.height;uc(l,b)}}}else Z.Utils.showMessage(Z.Utils.getResource("ERROR_HOTSPOTMEDIAPATHINVALID"),
!0,null,"center")}function Ob(){wa&&n.getStatus("initializedViewport")&&(Z.Utils.clearDisplay(wa),Kb&&Z.Utils.clearDisplay(Kb),ob&&Z.Utils.clearDisplay(ob),"inline-block"==gb.display&&Lg())}function Lg(){for(var h=new Ib,b=0,r=A.length;b<r;b++)uc(A[b],h);0==wa.childNodes.length&&(h=Z.Utils.createContainerElement("div","hotspotImmortal","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),wa.appendChild(h))}function uc(h,b){if(0<Ih.length){var r=
Z.Utils.arrayIndexOf(Ih,h.id);if(-1==r)return}else if(0<Jh.length&&(r=Z.Utils.arrayIndexOf(Jh,h.internalID),-1==r))return;var r=Math.round(100*b.currentZ),a=-1==h.zMin?Math.round(100*Z.initialZ):Math.round(h.zMin),e=-1==h.zMax?Math.round(100*Z.initialZ):Math.round(h.zMax);if((0==a||a<=r)&&(0==e||e>=r)){if(!Z.hotspotsDrawOnlyInView||h.x+Vf>b.box.l&&h.x-Vf<b.box.r&&h.y+Vf>b.box.t&&h.y-Vf<b.box.b){var r=h.media,a=h.mediaType,l=e=!1;r&&(e=-1!=r.indexOf("/circle.")||-1!=r.indexOf("/square.")||-1!=r.indexOf("/triangle.")||
-1!=r.indexOf("/arrowDownLeft.")||-1!=r.indexOf("/arrowDownRight.")||-1!=r.indexOf("/arrowUpLeft.")||-1!=r.indexOf("/arrowUpRight.")||-1!=r.indexOf("/arrowUp.")||-1!=r.indexOf("/arrowDown.")||-1!=r.indexOf("/arrowLeft.")||-1!=r.indexOf("/arrowRight.")||-1!=r.indexOf("/lineHorizontal.")||-1!=r.indexOf("/lineVertical."),l="counter"==r||"circle"==r||"square"==r||"triangle"==r||"arrowDown"==r||"arrowDownLeft"==r||"arrowLeft"==r||"arrowUpLeft"==r||"arrowUp"==r||"arrowUpRight"==r||"arrowRight"==r||"arrowDownRight"==
r||"lineHorizontal"==r||"lineVertical"==r);"counter"!=a&&"icon"!=a||r&&"External Graphics File"==r||!(l||e&&Z.labelIconsInternal)?r&&"polygon"==r&&Ad(h):$e(h,b)}(!Z.hotspotsDrawOnlyInView||h.x>b.box.l&&h.x<b.box.r&&h.y>b.box.t&&h.y<b.box.b)&&Be(h,b,null,Z.mouseIsDown||0==h.rollover)}}function Be(h,a,r,e){-1!=Z.Utils.arrayIndexOfObjectValue(A,"internalID",h.internalID)&&cf(h.internalID);Z.useCanvas&&"polygon"==h.media&&h.polygonPts&&(r=Z.Utils.polygonDimensions(h.polygonPts,r),h.iW=r.x,h.iH=r.y);r=
!Z.Utils.stringValidate(h.media);var f=!Z.Utils.stringValidate(h.caption)&&!Z.Utils.stringValidate(h.captionHTML)&&"measure"!=h.mediaType,l=null===h.iW||null===h.iH,F="polygon"!=h.media;if(!(r&&f&&l&&F)){l=a.currentZ/("polygon"!=h.media?h.z/100:1);"polygon"!=h.media&&(0<a.constrainedScaleMin&&l<a.constrainedScaleMin&&(l=a.constrainedScaleMin),0<a.constrainedScaleMax&&l>a.constrainedScaleMax&&(l=a.constrainedScaleMax));r=h.xScale/100*l*h.iW;var l=h.yScale/100*l*h.iH,g;"placeholder"!=h.media&&h.image&&
(g=h.image,g.align="top",g.width=r,g.height=l);var C=Math.round(h.x*a.currentZ-r/2-a.displayOffsetL+a.imageOffsetL),k=Math.round(h.y*a.currentZ-l/2-a.displayOffsetT+a.imageOffsetT),m=F=null;f||(Z.captionBoxes||"measure"==h.mediaType?F=dd(h,a):(m=dd(h,a,!0,!0),F=dd(h,a,!0,!1)));a=Z.Utils.createContainerElement("div","hCloak","inline-block","absolute","visible");C=Z.Utils.createContainerElement("div","hot"+h.internalID.toString()+(Z.imageSet?"-"+b.toString():""),"inline-block","absolute","visible",
r+"px",l+"px",C+"px",k+"px","none","0px","transparent none","0px","0px","normal");"undefined"===typeof Kh||null===Kh||"TOOLTIP"==Kh?C.title=Z.Utils.stringValidate(h.tooltip)?h.tooltip:"":"COMMENT"==Kh&&(C.title=Z.Utils.stringValidate(h.comment)?h.comment:"");if(!Z.labelClickSelect&&Z.Utils.stringValidate(h.clickURL)){if(null!==Z.editMode)Z.Utils.addEventListener(a,"mousedown",je),Z.Utils.addEventListener(a,"touchstart",df);else if("function"==h.clickURL)K=h.internalID,Z.Utils.addEventListener(C,"mousedown",
ef),Z.Utils.addEventListener(C,"touchstart",ef),Z.Utils.addEventListener(C,"touchmove",ef),Z.Utils.addEventListener(C,"mouseup",ed),Z.Utils.addEventListener(C,"touchend",ed),Z.Utils.addEventListener(C,"touchcancel",ed);else{if(g){var p=document.createElement("a");p.setAttribute("href",h.clickURL);p.setAttribute("target",h.urlTarget);p.setAttribute("outline","none");p.appendChild(g);g.style.cursor="help";g.style.border="none"}if(F){var v=document.createElement("a");v.setAttribute("href",h.clickURL);
v.setAttribute("target",h.urlTarget);v.setAttribute("outline","none");m&&(v.appendChild(m),m.style.cursor="help");v.appendChild(F);F.style.cursor="help"}a.style.border="none"}null===Z.editMode&&(Z.clickZoom||Z.clickPan)&&(Z.Utils.addEventListener(C,"mousedown",Wf),Z.Utils.addEventListener(C,"touchstart",Gd))}!Z.labelClickSelect&&Z.Utils.stringValidate(h.clickURL)&&null===Z.editMode&&"function"!=h.clickURL?(p&&a.appendChild(p),v&&a.appendChild(v)):(g&&a.appendChild(g),m&&a.appendChild(m),F&&a.appendChild(F));
"placeholder"!=h.popup&&h.popupImage&&(k=h.popupImage,k.style.display="none",k.id="popup",p=Z.Utils.createContainerElement("div","hPopupContainer","inline-block","absolute","visible"),p.appendChild(k),a.appendChild(p),v=-(k.width/2)+r/2,k=-(k.height/2)+l/2,v=0!=h.popupOffsetX?h.popupOffsetX+v:v,k=0!=h.popupOffsetY?h.popupOffsetY+k:k,0!=v&&0!=k&&(p.style.left=v+"px",p.style.top=k+"px"));C.appendChild(a);wa.appendChild(C);C.zIndex=h.zIndex;f||!Z.captionBoxes&&"measure"!=h.mediaType||!(v=(Z.Utils.stringValidate(h.backColor)?
h.backColor:Ei).toString())||(f=Z.Utils.hexToRGB(v).r,p=Z.Utils.hexToRGB(v).g,v=Z.Utils.hexToRGB(v).b,F.style.backgroundColor="rgba("+f+","+p+","+v+","+Lh+")");h.rollover&&(a.rollover=h.rollover);C.internalID=h.internalID;e||n.setHotspotVisibility(C,!h.rollover&&h.visibility);g&&(f=n.getRotation(),0!=f&&Z.Utils.rotateElement(g.style,-f),e=this.rotation,"undefined"!==typeof e&&null!==e&&0!=e&&Z.Utils.rotateElement(C,e));m&&Ce(h,m,r,l,!0);Ce(h,F,r,l);h.rollover&&(Z.Utils.addEventListener(C,"mouseover",
Mg),Z.Utils.addEventListener(C,"mouseout",Xf));h.popup&&(Z.Utils.addEventListener(C,"mouseover",ff),Z.Utils.addEventListener(C,"mouseout",Ng));Z.Utils.addEventListener(C,"mousedown",Z.Utils.preventDefault);Z.Utils.addEventListener(C,"contextmenu",Z.Utils.preventDefault)}}function Ib(h){wa&&(this.box=n.z541(h),this.currentZ=n.getZoom(),this.constrainedScale=this.currentZ<mh?mh:this.currentZ>nh?nh:this.currentZ,this.constrainedScaleMax=nh,this.constrainedScaleMin=mh,this.displayOffsetL=(Z.imageW*this.currentZ-
wa.width)/2,this.displayOffsetT=(Z.imageH*this.currentZ-wa.height)/2,this.imageOffsetL=(Z.imageW/2-Z.imageX)*this.currentZ,this.imageOffsetT=(Z.imageH/2-Z.imageY)*this.currentZ)}function Bc(h){if("undefined"===typeof h||null===h)h=document.getElementById("progressTextBox");var b=null;-1!=h.id.indexOf("hot")&&-1==h.id.indexOf("hotspotDisplay")?b=h:h.parentNode&&-1!=h.parentNode.id.indexOf("hot")&&-1==h.parentNode.id.indexOf("hotspotDisplay")?b=h.parentNode:h.parentNode.parentNode&&-1!=h.parentNode.parentNode.id.indexOf("hot")&&
-1==h.parentNode.parentNode.id.indexOf("hotspotDisplay")?b=h.parentNode.parentNode:h.parentNode.parentNode.parentNode&&-1!=h.parentNode.parentNode.parentNode.id.indexOf("hot")&&-1==h.parentNode.parentNode.parentNode.id.indexOf("hotspotDisplay")&&(b=h.parentNode.parentNode.parentNode);return b}function ke(h,b,a){var e=b.id.substring(3,b.id.length),e=Z.Utils.arrayIndexOfObjectValue(A,"internalID",e);if(-1!=e){var e=A[e],f=e.media,l=e.mediaType,F=-1!=f.indexOf("/circle.")||-1!=f.indexOf("/square.")||
-1!=f.indexOf("/triangle.")||-1!=f.indexOf("/arrowDownLeft.")||-1!=f.indexOf("/arrowDownRight.")||-1!=f.indexOf("/arrowUpLeft.")||-1!=f.indexOf("/arrowUpRight.")||-1!=f.indexOf("/arrowUp.")||-1!=f.indexOf("/arrowDown.")||-1!=f.indexOf("/arrowLeft.")||-1!=f.indexOf("/arrowRight.")||-1!=f.indexOf("/lineHorizontal.")||-1!=f.indexOf("/lineVertical."),l=("counter"==l||"icon"==l)&&(!f||"External Graphics File"!=f)&&("counter"==f||"circle"==f||"square"==f||"triangle"==f||"arrowDown"==f||"arrowDownLeft"==
f||"arrowLeft"==f||"arrowUpLeft"==f||"arrowUp"==f||"arrowUpRight"==f||"arrowRight"==f||"arrowDownRight"==f||"lineHorizontal"==f||"lineVertical"==f||F&&Z.labelIconsInternal),f=f&&"polygon"==f;if("mouseup"==h.type||"mousemove"==h.type&&(l||f)){F=a.x-=b.mouseXOffset-parseFloat(b.style.width)/2;b=a.y-=b.mouseYOffset-parseFloat(b.style.height)/2;b=new Z.Utils.Point(F,b);h=n.getClickCoordsInImage(h,n.getZoom(),b);if(l||f)f&&De(e,h),Bd();e.x=h.x;e.y=h.y}}}function De(h,b){for(var a=b.x-h.x,e=b.y-h.y,f=h.polygonPts.slice(0),
l=0,F=f.length;l<F;l++)f[l].x+=a,f[l].y+=e;h.polygonPts=f.slice(0)}function dd(h,b,a,e){var f=b.currentZ/(h.z/100),l="text"!=h.mediaType?1:(h.xScale+h.yScale)/2/100;"text"==h.mediaType?f*=l:(0<b.constrainedScaleMin&&f<b.constrainedScaleMin&&(f=b.constrainedScaleMin),0<b.constrainedScaleMax&&f>b.constrainedScaleMax&&(f=b.constrainedScaleMax));b=Math.round(Uj*f);b="text"==h.mediaType?b:b<xj?xj:b>yj?yj:b;"counter"==h.mediaType&&(b+=2);var f=Vj*f,l=f<zj?zj:f>Aj?Aj:f,F,g,f=Z.Utils.stringValidate(h.textColor)?
h.textColor:Ae;g=Z.Utils.stringValidate(h.backColor)?h.backColor:Ei;"undefined"!==typeof a&&null!==a&&a?(F="0px",g="transparent none",a="counter"!=h.mediaType?"normal":"bold"):(F="1px",a="normal");"undefined"!==typeof e&&null!==e&&e&&(f=h.backColor);h.textVisible||(f="transparent none");Z.captionBoxes&&Z.captionsColorsDefault&&"measure"!=h.mediaType&&(f=h.backColor,g=h.textColor);f==g&&("#ffffff"==f?g="#000000":"#000000"==f&&(g="#ffffff"));e=Z.Utils.createContainerElement("div","captionTextBox","inline-block",
"absolute","hidden","auto","auto","1px","1px","solid",F,g,"0px",l+"px","pre");"undefined"!==typeof h.captionHTML&&Z.Utils.stringValidate(h.captionHTML)?(e.innerHTML=h.captionHTML,Z.Utils.setHTMLTextDefaultCaptionStyle(e,h.captionHTML,f,"verdana",b+"px","none","normal","normal","normal","normal","1em","center","none")):"transparent none"!=f&&"undefined"!==typeof h.caption&&Z.Utils.stringValidate(h.caption)?(h=document.createTextNode(h.caption),e.appendChild(h),Z.Utils.setTextNodeStyle(h,f,"verdana",
b+"px","none","normal","normal","normal",a,"1em","center","none"),Z.Utils.disableTextInteraction(h)):"measure"==h.mediaType&&(b=new Z.Utils.Point(h.x,h.y),Ee(h,b));Z.Utils.addEventListener(e,"contextmenu",Z.Utils.preventDefault);return e}function Ce(h,b,a,e,f){b&&(h=af(b,h.captionPosition,a,e,Z.imageR,K==h.internalID&&"polygon"==h.media))&&(f=f?1:0,b.style.left=h.x+f+"px",b.style.top=h.y+f+"px")}function af(h,b,a,e,f,l){var F=h.style,g=l&&("addLabel"==Z.editing||"editLabel"==Z.editing||null===Z.editMode&&
"measure"==Z.labelMode)?40:0,C=parseFloat(F.padding);0>f&&(f+=360);var n=new ze(h);h=(a-n.w)/2-C;l=(e-n.h)/2-C;Z.Utils.rotateElement(F,-f);if(0==f%90){F=f;b=parseInt(b,10);0>F&&(F+=360);switch(b){case 1:b=0==F?b:90==F?7:180==F?9:270==F?3:5;break;case 2:b=0==F?b:90==F?4:180==F?8:270==F?6:5;break;case 3:b=0==F?b:90==F?1:180==F?7:270==F?9:5;break;case 4:b=0==F?b:90==F?8:180==F?6:270==F?2:5;break;case 6:b=0==F?b:90==F?2:180==F?4:270==F?8:5;break;case 7:b=0==F?b:90==F?9:180==F?3:270==F?1:5;break;case 8:b=
0==F?b:90==F?6:180==F?2:270==F?4:5;break;case 9:b=0==F?b:90==F?3:180==F?1:270==F?7:5}b=b.toString();b=parseInt(b,10);a=a/2+n.w/2+C+g;e=e/2+n.h+C+g;if(90==f||270==f)f=a,a=e,e=f;switch(b){case 1:h-=a;l-=e;break;case 2:l-=e;break;case 3:h+=a;l-=e;break;case 4:h-=a;break;case 6:h+=a;break;case 7:h-=a;l+=e;break;case 8:l+=e;break;case 9:h+=a,l+=e}}return new Z.Utils.Point(h,l)}function ze(h,b,a){if("undefined"===typeof b||null===b)b=1;var e=h.style,f=n.getZoom(),l=parseFloat(Z.Utils.getElementStyleProperty(h,
"width"));isNaN(l)&&(l=parseFloat(Z.Utils.getResource("z115")),l=parseFloat(e.fontSize)/l,l=Math.round(parseFloat(h.firstChild.length*l)));h=parseInt(Z.Utils.getResource("z129"),10);parseFloat(e.fontSize);var e=2*parseFloat(Z.Utils.getResource("z160")),F=2*parseFloat(Z.Utils.getResource("z151"));b=1.7*h*f/b;a&&(b<e?b=e:b>F&&(b=F));this.w=l;this.h=b}function Ee(h,b){var a=h.polyClosed,e=h.polygonPts.slice(0),f=e.length,l="",F=0,g="",C="pixels"==Z.units?0:4,n="um"!=Z.units?Z.units:"\u03bcm";0==f?(l=
Mh,F=Z.Utils.polygonPerimeter(e,a,b,C),captionText=l+F.toString()+"  "+n):0<f&&!a?(l=ki,F=Z.Utils.polygonPerimeter(e,a,b,C),captionText=l+F.toString()+"  "+n):(l=Nh,F=Z.Utils.polygonPerimeter(e,a,b,C),g=Fi,captionText=l+F.toString()+"  "+n,l=li,F=Z.Utils.polygonArea(e,a,b,C),captionText+="\n"+l+F.toString()+"  "+n+g);h.caption=captionText;Yf&&Yf.firstChild&&Yf.firstChild.value&&(Yf.firstChild.value=X.caption)}function gf(h,b,a,e){if("undefined"===typeof e||null===e)e=Ta;e=e.toString();var f="0"==
h||Z.imageSet?"hidden":"visible",l=parseInt(Z.Utils.getResource("z133"),10),F=parseInt(Z.Utils.getResource("DEFAULT_IMAGESETLISTWIDTH"),10),l=Z.imageSet?F:l,F=Ve(h,l,qa,ra);"undefined"===typeof Oa||null===Oa?(Z["HotspotList"+e]=new Z.Utils.createSelectElement("HotspotList"+e,b,a,l,F.x,F.y,null,f,Fe,"mousedown"),Eg=Oa=Z["HotspotList"+e],Ci=Eg.style,"0"!=h&&Z.ViewerDisplay.appendChild(Oa),Z.tour&&(Zf=0),h=Z.Utils.stringValidate(Z.hotspotListTitle)&&"none"!=Z.hotspotListTitle?1:0,Oa.selectedIndex=h):
Z.Utils.arrayClear(a)}function cf(h){h=document.getElementById("hot"+h+(Z.imageSet?"-"+b.toString():""));null!==h&&h.parentNode.removeChild(h)}function Ve(h,b,a,e){var f=Z.imageSet?13:25;switch(h){case "0":e=h=0;break;case "1":e=h=f;break;case "2":h=a-b-f;e=Z.imageSet?32:20;break;case "3":h=a-b-f;e=0<Z.toolbarVisible&&8!=Z.toolbarVisible?e-2*f:e-1.5*f;break;case "4":h=f;e=0<Z.toolbarVisible&&8!=Z.toolbarVisible?e-2*f:e-1.5*f;break;default:h=a-b,e=f}return new Z.Utils.Point(h,e)}function hf(h){var b=
h.getAttribute("MEDIATYPE"),a=h.getAttribute("MEDIA");if(a){var e=-1!=a.indexOf("/circle.")||-1!=a.indexOf("/square.")||-1!=a.indexOf("/triangle.")||-1!=a.indexOf("/arrowDownLeft.")||-1!=a.indexOf("/arrowDownRight.")||-1!=a.indexOf("/arrowUpLeft.")||-1!=a.indexOf("/arrowUpRight.")||-1!=a.indexOf("/arrowUp.")||-1!=a.indexOf("/arrowDown.")||-1!=a.indexOf("/arrowLeft.")||-1!=a.indexOf("/arrowRight.")||-1!=a.indexOf("/lineHorizontal.")||-1!=a.indexOf("/lineVertical."),f="circle"==a||"square"==a||"triangle"==
a||"arrowDown"==a||"arrowDownLeft"==a||"arrowLeft"==a||"arrowUpLeft"==a||"arrowUp"==a||"arrowUpRight"==a||"arrowRight"==a||"arrowDownRight"==a||"lineHorizontal"==a||"lineVertical"==a,l=null;if(Z.labelIconsInternal)if(e){if("symbol"==b||"icon"==b)l=a.substring(a.lastIndexOf("/")+1,a.indexOf("."))}else"symbol"==b&&(l=jc+"/noSubstitutePlaceholder.png");else null===Z.labelIconsInternal||Z.labelIconsInternal||"symbol"==b&&(l=f?jc+"/"+a+".png":jc+"/noSubstitutePlaceholder.png");l&&(h.setAttribute("MEDIATYPE",
"icon"),h.setAttribute("MEDIA",l),Oh=!0)}return h}function Cd(){return Z.Utils.xmlConvertTextToDoc("<ZAS></ZAS>")}function Pb(h,b){var a;switch(b){case "root":a=h.getElementsByTagName("ZAS")[0];break;case "setup":a=h.createElement("SETUP");a.setAttribute("PANELPOSITION","2");a.setAttribute("INITIALVISIBILITY","1");a.setAttribute("POIVISIBILITY","0");a.setAttribute("LABELVISIBILITY","1");a.setAttribute("NOTEVISIBILITY","0");a.setAttribute("COMMENTVISIBILITY","1");a.setAttribute("MINSCALE","0.2");a.setAttribute("MAXSCALE",
"2");a.setAttribute("ZOOMIFYXMLVERSION","5");break;case "poi":a=h.createElement("POI");a.setAttribute("ID","0");a.setAttribute("NAME",Z.Utils.getResource("z43"));a.setAttribute("EDITABLE",Z.Utils.getResource("CONTENT_EDITABLE"));a.setAttribute("X","center");a.setAttribute("Y","center");a.setAttribute("ZOOM","-1");a.setAttribute("USER",Z.Utils.getResource("z44"));a.setAttribute("DATE",Z.Utils.getCurrentUTCDateAsString());break;case "label":a=h.createElement("LABEL");a.setAttribute("ID","0");a.setAttribute("NAME",
Z.Utils.getResource("z37"));a.setAttribute("MEDIATYPE","text");a.setAttribute("MEDIA","");a.setAttribute("X","center");a.setAttribute("Y","center");a.setAttribute("ZOOM","100");a.setAttribute("XSCALE","100");a.setAttribute("YSCALE","100");a.setAttribute("RADIUS","");a.setAttribute("ZMIN","0");a.setAttribute("ZMAX","0");a.setAttribute("CLICKURL","");a.setAttribute("URLTARGET","");a.setAttribute("ROLLOVER","0");a.setAttribute("CAPTION","");a.setAttribute("COMMENT","");a.setAttribute("TOOLTIP","");a.setAttribute("USER",
Z.Utils.getResource("z39"));a.setAttribute("DATE",Z.Utils.getCurrentUTCDateAsString());a.setAttribute("TEXTCOLOR",Z.Utils.getResource("z25"));a.setAttribute("BACKCOLOR",Z.Utils.getResource("z22"));a.setAttribute("LINECOLOR",Z.Utils.getResource("z48"));a.setAttribute("FILLCOLOR",Z.Utils.getResource("z46"));a.setAttribute("TEXTVISIBLE",Z.Utils.getResource("z26"));a.setAttribute("BACKVISIBLE",Z.Utils.getResource("z23"));a.setAttribute("LINEVISIBLE",Z.Utils.getResource("z49"));a.setAttribute("FILLVISIBLE",
Z.Utils.getResource("z47"));a.setAttribute("CAPTIONPOSITION",Z.Utils.getResource("z24"));a.setAttribute("ROTATION","0");a.setAttribute("CATEGORY","");a.setAttribute("POPUP","");a.setAttribute("POPOFFSETX","");a.setAttribute("POPOFFSETY","");a.setAttribute("EDITABLE","1");break;case "polygon":a=h.createElement("POLYGON");break;case "point":a=h.createElement("POINT");a.setAttribute("X","0");a.setAttribute("Y","0");break;case "note":a=h.createElement("NOTE"),a.setAttribute("ID","0"),a.setAttribute("NAME",
Z.Utils.getResource("z40")),a.setAttribute("EDITABLE","1"),a.setAttribute("TEXT",Z.Utils.getResource("z41")),a.setAttribute("USER",Z.Utils.getResource("z42")),a.setAttribute("DATE",Z.Utils.getCurrentUTCDateAsString())}return a}function jf(h,b,a,e,f,l,F){h=Z.Utils.arrayToArrayOfStrings([h,b,a,e,f,l,F]);h=Z.Utils.xmlConvertTextToDoc('<POI ID="'+h[0]+'" NAME="'+h[1]+'" X="'+h[2]+'" Y="'+h[3]+'" ZOOM="'+h[4]+'" INTERNALID="'+h[5]+'" EDITABLE="'+h[6]+'" ></POI>').getElementsByTagName("POI")[0];kf(h,!0)}
function kf(h,b){n.saveEditsPOI(!0);b&&(h=wd(h,"poi"));var a=h.getAttribute("INTERNALID"),e=h.getAttribute("EDITABLE"),e="0"!=e&&"false"!=e,f=Z.Utils.arrayIndexOfObjectValue(Ha,"value",a);-1==f&&(f=Ha.length);Ha[f]={text:h.getAttribute("NAME"),value:a,id:h.getAttribute("ID"),x:h.getAttribute("X"),y:h.getAttribute("Y"),z:h.getAttribute("ZOOM"),user:h.getAttribute("USER"),date:h.getAttribute("DATE"),editable:e}}function $f(h,b){n.saveEditsNote(!0);b&&(h=wd(h,"note"));var a=h.getAttribute("INTERNALID"),
e=h.getAttribute("EDITABLE"),e="0"!=e&&"false"!=e,f=Z.Utils.arrayIndexOfObjectValue(cb,"value",a);-1==f&&(f=cb.length);cb[f]={text:h.getAttribute("NAME"),value:a,noteText:h.getAttribute("TEXT"),poiID:h.getAttribute("POIID"),id:h.getAttribute("ID"),user:h.getAttribute("USER"),date:h.getAttribute("DATE"),editable:e}}function wd(h,b){var a,e;switch(b){case "hotspot":a=Oa?Xb("hotspot"):Xb("label");e=Z.Utils.stringValidate(Z.labelMode)?Z.labelMode:"";Z.Utils.stringValidate(h.getAttribute("ID"))||h.setAttribute("ID",
a);var f=Oa?Z.Utils.getResource("z34"):Z.Utils.getResource("z37");Z.Utils.stringValidate(h.getAttribute("NAME"))||h.setAttribute("NAME",f+a+": "+e);e=Oa?Z.Utils.getResource("z33"):Z.Utils.getResource("z35");Z.Utils.stringValidate(h.getAttribute("CAPTION"))||"freehand"==Z.editMode||Z.tourPath||Z.Utils.stringValidate(h.getAttribute("MEDIA"))||Z.Utils.stringValidate(h.getAttribute("MEDIA")&&"polygon"==h.getAttribute("MEDIA"))||h.setAttribute("CAPTION",e+a);h.setAttribute("NAME",Z.Utils.xmlUnescapeMinimal(unescape(h.getAttribute("NAME"))));
h.setAttribute("CAPTION",Z.Utils.xmlUnescapeMinimal(unescape(h.getAttribute("CAPTION"))));Z.Utils.stringValidate(h.getAttribute("X"))||h.setAttribute("X",Z.imageX.toString());Z.Utils.stringValidate(h.getAttribute("Y"))||h.setAttribute("Y",Z.imageY.toString());Z.Utils.stringValidate(h.getAttribute("ZOOM"))||h.setAttribute("ZOOM",(100*Z.imageZ).toString());Z.Utils.stringValidate(h.getAttribute("ZMIN"))||h.setAttribute("ZMIN","0");Z.Utils.stringValidate(h.getAttribute("ZMAX"))||h.setAttribute("ZMAX",
"0");!Z.Utils.stringValidate(h.getAttribute("CLICKURL"))&&Z.Utils.stringValidate(h.getAttribute("URL"))&&h.setAttribute("CLICKURL",h.getAttribute("URL"));isNaN(parseInt(h.getAttribute("INTERNALID"),10))&&h.setAttribute("INTERNALID",a);e=h.getAttribute("MEDIATYPE");Z.Utils.stringValidate(h.getAttribute("TEXTCOLOR"))&&Z.Utils.stringValidate(h.getAttribute("BACKCOLOR"))&&(Z.captionsColorsDefault=!1);(Z.captionBoxes||"measure"==e)&&Z.captionsColorsDefault&&(h.setAttribute("TEXTCOLOR",Z.Utils.getResource("z25")),
h.setAttribute("BACKCOLOR",Z.Utils.getResource("z22")));break;case "poi":a=Xb("poi");Z.Utils.stringValidate(h.getAttribute("ID"))||h.setAttribute("ID",a);Z.Utils.stringValidate(h.getAttribute("NAME"))||h.setAttribute("NAME",Z.Utils.getResource("z43")+a);Z.Utils.stringValidate(h.getAttribute("X"))||h.setAttribute("X",Z.imageX.toString());Z.Utils.stringValidate(h.getAttribute("Y"))||h.setAttribute("Y",Z.imageY.toString());Z.Utils.stringValidate(h.getAttribute("ZOOM"))||h.setAttribute("ZOOM",(100*Z.imageZ).toString());
isNaN(parseInt(h.getAttribute("INTERNALID"),10))&&h.setAttribute("INTERNALID",a);Z.Utils.stringValidate(h.getAttribute("EDITABLE"))||h.setAttribute("EDITABLE","1");break;case "label":a=Xb("label");e=Z.Utils.stringValidate(Z.labelMode)?Z.labelMode:"";Z.Utils.stringValidate(h.getAttribute("ID"))||h.setAttribute("ID",a);Z.Utils.stringValidate(h.getAttribute("NAME"))||h.setAttribute("NAME",Z.Utils.getResource("z37")+a+": "+e);e=h.getAttribute("MEDIATYPE");f=h.getAttribute("MEDIA");Z.Utils.stringValidate(f)||
"text"==e||(h.setAttribute("MEDIA",jc+"/"+Z.Utils.getResource("z57")),h.setAttribute("MEDIATYPE",Z.Utils.getResource("z57TYPE")));Z.Utils.stringValidate(h.getAttribute("TEXTCOLOR"))&&Z.Utils.stringValidate(h.getAttribute("BACKCOLOR"))&&(Z.captionsColorsDefault=!1);(Z.captionBoxes||"measure"==e)&&Z.captionsColorsDefault&&(h.setAttribute("TEXTCOLOR",Z.Utils.getResource("z25")),h.setAttribute("BACKCOLOR",Z.Utils.getResource("z22")));Z.Utils.stringValidate(h.getAttribute("CAPTION"))||h.setAttribute("CAPTION",
Z.Utils.getResource("z35")+a);Z.Utils.stringValidate(h.getAttribute("COMMENT"))||h.setAttribute("COMMENT",Z.Utils.getResource("CONTENT_LABELCOMMENT"));!Z.Utils.stringValidate(h.getAttribute("CLICKURL"))&&Z.Utils.stringValidate(h.getAttribute("URL"))&&h.setAttribute("CLICKURL",h.getAttribute("URL"));Z.Utils.stringValidate(h.getAttribute("X"))||h.setAttribute("X",Z.imageX.toString());Z.Utils.stringValidate(h.getAttribute("Y"))||h.setAttribute("Y",Z.imageY.toString());Z.Utils.stringValidate(h.getAttribute("ZOOM"))||
h.setAttribute("ZOOM",(100*Z.imageZ).toString());Z.Utils.stringValidate(h.getAttribute("ZMIN"))||h.setAttribute("ZMIN","0");Z.Utils.stringValidate(h.getAttribute("ZMAX"))||h.setAttribute("ZMAX","0");isNaN(parseInt(h.getAttribute("INTERNALID"),10))&&h.setAttribute("INTERNALID",a);isNaN(parseInt(h.getAttribute("POIID"),10))&&h.setAttribute("POIID",la.options[la.selectedIndex].value);Z.Utils.stringValidate(h.getAttribute("EDITABLE"))||h.setAttribute("EDITABLE","1");break;case "note":a=Xb("note"),Z.Utils.stringValidate(h.getAttribute("ID"))||
h.setAttribute("ID",a),Z.Utils.stringValidate(h.getAttribute("NAME"))||h.setAttribute("NAME",Z.Utils.getResource("z40")+a),Z.Utils.stringValidate(h.getAttribute("TEXT"))||h.setAttribute("TEXT",""),isNaN(parseInt(h.getAttribute("INTERNALID"),10))&&h.setAttribute("INTERNALID",a),isNaN(parseInt(h.getAttribute("POIID"),10))&&h.setAttribute("POIID",la.options[la.selectedIndex].value),Z.Utils.stringValidate(h.getAttribute("EDITABLE"))||h.setAttribute("EDITABLE","1")}return h}function Oc(h,b){var a=0,e=
"",f="";if("none"!=Z.annotationSort){switch(Z.annotationSort){case "id":e=h.value.toLowerCase();f=b.value.toLowerCase();break;case "name":e=h.text.toLowerCase(),f=b.text.toLowerCase()}e<f?a=-1:e>f&&(a=1)}return a}function ag(h){var b=h.toString(),a=Z.Toolbar.getSkinArray(),e=Z.Toolbar.getSkinSizes(),f=parseInt(Z.Utils.getResource("z63"),10);if("markup"!=Z.editMode)var l=parseFloat(Z.Utils.getResource("DEFAULT_BACKGROUNDSMALLDALPHA")/1.5),F=Z.Utils.getResource("z83"),g=Z.Utils.getResource("z83NOALPHA");
if("markup"!=Z.editMode){var n=Z.Utils.createContainerElement("div","buttonContainerPOI"+b,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal","default",!0);Ia.appendChild(n);Z.Utils.addEventListener(n,"mouseover",Z.Toolbar.backgroundEventsHandler);var k=Z.Utils.createTextElement("poiNameTextElement"+b,"","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.Utils.addEventListener(k.firstChild,
"focus",od);Z.Utils.addEventListener(k.firstChild,"blur",Yc);Ia.appendChild(k);if(k=document.getElementById("textBoxFor-poiNameTextElement"+b))k.style.visibility="hidden";k=new Z.Utils.Button("buttonPOIAdd"+b,null,Z.skinPath,a[153],a[154],a[155],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z373");n.appendChild(k.elmt);k=new Z.Utils.Button("buttonPOIEdit"+b,null,Z.skinPath,a[156],a[157],a[158],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z376");n.appendChild(k.elmt);k=new Z.Utils.Button("buttonPOIDelete"+
b,null,Z.skinPath,a[147],a[148],a[149],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z375");n.appendChild(k.elmt);k=new Z.Utils.Button("buttonPOICancel"+b,null,Z.skinPath,a[159],a[160],a[161],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z374");n.appendChild(k.elmt);Z.saveHandlerProvided&&(k=new Z.Utils.Button("buttonPOISave"+b,null,Z.skinPath,a[150],a[151],a[152],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z377"),n.appendChild(k.elmt));n=Z.Utils.createContainerElement("div","overlayPOIDisable"+
b,"none","absolute","visible","1px","1px","0px","0px","none","0px",F,"0px","0px","normal","default",!0);Z.Utils.setOpacity(n,l,g);Ia.appendChild(n)}null!==Z.editMode&&(n=Z.Utils.createTextElement("labelNameTextElement"+b,"","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off"),Z.Utils.addEventListener(n.firstChild,"focus",od),Z.Utils.addEventListener(n.firstChild,"blur",Yc),Ia.appendChild(n),"markup"!=Z.editMode&&(n=document.getElementById("textBoxFor-labelNameTextElement"+
b)))&&(n.style.visibility="hidden");"markup"!=Z.editMode&&(n=Z.Utils.createContainerElement("div","buttonBorderLabel"+b,"inline-block","absolute","visible","1px","1px","0px","0px","solid","1px","transparent none","0px","0px","normal","default",!0),Ia.appendChild(n));k=Z.Utils.createContainerElement("div","buttonContainerLabelModes"+b,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal","default",!0);Ia.appendChild(k);n=Z.Utils.createContainerElement("div",
"buttonContainerLabelEdit"+b,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal","default",!0);Ia.appendChild(n);Z.Utils.addEventListener(k,"mouseover",Z.Toolbar.backgroundEventsHandler);Z.Utils.addEventListener(n,"mouseover",Z.Toolbar.backgroundEventsHandler);F=Z.Utils.createContainerElement("div","buttonBorderLg"+b,"inline-block","absolute","hidden","1px","1px","1px","1px","solid","2px","transparent none","0px","0px","normal",null,!0);
F.style.borderColor=Z.Utils.getResource("z87");k.appendChild(F);bblG=F;bblgS=bblG.style;F=new Z.Utils.Button("buttonViewMode"+b,null,Z.skinPath,a[101],a[102],a[103],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z397");k.appendChild(F.elmt);"markup"!=Z.editMode&&(F=new Z.Utils.Button("buttonEditColorPicker"+b,null,Z.skinPath,a[104],a[105],a[106],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z334"),k.appendChild(F.elmt));F=new Z.Utils.Graphic("editModeDivider"+b,Z.skinPath,a[107],"1px",
"1px","1px","1px");k.appendChild(F.elmt);Z.freehandVisible&&(F=new Z.Utils.Button("buttonEditModeFreehand"+b,null,Z.skinPath,a[108],a[109],a[110],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z335"),k.appendChild(F.elmt));Z.textVisible&&(F=new Z.Utils.Button("buttonEditModeText"+b,null,Z.skinPath,a[111],a[112],a[113],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z340"),k.appendChild(F.elmt));Z.iconVisible&&(F=new Z.Utils.Button("buttonEditModeIcon"+b,null,Z.skinPath,a[114],a[115],a[116],
"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z336"),k.appendChild(F.elmt));Z.rectangleVisible&&(F=new Z.Utils.Button("buttonEditModeRectangle"+b,null,Z.skinPath,a[117],a[118],a[119],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z339"),k.appendChild(F.elmt));Z.polygonVisible&&(F=new Z.Utils.Button("buttonEditModePolygon"+b,null,Z.skinPath,a[120],a[121],a[122],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z338"),k.appendChild(F.elmt));Z.measureVisible&&(F=new Z.Utils.Button("buttonEditModeMeasure"+
b,null,Z.skinPath,a[46],a[47],a[48],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z337"),k.appendChild(F.elmt));var F=Z.Utils.createContainerElement("div","labelCaptionTextBox"+b,"inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0),m=document.createTextNode(Z.Utils.getResource("z407"));F.appendChild(m);m=Z.Utils.getResource("z35");Yf=Z.Utils.createTextElement("captionTextElement"+b,m,"1px","1px","1px","1px","0px","solid","1px",
!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.Utils.addEventListener(Yf.firstChild,"focus",od);Z.Utils.addEventListener(Yf.firstChild,"blur",Yc);Ia.appendChild(F);Ia.appendChild(Yf);if("markup"!=Z.editMode){F=Z.Utils.createContainerElement("div","labelTooltipTextBox"+b,"inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);m=document.createTextNode(Z.Utils.getResource("z413"));F.appendChild(m);m=Z.Utils.getResource("z38");
m=Z.Utils.createTextElement("tooltipTextElement"+b,m,"1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.Utils.addEventListener(m.firstChild,"focus",od);Z.Utils.addEventListener(m.firstChild,"blur",Yc);Ia.appendChild(F);Ia.appendChild(m);F=Z.Utils.createContainerElement("div","labelClickURLTextBox"+b,"inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);m=document.createTextNode(Z.Utils.getResource("z414"));
F.appendChild(m);m=Z.Utils.getResource("z36");m=Z.Utils.createTextElement("clickURLTextElement"+b,m,"1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.Utils.addEventListener(m.firstChild,"focus",od);Z.Utils.addEventListener(m.firstChild,"blur",Yc);Ia.appendChild(F);Ia.appendChild(m);for(var F=Z.Utils.getResource("z401").split(","),m=Z.Utils.getResource("z402").split(","),p=0,v=F.length;p<v;p++)labelCaptionPositionListDP[labelCaptionPositionListDP.length]=
{text:F[p],value:m[p]};F=new Z.Utils.createSelectElement("labelCaptionPositionList"+b,"",labelCaptionPositionListDP,1,1,0,f,"hidden",Og,"change");Ia.appendChild(F);F=Z.Utils.getResource("z405").split(",");m=Z.Utils.getResource("z406").split(",");p=0;for(v=F.length;p<v;p++)labelTargetListDP[labelTargetListDP.length]={text:F[p],value:m[p]};F=new Z.Utils.createSelectElement("labelTargetList"+b,"",labelTargetListDP,1,1,0,f,"hidden",lf,"change");Ia.appendChild(F);F=Z.Utils.createContainerElement("div",
"labelScaleTextBox"+b,"inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);m=document.createTextNode(Z.Utils.getResource("z412"));F.appendChild(m);Ia.appendChild(F);F=new Z.Utils.Button("buttonLabelScaleDown"+b,null,Z.skinPath,a[27],a[28],a[29],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z358");Ia.appendChild(F.elmt);F=new Z.Utils.Button("buttonLabelScaleUp"+b,null,Z.skinPath,a[24],a[25],a[26],"1px","1px","1px","1px","mouseover",
Z.Toolbar.z457,"z359");Ia.appendChild(F.elmt);F=Z.Utils.createContainerElement("div","labelRolloverTextBox"+b,"inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);m=document.createTextNode(Z.Utils.getResource("z411"));F.appendChild(m);m=new Z.Utils.Checkbox("checkboxRollover"+b,"test","1px","1px","1px","1px","click",bg,"z379");Ia.appendChild(F);Ia.appendChild(m)}m=Z.Utils.createContainerElement("div","buttonContainerLabelColors"+
b,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal","default",!0);k.appendChild(m);"markup"!=Z.editMode&&(F=Z.Utils.getResource("z83"),F=Z.Utils.createContainerElement("div","buttonContainerLabelColorsBackground"+b,"inline-block","absolute","visible","1px","1px","0px","0px","solid","1px",F,"0px","0px","normal",null,!0),m.appendChild(F),m.style.display="none");F=Z.Utils.createContainerElement("div","buttonBorderSm"+b,"inline-block","absolute",
"hidden","1px","1px","1px","1px","solid","2px","transparent none","0px","0px","normal",null,!0);F.style.borderColor=Z.Utils.getResource("z87");m.appendChild(F);bbsM=F;bbsmS=bbsM.style;F=new Z.Utils.Button("buttonColor0"+b,null,Z.skinPath,a[123],a[124],a[125],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z324");m.appendChild(F.elmt);F=new Z.Utils.Button("buttonColor1"+b,null,Z.skinPath,a[126],a[127],a[128],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z325");m.appendChild(F.elmt);F=new Z.Utils.Button("buttonColor2"+
b,null,Z.skinPath,a[129],a[130],a[131],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z326");m.appendChild(F.elmt);F=new Z.Utils.Button("buttonColor3"+b,null,Z.skinPath,a[132],a[133],a[134],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z327");m.appendChild(F.elmt);F=new Z.Utils.Button("buttonColor4"+b,null,Z.skinPath,a[135],a[136],a[137],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z328");m.appendChild(F.elmt);F=new Z.Utils.Button("buttonColor5"+b,null,Z.skinPath,a[138],a[139],a[140],
"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z329");m.appendChild(F.elmt);F=new Z.Utils.Button("buttonColor6"+b,null,Z.skinPath,a[141],a[142],a[143],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z330");m.appendChild(F.elmt);F=new Z.Utils.Button("buttonColor7"+b,null,Z.skinPath,a[144],a[145],a[146],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z331");m.appendChild(F.elmt);"edit"==Z.editMode&&(F=new Z.Utils.Button("buttonLabelAdd"+b,null,Z.skinPath,a[153],a[154],a[155],"1px","1px",
"1px","1px","mouseover",Z.Toolbar.z457,"z353"),n.appendChild(F.elmt),F=new Z.Utils.Button("buttonLabelEdit"+b,null,Z.skinPath,a[156],a[157],a[158],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z356"),n.appendChild(F.elmt),F=new Z.Utils.Button("buttonLabelCancel"+b,null,Z.skinPath,a[159],a[160],a[161],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z354"),n.appendChild(F.elmt));F=new Z.Utils.Button("buttonLabelDelete"+b,null,Z.skinPath,a[147],a[148],a[149],"1px","1px","1px","1px","mouseover",
Z.Toolbar.z457,"z355");n.appendChild(F.elmt);Z.saveHandlerProvided&&Z.saveButtonVisible&&(F=new Z.Utils.Button("buttonLabelSave"+b,null,Z.skinPath,a[150],a[151],a[152],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z357"),n.appendChild(F.elmt));var u=Z.Utils.createContainerElement("div","buttonContainerLabelIcons"+b,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal","default",!1);Ia.appendChild(u);F=Z.Utils.getResource("z83");p=Z.Utils.createContainerElement("div",
"buttonContainerLabelIconsBackground"+b,"inline-block","absolute","visible","1px","1px","0px","0px","solid","1px",F,"0px","0px","normal",null,!0);u.appendChild(p);u.style.display="none";for(var D=Z.Utils.getResource("z403").split(","),y=Z.Utils.getResource("z404").split(","),p=0,v=D.length;p<v;p++)Ph[Ph.length]={text:D[p],value:y[p]};f=new Z.Utils.createSelectElement("labelIconList"+b,"",Ph,1,1,0,f,"visible",cg,"change");u.appendChild(f);if("markup"!=Z.editMode){var f=Z.Utils.createContainerElement("div",
"overlayLabelDisable"+b,"none","absolute","visible","1px","1px","0px","0px","none","0px",F,"0px","0px","normal","default",!0),p=Z.Utils.createContainerElement("div","overlayLabelDetailDisable"+b,"none","absolute","visible","1px","1px","0px","0px","none","0px",F,"0px","0px","normal","default",!0),v=Z.Utils.createContainerElement("div","overlayLabelDetailEditableDisable"+b,"none","absolute","visible","1px","1px","0px","0px","none","0px",F,"0px","0px","normal","default",!0),D=Z.Utils.createTextElement("overlayMessageBox"+
b,"","1px","1px","4px","4px","4px","solid","1px",!0,"verdana","12px","none",null,1,"auto","auto",null),y=Z.Utils.createContainerElement("div","overlayLabelNameEditableDisable"+b,"none","absolute","visible","1px","1px","0px","0px","none","0px",F,"0px","0px","normal","default",!0),q=Z.Utils.createContainerElement("div","overlayLabelCaptionPositionDisable"+b,"none","absolute","visible","1px","1px","0px","0px","none","0px",F,"0px","0px","normal","default",!0);Z.Utils.setOpacity(f,l,g);Z.Utils.setOpacity(p,
l,g);Z.Utils.setOpacity(v,l,g);Z.Utils.setOpacity(y,l,g);Z.Utils.setOpacity(q,l,g);Ia.appendChild(f);Ia.appendChild(p);Ia.appendChild(v);Ia.appendChild(D);Ia.appendChild(y);Ia.appendChild(q);Z.overlayMessage=document.getElementById("overlayMessageBox"+b);v=document.getElementById("textBoxFor-overlayMessageBox"+b);Z.overlayMessage&&v&&(Z.overlayMessage.value=Z.Utils.getResource("z4SHORT"),Z.Utils.setHTMLTextStyle(Z.overlayMessage,"#666666","verdana","12px","none","normal","normal","normal","normal",
"1em","center","none"),v.style.display="none");m.style.zIndex=(Z.baseZIndex+16).toString();k.style.zIndex=(Z.baseZIndex+17).toString();u.style.zIndex=(Z.baseZIndex+18).toString();p.style.zIndex=(Z.baseZIndex+19).toString();f.style.zIndex=(Z.baseZIndex+20).toString()}if("markup"!=Z.editMode){var O=Z.Utils.createTextElement("noteNameTextElement"+b,"","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.Utils.addEventListener(O.firstChild,"focus",od);
Z.Utils.addEventListener(O.firstChild,"blur",Yc);Ia.appendChild(O);if(O=document.getElementById("textBoxFor-noteNameTextElement"+b))O.style.visibility="hidden";O=Z.Utils.createContainerElement("div","buttonContainerNote"+b,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal","default",!0);Ia.appendChild(O);Z.Utils.addEventListener(O,"mouseover",Z.Toolbar.backgroundEventsHandler);f=new Z.Utils.Button("buttonNoteAdd"+b,null,Z.skinPath,a[153],
a[154],a[155],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z364");O.appendChild(f.elmt);f=new Z.Utils.Button("buttonNoteEdit"+b,null,Z.skinPath,a[156],a[157],a[158],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z367");O.appendChild(f.elmt);f=new Z.Utils.Button("buttonNoteDelete"+b,null,Z.skinPath,a[147],a[148],a[149],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z366");O.appendChild(f.elmt);f=new Z.Utils.Button("buttonNoteCancel"+b,null,Z.skinPath,a[159],a[160],a[161],"1px","1px",
"1px","1px","mouseover",Z.Toolbar.z457,"z365");O.appendChild(f.elmt);Z.saveHandlerProvided&&(f=new Z.Utils.Button("buttonNoteSave"+b,null,Z.skinPath,a[150],a[151],a[152],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z368"),O.appendChild(f.elmt));f=Z.Utils.createContainerElement("div","overlayNoteDetailDisable"+b,"none","absolute","visible","1px","1px","0px","0px","none","0px",F,"0px","0px","normal","default",!0);Z.Utils.setOpacity(f,l,g);k=Z.Utils.createContainerElement("div","overlayNoteDisable"+
b,"none","absolute","visible","1px","1px","0px","0px","none","0px",F,"0px","0px","normal","default",!0);Z.Utils.setOpacity(k,l,g);Ia.appendChild(f);Ia.appendChild(k)}if(1==Z.helpVisible||2==Z.helpVisible)"markup"==Z.editMode?(b=new Z.Utils.Button("buttonHelpMarkup"+b,null,Z.skinPath,a[43],a[44],a[45],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z342MARKUP"),n.appendChild(b.elmt)):"edit"==Z.editMode&&(b=new Z.Utils.Button("buttonHelpAnnotation"+b,null,Z.skinPath,a[43],a[44],a[45],"1px","1px",
"1px","1px","mouseover",Z.Toolbar.z457,"z342ANNOTATION"),O.appendChild(b.elmt));dg(e,h);Ge();Z.unsavedEditsTest&&Z.Viewer.initializePageExitEventHandler()}function dg(h,b){var a=b.toString(),e=new n.calculateAnnotationPanelDimensions(We,bd,Xe,he),f=n.calculateAnnotationPanelCoords(ii,e.w,e.h,qa,ra);n.sizeAndPositionAnnotationPanel(ve,e.w,e.h,f.x,f.y);Z.annotationPanelVisibleState=!(0==Z.annotationPanelVisible||3==Z.annotationPanelVisible||4==Z.annotationPanelVisible||"0"==ii||Z.zoomRectangle&&!Z.annotations||
Z.measureVisible&&null===Z.editMode||Z.imageSet&&Z.annotationFileShared&&0==b);ve.display=Z.annotationPanelVisibleState?"inline-block":"none";var l=h[6],g=h[7],k=h[8],C=parseInt(Z.Utils.getResource("z53"),10),m=parseInt(Z.Utils.getResource("z51"),10),p=parseInt(Z.Utils.getResource("z55"),10),v=parseInt(Z.Utils.getResource("z54"),10),u=parseInt(Z.Utils.getResource("z56"),10),D=parseInt(Z.Utils.getResource("z62"),10);parseInt(Z.Utils.getResource("z63"),10);var O=parseInt(Z.Utils.getResource("z64"),
10),y=parseInt(Z.Utils.getResource("z72SMALL"),10),q=parseInt(Z.Utils.getResource("z72"),10),t=parseFloat(Z.Utils.getResource("z82")),J=Z.Utils.getResource("z83"),I=Z.Utils.getResource("z83LIGHT"),ja=Z.Utils.getResource("z83NOALPHA"),A=parseInt(Z.Utils.getResource("DEFAULT_ANNOTATIONCOMMENTHEIGHT"),10),B=parseInt(Z.Utils.getResource("z59"),10);he||(A=0);var x=9,w=p-24,ba=0,Bb=e.w-u-l-5,H=Z.browser==Z.browsers.CHROME||Z.browser==Z.browsers.SAFARI?-2:0,W=0,E=0,M=0,K=0,L=0,Sa=0,G=0,fa=0,Db=0;if("edit"==
Z.editMode)var N=0,Bf=0,P=0,S=0,T=0,V=0,Mc=0,X=0,R=0,ia=0,pa=0,Vc=0;var da=0;if(null===Z.editMode)We&&(N=u+4,da=N+17),bd&&(W=da+4+2,G=W+17+4,da=he?G+A:W+17),Xe&&(R=da+4+1,ia=R+17+4);else{var U=h[4],ga=h[5];15<l&&(l=15);15<g&&(g=15);22<k&&(k=22);1<U&&(U=1);18<ga&&(ga=18);var Q=.75*l,ca=.75*g,ea=2*Q,nb=u+3,Y=1.5*g,oa=2*g+1.5*ca,ka=l/2,ha=(ga-g)/2,ta=.5*g,aa=1.75*u,sa=e.w-2*u-2,ua=7*g+46.5,na=0,va=e.w-3*u,xa=40.5,Bb=e.w-u-l-5,ma=Bb-k,wa=ma-k;if("markup"==Z.editMode){if(x=0,aa=u+4,p=e.w-2*u,w=p-24,nb=
0,E=2,M=ta,K=M+g+8.5-1,L=E+2*g-1,rIconList=11.5,W=E+oa+8.5-4-2,Sa=W+15+8,G=Sa+15+8,fa=he?G+A+5:Sa+15+5,Db=ta-5,1==Z.helpVisible||2==Z.helpVisible)ba=k}else if("edit"==Z.editMode){We&&(N=u+4,Bf=N+17-1,P=ta,da=Bf+Y+4);bd&&(W=da+u,E=W+17+4+1,M=ta+1,S=M+g+ta,K=5,L=E+2*g-1,rIconList=12.75,Sa=E+Y+8.5+4,G=Sa+g+8.5,T=he?G+A+5:Sa+g+8.5,V=T+g+8.5,Mc=V+g+8.5,X=Mc+g+8.5,fa=X+g+8.5+5,Db=ta-5,da=fa+Y+4-5);Xe&&(R=da+u,ia=R+17+4+1,pa=ia+B+2,Vc=ta);var Ea=8.5*ea+1,Ga=1.8*ca}}var Ta=document.getElementById("annotationPanelBackground"+
a);if(Ta){var Fa=Ta.style;Fa.width=e.w+"px";Fa.height=e.h+"px";Fa.backgroundColor=J;Z.Utils.setOpacity(Ta,t,ja)}if(We){var Ha=document.getElementById("labelPOITextBox"+a);if(Ha&&la){var Da=Ha.style;Da.width=C-k+"px";Da.height="15px";Da.left=u+"px";Da.top=N+3+"px";Da.visibility="visible";Z.Utils.setTextNodeStyle(Ha,"black","verdana",D+"px","none","normal","normal","normal","normal","1em","left","none");var Ia=la.style;Ia.width=p-k+"px";Ia.left=C+"px";Ia.top=N+H+"px";Ia.visibility="visible";var za=
document.getElementById("buttonPOIGo"+a);if(za){Z.Utils.buttonSize(za,l,g);var Ma=za.style;Ma.left=Bb+4+"px";Ma.top=N+1+"px"}if(null!==Z.editMode){var Ka=document.getElementById("textBoxFor-poiNameTextElement"+a);if(Ka){var Wd=Ka.style;Wd.width=w-k+"px";Wd.height="15px";Wd.left=C+"px";Wd.top=N+"px";Z.Utils.setTextAreaStyle(Ka,"black","verdana",O+"px","none","normal","normal","normal","normal","1em","left","none",y+"px")}var Oa=document.getElementById("buttonContainerPOI"+a);if(Oa){var Wg=Oa.style;
Wg.width=e.w+"px";Wg.height=Y+"px";Wg.left="0px";Wg.top=Bf+"px"}var La=document.getElementById("buttonPOIEdit"+a);if(La){Z.Utils.buttonSize(La,l,g);var Pa=La.style;Pa.left=Bb+"px";Pa.top=P+"px"}var Na=document.getElementById("buttonPOIAdd"+a);if(Na){Z.Utils.buttonSize(Na,l,g);var Ba=Na.style;Ba.left=ma+"px";Ba.top=P+"px"}var ya=document.getElementById("buttonPOISave"+a);if(ya){Z.Utils.buttonSize(ya,l,g);var Ca=ya.style;Ca.left=Bb+"px";Ca.top=P+"px";Ca.display="none"}var Qa=document.getElementById("buttonPOICancel"+
a);if(Qa){Z.Utils.buttonSize(Qa,l,g);var jh=Qa.style;jh.left=ya?ma+"px":Bb+"px";jh.top=P+"px";jh.display="none"}var ye=document.getElementById("buttonPOIDelete"+a);if(ye){Z.Utils.buttonSize(ye,l,g);var Rg=ye.style;Rg.left=ya&&Qa?wa+"px":ya?ma+"px":Bb+"px";Rg.top=P+"px";Rg.display="none"}var ib=document.getElementById("overlayPOIDisable"+a);if(ib){var Ua=ib.style;Ua.width=e.w+"px";Ua.height=u+15+g+17+4+"px";Ua.left="0px";Ua.top="0px"}}}}if(bd){var Ya=document.getElementById("labelLabelTextBox"+a);
if(Ya){var Wa=Ya.style;Wa.width=C+"px";Wa.height="15px";Wa.left=u+"px";Wa.top=W+3+"px";Wa.visibility="visible";Z.Utils.setTextNodeStyle(Ya,"black","verdana",D+"px","none","normal","normal","normal","normal","1em","left","none")}}if(("markup"==Z.editMode||bd)&&ab){var Za=ab.style;Za.width=p-k+"px";Za.left="markup"==Z.editMode?u+"px":C+"px";Za.top=W+H+"px";Za.visibility="visible"}var cc=document.getElementById("buttonLabelGo"+a);if(cc){Z.Utils.buttonSize(cc,l,g);var eb=cc.style;eb.left=Bb+4+"px";eb.top=
W+1+"px"}if("edit"==Z.editMode&&bd||"markup"==Z.editMode){var db=document.getElementById("textBoxFor-labelNameTextElement"+a);if(db){var cb=db.style;cb.width=w-k+"px";cb.height="15px";cb.left="markup"==Z.editMode?u+"px":C+"px";cb.top=W+"px";Z.Utils.setTextAreaStyle(db,"black","verdana",O+"px","none","normal","normal","normal","normal","1em","left","none",y+"px")}var Ja=document.getElementById("buttonBorderLabel"+a);if(Ja){var Aa=Ja.style;Aa.width=sa+"px";Aa.height=ua+"px";Aa.left=u+"px";Aa.top=E+
"px"}var $a=document.getElementById("buttonContainerLabelModes"+a);if($a){var Ra=$a.style;Ra.width=e.w-2+"px";Ra.height="markup"==Z.editMode?oa+"px":.7*oa+"px";Ra.left="0px";Ra.top=E+"px"}var jc=document.getElementById("buttonViewMode"+a);if(jc){na+=aa+1;Z.Utils.buttonSize(jc,l,g);var Jf=jc.style;Jf.left=na+"px";Jf.top=M+"px"}var kb=document.getElementById("buttonEditColorPicker"+a);if(kb){na+=k;Z.Utils.buttonSize(kb,l,g);var gc=kb.style;gc.left=na+"px";gc.top=M+"px"}var Xa=document.getElementById("editModeDivider"+
a);if(Xa){na+=k+1;"markup"==Z.editMode&&(na+=ka-1);Z.Utils.graphicSize(Xa,U,ga);var tb=Xa.style;tb.left=na+"px";tb.top=M-ha+"px"}var lb=document.getElementById("buttonEditModeFreehand"+a);if(lb){na+=k-l+4;"markup"==Z.editMode&&(na+=ka-4);Z.Utils.buttonSize(lb,l,g);var mb=lb.style;mb.left=na+"px";mb.top=M+"px"}var ob=document.getElementById("buttonEditModeText"+a);if(ob){na+=k;Z.Utils.buttonSize(ob,l,g);var zb=ob.style;zb.left=na+"px";zb.top=M+"px"}var ub=document.getElementById("buttonEditModeIcon"+
a);if(ub){na+=k;Z.Utils.buttonSize(ub,l,g);var Ab=ub.style;Ab.left=na+"px";Ab.top=M+"px"}var qb=document.getElementById("buttonEditModeRectangle"+a);if(qb){na+=k;Z.Utils.buttonSize(qb,l,g);var sb=qb.style;sb.left=na+"px";sb.top=M+"px"}var vb=document.getElementById("buttonEditModePolygon"+a);if(vb){na+=k;Z.Utils.buttonSize(vb,l,g);var Va=vb.style;Va.left=na+"px";Va.top=M+"px"}var wb=document.getElementById("buttonEditModeMeasure"+a);if(wb){na+=k;Z.Utils.buttonSize(wb,l,g);var jb=wb.style;jb.left=
na+"px";jb.top=M+"px"}if("markup"!=Z.editMode){var Yb=document.getElementById("buttonContainerLabelColorsBackground"+a);if(Yb){var yb=Yb.style;yb.width=Ea+"px";yb.height=Ga+"px";yb.left="0px";yb.top="0px"}}var Fb=document.getElementById("buttonContainerLabelColors"+a);if(Fb){var Gb=Fb.style;Gb.left=nb+"px";Gb.top=S+"px"}var Hb=document.getElementById("buttonColor0"+a);if(Hb){na=u+4+1;Z.Utils.buttonSize(Hb,Q,ca);var rb=Hb.style;rb.left=na+"px";rb.top=K+"px"}var bb=document.getElementById("buttonColor1"+
a);if(bb){na+=ea;Z.Utils.buttonSize(bb,Q,ca);var qc=bb.style;qc.left=na+"px";qc.top=K+"px"}var Kb=document.getElementById("buttonColor2"+a);if(Kb){na+=ea;Z.Utils.buttonSize(Kb,Q,ca);var Nb=Kb.style;Nb.left=na+"px";Nb.top=K+"px"}var fb=document.getElementById("buttonColor3"+a);if(fb){na+=ea;Z.Utils.buttonSize(fb,Q,ca);var Qb=fb.style;Qb.left=na+"px";Qb.top=K+"px"}var rh=document.getElementById("buttonColor4"+a);if(rh){na+=ea;Z.Utils.buttonSize(rh,Q,ca);var rc=rh.style;rc.left=na+"px";rc.top=K+"px"}var Lb=
document.getElementById("buttonColor5"+a);if(Lb){na+=ea;Z.Utils.buttonSize(Lb,Q,ca);var Nc=Lb.style;Nc.left=na+"px";Nc.top=K+"px"}var Jb=document.getElementById("buttonColor6"+a);if(Jb){na+=ea;Z.Utils.buttonSize(Jb,Q,ca);var xb=Jb.style;xb.left=na+"px";xb.top=K+"px"}var Vh=document.getElementById("buttonColor7"+a);if(Vh){na+=ea;Z.Utils.buttonSize(Vh,Q,ca);var dh=Vh.style;dh.left=na+"px";dh.top=K+"px"}var Zb=document.getElementById("buttonBorderLg"+a);if(Zb){var gb=Zb.style;gb.width=l+"px";gb.height=
g+"px";jc?(gb.left=parseFloat(Jf.left)-2+"px",gb.top=parseFloat(Jf.top)-2+"px"):lb?(gb.left=parseFloat(mb.left)-2+"px",gb.top=parseFloat(mb.top)-2+"px"):qb?(gb.left=parseFloat(sb.left)-2+"px",gb.top=parseFloat(sb.top)-2+"px"):vb?(gb.left=parseFloat(Va.left)-2+"px",gb.top=parseFloat(Va.top)-2+"px"):wb&&(gb.left=parseFloat(jb.left)-2+"px",gb.top=parseFloat(jb.top)-2+"px")}var Eb=document.getElementById("buttonBorderSm"+a);if(Eb&&rb){var Tb=Eb.style;Tb.width=Q+"px";Tb.height=ca+"px";Tb.left=parseFloat(rb.left)-
2+"px";Tb.top=parseFloat(rb.top)-2+"px"}}if("markup"==Z.editMode||"edit"==Z.editMode&&bd){var $b=document.getElementById("labelCaptionTextBox"+a),bc=document.getElementById("textBoxFor-captionTextElement"+a);if($b&&bc){var Mb=$b.style;Mb.width=C+"px";Mb.height="15px";Mb.left=aa+"px";Mb.top=Sa+3+"px";Mb.visibility="markup"==Z.editMode?"hidden":"visible";Z.Utils.setTextNodeStyle($b,"black","verdana",D+"px","none","normal","normal","normal","normal","1em","left","none");var Wb=bc.style;Wb.width="markup"==
Z.editMode?e.w-2*u-4+1+"px":m+x+"px";Wb.height="15px";Wb.left="markup"==Z.editMode?u+"px":aa+C+"px";Wb.top=Sa+"px";Z.Utils.setTextAreaStyle(bc,"black","verdana",O+"px","none","normal","normal","normal","normal","1em","left","none",y+"px")}}var dc=document.getElementById("textBoxFor-commentTextElement"+a);if(dc){var pb=e.w-2*u-(null===Z.editMode?2:3),Ib=dc.style;Ib.width=pb+"px";Ib.height=A+"px";Ib.left=u+"px";Ib.top=G+"px";Ib.visibility="visible";Z.Utils.setTextAreaStyle(dc,"black","verdana",O+"px",
"none","normal","normal","normal","normal","1.5em","left","none","0px");var Xb=document.getElementById("commentTextElement"+a),u=pb*(1-.98);Xb.style.marginLeft=u+"px";Xb.style.width="98%"}if("edit"==Z.editMode&&bd){var Pb=document.getElementById("labelTooltipTextBox"+a),Rb=document.getElementById("textBoxFor-tooltipTextElement"+a);if(Pb&&Rb){var Sb=Pb.style;Sb.width=C+"px";Sb.height="15px";Sb.left=aa+"px";Sb.top=T+3+"px";Sb.visibility="visible";Z.Utils.setTextNodeStyle(Pb,"black","verdana",D+"px",
"none","normal","normal","normal","normal","1em","left","none");var Cb=Rb.style;Cb.width=m+x+"px";Cb.height="15px";Cb.left=aa+C+"px";Cb.top=T+"px";Z.Utils.setTextAreaStyle(Rb,"black","verdana",O+"px","none","normal","normal","normal","normal","1em","left","none",y+"px")}var ec=document.getElementById("labelClickURLTextBox"+a),fc=document.getElementById("textBoxFor-clickURLTextElement"+a);if(ec&&fc){var Ub=ec.style;Ub.width=C+"px";Ub.height="15px";Ub.left=aa+"px";Ub.top=V+3+"px";Ub.visibility="visible";
Z.Utils.setTextNodeStyle(ec,"black","verdana",D+"px","none","normal","normal","normal","normal","1em","left","none");Cb=fc.style;Cb.width=m+x+"px";Cb.height="15px";Cb.left=aa+C+"px";Cb.top=V+"px";Z.Utils.setTextAreaStyle(fc,"black","verdana",O+"px","none","normal","normal","normal","normal","1em","left","none",y+"px")}var Uc=document.getElementById("labelCaptionPositionList"+a);if(Uc){var Vb=Uc.style;Vb.width=v+"px";Vb.left=aa+"px";Vb.top=Mc+"px";Vb.visibility="visible"}var mc=document.getElementById("labelTargetList"+
a);if(mc){var Vg=mc.style;Vg.width=v+"px";Vg.left=aa+v+k-l+"px";Vg.top=Mc+"px";Vg.visibility="visible"}var hc=document.getElementById("labelScaleTextBox"+a),ud=document.getElementById("buttonLabelScaleDown"+a),kc=document.getElementById("buttonLabelScaleUp"+a);if(hc&&ud&&kc){var na=aa+12,ac=hc.style;ac.width=C+"px";ac.height="15px";ac.left=na+"px";ac.top=X+3+"px";ac.visibility="visible";Z.Utils.setTextNodeStyle(hc,"black","verdana",D+"px","none","normal","normal","normal","normal","1em","left","none");
na+=C-10;Z.Utils.buttonSize(ud,l,g);var vc=ud.style;vc.left=na+"px";vc.top=X+"px";na+=k;Z.Utils.buttonSize(kc,l,g);var wc=kc.style;wc.left=na+"px";wc.top=X+"px";na+=k+3}var oc=document.getElementById("labelRolloverTextBox"+a),yc=document.getElementById("containerFor-checkboxRollover"+a),pc=document.getElementById("checkboxRollover"+a);if(oc&&yc&&pc){var Pd=oc.style;Pd.width=C+"px";Pd.height="15px";Pd.left=na+"px";Pd.top=X+3+"px";Pd.visibility="visible";Z.Utils.setTextNodeStyle(oc,"black","verdana",
D+"px","none","normal","normal","normal","normal","1em","left","none");var na=na+(C-1),ic=yc.style;ic.width=1.5*l+"px";ic.height=1.5*g+"px";ic.left=na+3+"px";ic.top=X-3+"px";pc.width=l;pc.height=g}}if("edit"==Z.editMode&&bd||"markup"==Z.editMode){var jd=document.getElementById("buttonContainerLabelEdit"+a);if(jd){var lc=jd.style;lc.width=e.w+"px";lc.height=Y+"px";lc.left="0px";lc.top=fa+"px"}}if("edit"==Z.editMode&&bd){var sc=document.getElementById("buttonLabelEdit"+a);if(sc){Z.Utils.buttonSize(sc,
l,g);var cd=sc.style;cd.left=Bb+"px";cd.top=Db+"px"}var xc=document.getElementById("buttonLabelAdd"+a);if(xc){Z.Utils.buttonSize(xc,l,g);var Dc=xc.style;Dc.left=ma+"px";Dc.top=Db+"px"}}if("edit"==Z.editMode&&bd||"markup"==Z.editMode){var Cf=document.getElementById("buttonLabelSave"+a);if(Cf){Z.Utils.buttonSize(Cf,l,g);var kd=Cf.style;kd.left=Bb-ba+"px";kd.top=Db+"px";"markup"!=Z.editMode&&(kd.display="none")}}if("edit"==Z.editMode&&bd){var tc=document.getElementById("buttonLabelCancel"+a);if(tc){Z.Utils.buttonSize(tc,
l,g);var zc=tc.style;zc.left=Cf?ma+"px":Bb+"px";zc.top=Db+"px";"markup"!=Z.editMode&&(zc.display="none")}}if("edit"==Z.editMode&&bd||"markup"==Z.editMode){var gh=document.getElementById("buttonLabelDelete"+a);if(gh){Z.Utils.buttonSize(gh,l,g);var zd=gh.style;zd.left=Cf&&tc?wa-ba+"px":Cf?ma-ba+"px":Bb-ba+"px";zd.top=Db+"px";"markup"!=Z.editMode&&(zd.display="none")}}if("markup"==Z.editMode){var Ob=document.getElementById("buttonHelpMarkup"+a);if(Ob){Z.Utils.buttonSize(Ob,l,g);var Gc=Ob.style;Gc.left=
Bb+"px";Gc.top=Db+"px"}}if("edit"==Z.editMode&&bd||"markup"==Z.editMode){var Yg=document.getElementById("buttonContainerLabelIcons"+a);if(Yg){var Kc=Yg.style;Kc.left=u/2+"px";Kc.top=L+"px"}var Bc=document.getElementById("buttonContainerLabelIconsBackground"+a);if(Bc){var nc=Bc.style;nc.width=va+2*u-1+"px";nc.height=xa+"px";nc.left="0px";nc.top="0px"}var Rc=document.getElementById("labelIconList"+a);if(Rc){var Jc=Rc.style;Jc.width=va+"px";Jc.left=u+"px";Jc.top=rIconList+"px"}}if("edit"==Z.editMode&&
bd){var Sc=document.getElementById("overlayLabelDisable"+a);if(Sc){var Ec=Sc.style;Ec.width=e.w+"px";Ec.height=ua+2*ta+2*g+8+"px";Ec.left="0px";Ec.top=W+"px"}var Tc=document.getElementById("overlayLabelDetailDisable"+a);if(Tc&&Aa){var Ac=Tc.style;Ac.width=parseFloat(Aa.width)+2+"px";Ac.height=parseFloat(Aa.height)+2+"px";Ac.left=parseFloat(Aa.left)+"px";Ac.top=parseFloat(Aa.top)+"px";Ac.display="inline-block"}var Xc=document.getElementById("overlayLabelDetailEditableDisable"+a);if(Xc){var Hc=Xc.style;
Hc.width=parseFloat(Aa.width)+"px";Hc.height=parseFloat(Aa.height)+"px";Hc.left=parseFloat(Aa.left)+1+"px";Hc.top=parseFloat(Aa.top)+1+"px"}var Ed=document.getElementById("overlayMessageBox"+a),ad=document.getElementById("textBoxFor-overlayMessageBox"+a);if(Ed&&ad){var hd=ad.style;hd.width=sa-50+"px";hd.height="25px";hd.left=parseFloat(Aa.left)+21+"px";hd.top=parseFloat(Aa.top)+45+"px";hd.backgroundColor=I;Ed.style.backgroundColor=I}var yd=document.getElementById("overlayLabelNameEditableDisable"+
a);if(yd){var uc=yd.style;uc.width=e.w+"px";uc.height="25px";uc.left="0px";uc.top=W-4+"px"}var Oc=document.getElementById("overlayLabelCaptionPositionDisable"+a);if(Oc){var Qc=Oc.style;Qc.width=e.w/2-12+"px";Qc.height="24.5px";Qc.left=u+1+"px";Qc.top=parseFloat(Vb.top)-4+"px"}}if(Xe){var Fc=document.getElementById("labelNoteTextBox"+a),Zc=document.getElementById("textBoxFor-noteTextElement"+a);if(Fc&&hb&&Zc){var Ic=Fc.style;Ic.width=C+"px";Ic.height="15px";Ic.left=u+"px";Ic.top=R+3+"px";Ic.visibility=
"visible";Z.Utils.setTextNodeStyle(Fc,"black","verdana",D+"px","none","normal","normal","normal","normal","1em","left","none");var Se=hb.style;Se.width=p+"px";Se.left=C+"px";Se.top=R+H+"px";Se.visibility="visible";var ld=e.w-2*u-2,Lc=Zc.style;Lc.width=ld+"px";Lc.height=B+"px";Lc.left=u+"px";Lc.top=ia+"px";Lc.visibility="visible";Z.Utils.setTextAreaStyle(Zc,"black","verdana",O+"px","none","normal","normal","normal","normal","1.5em","left","none","0px");var Yc=document.getElementById("noteTextElement"+
a),u=ld*(1-.98);Yc.style.marginLeft=u+"px";Yc.style.width="98%";if(null!==Z.editMode){var fd=document.getElementById("textBoxFor-noteNameTextElement"+a);if(fd){var $c=fd.style;$c.width=w+"px";$c.height="15px";$c.left=C+"px";$c.top=R+"px";Z.Utils.setTextAreaStyle(fd,"black","verdana",O+"px","none","normal","normal","normal","normal","1em","left","none",y+"px")}var xd=document.getElementById("buttonContainerNote"+a);if(xd){var vd=xd.style;vd.width=e.w+"px";vd.height=oa+"px";vd.left="0px";vd.top=pa+
"px"}var Fd=document.getElementById("buttonNoteEdit"+a);if(Fd){Z.Utils.buttonSize(Fd,l,g);var td=Fd.style;td.left=Bb+"px";td.top=Vc+"px"}var md=document.getElementById("buttonNoteAdd"+a);if(md){Z.Utils.buttonSize(md,l,g);var nd=md.style;nd.left=ma+"px";nd.top=Vc+"px"}var Cc=document.getElementById("buttonNoteSave"+a);if(Cc){Z.Utils.buttonSize(Cc,l,g);var rd=Cc.style;rd.left=Bb+"px";rd.top=Vc+"px";rd.display="none"}var gd=document.getElementById("buttonNoteCancel"+a);if(gd){Z.Utils.buttonSize(gd,l,
g);var sd=gd.style;sd.left=Cc?ma+"px":Bb+"px";sd.top=Vc+"px";sd.display="none"}var Td=document.getElementById("buttonNoteDelete"+a);if(Td){Z.Utils.buttonSize(Td,l,g);var dd=Td.style;dd.left=Cc&&gd?wa+"px":Cc?ma+"px":Bb+"px";dd.top=Vc+"px";dd.display="none"}if("edit"==Z.editMode){var Wc=document.getElementById("buttonHelpAnnotation"+a);if(Wc){Z.Utils.buttonSize(Wc,l,g);var ed=Wc.style;ed.left=aa+"px";ed.top=Vc+"px"}}var od=document.getElementById("overlayNoteDetailDisable"+a);if(od){var Pc=od.style;
Pc.width=parseFloat(Lc.width)+2+"px";Pc.height=parseFloat(Lc.height)+2+"px";Pc.left=parseFloat(Lc.left)+"px";Pc.top=parseFloat(Lc.top)+"px";Pc.display="inline-block"}var pd=document.getElementById("overlayNoteDisable"+a);if(pd){var qd=pd.style;qd.width=e.w+"px";qd.height=23.5+B+q+8.5+g+4+"px";qd.left="0px";qd.top=R+"px"}}}}0<b&&(ve.display="none")}function Ge(){Pc("0");n.getStatus("annotationPanelInitializedViewport")||"edit"==Z.editMode&&!document.getElementById("buttonLabelSave"+Ta.toString())||
n.setStatus("annotationPanelInitializedViewport",!0)}function Xb(h){var b=0,a=[];switch(h){case "image":if(He){h=0;for(var e=He.length;h<e;h++)a[a.length]=parseInt(He[h].value,10)}break;case "slide":if(Qc)for(h=0,e=Qc.length;h<e;h++)a[a.length]=parseInt(Qc[h].internalID,10);break;case "hotspot":if(A)for(h=0,e=A.length;h<e;h++)a[a.length]=parseInt(A[h].internalID,10);break;case "poi":if(Ha)for(h=0,e=Ha.length;h<e;h++)a[a.length]=parseInt(Ha[h].value,10);break;case "label":if(xa)for(h=0,e=xa.length;h<
e;h++)a[a.length]=parseInt(xa[h].value,10);break;case "labelExternal":if(A)for(h=0,e=A.length;h<e;h++)a[a.length]=parseInt(A[h].id,10);break;case "note":if(cb)for(h=0,e=cb.length;h<e;h++)a[a.length]=parseInt(cb[h].value,10)}0<a.length&&(a=Z.Utils.arraySortNumericAscending(a),b=a[a.length-1]+1);return b.toString()}function mf(){if(Ab){Z.Utils.clearDisplay(Ab);Wa.save();Wa.scale(Ec,Ec);var h=$a(sb,1);Wa.translate(-(Z.imageX-Z.imageW/2)*h,-(Z.imageY-Z.imageH/2)*h);Wa.drawImage(S,-S.width/2,-S.height/
2,S.width,S.height);Wa.restore();Wa.drawImage(sa,-sa.width/2,-sa.height/2,sa.width,sa.height);h=Wa.getImageData(0,0,Ab.width,Ab.height);h=Z.Utils.filterImage(h,"grayscale","",void 0);Wa.putImageData(h,0,0)}}function Mg(h){if(h=Z.Utils.event(h)){var b=Z.Utils.target(h);h=Z.Utils.relatedTarget(h);var a=Bc(b);null===a||null===h||"captionTextBox"==h.id&&-1!=b.id.indexOf("hot")&&-1==b.id.indexOf("hotspotDisplay")||"captionTextBox"==b.id&&-1!=h.id.indexOf("hot")&&-1==h.id.indexOf("hotspotDisplay")||n.setHotspotVisibility(a,
!0)}}function ff(h){if(h=Z.Utils.event(h)){var b=Z.Utils.target(h);h=Z.Utils.relatedTarget(h);var a=Bc(b);null===a||null===h||"captionTextBox"==h.id&&-1!=b.id.indexOf("hot")&&-1==b.id.indexOf("hotspotDisplay")||"captionTextBox"==b.id&&-1!=h.id.indexOf("hot")&&-1==h.id.indexOf("hotspotDisplay")||n.setHotspotPopupVisibility(a,!0)}}function Wf(h){if(h=Z.Utils.event(h))Z.clickZoomAndPanBlock=!0}function Xf(h){if(h=Z.Utils.event(h)){var b=Z.Utils.target(h);h=Z.Utils.relatedTarget(h);var a=Bc(b);null===
a||null===h||"captionTextBox"==h.id&&-1!=b.id.indexOf("hot")&&-1==b.id.indexOf("hotspotDisplay")||"captionTextBox"==b.id&&-1!=h.id.indexOf("hot")&&-1==h.id.indexOf("hotspotDisplay")||n.setHotspotVisibility(a,!1)}}function Ng(h){if(h=Z.Utils.event(h)){var b=Z.Utils.target(h);h=Z.Utils.relatedTarget(h);var a=Bc(b);null===a||null===h||"captionTextBox"==h.id&&-1!=b.id.indexOf("hot")&&-1==b.id.indexOf("hotspotDisplay")||"captionTextBox"==b.id&&-1!=h.id.indexOf("hot")&&-1==h.id.indexOf("hotspotDisplay")||
n.setHotspotPopupVisibility(a,!1)}}function Gd(h){if(h=Z.Utils.event(h))Z.clickZoomAndPanBlock=!0}function je(h){(h=Z.Utils.event(h))&&!h.altKey&&(h=Z.Utils.target(h),h=Bc(h),h=h.id.substring(3,h.id.length),Z.Utils.arrayIndexOfObjectValue(A,"internalID",h),h=Z.Utils.getResource("z3"),Z.Utils.showMessage(h,!0,null,"center",!0))}function df(h){(h=Z.Utils.event(h))&&!h.altKey&&(h=Z.Utils.target(h),h=Bc(h),h=h.id.substring(3,h.id.length),Z.Utils.arrayIndexOfObjectValue(A,"internalID",h),h=Z.Utils.getResource("z3"),
Z.Utils.showMessage(h,!0,null,"center",!0))}function ef(h){var b=h.type,a=Z.Utils.target(h);a&&(a=Bc(a),K=a.id.substring(3,a.id.length));"touchstart"==b?(h=Z.Utils.getFirstTouch(h),"undefined"!==typeof h&&(Qh=new Z.Utils.Point(h.pageX,h.pageY),Rh=(new Date).getTime())):"touchmove"==b?(h=Z.Utils.getFirstTouch(h),"undefined"!==typeof h&&(oh=new Z.Utils.Point(h.pageX,h.pageY))):(Qh=Z.Utils.getMousePosition(h),Rh=(new Date).getTime())}function ed(h){var b=h.type;"touchend"==b||"touchcancel"==b?(b=Z.Utils.getFirstTouch(h),
"undefined"!==typeof b?oh=new Z.Utils.Point(b.pageX,b.pageY):null!==Rh&&(new Date).getTime()-Rh<Gi&&(oh=Qh,Rh=null)):oh=Z.Utils.getMousePosition(h);b=Z.Utils.calculatePointsDistance(Qh.x,Qh.y,oh.x,oh.y);h=h?h.altKey:null;b<Wj&&!h&&(h=Z.Viewport.z538(this),h=h.id.substring(3,h.id.length),h=Z.Utils.arrayIndexOfObjectValue(A,"internalID",h),-1!=h&&(h=unescape(A[h].urlTarget),h=new Function(h),window.setTimeout(h,200)))}function Fe(h){Z.Utils.removeEventListener(Oa,"mousedown",Fe);if(!Z.hotspotListTitle||
!Z.Utils.stringValidate(Z.hotspotListTitle)||"none"==Z.hotspotListTitle)if(h=Z.Utils.getResource("UI_LISTMOUSEDOWNTEXT"),Oa.options[0].text!=h){var b=document.createElement("option");b.text=h;b.value=null;Oa.add(b,0)}Oa.selectedIndex=0;Z.Utils.addEventListener(Oa,"change",Ie)}function Ie(h){if(h=Z.Utils.event(h))Z.tourPlaying&&n.tourStop(),h=Z.Utils.target(h),h=h.options[h.selectedIndex].value,isNaN(parseInt(h),10)||(h=Z.Utils.arrayIndexOfObjectValue(A,"internalID",h),-1!=h&&(h=A[h],K=h.internalID,
Z.Utils.playAudio(Sh,h.audio),n.zoomAndPanToView(h.x,h.y,h.z/100,h.rotation))),Z.Utils.removeEventListener(Oa,"change",Ie),window.setTimeout(function(){Z.Utils.addEventListener(Oa,"mousedown",Fe)},10)}function Pc(h,b,a){Ha.sort(Oc);Z.Utils.updateSelectElement(la,Ha,h);if("undefined"===typeof h||null===h)0==la.options.length&&(h=Z.Utils.getResource("z27"),jf("0",h,"center","center","-1","0","1"),ph="0"),h="0";else{var e=Z.Utils.arrayIndexOfObjectValue(Ha,"value",h);-1!=e&&(h=Ha[e].value)}var f=Ta.toString(),
e=Z.Utils.arrayIndexOfObjectValue(Ha,"value",h);(f=document.getElementById("poiNameTextElement"+f))&&-1!=e&&(f.value=Ha[e].text);nc(h,b);"markup"!=Z.editMode&&Hd(h,a)}function nc(h,b,a){xa.sort(Oc);wb="markup"==Z.editMode?Z.Utils.arrayClone("labels",xa,wb):le(xa,h);Z.Utils.updateSelectElement(ab,wb,b);if("undefined"===typeof b||null===b)b=0<ab.options.length?ab.options[0].value:null;nf(b,a)}function nf(h,b){var a=Ta.toString();K=h;qb=Th=null;Qb=!0;var e=Z.Utils.arrayIndexOfObjectValue(A,"internalID",
K);X=-1!=e?A[e]:null;var f=!n.getLabelEditable(K);if(he){var l=document.getElementById("commentTextElement"+a);if(l){var g="undefined"!==la&&null!==la&&0<la.options.length&&la.options[la.selectedIndex].text!=Z.Utils.getResource("UI_LISTMOUSEDOWNTEXT")&&"undefined"===typeof xa||null===xa.length||0==xa.length;l.value="markup"==Z.editMode&&g?Z.Utils.getResource("CONTENT_LABELCOMMENTMARKUPNOLABELS"):"";null!==X&&(g=X.comment,null!==g&&Z.Utils.stringValidate(g)&&(l.value=g),l.readOnly=f)}}if(null!==Z.editMode){if(l=
document.getElementById("labelNameTextElement"+a))l.value=null!==X?X.name:"",l.readOnly=f;if(l=document.getElementById("captionTextElement"+a))l.value="",null!==X&&(g=X.captionHTML,"undefined"!==typeof g&&Z.Utils.stringValidate(g)?l.value=g:l.value=X.caption,l.readOnly=f);if(!("markup"==Z.editMode||b||"addLabel"==Z.editing&&vc)){var k=document.getElementById("labelIconList"+a),g=document.getElementById("tooltipTextElement"+a),l=document.getElementById("clickURLTextElement"+a),C=document.getElementById("labelCaptionPositionList"+
a),f=document.getElementById("labelTargetList"+a),a=document.getElementById("checkboxRollover"+a);if(k&&g&&l&&C&&f&&a&&(g.value="",l.value="",C.selectedIndex=0,f.selectedIndex=0,a.checked=!1,null!==X)){if("icon"==X.mediaType){var e=X.media.toLowerCase(),m="circle"==e||"square"==e||"triangle"==e||"arrowDown"==e||"arrowDownLeft"==e||"arrowLeft"==e||"arrowUpLeft"==e||"arrowUp"==e||"arrowUpRight"==e||"arrowRight"==e||"arrowDownRight"==e||"lineHorizontal"==e||"lineVertical"==e,p=-1!=e.indexOf("/circle.")||
-1!=e.indexOf("/square.")||-1!=e.indexOf("/triangle.")||-1!=e.indexOf("/arrowDownLeft.")||-1!=e.indexOf("/arrowDownRight.")||-1!=e.indexOf("/arrowUpLeft.")||-1!=e.indexOf("/arrowUpRight.")||-1!=e.indexOf("/arrowUp.")||-1!=e.indexOf("/arrowDown.")||-1!=e.indexOf("/arrowLeft.")||-1!=e.indexOf("/arrowRight.")||-1!=e.indexOf("/lineHorizontal.")||-1!=e.indexOf("/lineVertical."),v=null;m?v=e:p&&(m=e.lastIndexOf("/")+1,p=e.lastIndexOf("."),-1!=m&&-1!=p&&(v=e.substring(m,p).toLowerCase()));v&&(e=Z.Utils.arrayIndexOfObjectValueSubstring(k,
"value",v,null,!0),-1!=e&&(k.selectedIndex=e),n.toggleLabelIconPicker(!1))}k=X.captionPosition;Z.Utils.stringValidate(k)&&(e=Z.Utils.arrayIndexOfObjectValue(C,"value",k),-1!=e&&(C.selectedIndex=e));C=X.tooltipHTML;"undefined"!==typeof C&&Z.Utils.stringValidate(C)?g.value=C:g.value=X.tooltip;g=X.clickURL;Z.Utils.stringValidate(g)&&(l.value=g);l=X.urlTarget;Z.Utils.stringValidate(l)&&(e=Z.Utils.arrayIndexOfObjectValue(f,"value",l),-1!=e&&(f.selectedIndex=e));a.checked=1==X.rollover}}}null!==X&&(K=X.internalID);
K!=eg&&Z.Viewer.getStatus("readyViewer")&&Z.Utils.validateCallback("currentLabelChangedGetID");da?Bd():Ob()}function Hd(h,b){cb.sort(Oc);wc=le(cb,h);Z.Utils.updateSelectElement(hb,wc,b);if("undefined"===typeof b||null===b)b=null,hb.selectedIndex=0,0<hb.options.length&&(b=hb.options[0].value);fg(b)}function fg(h){var b=Ta.toString();h=Z.Utils.arrayIndexOfObjectValue(wc,"value",h);if(null!==Z.editMode){var a=document.getElementById("noteNameTextElement"+b);a&&(a.value=-1!=h?wc[h].text:"")}if(b=document.getElementById("noteTextElement"+
b))b.value=-1!=h?wc[h].noteText:""}function of(h){if(h=Z.Utils.event(h))h=Z.Utils.target(h),(h=h.options[h.selectedIndex].value)&&!isNaN(parseInt(h),10)&&(n.saveEditsPOI(!0),Pc(h))}function gg(h){if(h=Z.Utils.event(h))h=Z.Utils.target(h),(h=h.options[h.selectedIndex].value)&&!isNaN(parseInt(h,10))&&(n.saveEditsLabel(!0,!1,!1),nf(h),K=h,Qb=!0,h=Z.Utils.arrayIndexOfObjectValue(A,"internalID",K),X=-1!=h?A[h]:null,Z.maskVisible&&(Z.Utils.arrayClear(pf),pf[pf.length]=X.id,n.setLabelMaskByDisplayList(pf,
!1)),"view"!=Z.labelMode&&n.setEditModeLabel(X.mediaType,!0,X.media,!0))}function cg(h){n.toggleLabelIconPicker(!1);h=Z.Utils.event(h);h=Z.Utils.target(h);h=h[h.selectedIndex].value;if("markup"!=Z.editMode&&"editLabel"==Z.editing&&"shim"!=h){var b;switch(h){case "shim":break;case "External Graphics File":break;default:b=Z.labelIconsInternal?h:jc+"/"+h}n.modifyHotspot(K,"mediaType","icon",!0,!0);n.modifyHotspot(K,"media",b,!1,!0)}}function Og(h){h=Z.Utils.event(h);h=Z.Utils.target(h);h=labelCaptionPositionListDP[h.selectedIndex].value;
"shim"!==h&&n.modifyHotspot(K,"captionPosition",h,!1,!0)}function lf(h){h=Z.Utils.event(h);h=Z.Utils.target(h);h=labelTargetListDP[h.selectedIndex].value;"shim"!==h&&n.modifyHotspot(K,"urlTarget",h,!1,!0)}function bg(h){if(h=Z.Utils.event(h))h=Z.Utils.target(h),n.modifyHotspot(K,"rollover",h.checked,!1,!0)}function hg(h){var b;if(h=Z.Utils.event(h))h=Z.Utils.target(h),b=h.options[h.selectedIndex].value;b&&!isNaN(parseInt(b,10))&&(n.saveEditsNote(!0),fg(b))}function od(h){if(h=Z.Utils.event(h))if(h=
Z.Utils.target(h))qf(h.id),Z.Viewer.initializeViewerKeyEventListeners(!1),Z.Utils.removeEventListener(document,"keydown",Z.Utils.preventDefault),Z.Utils.removeEventListener(document,"keyup",Z.Utils.preventDefault)}function Yc(h){var b=Z.viewportCurrentID,a=Z.annotationFileShared?"0":b;if(h=Z.Utils.event(h)){if(h=Z.Utils.target(h)){if(0==ab.options.length&&(h.id=="labelNameTextElement"+a||h.id=="captionTextElement"+a||h.id=="tooltipTextElement"+a||h.id=="clickURLTextElement"+a)){Z.Utils.showMessage(Z.Utils.getResource("z4"),
!0,Z.messageDurationLong,"center",!0);return}b=null;switch(h.id){case "poiNameTextElement"+a:a=la.selectedIndex;Ha[a].text=h.value;a=la[a].value;Ha.sort(Oc);Z.Utils.updateSelectElement(la,Ha,a);break;case "labelNameTextElement"+a:a=ab.selectedIndex;wb[a].text=h.value;a=ab[a].value;if("undefined"===typeof e||null===e)e="0";e=Z.Utils.arrayIndexOfObjectTwoValues(xa,"poiID",e,null,"value",a);-1!=e&&(console.log("setting list dp"),xa[e].text=h.value);xa.sort(Oc);wb.sort(Oc);Z.Utils.updateSelectElement(ab,
wb,a);e=Z.Utils.arrayIndexOfObjectValue(A,"internalID",K);-1!=e&&(A[e].name=h.value);break;case "captionTextElement"+a:b=(b=h.value)&&-1!=b.indexOf("<CAPTION>")?"captionHTML":"caption";break;case "commentTextElement"+a:a=Z.Utils.arrayIndexOfObjectValue(A,"internalID",K);-1!=a&&(A[a].comment=h.value);break;case "tooltipTextElement"+a:b=(b=h.value)&&-1!=b.indexOf("<TOOLTIP>")?"tooltipHTML":"tooltip";break;case "clickURLTextElement"+a:b="clickURL";break;case "noteNameTextElement"+a:a=hb.selectedIndex;
wc[a].text=h.value;var e=wc[a].poiID,a=wc[a].value,e=Z.Utils.arrayIndexOfObjectTwoValues(cb,"poiID",e,null,"value",a);-1!=e&&(cb[e].text=h.value);cb.sort(Oc);wc.sort(Oc);Z.Utils.updateSelectElement(hb,wc,a);break;case "noteTextElement"+a:a=hb.selectedIndex,wc[a].noteText=h.value,e=wc[a].poiID,a=wc[a].value,e=Z.Utils.arrayIndexOfObjectTwoValues(cb,"poiID",e,null,"value",a),-1!=e&&(cb[e].noteText=h.value)}null!==b&&Z.viewportCurrent.modifyHotspot(K,b,h.value,!1,!0)}Z.Viewer.initializeViewerKeyEventListeners(!0);
Z.Viewer.initializeViewerKeyDefaultListeners(!0)}}function qf(h){var b=Ta.toString();if("markup"==Z.editMode){var a=document.getElementById("labelNameTextElement"+b),e=document.getElementById("captionTextElement"+b),f=document.getElementById("commentTextElement"+b),l=f?1:0;if(a&&e)switch(h){case "labelNameTextElement"+b:a.tabIndex=1;e.tabIndex=2;f&&(f.tabIndex=3);break;case "captionTextElement"+b:a.tabIndex=3;e.tabIndex=1;f&&(f.tabIndex=2);break;case "commentTextElement"+b:a.tabIndex=2,e.tabIndex=
3,f&&(f.tabIndex=1)}}else if(null!==Z.editMode){var l=document.getElementById("poiNameTextElement"+b),a=document.getElementById("labelNameTextElement"+b),e=document.getElementById("captionTextElement"+b),f=document.getElementById("commentTextElement"+b),g=document.getElementById("tooltipTextElement"+b),n=document.getElementById("clickURLTextElement"+b),k=document.getElementById("noteNameTextElement"+b),b=document.getElementById("noteTextElement"+b);l&&(l.tabIndex="");a&&(a.tabIndex="");e&&(e.tabIndex=
"");f&&(f.tabIndex="");g&&(g.tabIndex="");n&&(n.tabIndex="");k&&(k.tabIndex="");b&&(b.tabIndex="");switch(h){case "poi":l.tabIndex=1;break;case "label":l=f?1:0;a.tabIndex=1;e.tabIndex=2;f&&(f.tabIndex=3);g.tabIndex=3+l;n.tabIndex=4+l;break;case "note":k.tabIndex=1;b.tabIndex=2;break;case "noteNameTextElement":k.tabIndex=1;b.tabIndex=2;break;case "noteTextElement":k.tabIndex=2;b.tabIndex=1;break;case "clickURLTextElement":a.tabIndex=2;e.tabIndex=3;g.tabIndex=4;n.tabIndex=1;break;default:a.tabIndex=
1,e.tabIndex=2,g.tabIndex=3,n.tabIndex=4}}}function le(h,b){for(var a=[],e=0,f=h.length;e<f;e++)h[e].poiID==b&&(a[a.length]=h[e]);return a}function $e(h,b,a,e,f,l){var g=h.media,n=h.mediaType,k=-1!=g.indexOf("/circle.")||-1!=g.indexOf("/square.")||-1!=g.indexOf("/triangle.")||-1!=g.indexOf("/arrowDownLeft.")||-1!=g.indexOf("/arrowDownRight.")||-1!=g.indexOf("/arrowUpLeft.")||-1!=g.indexOf("/arrowUpRight.")||-1!=g.indexOf("/arrowUp.")||-1!=g.indexOf("/arrowDown.")||-1!=g.indexOf("/arrowLeft.")||-1!=
g.indexOf("/arrowRight.")||-1!=g.indexOf("/lineHorizontal.")||-1!=g.indexOf("/lineVertical."),g=("counter"==n||"icon"==n)&&(!g||"External Graphics File"!=g)&&("counter"==g||"circle"==g||"square"==g||"triangle"==g||"arrowDown"==g||"arrowDownLeft"==g||"arrowLeft"==g||"arrowUpLeft"==g||"arrowUp"==g||"arrowUpRight"==g||"arrowRight"==g||"arrowDownRight"==g||"lineHorizontal"==g||"lineVertical"==g||k&&Z.labelIconsInternal);if(Z.useCanvas&&(g||e)){if(h.visibility||h.rollover||a)if(a=e?Wa:"view"!=Z.labelMode&&
h.internalID===K||f?f?Aa:db:Mf){var g="undefined"!==typeof h.media&&null!==h.media?h.media:"circle",m=h.iW,p=h.iH,k=h.x,v=h.y,u=h.r?h.r:0,k=-1!=g.indexOf("arrow")?"arrow":-1!=g.indexOf("line")?"line":g;if("arrowUp"!=g&&"lineVertical"!=g)switch(g){case "arrowDownLeft":u+=45;break;case "arrowLeft":u+=90;break;case "arrowUpLeft":u+=135;break;case "arrowUp":u+=180;break;case "arrowUpRight":u+=225;break;case "arrowRight":u+=270;break;case "arrowDownRight":u+=315;break;case "lineHorizontal":u+=90}g=k;a.save();
a.translate((h.x-(l?Z.imageW/2:Z.imageX))*Z.imageZ,(h.y-(l?Z.imageH/2:Z.imageY))*Z.imageZ);v=k=0;l=b.currentZ/(h.z/100);var D=l/(Pa/ad);0<b.constrainedScaleMin&&D<b.constrainedScaleMin&&(D=b.constrainedScaleMin);0<b.constrainedScaleMax&&D>b.constrainedScaleMax&&(D=b.constrainedScaleMax);b=h.xScale/100*D;D*=h.yScale/100;1!=b&&1!=D&&a.scale(b,D);e?a.lineWidth=1E-6:(e=Xj/l,a.lineWidth=h.lineVisible?8>e?e:8:0,a.fillStyle=h.fillColor);a.strokeStyle=h.lineColor;0!=u&&a.rotate((u-Z.imageR)*Math.PI/180);
e=h.rotation;"undefined"!==typeof e&&null!==e&&0!=e&&a.rotate(e*Math.PI/180);a.globalAlpha=1;"arrow"!=g&&a.beginPath();switch(g){case "counter":e=h.radius?h.radius:m/2;a.arc(k,v,e,0,2*Math.PI);break;case "circle":e=h.radius?h.radius:m/2;a.arc(k,v,e,0,2*Math.PI);break;case "triangle":a.moveTo(k,v-p/2);a.lineTo(k+m/2,v+p/2);a.lineTo(k-m/2,v+p/2);break;case "square":a.moveTo(k-m/2,v-p/2);a.lineTo(k+m/2,v-p/2);a.lineTo(k+m/2,v+p/2);a.lineTo(k-m/2,v+p/2);break;case "line":a.moveTo(k,v-p/2);a.lineTo(k,
v+p/2);break;case "arrow":a.fillStyle=Z.polygonFillColor?Z.polygonFillColor:"#FFFFFF",e=k,p=v-p,b=Math.sqrt((e-k)*(e-k)+(p-v)*(p-v)),m=(b-20/3)/b,b=Math.round(e+(k-e)*m),m=Math.round(p+(v-p)*m),a.beginPath(),a.moveTo(e,p),a.lineTo(b,m),a.stroke(),b=Math.atan2(p-v,0),m=Math.PI/8,p=b+m,e=k+30*Math.cos(p),p=v+30*Math.sin(p),m=b-m,b=k+30*Math.cos(m),m=v+30*Math.sin(m),u=(e+k+b)/3,l=(p+v+m)/3,a.save(),a.beginPath(),a.moveTo(b,m),a.lineTo(k,v),a.lineTo(e,p),a.stroke(),a.beginPath(),a.lineTo(k,v),a.lineTo(b,
m),a.quadraticCurveTo(u,l,e,p),a.fill(),a.restore()}"arrow"!=g&&(h.fillVisible&&(a.fillStyle=h.fillColor?h.fillColor:Z.polygonFillColor?Z.polygonFillColor:"#FFFFFF",a.globalAlpha="counter"==n?parseFloat(Z.Utils.getResource("DEFAULT_TRACKINGALPHA")):parseFloat(Z.Utils.getResource("DEFAULT_POLYGONALPHA")),a.fill()),"line"!=g&&a.closePath(),a.globalAlpha=1,a.stroke());a.restore()}f&&Nc()}}function Ad(h,b,a,e,f,l,g){if(Z.useCanvas&&("polygon"==h.media||e)){if(h.visibility||h.rollover||a){a=h.internalID;
if("undefined"!==typeof h.polygonPts&&null!==h.polygonPts&&0<h.polygonPts.length||e){g=e?Wa:a===K||f?f?Aa:db:Mf;g.save();g.translate((h.x-(l?Z.imageW/2:Z.imageX))*Z.imageZ,(h.y-(l?Z.imageH/2:Z.imageY))*Z.imageZ);var k=Pa/ad,m=n.getZoom(),p=(h.xScale+h.yScale)/2/100,v=h.xScale/100/k*m,k=h.yScale/100/k*m;1!=v&&1!=k&&g.scale(v,k);e?g.lineWidth=1E-6:"freehand"==h.mediaType?g.lineWidth=Bj/m:(g.lineWidth=h.lineVisible?Cj/m/p:0,g.fillStyle=h.fillColor);g.strokeStyle=h.lineColor;v=h.x;k=h.y;g.beginPath();
if(h.polygonPts){var u=h.polygonPts.slice(0);"measure"!=Z.labelMode||h.polyClosed||Qb||"undefined"===typeof b||null===b||(u[u.length]={x:b.x,y:b.y});var D=u[0].x-v,O=u[0].y-k;g.moveTo(D,O);for(var q=1,y=u.length;q<y;q++){var t=u[q].x-v,I=u[q].y-k;g.lineTo(t,I)}"freehand"!=h.mediaType&&(h.polyClosed||Z.mouseIsDown&&0==qb)&&(h.polyClosed&&(g.lineTo(D,O),g.closePath()),e||!h.fillVisible||!h.polyClosed&&a==K||(g.globalAlpha=Yj,g.fill()),g.globalAlpha=1)}else q=100/h.z*h.iW,y=100/h.z*h.iH,v=0,k=-1==h.media.indexOf("triangle")?
0:.23*h.iH,q=Math.max(q,y)/2*1.2,g.arc(v,k,q,0,2*Math.PI);g.stroke();if(!e&&(null===Z.editMode&&"measure"==Z.labelMode||"addLabel"==Z.editing||"editLabel"==Z.editing)&&("rectangle"==Z.labelMode&&4==u.length||"polygon"==Z.labelMode||"measure"==Z.labelMode)&&h.internalID==K&&"undefined"!==typeof h&&null!==h&&"freehand"!=h.mediaType)for(m=1/m/p,q=0,y=u.length;q<y;q++)t=u[q].x-v,I=u[q].y-k,rf(t,I,!Qb&&0==q,m);g.restore()}f?(e=new Ib,nd(h,e,b,null,null,!0,l)):!Z.mouseIsDown||e&&"polygon"!=h.media||null===
a||"undefined"===typeof b||da||Xd(a,b,f,l)}f&&Nc()}else mi||(Z.Utils.showMessage(Z.Utils.getResource("z9")),mi=!0)}function rf(h,b,a,e){var f=ni*e;db.lineWidth=Zj*e;db.strokeStyle=Hi;db.fillStyle=a?ak:bk;db.beginPath();db.arc(h,b,f,0,2*Math.PI,!1);db.closePath();db.globalAlpha=.5;db.fill();db.globalAlpha=1;db.stroke()}function sf(h,b,a){Z.Utils.clearDisplay(ob);var e=Z.Utils.arrayIndexOfObjectValue(A,"internalID",K);if(-1!=e){e=A[e];Ad(e);var f=n.getZoom(),l=e.polygonPts;if(l){var g=l[l.length-1],
l=(g.x-Z.imageX)*f,f=(g.y-Z.imageY)*f;e.polyClosed||(db.lineWidth=Cj,db.strokeStyle=lineStrokeColor,db.beginPath(),db.moveTo(l,f),db.lineTo(h,b),db.closePath(),db.stroke())}"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||null===K||Xd(K,a)}}function Bd(h){Kb&&Z.Utils.clearDisplay(Kb);ob&&Z.Utils.clearDisplay(ob);if("inline-block"==gb.display)for(var b=new Ib,a=0,e=A.length;a<e;a++){var f=A[a],l=Math.round(100*b.currentZ),g=-1==f.zMin?Math.round(100*Z.initialZ):Math.round(f.zMin),k=-1==f.zMax?Math.round(100*
Z.initialZ):Math.round(f.zMax);if((0==g||g<=l)&&(0==k||k>=l)){var l=f.media,g=f.mediaType,k=-1!=l.indexOf("/circle.")||-1!=l.indexOf("/square.")||-1!=l.indexOf("/triangle.")||-1!=l.indexOf("/arrowDownLeft.")||-1!=l.indexOf("/arrowDownRight.")||-1!=l.indexOf("/arrowUpLeft.")||-1!=l.indexOf("/arrowUpRight.")||-1!=l.indexOf("/arrowUp.")||-1!=l.indexOf("/arrowDown.")||-1!=l.indexOf("/arrowLeft.")||-1!=l.indexOf("/arrowRight.")||-1!=l.indexOf("/lineHorizontal.")||-1!=l.indexOf("/lineVertical."),n="counter"==
l||"circle"==l||"square"==l||"triangle"==l||"arrowDown"==l||"arrowDownLeft"==l||"arrowLeft"==l||"arrowUpLeft"==l||"arrowUp"==l||"arrowUpRight"==l||"arrowRight"==l||"arrowDownRight"==l||"lineHorizontal"==l||"lineVertical"==l,g=("counter"==g||"icon"==g)&&(!l||"External Graphics File"!=l)&&(n||k&&Z.labelIconsInternal),l=l&&"polygon"==l;f.visibility&&(l||g)&&(h||"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||"undefined"===typeof K||null===K||K!==a)&&(k=f.x,n=f.y,!Z.hotspotsDrawOnlyInView||
k+Vf>b.box.l&&k-Vf<b.box.r&&n+Vf>b.box.t&&n-Vf<b.box.b)&&(g?$e(f,b,h,null,null,null):l&&Ad(f,null,h))}}}function Je(h,b,a,e,f){db.lineWidth=Bj;db.strokeStyle=lineStrokeColor;db.beginPath();db.moveTo(h,b);db.lineTo(a,e);db.closePath();db.stroke();db.strokeStyle=Hi;2<Z.Utils.calculatePointsDistance(h,b,a,e)&&rb(K,!1,f);Z.mouseIsDown||Ob()}function Ke(h,b,a){ig=!0;Z.Utils.clearDisplay(ob);h=Z.Utils.arrayIndexOfObjectValue(A,"internalID",h);-1!=h&&(h=A[h],h.polygonPts[b]=a,4!=h.polygonPts.length||!tf&&
"rectangle"!=Z.labelMode||(h.polygonPts=Yd(h.polygonPts,b)),Ad(h,a))}function Yd(h,b){var a=h[b].x,e=h[b].y,f=b-1;0>f&&(f+=4);var l=b+1;3<l&&(l-=4);1==f||3==f?(h[f].x=a,h[l].y=e):(h[l].x=a,h[f].y=e);return h}function Fc(h,b,a){var e=(h=Z.Utils.event(h))?Z.Utils.isRightMouseButton(h):null,f=h?h.altKey:null;if("undefined"===typeof K||null===K)rb(null,!0,b);else{var l=Z.Utils.arrayIndexOfObjectValue(A,"internalID",K);-1!=l&&(l=A[l],Th=l.polygonPts,l=l.polyClosed,null===Th?(rb(K,!0,b),Xd(K,b)):(qb=Le(h,
b),l?null===qb&&rb(null,!0,b):null===qb?f||e||a?(rb(K,!1,b),pd(K,!1)):rb(K,!1,b):0==qb&&2<Th.length&&!Qb&&pd(K,!0)))}(!f||"measure"==Z.labelMode&&null!==K)&&Xd(K,b)}function rb(h,b,a){var e,f=!1,l=!1;"undefined"!==typeof h&&null!==h&&(null!==Z.editing&&"addLabel"!=Z.editing||!Qb||"polygon"!=Z.labelMode&&"measure"!=Z.labelMode)?(h=Z.Utils.arrayIndexOfObjectValue(A,"internalID",h),-1!=h&&(e=A[h],h=e.polygonPts?e.polygonPts:[],h[h.length]={x:a.x,y:a.y},e.polyClosed=!1,e.polygonPts=h,e.saved=!1)):(null===
Z.editMode&&"measure"==Z.labelMode&&0<A.length&&n.deleteAllMeasureHotspots(),e="freehand"==Z.labelMode||"rectangle"==Z.labelMode||"polygon"==Z.labelMode||"measure"==Z.labelMode?Z.labelMode:null,f=[],f[0]={x:a.x,y:a.y},l="undefined"!==typeof la&&0<la.options.length?l=la.options[la.selectedIndex].value:1,h=(100*n.getZoom()).toString(),n.createHotspotFromParameters(null,null,e,"polygon",null,a.x.toString(),a.y.toString(),h,null,null,null,"0","0",null,null,null,null,null,Ae,null,lineStrokeColor,null,
null,null,null,null,"8","0",null,l,null,null,"0",f,null,null,null,null,"1",null,null,null),e=A[A.length-1],K=e.internalID,f=e,l=e.poiID,Z.measureVisible&&null===Z.editMode||(h=Z.Utils.arrayIndexOfObjectValue(xa,"value",K),-1!=h?(xa[h]={text:f.name,value:K,poiID:l},h=Z.Utils.arrayIndexOfObjectValue(wb,"value",K),-1!=h&&(wb[h]={text:f.name,value:K,poiID:l},n.getStatus("XMLParsedViewport")&&Z.Utils.updateSelectElement(ab,wb))):(xa[xa.length]={text:f.name,value:K,poiID:l},wb[wb.length]={text:f.name,value:K,
poiID:l}),n.getStatus("XMLParsedViewport")&&ab&&(f=xa[xa.length-1],nc(f.poiID,f.value))),f=l=!0);"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||"undefined"===typeof e||null===e||"freehand"==e.mediaType||(e=n.getZoom(),rf((a.x-Z.imageX)*e,(a.y-Z.imageY)*e,f,1));"rectangle"!=Z.labelMode&&"freehand"!=Z.labelMode&&(Qb=!1);l?Ob():b&&Bd()}function Le(h,b){for(var a=null,e=(ni+1)/Z.imageZ,f=0,l=A.length;f<l;f++)if("polygon"==A[f].media&&A[f].internalID==K){var g=A[f].polygonPts;
if("undefined"!==typeof g&&null!==g)for(var k=0,n=g.length;k<n;k++)Z.Utils.calculatePointsDistance(b.x,b.y,g[k].x,g[k].y)<e&&(a=k)}return a}function pd(h,b){Z.Utils.clearDisplay(ob);var a=Z.Utils.arrayIndexOfObjectValue(A,"internalID",h);A[a].polyClosed=b;Qb=!0;if(-1!=a){var a=A[a],e=Z.Utils.polygonCenter(a.polygonPts,a.polyClosed);a.x=e.x;a.y=e.y;tf||"view"==Z.labelMode||"freehand"==Z.labelMode||""!=a.caption||"undefined"!==typeof a.captionHTML||(e=Z.Utils.getResource("z45"),a.caption=e+h.toString());
e=new Ib;uc(a,e)}}function Xd(h,a,r,e){var f=Z.Utils.arrayIndexOfObjectValue(A,"internalID",h);if(-1!=f){f=A[f];if(!tf&&"view"!=Z.labelMode)if("measure"==Z.labelMode&&"measure"==f.mediaType)Ee(f,a);else if("freehand"!=Z.labelMode&&"freehand"!=f.mediaType&&""==f.caption&&"undefined"===typeof f.captionHTML){var l=Z.Utils.getResource("z45");f.caption=l+h.toString()}l=f.polyClosed;h=f.polygonPts?f.polygonPts.slice(0):[];l=Z.Utils.polygonCenter(h,l,a);h=Z.Utils.polygonDimensions(h,a);f.x=l.x;f.y=l.y;f.iW=
h.x;f.iH=h.y;h=new Ib;da?(r=a=null,(a=document.getElementById("hot"+f.id+(Z.imageSet?"-"+b.toString():"")))&&(r=Z.Utils.getChildElementByID(a,"captionTextBox")),a=r,r=Z.Utils.polygonDimensions(f.polygonPts),e=h.currentZ/("polygon"!=f.media?f.z/100:1),Ce(f,a,f.xScale/100*e*r.x,f.yScale/100*e*r.y)):r?nd(f,h,a,null,null,!0,e):Be(f,h,a,!0)}}function Jb(h,b){var a=Ta.toString(),a=Z.annotationFileShared?"0":a;Z.editing=b;var e=null!==b?"none":"inline-block",f=null!==b||"markup"==Z.editMode?"inline-block":
"none";switch(h){case "poi":var l=document.getElementById("buttonPOIAdd"+a),g=document.getElementById("buttonPOIEdit"+a),k=document.getElementById("buttonPOIDelete"+a),n=document.getElementById("buttonPOICancel"+a),m=document.getElementById("buttonPOISave"+a);break;case "labelPartial":l=document.getElementById("buttonLabelAdd"+a);g=document.getElementById("buttonLabelEdit"+a);k=document.getElementById("buttonLabelDelete"+a);n=document.getElementById("buttonLabelCancel"+a);m=document.getElementById("buttonLabelSave"+
a);break;case "label":l=document.getElementById("buttonLabelAdd"+a);g=document.getElementById("buttonLabelEdit"+a);k=document.getElementById("buttonLabelDelete"+a);n=document.getElementById("buttonLabelCancel"+a);m=document.getElementById("buttonLabelSave"+a);break;case "note":l=document.getElementById("buttonNoteAdd"+a),g=document.getElementById("buttonNoteEdit"+a),k=document.getElementById("buttonNoteDelete"+a),n=document.getElementById("buttonNoteCancel"+a),m=document.getElementById("buttonNoteSave"+
a)}l&&(Z.Utils.setButtonDefaults(l),l.style.display=e);g&&(Z.Utils.setButtonDefaults(g),g.style.display=e);k&&(Z.Utils.setButtonDefaults(k),k.style.display=f);n&&(Z.Utils.setButtonDefaults(n),n.style.display=f);m&&(Z.Utils.setButtonDefaults(m),m.style.display=f);var l=document.getElementById("overlayPOIDisable"+a),g=document.getElementById("overlayLabelDisable"+a),k=document.getElementById("overlayLabelDetailDisable"+a),n=document.getElementById("overlayLabelDetailEditableDisable"+a),m=parseFloat(Z.Utils.getResource("z82")),
e=Z.Utils.getResource("z83NOALPHA"),f=document.getElementById("textBoxFor-overlayMessageBox"+a),p=document.getElementById("overlayLabelNameEditableDisable"+a),v=document.getElementById("overlayLabelCaptionPositionDisable"+a),u=document.getElementById("overlayNoteDisable"+a),D=document.getElementById("overlayNoteDetailDisable"+a),O=document.getElementById("textBoxFor-poiNameTextElement"+a),y=document.getElementById("textBoxFor-labelNameTextElement"+a),q=document.getElementById("commentTextElement"+
a),t=document.getElementById("textBoxFor-noteNameTextElement"+a),a=document.getElementById("noteTextElement"+a);if(l&&g&&k&&n&&p&&v&&D&&O&&y&&t&&a)if(null===b)Z.Viewer.initializeViewerKeyEventListeners(!0),l.style.display="none",g.style.display="none",k.style.display="inline-block",n.style.display="none",Z.Utils.setOpacity(n,m,e),f&&(f.style.display="none"),p.style.display="none",v.style.display="none",u.style.display="none",D.style.display="inline-block",O.style.visibility="hidden",y.style.visibility=
"hidden",t.style.visibility="hidden",q&&(q.readOnly=!0),a.readOnly=!0;else{switch(h){case "poi":O.style.visibility="visible";g.style.display="inline-block";k.style.display="none";u.style.display="inline-block";D.style.display="none";break;case "labelPartial":k.style.display="none";n.style.display="inline-block";Z.Utils.setOpacity(n,m,e);f&&(f.style.display="inline-block");p.style.display="inline-block";v.style.display="text"==Z.labelMode?"inline-block":"none";y.style.visibility="visible";l.style.display=
"inline-block";u.style.display="inline-block";D.style.display="none";break;case "label":k.style.display="none";n.style.display="none";Z.Utils.setOpacity(n,m,e);f&&(f.style.display="none");p.style.display="none";v.style.display="text"==Z.labelMode?"inline-block":"none";y.style.visibility="visible";l.style.display="inline-block";u.style.display="inline-block";D.style.display="none";q&&(q.readOnly=!1);break;case "note":l.style.display="inline-block",g.style.display="inline-block",k.style.display="none",
D.style.display="none",t.style.visibility="visible",a.readOnly=!1}qf(h)}}function Rb(h,b){switch(b){case "pois":"save"==h?Ii=Z.Utils.arrayClone("pois",Ha,Ii):Ha=Z.Utils.arrayClone("pois",Ii,Ha);break;case "labels":var a=Z.Utils.arrayIndexOfObjectValue(A,"internalID",eg);if("save"==h)X&&X.polygonPts&&(oi=Z.Utils.arrayClone("polygon",X.polygonPts,oi)),Ji=Z.Utils.arrayClone("labels",xa,Ji),Ki=Z.Utils.arrayClone("hotspots",A,Ki),X=-1!=a?A[a]:null;else if(xa=Z.Utils.arrayClone("labels",Ji,xa),A=Z.Utils.arrayClone("hotspots",
Ki,A),X=-1!=a?A[a]:null)0<oi.length?X.polygonPts=Z.Utils.arrayClone("polygon",oi,X.polygonPts):"polygon"!=X.media&&Z.Utils.arrayClear(X.polygonPts);break;case "notes":"save"==h?Li=Z.Utils.arrayClone("notes",cb,Li):cb=Z.Utils.arrayClone("notes",Li,cb)}}function me(h){var b=Cd(),a=Pb(b,"root"),e=Pb(b,"setup");h=h.getElementsByTagName("SETUP")[0];var f;f=h.getAttribute("PANELPOSITION");Z.Utils.stringValidate(f)&&e.setAttribute("PANELPOSITION",f);f=h.getAttribute("INITIALVISIBILITY");Z.Utils.stringValidate(f)&&
e.setAttribute("INITIALVISIBILITY",f);f=h.getAttribute("POIVISIBILITY");Z.Utils.stringValidate(f)&&e.setAttribute("POIVISIBILITY",f);f=h.getAttribute("LABELVISIBILITY");Z.Utils.stringValidate(f)&&e.setAttribute("LABELVISIBILITY",f);f=h.getAttribute("NOTEVISIBILITY");Z.Utils.stringValidate(f)&&e.setAttribute("NOTEVISIBILITY",f);f=h.getAttribute("COMMENTVISIBILITY");Z.Utils.stringValidate(f)&&e.setAttribute("COMMENTVISIBILITY",f);f=h.getAttribute("MINSCALE");Z.Utils.stringValidate(f)&&!isNaN(parseFloat(f))&&
0<=parseFloat(f)&&e.setAttribute("MINSCALE",f);f=h.getAttribute("MAXSCALE");Z.Utils.stringValidate(f)&&!isNaN(parseFloat(f))&&0<=parseFloat(f)&&e.setAttribute("MAXSCALE",f);a.appendChild(e);h=0;for(e=Ha.length;h<e;h++){f=Pb(b,"poi");var l=Ha[h],g=Z.Utils.xmlEscapeMinimal(l.text);Z.Utils.stringValidate(g)&&f.setAttribute("NAME",g);g=l.value;Z.Utils.stringValidate(g)&&f.setAttribute("INTERNALID",g);var g=l.id;Z.Utils.stringValidate(g)&&f.setAttribute("ID",g);g=l.x;Z.Utils.stringValidate(g)&&!isNaN(parseFloat(g))&&
f.setAttribute("X","center"==g?Z.imageCtrX.toString():g);g=l.y;Z.Utils.stringValidate(g)&&!isNaN(parseFloat(g))&&f.setAttribute("Y","center"==g?Z.imageCtrY.toString():g);g=l.z;Z.Utils.stringValidate(g)&&!isNaN(parseFloat(g))&&f.setAttribute("ZOOM",g);g=l.user;Z.Utils.stringValidate(g)&&f.setAttribute("USER",g);g=l.date;Z.Utils.stringValidate(g)&&f.setAttribute("DATE",g);a.appendChild(f);labelListTempDP=le(xa,Ha[h].value);if(0<labelListTempDP.length){l=b.createElement("LABELS");f.appendChild(l);for(var g=
0,k=labelListTempDP.length;g<k;g++){var m=Pb(b,"label"),p=Z.Utils.arrayIndexOfObjectValue(A,"internalID",labelListTempDP[g].value);-1!=p&&(m=n.convertLabelToXML(A[p]));l.appendChild(m)}}noteListTempDP=le(cb,Ha[h].value);if(0<noteListTempDP.length)for(l=b.createElement("NOTES"),f.appendChild(l),f=0,g=noteListTempDP.length;f<g;f++)k=Pb(b,"note"),m=noteListTempDP[f],p=Z.Utils.xmlEscapeMinimal(m.text),Z.Utils.stringValidate(p)&&k.setAttribute("NAME",p),p=m.value,Z.Utils.stringValidate(p)&&k.setAttribute("INTERNALID",
p),p=Z.Utils.xmlEscapeMinimal(m.noteText),Z.Utils.stringValidate(p)&&k.setAttribute("TEXT",p),p=m.poiID,Z.Utils.stringValidate(p)&&k.setAttribute("POIID",p),p=m.id,Z.Utils.stringValidate(p)&&k.setAttribute("ID",p),p=m.user,Z.Utils.stringValidate(p)&&k.setAttribute("USER",p),p=m.date,Z.Utils.stringValidate(p)&&k.setAttribute("DATE",p),l.appendChild(k)}return b}function Lf(h){Z.Utils.stringValidate(Z.trackingPath)&&(Z.simplePath?dataPath=Z.trackingPath:(".json"!=Z.trackingPath.toLowerCase().substring(Z.trackingPath.length-
5,Z.trackingPath.length)&&".xml"!=Z.trackingPath.toLowerCase().substring(Z.trackingPath.length-4,Z.trackingPath.length)&&(Z.trackingPath=Z.trackingPath+"/"+Z.Utils.getResource("DEFAULT_TRACKINGXMLFILE")),dataPath=Z.Utils.cacheProofPath(Z.trackingPath)));"undefined"!==typeof dataPath&&Z.Utils.stringValidate(dataPath)?(vpIDTemp=Z.imageSet?h:null,h=new Z.NetConnector,-1!=dataPath.toLowerCase().indexOf(".xml")?h.loadXML(dataPath,vpIDTemp):-1!=dataPath.toLowerCase().indexOf(".json")&&h.loadJSON(dataPath,
vpIDTemp)):"string"===typeof Z.trackingXMLText&&Z.Utils.stringValidate(Z.trackingXMLText)?(h=Z.Utils.xmlConvertTextToDoc(Z.trackingXMLText),n.parseTrackingXML(h)):"undefined"!==typeof Z.trackingJSONObject&&"object"===typeof Z.trackingJSONObject&&null!==Z.trackingJSONObject&&(h=Z.Utils.jsonConvertObjectToXMLText(Z.trackingJSONObject),h=Z.Utils.xmlConvertTextToDoc(h),n.parseTrackingXML(h))}function uf(h){var b=Z.Toolbar.getSkinSizes(),a=h.toString(),e=parseInt(Z.Utils.getResource("DEFAULT_TRACKINGPANELWIDTH"),
10);viewModeAdj=0;var f=viewModeAdj+parseInt(Z.Utils.getResource("DEFAULT_TRACKINGPANELHEIGHT"),10),l=n.calculateTrackingPanelCoords(Z.trackingPanelPosition,e,f,qa,ra);n.sizeAndPositionTrackingPanel(Pg,e,f,l.x,l.y);Z.trackingPanelVisibleState=!(0==Z.trackingPanelVisible||"0"==Z.trackingPanelPosition||Z.imageSet&&Z.trackingFileShared&&0==h);Pg.display=Z.trackingPanelVisibleState?"inline-block":"none";var g=parseInt(Z.Utils.getResource("DEFAULT_TRACKINGLABELWIDTH"),10);parseInt(Z.Utils.getResource("DEFAULT_TRACKINGLABELTEXTWIDTH"),
10);parseInt(Z.Utils.getResource("DEFAULT_TRACKINGLISTWIDTH"),10);parseInt(Z.Utils.getResource("DEFAULT_TRACKINGLISTNARROWWIDTH"),10);parseInt(Z.Utils.getResource("DEFAULT_TRACKINGMARGIN"),10);var k=parseInt(Z.Utils.getResource("DEFAULT_TRACKINGPANELLABELFONTSIZE"),10);parseInt(Z.Utils.getResource("DEFAULT_TRACKINGPANELLISTFONTSIZE"),10);parseInt(Z.Utils.getResource("DEFAULT_TRACKINGPANELTEXTFONTSIZE"),10);parseInt(Z.Utils.getResource("DEFAULT_TRACKINGTEXTPADDINGSMALL"),10);parseInt(Z.Utils.getResource("DEFAULT_TRACKINGTEXTPADDING"),
10);var m=parseFloat(Z.Utils.getResource("z82")),p=Z.Utils.getResource("z83");Z.Utils.getResource("z83LIGHT");var v=Z.Utils.getResource("z83NOALPHA"),u=e-30,D=-(.9*viewModeAdj)+(f-45-17-4),l=b[6],q=b[7];h=b[8];var O=b[4],y=b[5];15<l&&(l=15);15<q&&(q=15);22<h&&(h=22);1<O&&(O=1);18<y&&(y=18);var t=g/2,b=(q-y)/2,I=l/2,J=document.getElementById("trackingPanelBackground"+a);if(J){var A=J.style;A.width=e+"px";A.height=f+"px";A.backgroundColor=p;Z.Utils.setOpacity(J,m,v)}dx=19;if(m=document.getElementById("containerCounterLabels"+
a))p=m.style,p.width=e+"px",p.height="15px",p.left=dx+"px",p.top="15px",p.visibility="visible",Z.Utils.setTextNodeStyle(m.firstChild,"black","verdana",k+"px","none","normal","normal","normal","normal","1em","left","none");dx=0;if(m=document.getElementById("labelAddTextBox"+a))p=m.style,p.width=g+"px",p.height="15px",p.left="0px",p.top="0px",Z.Utils.setTextNodeStyle(m.firstChild,"black","verdana",k+"px","none","normal","normal","normal","normal","1em","left","none"),dx+=t+8;if(m=document.getElementById("labelShowTextBox"+
a))p=m.style,p.width=g+"px",p.height="15px",p.left=dx+"px",p.top="0px",Z.Utils.setTextNodeStyle(m.firstChild,"black","verdana",k+"px","none","normal","normal","normal","normal","1em","left","none"),dx+=g-4;if(m=document.getElementById("labelNameTextBox"+a))p=m.style,p.width=g+"px",p.height="15px",p.left=dx+"px",p.top="0px",Z.Utils.setTextNodeStyle(m.firstChild,"black","verdana",k+"px","none","normal","normal","normal","normal","1em","left","none"),dx+=2*g+16;if(m=document.getElementById("labelCountPerCellTextBox"+
a))p=m.style,p.width=g+"px",p.height="15px",p.left=dx+"px",p.top="0px",Z.Utils.setTextNodeStyle(m.firstChild,"black","verdana",k+"px","none","normal","normal","normal","normal","1em","left","none"),dx+=g-12;if(m=document.getElementById("labelCountPerImageTextBox"+a))p=m.style,p.width=g+"px",p.height="15px",p.left=dx+"px",p.top="0px",Z.Utils.setTextNodeStyle(m.firstChild,"black","verdana",k+"px","none","normal","normal","normal","normal","1em","left","none"),dx+=t;if(m=document.getElementById("labelListTextBox"+
a))p=m.style,p.width=g+"px",p.height="15px",p.left=dx+"px",p.top="0px",Z.Utils.setTextNodeStyle(m.firstChild,"black","verdana",k+"px","none","normal","normal","normal","normal","1em","left","none");dx=19;if(m=document.getElementById("containerCounterListLabels"+a))p=m.style,p.width=e+"px",p.height="15px",p.left=dx+"px",p.top="15px",Z.Utils.setTextNodeStyle(m.firstChild,"black","verdana",k+"px","none","normal","normal","normal","normal","1em","left","none");if(m=document.getElementById("labelCellTextBox"+
a))p=m.style,p.width=g+"px",p.height="15px",p.left="0px",p.top="0px",Z.Utils.setTextNodeStyle(m.firstChild,"black","verdana",k+"px","none","normal","normal","normal","normal","1em","left","none"),dx+=g-12;if(m=document.getElementById("labelXTextBox"+a))p=m.style,p.width=g+"px",p.height="15px",p.left=dx+"px",p.top="0px",Z.Utils.setTextNodeStyle(m.firstChild,"black","verdana",k+"px","none","normal","normal","normal","normal","1em","left","none"),dx+=t+4;if(m=document.getElementById("labelYTextBox"+
a))p=m.style,p.width=g+"px",p.height="15px",p.left=dx+"px",p.top="0px",Z.Utils.setTextNodeStyle(m.firstChild,"black","verdana",k+"px","none","normal","normal","normal","normal","1em","left","none"),dx+=t;if(m=document.getElementById("labelZoomTextBox"+a))p=m.style,p.width=g+"px",p.height="15px",p.left=dx+"px",p.top="0px",Z.Utils.setTextNodeStyle(m.firstChild,"black","verdana",k+"px","none","normal","normal","normal","normal","1em","left","none"),dx+=g+4;if(m=document.getElementById("labelUserNameTextBox"+
a))p=m.style,p.width=g+"px",p.height="15px",p.left=dx+"px",p.top="0px",Z.Utils.setTextNodeStyle(m.firstChild,"black","verdana",k+"px","none","normal","normal","normal","normal","1em","left","none");dy=34;p=document.getElementById("containerTracking"+a);v=document.getElementById("rowCounterFilteredList"+a);p&&v&&(m=p.style,m.width=u+"px",m.height=D+"px",m.left="15px",m.top=dy+"px",p.size=6,p=v.style,p.width=u+2+"px",p.height=D+2+"px",p.left=m.left,p.top=m.top);if(D=document.getElementById("buttonCounterListHide"+
a))Z.Utils.buttonSize(D,l,q),D=D.style,D.left=u-2*l+"px",D.top="13px",D.display="none";dx="edit"==Z.trackingEditMode?19.5:75;dy=f-q-8;if(f=document.getElementById("labelCurrentCellTextBox"+a))u=f.style,u.width=g/2+"px",u.height="15px",u.left=dx+"px",u.top=dy+2+"px",Z.Utils.setTextNodeStyle(f.firstChild,"black","verdana",k+"px","none","normal","normal","normal","normal","1em","left","none"),dx+=g/2+4;if(f=document.getElementById("currentCellTextBox"+a))u=f.style,u.width=g+"px",u.height="15px",u.left=
dx+"px",u.top=dy+2+"px",Z.Utils.setTextNodeStyle(f.firstChild,"black","verdana",k+"px","none","normal","normal","normal","normal","1em","left","none"),dx="edit"==Z.trackingEditMode?dx+g+8:dx+g+30;if(f=document.getElementById("countingDivider"+a))Z.Utils.graphicSize(f,O,y),f=f.style,f.left=dx+"px",f.top=dy+b+"px",dx+=I;if(f=document.getElementById("labelCountingCompleteTextBox"+a))u=f.style,u.width=t+"px",u.height="15px",u.left=dx+"px",u.top=dy+2+"px",Z.Utils.setTextNodeStyle(f.firstChild,"black",
"verdana",k+"px","none","normal","normal","normal","normal","1em","left","none"),dx+=g+12;k=document.getElementById("containerFor-checkboxCountingComplete"+a);g=document.getElementById("checkboxCountingComplete"+a);k&&g&&(k=k.style,k.left=dx+"px",k.top=dy-3+"px",Z.Utils.scaleElement(k,.9),dx+=h+3,"edit"!=Z.trackingEditMode&&(g.disabled=!0));if(g=document.getElementById("buttonToggleTrackingNav"+a))Z.Utils.buttonSize(g,l,q),g=g.style,g.left=dx+"px",g.top=dy+"px";if("edit"==Z.trackingEditMode){dx=e-
(5*h-4);if(e=document.getElementById("buttonTrackingClearLast"+a))Z.Utils.buttonSize(e,l,q),e=e.style,e.left=dx+"px",e.top=dy+"px",dx+=h;if(e=document.getElementById("buttonTrackingClearType"+a))Z.Utils.buttonSize(e,l,q),e=e.style,e.left=dx+"px",e.top=dy+"px",dx+=h;if(e=document.getElementById("buttonTrackingClearAll"+a))Z.Utils.buttonSize(e,l,q),e=e.style,e.left=dx+"px",e.top=dy+"px",dx+=h;if(e=document.getElementById("trackingDivider"+a))Z.Utils.graphicSize(e,O,y),O=e.style,O.left=dx+"px",O.top=
dy+b+"px",dx+=I;if(a=document.getElementById("buttonTrackingSave"+a))Z.Utils.buttonSize(a,l,q),a=a.style,a.left=dx+"px",a.top=dy+"px",dx+=h}}function vf(h){var b=Z.Navigator.getSizeAndPositionNavigatorImage();b?(n.setSizeAndPositionNavigatorTrackingOverlay(b.width,b.height,b.left,b.top,h),Z.Navigator.drawNavigatorTrackingOverlay(qd,b)):window.setTimeout(function(){vf(h)},10)}function Zd(h,b){var a;switch(b){case "root":a=h.getElementsByTagName("TRACKINGDATA")[0];break;case "setup":a=h.createElement("SETUP");
a.setAttribute("PANELPOSITION","2");break;case "type":a=h.createElement("TYPE");a.setAttribute("ID","0");a.setAttribute("NAME",Z.Utils.getResource("CONTENT_COUNTERNAME"));a.setAttribute("MEDIATYPE","counter");a.setAttribute("MEDIA","circle");a.setAttribute("RADIUS","40");a.setAttribute("CAPTION","");a.setAttribute("CAPTIONPOSITION",Z.Utils.getResource("CONTENT_COUNTERCAPTIONPOSITION"));a.setAttribute("FILLCOLOR",Z.Utils.getResource("CONTENT_COUNTERFILLCOLOR"));break;case "cell":a=h.createElement("CELL");
a.setAttribute("ID",Z.Utils.getResource("CONTENT_COUNTERCELL"));a.setAttribute("COMPLETE","0");a.setAttribute("USER",Z.Utils.getResource("CONTENT_COUNTERUSER"));a.setAttribute("DATE",Z.Utils.getCurrentUTCDateAsString());break;case "label":a=h.createElement("LABEL"),a.setAttribute("ID","0"),a.setAttribute("TYPEID","0"),a.setAttribute("NAME",Z.Utils.getResource("CONTENT_COUNTERNAME")),a.setAttribute("MEDIATYPE","counter"),a.setAttribute("MEDIA","circle"),a.setAttribute("RADIUS","40"),a.setAttribute("CAPTION",
""),a.setAttribute("CAPTIONPOSITION",Z.Utils.getResource("CONTENT_COUNTERCAPTIONPOSITION")),a.setAttribute("FILLCOLOR",Z.Utils.getResource("CONTENT_COUNTERFILLCOLOR")),a.setAttribute("CELL",Z.Utils.getResource("CONTENT_COUNTERCELL")),a.setAttribute("X","center"),a.setAttribute("Y","center"),a.setAttribute("ZOOM","100"),a.setAttribute("USER",Z.Utils.getResource("CONTENT_COUNTERUSER")),a.setAttribute("INITIALS",Z.Utils.getResource("CONTENT_COUNTERUSERINITIALS")),a.setAttribute("DATE",Z.Utils.getCurrentUTCDateAsString())}return a}
function wf(h){if(h=Z.Utils.event(h)){var b=h.type;if(h=Z.Utils.target(h))switch(b){case "mouseover":Z.Utils.setOpacity(h,.2,"");break;case "mousedown":for(var b=0,a=Qg.children.length;b<a;b++)Z.Utils.setOpacity(Qg.childNodes[b].firstChild,.4,"");Z.Utils.setOpacity(h,1,"");Mi=h;h=h.id;Z.trackingTypeCurrent=h.substring(h.length-1,h.length);break;case "mouseout":Z.Utils.setOpacity(h,.4,""),Z.Utils.setOpacity(Mi,1,"")}}}function Dd(h){if(h){var a=document.getElementById("rowCounterFilteredList"+b.toString()).selectedIndex;
h=parseInt(xf[a].x,10);var e=parseInt(xf[a].y,10),a=parseFloat(xf[a].zoom);n.zoomAndPanToView(h,e,a)}}function Cc(b,a,e){if(n.getStatus("initializedViewport")){var f="0"==Uh?"hidden":"visible";Ni=Z.tracking&&Z.navigatorVisible&&null!==Z.navigatorW?Z.navigatorW+2:parseInt(Z.Utils.getResource("DEFAULT_IMAGELISTWIDTH"),10);var g=n.calculateImageListCoords(qa,ra,e),l="undefined"!==typeof e&&Z.Utils.stringValidate(e)?e.toString():"";"undefined"===typeof ne||null===ne?(ne=new Z.Utils.createSelectElement("imageList"+
l,b,a,Ni,g.x,g.y,null,f,$d,"change"),Z.ViewerDisplay.appendChild(ne),ne.style.zIndex=(Z.baseZIndex+8).toString(),ne.selectedIndex=0,n.setStatus("initializedImageList",!0)):Z.Utils.arrayClear(a)}else Z.imageListTimeout=window.setTimeout(function(){Cc(b,a,e)})}function $d(h){if(h=Z.Utils.event(h)){Z.Viewer.viewportSelect(b);h=Z.Utils.target(h);var a=Z.Utils.stringValidate(Z.imageListTitle)&&"none"!=Z.imageListTitle?1:0;h=h.selectedIndex-a;"null"!=He[h].value&&Z.Viewer.setImage(He[h].media,He[h].optionalParams,
!1,b)}}function ae(b){var a;this.id=b.getAttribute("ID");this.name=b.getAttribute("NAME");this.internalID=b.getAttribute("INTERNALID");isNaN(parseInt(this.internalID,10))&&(this.internalID=Xb("slide"));this.media=b.getAttribute("MEDIA");this.audio=b.getAttribute("AUDIO");Z.Utils.stringValidate(this.audio)&&(Z.audioContent=!0);this.initialX=b.getAttribute("INITIALX");this.initialY=b.getAttribute("INITIALY");this.initialZoom=b.getAttribute("INITIALZOOM");this.minZoom=b.getAttribute("MINZOOM");this.maxZoom=
b.getAttribute("MAXZOOM");this.hotspotPath=b.getAttribute("HOTSPOTPATH");this.annotationPath=b.getAttribute("ANNOTATIONPATH");a=parseFloat(b.getAttribute("SHOWFOR"));this.showFor=isNaN(a)?0:a;this.transition=b.getAttribute("TRANSITION");a=parseFloat(b.getAttribute("CHANGEFOR"));this.changeFor=isNaN(a)?0:a}function xb(b){if(b=Z.Utils.event(b))if(Z.slideshowPlaying&&n.slideshowStop(),b=Z.Utils.target(b),"null"!=b.options[b.selectedIndex].value){var a=Z.Utils.stringValidate(Z.slideListTitle)&&"none"!=
Z.slideListTitle?1:0;n.goToSlide(b.selectedIndex-a,null,!0)}}function ya(b){if("undefined"!==typeof gd&&null!==gd&&0<gd.length){var a=Z.slideshowPlaying?Qc[yf].showFor:0;Z.Utils.stringValidate(Qc[yf].audio)&&(a+=500);var e=Ja(yf,b,Qc.length-1);null!==e?Z.Utils.functionCallWithDelay(function(){n.goToSlide(e,null,null,!0)},a):n.slideshowStop()}}function Ja(b,a,e){for(var f=Oi||Pi,g="Skip";"Skip"==g;)"next"==a?(b+=1,b>e&&(b=f?0:null)):(--b,0>b&&(b=f?e:null)),g=Z.hotspots?null!==b?A[b].transition:null:
Z.slideshow?null!==b?Qc[b].transition:null:null;return b}function za(){Z.preventDupCall||(Z.priorX=Math.round(Z.imageX),Z.priorY=Math.round(Z.imageY),Z.priorZ=Z.imageZ,Z.priorR=Math.round(Z.imageR));Z.preventDupCall="undefined"!==typeof called&&null!==called}function Eb(b,a,e,f,g,l){l||n.zoomAndPanAllStop();Z.maskingSelection&&Z.maskClearOnUserAction&&n.clearMask();if("undefined"===typeof b||null===b)b=Z.imageW/2;if("undefined"===typeof a||null===a)a=Z.imageH/2;"undefined"===typeof e||null===e?e=
Z.fitZ:1<e&&e>Z.maxZ&&(e/=100);if("undefined"===typeof f||null===f)f=Z.imageR;e=pb(e);f=fb(f);b=ua(b,a,e,f,"image");Z.imageX=Rg=b.x;Z.imageY=Qi=b.y;Z.imageZ=e;f!=Z.imageR&&Z.Utils.rotateElement(ia,f);Z.imageR=f;n.updateView(!0);"function"===typeof g&&g()}function Me(){if(be&&(0!=Rc||0!=xc||0!=Gc))if(Z.tracking&&0==Gc)n.zoomAndPanToView(n.getX()+Rc,n.getY()+xc);else{var b=Rc,a=xc,e=Gc,f=n.getZoom();0!=e&&(f=$a(Da,Pa*(1+e)),f=pb(f),f!=Z.imageZ&&O(f));if(0!=b||0!=a)b=parseFloat(ia.left)+b,a=parseFloat(ia.top)+
a,f=ua(b,a,f,Z.imageR,"container"),ia.left=Math.round(f.x)+"px",ia.top=Math.round(f.y)+"px",a=f.x-bc,f=f.y-Mb,Ea&&Gb&&(Z.mobileDevice||Math.abs(a)>qa/2||Math.abs(f)>ra/2)&&M(Ea,Sc,Zb,"simple",!1,"Updating backfill oversize display");A&&30<A.length?0==Sg%2&&n.syncViewportRelated():n.syncViewportRelated();Sg++;be=window.setTimeout(Me,zf)}}function p(b,a,e,f,g,l,k){jg++;var m=g/l,C=jg*m,v=Z.Utils.easing(Z.imageX,b,C,g),u=Z.Utils.easing(Z.imageY,a,C,g),q=Z.Utils.easing(Z.imageZ,e,C,g),C=Z.Utils.easing(Z.imageR,
f,C,g),u=n.convertImageCoordsToViewportEdgeCoords(v,u,q),v=u.x,u=u.y,t=!1,I=syncOversize=!1;if(parseFloat(ia.left)!=v||parseFloat(ia.top)!=u)ia.left=v+"px",ia.top=u+"px",I=!0,Ea&&Gb&&(syncOversize=!0);q!=Z.imageZ&&(O(q,!1),t=I=!0,Ea&&Gb&&(Yb.restore(),Yb.save(),Yb.scale(ic,ic),syncOversize=!0));C!=Z.imageR&&(Z.Utils.rotateElement(ia,C),Ea&&Gb&&(Yb.rotate((C-Z.imageR)*Math.PI/180),syncOversize=!0),Z.imageR=C,I=!0);syncOversize&&M(Ea,Sc,Zb,"simple",!1,"Updating backfill oversize display");n.syncViewportRelated(!1,
A&&40>A.length,!1,!1,!1);0==jg%2&&n.syncViewportRelated(!1,!1,t,I,t);q=Z.tour&&Z.tourStop&&0==Math.round(Z.imageR%90);jg<l+1&&!q?Af=window.setTimeout(function(){p(b,a,e,f,g,l,k)},m):(q&&(Z.tourPlaying=!1),Z.interactive=!0,D(),n.updateView(),n.toggleWatermarks(!0),A&&39<A.length&&n.setHotspotsVisibility(!0),"function"===typeof k&&k())}function v(){Sg=Gc=xc=Rc=0;be&&(window.clearTimeout(be),be=null)}function D(){Af&&(window.clearTimeout(Af),Af=null)}function O(b,a){var e=!1,f=Ra(Da,b);if(f!=Pa){Pa=
f;var e=f/ad,g=Ya*e,l=Za*e,k=(Ya-g)/2,m=(Za-l)/2;f<ad&&(f=ua(parseFloat(ia.left),parseFloat(ia.top),b,Z.imageR,"container"),ia.left=f.x+"px",ia.top=f.y+"px");if(Z.useCanvas)if(Ka.width=g+"px",Ka.height=l+"px",Ka.left=k+"px",Ka.top=m+"px",Ab&&($b.width=g+"px",$b.height=l+"px",$b.left=k+"px",$b.top=m+"px"),Kb&&(Vb.width=g+"px",Vb.height=l+"px",Vb.left=k+"px",Vb.top=m+"px"),ob&&(mc.width=g+"px",mc.height=l+"px",mc.left=k+"px",mc.top=m+"px"),ic=Ra(Sc,n.getZoom()),f=8<ic,Gb||f){if(null!==Yb&&"undefined"===
typeof a||null===a||a&&Ea&&("in"!=Z.zooming||g>Z.scaleThreshold||l>Z.scaleThreshold))Yb.restore(),Yb.save(),Yb.scale(ic,ic),Yb.rotate(Z.imageR*Math.PI/180),M(Ea,Sc,Zb,"simple",!1,"Updating backfill oversize display");Ec=e=Ra(sb,b);g=e/tierBackfillScalePrior;e=Id*g;g*=Jd;l=Dc+(Id-e)/2;f=Zc+(Jd-g)/2;va.width=e+"px";va.height=g+"px";va.left=l+"px";va.top=f+"px"}else Ea&&Z.Utils.clearDisplay(Ea),g=Id*e,l=Jd*e,k=Dc+Z.imageX*(1-e)*Z.imageZ,m=Zc+Z.imageY*(1-e)*Z.imageZ,va.width=g+"px",va.height=l+"px",va.left=
k+"px",va.top=m+"px";else M(sa,Da,Tc,"centerOut",!1,"Scaling: non-canvas zoom"),Gb?(e=qh,Id=Ya*e,Jd=Za*e,Dc=-(Ya/e),Zc=-(Za/e),Tg=tc*e,oe=zc*e,S.width=Id,S.height=Jd,va.width=S.width+"px",va.height=S.height+"px"):(e=lc[sb],S.width=Hb[sb],S.height=e,e=Z.imageY*b,Dc=tc-Z.imageX*b,Zc=zc-e),va.left=Dc+"px",va.top=Zc+"px",M(S,sb,Zb,"simple",!1,"Scaling: non-canvas zoom - backfill");e=!0}return e}function Bb(){if(Ug&&0!=ce){var b=Z.Utils.arrayIndexOfObjectValue(A,"internalID",K);if(-1!=b){var b=A[b],a=
b.yScale*(1+ce);n.modifyHotspot(K,"xScale",b.xScale*(1+ce),!0,!0);n.modifyHotspot(K,"yScale",a,!1,!0);Ug=window.setTimeout(Bb,Dj)}}}function Bf(){n.toggleFullViewMode(!1)}function rh(){de&&0!=Nd&&(n.rotateStep(Nd,!1),de=window.setTimeout(rh,sh),n.syncViewportRelated(!1,A&&40>A.length,!1,!0,!1))}function Vg(b,a){var e=a?Ga.length-1:Z.Utils.arrayIndexOfObjectValue(Ga,"filter",b);-1!=e&&(Z.Toolbar.clearImageFilterInPanel(b,a),Ga=Z.Utils.arraySplice(Ga,e,1),2<Ga.length&&"undefined"!==typeof Ga[e]&&"undefined"!==
typeof Ga[e-1]&&Ga[e].filter==Ga[e-1].filter&&(Ga[e-1].value+=Ga[e].value,Ga=Z.Utils.arraySplice(Ga,e,1)),validateImageFiltersConvolve(),n.updateView(!0))}function Vh(b,a,e){if(pi&&tb){tb.putImageData(pi,0,0);var f=tb.getImageData(0,0,sa.width,sa.height);b=Z.Utils.filterImage(f,b,a,e);tb.putImageData(b,0,0)}}function Cf(b,a,e,f,g){var l=-1!=b.id.indexOf("viewportDisplay");"canvas"!=f?(l&&null!==qi&&tb.putImageData(qi,0,0),l||null===ri||Fd.putImageData(ri,0,0),f=b.getContext("2d")):f=l?Ue:Dg;f=f.getImageData(0,
0,b.width,b.height);a="undefined"!==typeof a&&null!==a?Z.Utils.filterImage(f,a,e,g):jh(name,f,void 0,void 0,void 0);b.getContext("2d").putImageData(a,0,0)}function jh(b,a){var e=Z.Utils.arrayIndexOfObjectValue(Vd,"name",b);if(-1!=e)a=Vd[e].object;else{for(var e=0,f=Ga.length;e<f;e++){var g=Ga[e].filter,l=Ga[e].value,k=Ga[e].value2;0!=l&&(a=Z.Utils.filterImage(a,g,l,k))}ja(!0)}return a}function Wg(b){Z.imageFilters&&Gg&&xd&&ld&&("frontfill"==b?(Z.Utils.clearDisplay(xd),xd.width=sa.width,xd.height=
sa.height,xg.width=Ka.width,xg.height=Ka.height,Ue.translate(tc,zc),Ue.scale(Pa,Pa)):(Z.Utils.clearDisplay(ld),ld.width=S.width,ld.height=S.height,Te.width=va.width,Te.height=va.height))}function nb(b){b=Z.Utils.event(b);var a=b.type;if(b&&a){var e=!Qb&&("polygon"==Z.labelMode||"measure"==Z.labelMode),f=Z.Utils.isRightMouseButton(b),g=b.altKey;if("mouseover"!=a&&"mouseout"!=a&&!Z.interactive||"mousedown"==a&&(!Z.interactive||Z.coordinatesVisible&&g)||f&&!e)Z.tourStop=!0;else{if("mousedown"==a||"touchstart"==
a||Z.tourPlaying&&Z.tourStop)n.zoomAndPanAllStop(),n.tourStop(),Z.tourStop=!0,Z.interactive=!0;Z.touchSupport&&!Z.clickZoomAndPanBlock&&"touchmove"!=a&&"gesturechange"!=a&&b.preventDefault();if("mousedown"==a)window.setTimeout(function(){n.zoomAndPanAllStop(!1,!0)},1),Z.maskingSelection&&Z.maskClearOnUserAction&&n.clearMask();else if("touchstart"==a||"gesturestart"==a)e=!1,touch=Z.Utils.getFirstTouch(b),"undefined"!==typeof touch&&null!==touch&&(f=Bc(touch.target),null===f?e=!0:(f=f.id.substring(3,
f.id.length),f=Z.Utils.arrayIndexOfObjectValue(A,"internalID",f),-1!=f&&(f=A[f],null!==f&&"function"==f.clickURL&&(e=!0)))),e&&b.preventDefault(),n.zoomAndPanAllStop(!1,!0),Z.maskingSelection&&Z.maskClearOnUserAction&&n.clearMask();switch(a){case "mouseover":Z.fullView||"TEXTAREA"==document.activeElement.tagName||Z.Viewer.initializeViewerKeyDefaultListeners(!0);break;case "mousedown":!Z.fullView&&document.activeElement&&document.activeElement.blur();Z.Viewer.initializeViewerKeyEventListeners(!0);
Z.Utils.addEventListener(document,"mousemove",nb);Z.Utils.addEventListener(document,"mouseup",nb);break;case "mouseup":Z.Utils.removeEventListener(document,"mousemove",nb),Z.Utils.removeEventListener(document,"mouseup",nb)}ck(b);if("mousedown"==a||"mousemove"==a)return!1}}}function ck(a){var e=Ta.toString();a=Z.Utils.event(a);var f=a.type;if(a&&f){var g,k,l;if("touchstart"==f||"touchmove"==f||"touchend"==f||"touchcancel"==f)g=Z.Utils.getFirstTouch(a),"undefined"!==typeof g&&(k=g.target,l=new Z.Utils.Point(g.pageX,
g.pageY));else{k=Z.Utils.target(a);Z.Utils.relatedTarget(a);var m=Z.Utils.isRightMouseButton(a),p=a.altKey;"resize"!=f&&(l=Z.Utils.getMousePosition(a));Z.smoothPan&&(Kd=l)}"DOMMouseScroll"==f&&(f="mousewheel");var C=n.getZoom(),v=(100*C).toString(),u;"undefined"!==typeof l&&null!==l&&(u=n.getClickCoordsInImage(a,C,l));switch(f){case "mousedown":Z.mouseIsDown=!0;Z.comparison&&(v=k.id,e=v.substring(v.indexOf("viewportDisplay")+15,v.length),Ta=Z.Utils.stringValidate(e)?parseInt(e,10):0,Z.Viewer.viewportSelect(Ta));
oc=new Z.Utils.Point(l.x,l.y);Df=(new Date).getTime();Ua.mouseXPrior=l.x;Ua.mouseYPrior=l.y;if(("rectangle"==Z.labelMode||"polygon"==Z.labelMode||"measure"==Z.labelMode)&&null!==K||"rectangle"==Z.labelMode&&null===K)qb=Le(a,u);if(Z.zoomRectangle&&p&&!Z.measureVisible&&"view"==Z.labelMode&&null===Z.editing){if("none"==gb.display||"none"==mc.display||"none"==Vb.display)gb.display=mc.display=Vb.display="inline-block",Z.Utils.addEventListener(ge,"mousedown",Z.Utils.preventDefault);tf=!0;vc=!1;l=1;rb(null,
!1,u);rb(K,!1,new Z.Utils.Point(u.x+l,u.y));rb(K,!1,new Z.Utils.Point(u.x+l,u.y+l));rb(K,!1,new Z.Utils.Point(u.x,u.y+l));pd(K,!0);qb=2}else if(!p&&"view"!=Z.labelMode&&("addLabel"==Z.editing||"editLabel"==Z.editing||null===Z.editMode&&"measure"==Z.labelMode)){"markup"!=Z.editMode&&n.toggleLabelColorPicker(!1);n.toggleLabelIconPicker(!1);Z.Utils.hideMessage();if("function"===typeof Z.externalEditPermissionFunction&&!Z.externalEditPermissionFunction()&&("freehand"==Z.labelMode||"rectangle"==Z.labelMode||
"polygon"==Z.labelMode||"measure"==Z.labelMode))break;"addLabel"==Z.editing&&("freehand"==Z.labelMode||"rectangle"==Z.labelMode&&null===qb)&&n.saveEditsLabel(!0,!1,!1);vc=!1;"freehand"==Z.labelMode&&Z.mouseIsDown?("editLabel"==Z.editing&&X&&Z.Utils.arrayClear(X.polygonPts),a="editLabel"==Z.editing?K:null,rb(a,!1,u),Ne=(u.x-Z.imageX)*C,Ef=(u.y-Z.imageY)*C,pd(K,!1),vc=!0):"rectangle"==Z.labelMode&&null===qb&&(l=1,a=null,"editLabel"==Z.editing&&(a=K,X&&null===qb&&Z.Utils.arrayClear(X.polygonPts)),rb(a,
!1,u),rb(K,!1,new Z.Utils.Point(u.x+l,u.y)),rb(K,!1,new Z.Utils.Point(u.x+l,u.y+l)),rb(K,!1,new Z.Utils.Point(u.x,u.y+l)),pd(K,!0),qb=2,vc=!0);vc&&!Z.annotationsAddMultiple&&(Z.editing="editLabel")}else if(!p&&!Z.labelsClickDrag||"addLabel"!=Z.editing&&"editLabel"!=Z.editing)Z.smoothPan&&!p&&Z.mousePan&&1<Z.smoothPanEasing&&(H(void 0),Oe=oc,null===pe&&(pe=new Z.Utils.Point(parseFloat(ia.left),parseFloat(ia.top))),null===fd&&(fd=window.setInterval(dk,50)));else if(da=Bc(k)){l=n.z480(a.clientX,a.clientY);
v=new Z.Utils.Point(parseFloat(da.style.left),parseFloat(da.style.top));a=l.x-v.x;l=l.y-v.y;da.mouseXPrior=oc.x;da.mouseYPrior=oc.y;da.mouseXOffset=a;da.mouseYOffset=l;da.style.zIndex=A.length+1;a=da.id.substring(3,da.id.length);if(K&&K!=a){if("function"===typeof Z.externalEditPermissionFunction&&!Z.externalEditPermissionFunction())break;Rb("save","labels");var D=Z.Utils.arrayIndexOfObjectValue(A,"internalID",a);-1!=D&&(a=A[D],Pc(a.poiID,a.internalID));Z.Utils.validateCallback("labelSelectedInViewportGetIDs")}Oa&&
(Z.hotspotListTitle||Z.tourListTitle)&&(Oa.selectedIndex=0)}break;case "mousemove":Sb=new Z.Utils.Point(l.x,l.y);v=(u.x-Z.imageX)*C;k=(u.y-Z.imageY)*C;La&&(clearTimeout(La),La=null,Fc(a,u,q));if(Z.zoomRectangle&&p&&"view"==Z.labelMode&&null===Z.editing)Ke(K,qb,u);else if(p||Z.tracking||(null!==Z.editMode||"measure"!=Z.labelMode)&&("view"==Z.labelMode||"addLabel"!=Z.editing&&"editLabel"!=Z.editing))if(da){if("function"===typeof Z.externalEditPermissionFunction&&!Z.externalEditPermissionFunction())break;
n.getLabelEditable(K)&&(p=da.style,l=Sb.x-da.mouseXPrior,v=Sb.y-da.mouseYPrior,l=parseFloat(p.left)+l,v=parseFloat(p.top)+v,p.left=l+"px",p.top=v+"px",da.mouseXPrior=Sb.x,da.mouseYPrior=Sb.y,ke(a,da,Sb))}else!p&&Z.mousePan&&(fd?Kd=l:Z.animation&&n.getZoom()==Z.minZ?(l.x>Ua.mouseXPrior?Z.Viewer.viewportNext():l.x<Ua.mouseXPrior&&Z.Viewer.viewportPrior(),Ua.mouseXPrior=l.x,Ua.mouseYPrior=l.y):(v=l.x-Ua.mouseXPrior,a=l.y-Ua.mouseYPrior,isNaN(v)||isNaN(a)||(v=parseFloat(ia.left)+v,a=parseFloat(ia.top)+
a,p=ua(v,a,Z.imageZ,Z.imageR,"container"),ia.left=p.x+"px",ia.top=p.y+"px",Ua.mouseXPrior=l.x,Ua.mouseYPrior=l.y,v=p.x-bc,a=p.y-Mb,Ea&&Gb&&(Z.mobileDevice||Math.abs(v)>qa/2||Math.abs(a)>ra/2)&&M(Ea,Sc,Zb,"simple",!1,"Updating backfill oversize display"),a=n.calculateCurrentCenterCoordinates(p,Z.imageZ,Z.imageR),Z.Navigator&&Z.Navigator.z658(a),Z.Utils.setBookmarksURL(),Z.Viewer.syncComparisonViewport(),Z.Viewer.syncOverlayViewports(null,b),Z.tracking&&n.syncTrackingToViewport())));else{if("function"===
typeof Z.externalEditPermissionFunction&&!Z.externalEditPermissionFunction()&&("freehand"==Z.labelMode||"rectangle"==Z.labelMode||"polygon"==Z.labelMode||"measure"==Z.labelMode))break;a=Z.Utils.arrayIndexOfObjectValue(A,"internalID",K);a=-1!=a?A[a].polyClosed:!1;"freehand"==Z.labelMode&&Z.mouseIsDown?(Je(Ne,Ef,v,k,u),Ne=v,Ef=k):!Z.measureVisible&&!n.getLabelEditable(K)||"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||null===qb||!Z.mouseIsDown?"polygon"!=Z.labelMode&&"measure"!=
Z.labelMode||a||Z.mouseIsDown&&(!Z.mouseIsDown||null===qb)||sf(v,k,u):Ke(K,qb,u)}break;case "mouseup":Z.mouseIsDown=!1;document.mousemove=null;document.mouseup=null;g=(new Date).getTime();Z.mouseOutDownPoint?(f=Z.mouseOutDownPoint,u=n.getClickCoordsInImage(a,C,Z.mouseOutDownPoint)):f=new Z.Utils.Point(l.x,l.y);l=Z.Utils.calculatePointsDistance(oc.x,oc.y,f.x,f.y);C=g-Df;if(l<ek&&C<fk||!p&&("freehand"==Z.labelMode||"rectangle"==Z.labelMode))if(!da&&(null===Z.editMode&&"measure"==Z.labelMode||"view"!=
Z.labelMode&&("addLabel"==Z.editing||"editLabel"==Z.editing))){if("function"===typeof Z.externalEditPermissionFunction&&!Z.externalEditPermissionFunction())break;"addLabel"!=Z.editing||p||!Qb||"text"!=Z.labelMode&&"icon"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||n.saveEditsLabel(!0,!1,!1);if(p&&Qb&&!m||"freehand"!=Z.labelMode&&"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode)if(p)p&&("text"==Z.labelMode||"icon"==Z.labelMode)&&X&&(n.modifyHotspot(K,"x",u.x,
!0,!0),n.modifyHotspot(K,"y",u.y,!1,!0));else{a="undefined"!==typeof la&&0<la.options.length?a=la.options[la.selectedIndex].value:0;vc=!1;if("text"==Z.labelMode)"addLabel"==Z.editing?(n.createLabelFromParameters(null,null,"text",null,null,u.x.toString(),u.y.toString(),v,null,null,null,"0","0",null,null,null,null,null,null,Ae,null,null,null,null,null,null,null,"5","0",null,a),vc=!0):X&&(n.modifyHotspot(K,"x",u.x,!0,!0),n.modifyHotspot(K,"y",u.y,!1,!0));else if("icon"==Z.labelMode){if(l=document.getElementById("labelIconList"+
e)){l=l[l.selectedIndex].value;switch(l){case "shim":D=Z.labelIconsInternal?"circle":jc+"/circle.png";break;case "External Graphics File":D=l;break;default:D=Z.labelIconsInternal?l:jc+"/"+l}"addLabel"==Z.editing?(n.createLabelFromParameters(null,null,"icon",D,null,u.x.toString(),u.y.toString(),v,null,null,null,"0","0",null,null,null,null,null,null,Ae,null,lineStrokeColor,null,null,null,null,null,null,"0",null,a),vc=!0):X&&(n.modifyHotspot(K,"x",u.x,!0,!0),n.modifyHotspot(K,"y",u.y,!1,!0))}}else if("counter"==
Z.labelMode&&"addLabel"==Z.editing){p=Z.Utils.getResource("CONTENT_TRACKINGTEXTCOLOR");k=Z.Utils.getResource("CONTENT_TRACKINGLINECOLOR");var O=Z.Utils.getResource("CONTENT_TRACKINGFILLCOLOR"),f=Z.userName,e=Z.userInitials,C=Xb("label");l=Math.round(u.x).toString();var v=Math.round(u.y).toString(),m=n.getTrackingCellIDFromCoordinates(l,v,"100"),t=g=null,y=null,D=Z.Utils.arrayIndexOfObjectValue(rd,"value",Z.trackingTypeCurrent);-1!=D&&(D=rd[D],g=D.text,y=D.text+" : "+Z.userName,t=D.value,O=D.fillColor);
var I=m+"   "+l+", "+v+", 100: "+f,J=Z.Utils.stringPadFront(m,6,"0")+Z.Utils.stringPadFront(C,6,"0"),D="circle",ja=Z.Utils.getResource("CONTENT_COUNTERCAPTIONPOSITION"),B=Z.Utils.getCurrentUTCDateAsString();n.createLabelFromParameters(C,g,"counter",D,null,l,v,"100",null,null,40,"0","0",null,null,null,e,null,y,p,null,k,O,"1","0","1","1",ja,"0",null,a,null,null,null,null,null,null,null,null,t,null,null,null,null,f,Z.userInitials,B);vc=!0;yc[yc.length]={text:I,value:C,sortKey:J,cell:m,typeID:t,x:l,y:v,
zoom:"100",user:f,name:g,mediaType:"counter",media:D,radius:(40).toString(),caption:e,captionPosition:ja,fillColor:O,initials:Z.userInitials,date:B};n.syncTrackingToViewport()}vc&&(a=xa[xa.length-1],nc(a.poiID,a.value),vc=!1,Z.annotationsAddMultiple||(Z.editing="editLabel"))}else if(p||m)Fc(a,u),Qb||Z.Utils.addEventListener(document,"mousemove",nb);else{Z.Utils.addEventListener(document,"mousemove",nb);var q=!1;La?(q=!0,clearTimeout(La),La=null,Fc(a,u,q),Z.Utils.removeEventListener(document,"mousemove",
nb)):(La=setTimeout(function(a){La=null;Fc(a,u,q)},Z.doubleClickDelay),"polygon"!=Z.labelMode&&"measure"!=Z.labelMode&&Z.Utils.removeEventListener(document,"mousemove",nb))}Jb("label",Z.editing)}else if(null!==da&&(Z.measureVisible||Z.tour||Z.hotspots||Z.annotations))da=null;else{if((null===Z.editing||"view"==Z.labelMode)&&!da)if(l=null,Z.labelClickSelect&&(l=Bc(k)),null!==l)a=l.id.substring(3,l.id.length),D=Z.Utils.arrayIndexOfObjectValue(A,"internalID",a),-1!=D&&(a=A[D],Pc(a.poiID,a.internalID),
n.zoomAndPanToView(a.x,a.y,a.z/100,a.rotation),Z.Utils.validateCallback("labelSelectedInViewportGetIDs")),Oa&&(Z.hotspotListTitle||Z.tourListTitle)&&(Oa.selectedIndex=0);else{if(Z.clickZoom||Z.clickPan){l=La&&Z.doubleClickZoom?!0:!1;var x=n.getClickZoomCoords3D(a,oc,Da,Pa,l)}Z.clickZoom?Z.doubleClickZoom?La?(clearTimeout(La),La=null,n.zoomAndPanToView(x.x,x.y,x.z)):La=setTimeout(function(a){La=null;n.zoomAndPanToView(x.x,x.y,x.z)},Z.doubleClickDelay):window.setTimeout(function(){n.zoomAndPanToView(x.x,
x.y,x.z)},1):Z.clickPan&&n.zoomAndPanToView(x.x,x.y,Z.imageZ);Z.zoomRectangle&&tf&&(a=A[K].polygonPts,n.deleteLabel(K),tf=null,Z.measureVisible||Z.tour||Z.hotspots||Z.annotations||(gb.display=mc.display=Vb.display="none",Z.Utils.removeEventListener(ge,"mousedown",Z.Utils.preventDefault)))}}else{if("function"===typeof Z.externalEditPermissionFunction&&!Z.externalEditPermissionFunction())break;Z.zoomRectangle&&tf&&"view"==Z.labelMode&&null===Z.editing?(a=A[K].polygonPts,n.deleteLabel(K,!0),tf=null,
Z.measureVisible||Z.tour||Z.hotspots||Z.annotations||(gb.display=mc.display=Vb.display="none",Z.Utils.removeEventListener(ge,"mousedown",Z.Utils.preventDefault)),n.zoomAndPanToZoomRectangle(a)):"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||!ig&&(null!==qb||Qb)?da&&(n.getLabelEditable(K)&&(p=da.style,l=f.x-da.mouseXPrior,v=f.y-da.mouseYPrior,l=parseFloat(p.left)+l,v=parseFloat(p.top)+v,p.left=l+"px",p.top=v+"px",ke(a,da,f)),da.style.zIndex=da.zIndex,da=null):(qb=null,ig=
!1,a=Z.Utils.arrayIndexOfObjectValue(A,"internalID",K),-1!=a&&(a=A[a],l=Z.Utils.polygonCenter(a.polygonPts,a.polyClosed),a.x=l.x,a.y=l.y,Z.Utils.clearDisplay(ob),l=new Ib,uc(a,l),Qb||Z.Utils.addEventListener(document,"mousemove",nb)));Sb=null;Z.mousePan&&!Z.smoothPan&&n.updateView()}Z.mouseOutDownPoint&&(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!1),Z.Navigator&&1<Z.navigatorVisible&&(Z.Navigator.setVisibility(!1),Z.comparison&&Z.Navigator2&&Z.Navigator2.setVisibility(!1)),Z.Toolbar&&
(!Z.annotations||2!=Z.annotationPanelVisible&&3!=Z.annotationPanelVisible||Z.Toolbar.setVisibilityAnnotationPanel(!1),!Z.tracking||2!=Z.trackingPanelVisible&&3!=Z.trackingPanelVisible||Z.Toolbar.setVisibilityTrackingPanel(!1),2!=Z.userPanelVisible&&3!=Z.trackingPanelVisible||Z.Toolbar.setVisibilityUserPanel(!1)));break;case "touchstart":if(g&&!ee){Z.mouseIsDown=!0;kg=!1;Z.comparison&&(v=k.id,e=v.substring(v.indexOf("viewportDisplay")+15,v.length),Ta=parseInt(e,10),Z.Viewer.viewportSelect(Ta));oc=
new Z.Utils.Point(l.x,l.y);Df=(new Date).getTime();Ua.mouseXPrior=l.x;Ua.mouseYPrior=l.y;if(("rectangle"==Z.labelMode||"polygon"==Z.labelMode||"measure"==Z.labelMode)&&null!==K||"rectangle"==Z.labelMode&&null===K)qb=Le(a,u);if(!p&&"view"!=Z.labelMode&&("addLabel"==Z.editing||"editLabel"==Z.editing||null===Z.editMode&&"measure"==Z.labelMode)){"markup"!=Z.editMode&&n.toggleLabelColorPicker(!1);n.toggleLabelIconPicker(!1);Z.Utils.hideMessage();if("function"===typeof Z.externalEditPermissionFunction&&
!Z.externalEditPermissionFunction()&&("freehand"==Z.labelMode||"rectangle"==Z.labelMode||"polygon"==Z.labelMode||"measure"==Z.labelMode))break;"addLabel"==Z.editing&&("freehand"==Z.labelMode||"rectangle"==Z.labelMode&&null===qb)&&n.saveEditsLabel(!0,!1,!1);"freehand"==Z.labelMode&&Z.mouseIsDown?("editLabel"==Z.editing&&X&&Z.Utils.arrayClear(X.polygonPts),a="editLabel"==Z.editing?K:null,rb(a,!1,u),Ne=(u.x-Z.imageX)*C,Ef=(u.y-Z.imageY)*C,pd(K,!1)):"rectangle"==Z.labelMode&&null===qb&&(l=1,a=null,"editLabel"==
Z.editing&&(a=K,X&&null===qb&&Z.Utils.arrayClear(X.polygonPts)),rb(a,!1,u),rb(K,!1,new Z.Utils.Point(u.x+l,u.y)),rb(K,!1,new Z.Utils.Point(u.x+l,u.y+l)),rb(K,!1,new Z.Utils.Point(u.x,u.y+l)),pd(K,!0),qb=2)}else if(p&&("addLabel"==Z.editing||"editLabel"==Z.editing)&&(da=Bc(k))){l=n.z480(a.clientX,a.clientY);v=new Z.Utils.Point(parseFloat(da.style.left),parseFloat(da.style.top));a=l.x-v.x;l=l.y-v.y;da.mouseXPrior=oc.x;da.mouseYPrior=oc.y;da.mouseXOffset=a;da.mouseYOffset=l;da.style.zIndex=A.length+
1;a=da.id.substring(3,da.id.length);if(K&&K!=a){if("function"===typeof Z.externalEditPermissionFunction&&!Z.externalEditPermissionFunction())break;Rb("save","labels");D=Z.Utils.arrayIndexOfObjectValue(A,"internalID",a);-1!=D&&(a=A[D],Pc(a.poiID,a.internalID));Z.Utils.validateCallback("labelSelectedInViewportGetIDs")}Oa&&(Z.hotspotListTitle||Z.tourListTitle)&&(Oa.selectedIndex=0)}}break;case "touchmove":if(g&&!ee&&!kg)if(Sb=new Z.Utils.Point(l.x,l.y),v=(u.x-Z.imageX)*C,k=(u.y-Z.imageY)*C,La&&(clearTimeout(La),
La=null,Fc(a,u,q)),p||(null!==Z.editMode||"measure"!=Z.labelMode)&&("view"==Z.labelMode||"addLabel"!=Z.editing&&"editLabel"!=Z.editing))if(da){if("function"===typeof Z.externalEditPermissionFunction&&!Z.externalEditPermissionFunction())break;p=da.style;l=Sb.x-da.mouseXPrior;v=Sb.y-da.mouseYPrior;l=parseFloat(p.left)+l;v=parseFloat(p.top)+v;p.left=l+"px";p.top=v+"px";da.mouseXPrior=Sb.x;da.mouseYPrior=Sb.y;ke(a,da,Sb)}else!p&&Z.mousePan&&(fd?Kd=l:(v=l.x-Ua.mouseXPrior,a=l.y-Ua.mouseYPrior,isNaN(v)||
isNaN(a)||(v=parseFloat(ia.left)+v,a=parseFloat(ia.top)+a,p=ua(v,a,Z.imageZ,Z.imageR,"container"),ia.left=p.x+"px",ia.top=p.y+"px",Ua.mouseXPrior=l.x,Ua.mouseYPrior=l.y,v=p.x-bc,a=p.y-Mb,Ea&&Gb&&(Z.mobileDevice||Math.abs(v)>qa/2||Math.abs(a)>ra/2)&&M(Ea,Sc,Zb,"simple",!1,"Updating backfill oversize display"),a=n.calculateCurrentCenterCoordinates(p,Z.imageZ,Z.imageR),Z.Navigator&&Z.Navigator.z658(a),Z.Utils.setBookmarksURL(),Z.Viewer.syncComparisonViewport(),Z.Viewer.syncOverlayViewports(null,b),Z.tracking&&
n.syncTrackingToViewport())));else{if("function"===typeof Z.externalEditPermissionFunction&&!Z.externalEditPermissionFunction()&&("freehand"==Z.labelMode||"rectangle"==Z.labelMode||"polygon"==Z.labelMode||"measure"==Z.labelMode))break;a=Z.Utils.arrayIndexOfObjectValue(A,"internalID",K);a=-1!=a?A[a].polyClosed:!1;"freehand"==Z.labelMode&&Z.mouseIsDown?(Je(Ne,Ef,v,k,u),Ne=v,Ef=k):"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||null===qb||!Z.mouseIsDown?"polygon"!=Z.labelMode&&
"measure"!=Z.labelMode||a||Z.mouseIsDown&&(!Z.mouseIsDown||null===qb)||sf(v,k,u):Ke(K,qb,u)}break;case "touchend":if(!ee&&!kg){Z.mouseIsDown=!1;document.mousemove=null;document.mouseup=null;g=(new Date).getTime();Z.mouseOutDownPoint?(f=Z.mouseOutDownPoint,u=n.getClickCoordsInImage(a,C,Z.mouseOutDownPoint)):f="undefined"!==typeof l&&null!==l?new Z.Utils.Point(l.x,l.y):"undefined"!==typeof Sb&&null!==Sb?Sb:oc;l=Z.Utils.calculatePointsDistance(oc.x,oc.y,f.x,f.y);C=g-Df;if(l<Ej&&C<Gi||!p&&("rectangle"==
Z.labelMode||"freehand"==Z.labelMode))if(da||(null!==Z.editMode||"measure"!=Z.labelMode)&&("view"==Z.labelMode||"addLabel"!=Z.editing&&"editLabel"!=Z.editing))null!==da&&(Z.measureVisible||Z.tour||Z.hotspots||Z.annotations)?da=null:null!==Z.editing&&"view"!=Z.labelMode||da||(Z.clickZoom?(l=La&&Z.doubleClickZoom?!0:!1,x=n.getClickZoomCoords3D(a,oc,Da,Pa,l),Z.doubleClickZoom?La?(clearTimeout(La),La=null,n.zoomAndPanToView(x.x,x.y,x.z)):La=setTimeout(function(a){La=null;n.zoomAndPanToView(x.x,x.y,x.z)},
Z.doubleClickDelay):window.setTimeout(function(){n.zoomAndPanToView(x.x,x.y,x.z)},1)):Z.clickPan&&n.zoomAndPanToView(x.x,x.y,Z.imageZ));else{if("function"===typeof Z.externalEditPermissionFunction&&!Z.externalEditPermissionFunction())break;"addLabel"!=Z.editing||p||!Qb||"text"!=Z.labelMode&&"icon"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||n.saveEditsLabel(!0,!1,!1);if(p&&Qb||"freehand"!=Z.labelMode&&"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode)if(p)p&&
("text"==Z.labelMode||"icon"==Z.labelMode)&&X&&(n.modifyHotspot(K,"x",u.x,!0,!0),n.modifyHotspot(K,"y",u.y,!1,!0));else{a="undefined"!==typeof la&&0<la.options.length?a=la.options[la.selectedIndex].value:0;vc=!1;if("text"==Z.labelMode)"addLabel"==Z.editing?(n.createLabelFromParameters(null,null,"text",null,null,u.x.toString(),u.y.toString(),v,null,null,null,"0","0",null,null,null,null,null,null,Ae,null,null,null,null,null,null,null,"5","0",null,a),vc=!0):X&&(n.modifyHotspot(K,"x",u.x,!0,!0),n.modifyHotspot(K,
"y",u.y,!1,!0));else if("icon"==Z.labelMode&&(l=document.getElementById("labelIconList"+e))){l=l[l.selectedIndex].value;switch(l){case "shim":D=Z.labelIconsInternal?"circle":jc+"/circle.png";break;case "External Graphics File":D=l;break;default:D=Z.labelIconsInternal?l:jc+"/"+l}"addLabel"==Z.editing?(n.createLabelFromParameters(null,null,"icon",D,null,u.x.toString(),u.y.toString(),v,null,null,null,"0","0",null,null,null,null,null,null,Ae,null,lineStrokeColor,null,null,null,null,null,null,"0",null,
a),vc=!0):X&&(n.modifyHotspot(K,"x",u.x,!0,!0),n.modifyHotspot(K,"y",u.y,!1,!0))}vc&&(a=xa[xa.length-1],nc(a.poiID,a.value),vc=!1)}else p||m?(Fc(a,u),Qb||Z.Utils.addEventListener(document,"mousemove",viewerEventsHandler)):(Z.Utils.addEventListener(document,"touchmove",nb),q=!1,La?(q=!0,clearTimeout(La),La=null,Fc(a,u,q),Z.Utils.removeEventListener(document,"touchmove",nb)):(La=setTimeout(function(a){La=null;Fc(a,u,q)},Z.doubleClickDelay),"polygon"!=Z.labelMode&&"measure"!=Z.labelMode&&Z.Utils.removeEventListener(document,
"touchmove",nb)));Jb("label",Z.editing)}else{if("function"===typeof Z.externalEditPermissionFunction&&!Z.externalEditPermissionFunction())break;"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||!ig&&(null!==qb||Qb)?da&&(p=da.style,l=f.x-da.mouseXPrior,v=f.y-da.mouseYPrior,l=parseFloat(p.left)+l,v=parseFloat(p.top)+v,p.left=l+"px",p.top=v+"px",ke(a,da,f),da.style.zIndex=da.zIndex,da=null):(qb=null,ig=!1,a=Z.Utils.arrayIndexOfObjectValue(A,"internalID",K),-1!=a&&(a=A[a],l=Z.Utils.polygonCenter(a.polygonPts,
a.polyClosed),a.x=l.x,a.y=l.y,Z.Utils.clearDisplay(ob),l=new Ib,uc(a,l),Qb||Z.Utils.addEventListener(document,"touchmove",nb)));Sb=null;Z.mousePan&&!fd&&n.updateView()}Z.mouseOutDownPoint&&(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!1),Z.Navigator&&1<Z.navigatorVisible&&(Z.Navigator.setVisibility(!1),Z.comparison&&Z.Navigator2&&Z.Navigator2.setVisibility(!1)),Z.Toolbar&&(!Z.annotations||2!=Z.annotationPanelVisible&&3!=Z.annotationPanelVisible||Z.Toolbar.setVisibilityAnnotationPanel(!1),
!Z.tracking||2!=Z.trackingPanelVisible&&3!=Z.trackingPanelVisible||Z.Toolbar.setVisibilityTrackingPanel(!1),2!=Z.userPanelVisible&&3!=Z.trackingPanelVisible||Z.Toolbar.setVisibilityUserPanel(!1)))}break;case "touchcancel":if(!ee&&!kg){Z.mouseIsDown=!1;document.mousemove=null;document.mouseup=null;g=(new Date).getTime();Z.mouseOutDownPoint?(f=Z.mouseOutDownPoint,u=n.getClickCoordsInImage(a,C,Z.mouseOutDownPoint)):f="undefined"!==typeof l&&null!==l?new Z.Utils.Point(l.x,l.y):"undefined"!==typeof Sb&&
null!==Sb?Sb:oc;l=Z.Utils.calculatePointsDistance(oc.x,oc.y,f.x,f.y);C=g-Df;if(l<Ej&&C<Gi||!p&&("rectangle"==Z.labelMode||"freehand"==Z.labelMode))if(da||(null!==Z.editMode||"measure"!=Z.labelMode)&&("view"==Z.labelMode||"addLabel"!=Z.editing&&"editLabel"!=Z.editing))null!==da&&(Z.measureVisible||Z.tour||Z.hotspots||Z.annotations)?da=null:null!==Z.editing&&"view"!=Z.labelMode||da||(Z.clickZoom?(l=La&&Z.doubleClickZoom?!0:!1,x=n.getClickZoomCoords3D(a,oc,Da,Pa,l),Z.doubleClickZoom?La?(clearTimeout(La),
La=null,n.zoomAndPanToView(x.x,x.y,x.z)):La=setTimeout(function(a){La=null;n.zoomAndPanToView(x.x,x.y,x.z)},Z.doubleClickDelay):window.setTimeout(function(){n.zoomAndPanToView(x.x,x.y,x.z)},1)):Z.clickPan&&n.zoomAndPanToView(x.x,x.y,Z.imageZ));else{if("function"===typeof Z.externalEditPermissionFunction&&!Z.externalEditPermissionFunction())break;"addLabel"!=Z.editing||p||!Qb||"text"!=Z.labelMode&&"icon"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||n.saveEditsLabel(!0,!1,!1);p&&Qb||
"freehand"!=Z.labelMode&&"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode?p?p&&("text"==Z.labelMode||"icon"==Z.labelMode)&&X&&(n.modifyHotspot(K,"x",u.x,!0,!0),n.modifyHotspot(K,"y",u.y,!1,!0)):(a="undefined"!==typeof la&&0<la.options.length?a=la.options[la.selectedIndex].value:0,vc=!1,"text"==Z.labelMode?"addLabel"==Z.editing?(n.createLabelFromParameters(null,null,"text",null,null,u.x.toString(),u.y.toString(),v,null,null,null,"0","0",null,null,null,null,null,null,Ae,null,
null,null,null,null,null,null,"5","0",null,a),vc=!0):X&&(n.modifyHotspot(K,"x",u.x,!0,!0),n.modifyHotspot(K,"y",u.y,!1,!0)):"icon"==Z.labelMode&&(l=document.getElementById("labelIconList"+e))&&(l=l[l.selectedIndex].value,D="shim"==l?"":"External Graphics File"==l?l:jc+"/"+l,"addLabel"==Z.editing?(n.createLabelFromParameters(null,null,"icon",D,null,u.x.toString(),u.y.toString(),v,null,null,null,"0","0",null,null,null,null,null,null,Ae,null,lineStrokeColor,null,null,null,null,null,null,"0",null,a),
vc=!0):X&&(n.modifyHotspot(K,"x",u.x,!0,!0),n.modifyHotspot(K,"y",u.y,!1,!0))),vc&&(a=xa[xa.length-1],nc(a.poiID,a.value),vc=!1)):p||m?(Fc(a,u),Qb||Z.Utils.addEventListener(document,"mousemove",viewerEventsHandler)):(Z.Utils.addEventListener(document,"touchmove",nb),q=!1,La?(q=!0,clearTimeout(La),La=null,Fc(a,u,q),Z.Utils.removeEventListener(document,"touchmove",nb)):(La=setTimeout(function(a){La=null;Fc(a,u,q)},Z.doubleClickDelay),"polygon"!=Z.labelMode&&"measure"!=Z.labelMode&&Z.Utils.removeEventListener(document,
"touchmove",nb)));Jb("label",Z.editing)}else{if("function"===typeof Z.externalEditPermissionFunction&&!Z.externalEditPermissionFunction())break;"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||!ig&&(null!==qb||Qb)?da&&(p=da.style,l=f.x-da.mouseXPrior,v=f.y-da.mouseYPrior,l=parseFloat(p.left)+l,v=parseFloat(p.top)+v,p.left=l+"px",p.top=v+"px",ke(a,da,f),da.style.zIndex=da.zIndex,da=null):(qb=null,ig=!1,a=Z.Utils.arrayIndexOfObjectValue(A,"internalID",K),-1!=a&&(a=A[a],l=Z.Utils.polygonCenter(a.polygonPts,
a.polyClosed),a.x=l.x,a.y=l.y,Z.Utils.clearDisplay(ob),l=new Ib,uc(a,l),Qb||Z.Utils.addEventListener(document,"touchmove",nb)));Sb=null;Z.mousePan&&!fd&&n.updateView()}Z.mouseOutDownPoint&&(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!1),Z.Navigator&&1<Z.navigatorVisible&&(Z.Navigator.setVisibility(!1),Z.comparison&&Z.Navigator2&&Z.Navigator2.setVisibility(!1)),Z.Toolbar&&(!Z.annotations||2!=Z.annotationPanelVisible&&3!=Z.annotationPanelVisible||Z.Toolbar.setVisibilityAnnotationPanel(!1),
!Z.tracking||2!=Z.trackingPanelVisible&&3!=Z.trackingPanelVisible||Z.Toolbar.setVisibilityTrackingPanel(!1),2!=Z.userPanelVisible&&3!=Z.trackingPanelVisible||Z.Toolbar.setVisibilityUserPanel(!1)))}break;case "gesturestart":gk(a);ee||(ee=window.setInterval(hk,Wh));break;case "gesturechange":Xg=Math.round(100*a.scale)/100;break;case "gestureend":ee&&(window.clearInterval(ee),kg=!0,ee=null),Z.mousePan&&n.updateView()}}}function H(a){null!==fd&&a&&(window.clearInterval(fd),fd=null);pe=Ff=qe=Cb=null;pc=
ec=Hc=Ic=0}function dk(){if(Z.animation&&n.getZoom()==Z.minZ){Z.animationCount++;null===Pe&&(Pe=parseFloat(ia.left));null===Gf&&(Gf=parseFloat(ia.top));var a=Pe,e=Gf;if(Z.mouseIsDown||Cb){var f=(Cb?Ff:Kd.x)-Oe.x,g=(Cb?qe:Kd.y)-Oe.y,k=a-pe.x,l=e-pe.y;if(!(isNaN(f)||isNaN(g)||isNaN(k)||isNaN(l)||0==f&&0==g&&0==k&&0==l)){var p=Cb?Z.smoothPanGlide:1,m=Cb?1:100;pc=Math.round((f-k)/(Z.smoothPanEasing*p)*m/m);ec=Math.round((g-l)/(Z.smoothPanEasing*p)*m/m);Z.mouseIsDown?(Hc=pc,Ic=ec):(Math.abs(pc)>Math.abs(Hc)&&
(pc=Hc),Math.abs(ec)>Math.abs(Ic)&&(ec=Ic));e+=ec;Pe=a+pc;Gf=e;var v,u,D,q;"motion"==Z.animator?(v="horizontal"==Z.animationAxis?pc:ec,dimensionAxis="horizontal"==Z.animationAxis?qa:ra,u=Math.round(si/Z.imageSetLength),D=v/40,q=0):"position"==Z.animator&&(v="horizontal"==Z.animationAxis?k:l,dimensionAxis="horizontal"==Z.animationAxis?qa:ra,u=Math.max(0,Math.round((dimensionAxis/2-Math.abs(v))/Xh)),D=0,q="horizontal"==Z.animationAxis?qa/10:ra/10);0==u&&u++;0==Z.animationCount%u&&(v<-q?Z.Viewer.viewportPrior(D):
v>q&&Z.Viewer.viewportNext(D));Cb&&0==Math.round(pc*m)/m&&0==Math.round(ec*m)/m&&(Cb=!1)}}else if(Z.mouseIsDown||null!==Cb||0==pc||0==ec)H(!0),Gf=Pe=null;else if(0!=Hc||0!=Ic)Ff=Kd.x+Hc,qe=Kd.y+Ic,Cb=!0}else if(l=parseFloat(ia.left),k=parseFloat(ia.top),Z.mouseIsDown||Cb)m=(Cb?Ff:Kd.x)-Oe.x,v=(Cb?qe:Kd.y)-Oe.y,u=l-pe.x,D=k-pe.y,isNaN(m)||isNaN(v)||isNaN(u)||isNaN(D)||0==m&&0==v&&0==u&&0==D||(q=Cb?Z.smoothPanGlide:1,a=Cb?1:100,pc=Math.round((m-u)/(Z.smoothPanEasing*q)*a/a),ec=Math.round((v-D)/(Z.smoothPanEasing*
q)*a/a),Z.mouseIsDown?(Hc=pc,Ic=ec):(Math.abs(pc)>Math.abs(Hc)&&(pc=Hc),Math.abs(ec)>Math.abs(Ic)&&(ec=Ic)),l+=pc,k+=ec,m=ua(l,k,Z.imageZ,Z.imageR,"container"),ia.left=m.x+"px",ia.top=m.y+"px",pc-=l-m.x,ec-=k-m.y,Ea&&Gb&&M(Ea,Sc,Zb,"simple",!1,"Updating backfill oversize display"),Cb&&0==Math.round(pc*a)/a&&0==Math.round(ec*a)/a&&(Cb=!1),a=n.calculateCurrentCenterCoordinates(m,Z.imageZ,Z.imageR),Z.comparison&&0!=Ta?Z.Navigator2&&Z.Navigator2.z658(a):Z.Navigator&&Z.Navigator.z658(a),Z.Utils.setBookmarksURL(),
Z.Viewer.syncComparisonViewport(),Z.Viewer.syncOverlayViewports(null,b),Z.tracking&&n.syncTrackingToViewport());else if(Z.mouseIsDown||null!==Cb||0==pc||0==ec)H(!0),n.updateView();else if(m=ua(l+Hc,k+Ic,Z.imageZ,Z.imageR,"container"),Hc=m.x-l,Ic=m.y-k,0!=Hc||0!=Ic)Ff=Kd.x+Hc,qe=Kd.y+Ic,Cb=!0}function gk(a){a=Z.Utils.event(a);a.preventDefault();Xg=Math.round(100*a.scale)/100}function hk(a){if(Z.mousePan){a=$a(Da,ad*Xg);var b=pb(a);a!=Z.imageZ&&n.z633(b)}}function Yg(a){if(a=Z.Utils.event(a)){var b;
if(Z.geoCoordinatesVisible){if(b="",Hf&&lg&&th&&mg){var e=n.getClickCoordsInImage(a);b=e;e=ng+b.x*Math.abs(Fj/Z.imageW);b=Od-b.y*Math.abs(Gj/Z.imageH);var f="E",g=1;180<e&&(e-=360);-180>e&&(e+=360);0>e&&(f="W",g=-1);var l=(e-e%1)*g,e=Z.Utils.roundToFixed(e%1*60*g,5),e=l+", "+e+", "+f,f="N",g=1;0>b&&(f="S",g=-1);l=(b-b%1)*g;b=Z.Utils.roundToFixed(b%1*60*g,5);b=geoCoordsString=l+", "+b+", "+f+"    "+e}}else"IIIFImageServer"==Z.tileSource?(e=n.getClickCoordsInImage(a),"mousemove"==a.type?b=n.getViewCoordinatesIIIFString(null,
e,"show"):"mousedown"==a.type&&a.altKey&&(b=n.getViewCoordinatesIIIFString(null,e,"save")+"\n")):(e=Z.Utils.event(a),b=n.getZoom(),f=n.getClickCoordsInImage(e,b),e=Math.round(f.x).toString(),f=Math.round(f.y).toString(),b=(Math.round(1E3*b)/10).toString(),b='X="'+e+'"   Y="'+f+'"   ZOOM="'+b+'"');"mousemove"==a.type?Z.Utils.showCoordinates(b):"mousedown"==a.type&&a.altKey&&Z.Utils.saveCoordinates(b)}}var hd,B,jd,jc,Rg=null,Qi=null,Ri=0,Ta=0;"undefined"!==typeof b&&null!==b&&(Ta=b);var Lc;Lc="undefined"!==
typeof a&&null!==a?a:Z.imagePath;"undefined"===typeof f||null===f?B=hd=Z.hotspotPath:(B=hd=f,".xml"==B.toLowerCase().substring(B.length-4,B.length)&&(B=B.substring(0,B.lastIndexOf("/"))));"undefined"===typeof e||null===e?(jd=Z.annotationPath,jc=Z.annotationFolder):(jc=jd=e,".xml"==jc.toLowerCase().substring(jc.length-4,jc.length)&&(jc=jc.substring(0,jc.lastIndexOf("/"))));"undefined"===typeof g||null===g?(trackingPath=Z.trackingPath,trackingFolder=Z.trackingFolder):(trackingFolder=trackingPath=g,
".xml"==trackingFolder.toLowerCase().substring(trackingFolder.length-4,trackingFolder.length)&&(trackingFolder=trackingFolder.substring(0,trackingFolder.lastIndexOf("/"))));"undefined"===typeof m||null===m?(imageListPath=Z.imageListPath,imageListFolder=Z.imageListFolder):(imageListFolder=imageListPath=m,".xml"==imageListFolder.toLowerCase().substring(imageListFolder.length-4,imageListFolder.length)&&(imageListFolder=imageListFolder.substring(0,imageListFolder.lastIndexOf("/"))));"undefined"!==typeof hd&&
Z.Utils.stringValidate(hd)?(Z.hotspots=!0,Z.annotationPathProvided=!0,Z.imageSet&&(Z.hotspotPath="multiple")):"undefined"!==typeof jd&&Z.Utils.stringValidate(jd)&&(Z.annotations=!0,Z.annotationPathProvided=!0,Z.imageSet&&(Z.annotationPath="multiple"));"undefined"!==typeof trackingPath&&Z.Utils.stringValidate(trackingPath)&&(Z.tracking=!0,Z.trackingPathProvided=!0);"undefined"!==typeof imageListPath&&Z.Utils.stringValidate(imageListPath)&&(Z.imageListPath=imageListPath,Z.imageList=!0);var n=this,Pd=
[],Jf=-1,dh=0,eh=0,cd=parseInt(Z.Utils.getResource("z90"),10),sj=8*cd,gh=4*cd,yh=0,qc=parseInt(Z.Utils.getResource("z221"),10),rc=parseInt(Z.Utils.getResource("z219"),10),Ed=parseFloat(Z.Utils.getResource("z218")),ik=Ed/2,Of=parseInt(Z.Utils.getResource("z220"),10),Hj=1==Z.toolbarVisible?Z.toolbarH:0,ek=parseInt(Z.Utils.getResource("DEFAULT_MOUSECLICKTHRESHOLDVIEWPORT"),10),fk=parseInt(Z.Utils.getResource("DEFAULT_MOUSECLICKTHRESHOLDTIMEVIEWPORT"),10),Ej=parseInt(Z.Utils.getResource("DEFAULT_TOUCHTAPTHRESHOLDVIEWPORT"),
10),Gi=parseInt(Z.Utils.getResource("DEFAULT_TOUCHTAPTHRESHOLDTIMEVIEWPORT"),10),zh,Ea,ud,Yb,Se,Ah,Bh,Uc,Ua,ia,zi,S,va,Fd,Ch,sa,Ka,tb,Ai,kd,Td,Cg,Bi,yb,vd,ge,wa,gb,Eg,Ci,ue,ve,zg,Kb,Vb,Mf,Ag,ob,mc,db,wg,xd,xg,Ue,vg,ld,Te,Dg,Ij,Pg,Ne,Ef,yg,Ab,$b,Wa,Bg,ac,Md,Aa;U(Ta);var Wb,Lb=1,Da=0,sb=0,Gb=!1,Sc=0,Fg=!1,Pa,ad,Ec,ic,Hb=[],lc=[],Ub=[],Na=[],Qa=[],mb=[];tierTileOffsetsCount=[];tierTileOffsetChunks=[];tierTileOffsetLast=[];var ub=[];tierTileByteCountsCount=[];tierTileByteCountChunks=[];tierTileByteCountLast=
[];var lb=[],Zb=[],kc=[],Ma=[],eb=[],zb=0,kb=0,Nb=0,vb=0,ih=0,V=0,Di=0,uh,hh=0,Ye=0,Rf=0,Ud=0,Qf=0,md=0,td=0,kh=0,fe=[],Fa=[],Tc=[],N=[],x=[],sd=[],Ze=null,Hg=0,Tj=parseInt(Z.Utils.getResource("DEFAULT_VALIDATEVIEWRETRYLIMIT"),10),ji=parseInt(Z.Utils.getResource("DEFAULT_VALIDATEVIEWRETRYDELAY"),10),sc=[],ug=[],Tb=[],Fb=[],Ld=[],fc=[],Hh=new Z.NetConnector,Ig,Sd=[],te=[],Rd=[],se=[],qg=parseInt(Z.Utils.getResource("z81"),10),Yh=parseInt(Z.Utils.getResource("z78"),10),Tf=parseInt(Z.Utils.getResource("z80"),
10),ie=parseInt(Z.Utils.getResource("z77"),10),Sc=ie,Uf=parseInt(Z.Utils.getResource("z79"),10),xe=parseInt(Z.Utils.getResource("z76"),10),we=parseInt(Z.Utils.getResource("z75"),10),tg=null,sg=null,rg=null,Zh=parseFloat(Z.Utils.getResource("z173UNCONVERTED"),10),$h=null!==Z.panBuffer?Z.panBuffer:parseFloat(Z.Utils.getResource("z173"),10),fh="unconverted"!=Z.tileSource?$h:Zh,qh=parseFloat(Z.Utils.getResource("z74"),10),Gh=parseFloat(Z.Utils.getResource("DEFAULT_z310SIZEMAXBROWSER"),10),Fh=parseFloat(Z.Utils.getResource("DEFAULT_z310SIZEMAXFIREFOX"),
10),Eh=parseFloat(Z.Utils.getResource("DEFAULT_z310SIZEMAXMOBILE"),10),Dh=parseFloat(Z.Utils.getResource("DEFAULT_z310SIZEMAXIMAGESET"),10),qa,ra,pg,Re,Ya,Za,tc,zc,bc,Mb,Id,Jd,Tg,oe,Dc,Zc;qa=Z.viewerW;ra=Z.viewerH;pg=Re=0;ra-=Hj;0==Z.toolbarPosition&&(Re+=Hj);var La=null,oc,Sb,Df,ee=null,Xg=null,kg=!1,Wh=parseInt(Z.Utils.getResource("z122"),10),Zg=Math.round(parseFloat(Z.Utils.getResource("z176"))*Z.panSpeed),Rc=0,xc=0,Pe=null,Gf=null,si=parseInt(Z.Utils.getResource("DEFAULT_ANIMATIONOPTIMALMOTIONIMAGES"),
10),Xh=parseInt(Z.Utils.getResource("DEFAULT_ANIMATIONOPTIMALPOSITIONDELTA"),10),fd=null,Oe=null,pe=null,Kd=null,pc=0,ec=0,Hc=0,Ic=0,Cb=null,Ff=null,qe=null,re=parseFloat(Z.Utils.getResource("z242"))*Z.zoomSpeed;Z.mobileDevice&&(re/=2);var Gc=0,be=null,Sg=0,zf=parseInt(Z.Utils.getResource("z238"),10),Pf=parseFloat(Z.Utils.getResource("z112"))*Z.fadeInSpeed,Nf=null,ai=parseInt(Z.Utils.getResource("DEFAULT_ROTATIONSTEPDEGREES"),10),sh=parseInt(Z.Utils.getResource("DEFAULT_ROTATIONSTEPDURATION"),10),
Nd=0,de=null,bi=parseFloat(Z.Utils.getResource("z239")),vh=parseFloat(Z.Utils.getResource("z240"));Z.mobileDevice&&(vh/=2);var Af=null,jg=0;if(!Z.fullScreenVisible&&!Z.fullPageVisible)var $g,wh,xh,ci,ah,di,Qe,bh;Z.crosshairsVisible&&Z.Utils.drawCrosshairs(Z.ViewerDisplay,qa,ra);if(Z.measureVisible||null!==Z.editMode){var Mh=Z.Utils.getResource("z431"),ki=Z.Utils.getResource("z431TOTAL"),Nh=Z.Utils.getResource("z433"),li=Z.Utils.getResource("z430"),Fi=Z.Utils.getResource("z434"),Lh=parseFloat(Z.Utils.getResource("DEFAULT_MEASURECAPTIONBACKALPHA"));
parseInt(Z.Utils.getResource("z154"),10);parseInt(Z.Utils.getResource("z156"),10)}if(Z.geoCoordinatesVisible)var th,mg,Hf,lg,ng,Od,Fj,Gj;if(Z.imageFilters)var ti=null,ch=null,ui=null,Gg=!1,Ga=[],Vd=[],qi,pi,ri,Si=0,Ti=0,Ui=0,Vi=0,Wi=0,Xi=0,Yi=0,Zi=0,$i=0,aj=0,bj=0,cj=0,dj=0,ej=0,fj=0,gj=0,hj=0,ij=0,jj=0,kj=0,lj=0,mj=0;if(Z.watermarks)var Sf,tj,Jj=[],Kj=[];if(Z.imageList)var ne,nj,Ni,oj,He=[];if(Z.tour)var Zf,Sh,pj,Oi;null!==Z.imagePath&&(-1!=Z.imagePath.indexOf("zComparisonPath")?(Z.imageSetPath=
Z.imagePath.substring(16,Z.imagePath.length),Z.imageSet=!0,Z.comparison=!0):-1!=Z.imagePath.indexOf("zSlidePath")?(Z.slidePath=Z.imagePath.substring(11,Z.imagePath.length),Z.slideshow=!0):-1!=Z.imagePath.indexOf("zAnimationPath")?(Z.imageSetPath=Z.imagePath.substring(15,Z.imagePath.length),Z.imageSet=!0,Z.animation=!0):-1!=Z.imagePath.indexOf("zSlidestackPath")&&(Z.imageSetPath=Z.imagePath.substring(16,Z.imagePath.length),Z.imageSet=!0,Z.slidestack=!0));if(Z.slideshow){var Qc=[],vi=[],yf,gd,Uh,qj,
rj,gi,Pi,Lj=parseFloat(Z.Utils.getResource("z211"))*Z.slideTransitionSpeed;Z.slideTransitionTimeout=null;Z.slideOpacity=0}if(Z.zoomRectangle||Z.measureVisible||Z.tour||Z.hotspots||Z.annotations||Z.tracking){var tf=null,Oh=!1,A=[],Ac=[],Xc=[],Ih=[],Jh=[],X=null,K=null,da=null,Qh=null,oh=null,Rh=null,Mj=0,ph=null,eg=null,ei=null,Wj=parseInt(Z.Utils.getResource("DEFAULT_MOUSECLICKTHRESHOLDHOTSPOT"),10),Ia,Th=null,mi=!1,Qb=!0,qb=null,ig=!1,uj=new Z.NetConnector,Xj=Z.Utils.getResource("DEFAULT_ICONLINEWIDTH"),
Cj=Z.Utils.getResource("z177"),Yj=parseFloat(Z.Utils.getResource("DEFAULT_POLYGONALPHA")),Vf=parseInt(Z.Utils.getResource("z180"),10),Zj=Z.Utils.getResource("z96"),Hi=Z.Utils.getResource("z98"),ak=Z.Utils.getResource("z113"),bk=Z.Utils.getResource("z216"),ni=parseInt(Z.Utils.getResource("z97"),10),Bj=Z.Utils.getResource("z177FREEHAND"),Ae=Z.captionTextColor?Z.Utils.stringValidateColorValue(Z.captionTextColor):Z.Utils.getResource("z89"),Ei=Z.captionBackColor?Z.Utils.stringValidateColorValue(Z.captionBackColor):
Z.Utils.getResource("DEFAULT_CAPTIONBACKCOLOR"),Uj=parseInt(Z.Utils.getResource("z129"),10),xj=parseInt(Z.Utils.getResource("z160"),10),yj=parseInt(Z.Utils.getResource("z151"),10),Vj=parseInt(Z.Utils.getResource("z130"),10),zj=parseInt(Z.Utils.getResource("z161"),10),Aj=parseInt(Z.Utils.getResource("z152"),10);Z.mobileDevice&&(ni*=2);if(Z.maskVisible){var pf=[],Nj=parseFloat(Z.Utils.getResource("DEFAULT_MASKFADESTEP"))*Z.maskFadeSpeed;Z.setCallback("viewUpdateComplete",function(){Z.maskingSelection&&
setMask()})}if(Z.tour||Z.hotspots)var Oa,wi,hi,xi,mh,nh,$c=[],vj=parseFloat(Z.Utils.getResource("DEFAULT_LABELICONWIDTH")),wj=parseFloat(Z.Utils.getResource("DEFAULT_LABELICONHEIGHT")),xa=[],wb=[];else if(Z.zoomRectangle||Z.measureVisible||Z.annotations||Z.tracking){var Jc,ii,Oj,la,hb,ab,Yf,We,bd,Xe,he,Pj,Qj,Rj,Sj,Kh,Ha=[],cb=[],wc=[],xa=[],wb=[],Ph=[];labelCaptionPositionListDP=[];labelTargetListDP=[];var Ki=[],Ii=[],Ji=[],oi=[],Li=[],vc=!1,ce=0,Ug=null,yi=parseFloat(Z.Utils.getResource("z147")),
Dj=parseInt(Z.Utils.getResource("z148"),10),vj=parseFloat(Z.Utils.getResource("DEFAULT_LABELICONWIDTH")),wj=parseFloat(Z.Utils.getResource("DEFAULT_LABELICONHEIGHT"));Z.mobileDevice&&(yi/=2);if(Z.tracking)var Qg,Mi,rd=[],qd=[],yc=[],xf=[],hc}}if(null!==Z.imagePath&&"null"!=Z.imagePath){if(1==Z.localUse&&"ZoomifyImageFile"==Z.tileSource){Z.Utils.showMessage(Z.Utils.getResource("z290"),!1,Z.messageDurationShort,"center");return}if(1==Z.localUse&&"ZoomifyPFFFile"==Z.tileSource){Z.Utils.showMessage(Z.Utils.getResource("z289"),
!1,Z.messageDurationStort,"center");return}1==Z.localUse&&(Z.browser==Z.browsers.CHROME||Z.browser==Z.browsers.OPERA||Z.browser==Z.browsers.IE&&11==Z.browserVersion||Z.browser==Z.browsers.SAFARI&&7<=Z.browserVersion)&&Z.Utils.showMessage(Z.Utils.getResource("z288"),!1,Z.messageDurationStandard,"center");if(null!==Z.imageW&&null!==Z.imageH&&null!==Z.sourceMagnification)"undefined"!==typeof n.getStatus?q(Z.imageW,Z.imageH,qc,rc,null,null,null,null,Z.sourceMagnification,Z.focal,Z.quality):window.setTimeout(function(){q(Z.imageW,
Z.imageH,qc,rc,null,null,null,null,Z.sourceMagnification,Z.focal,Z.quality)},100);else if(null!==Z.imageProperties){var jk=Z.Utils.xmlConvertTextToDoc(Z.imageProperties);J(jk)}else if("unconverted"==Z.tileSource)ea(Lc);else if(-1==Z.imagePath.indexOf("zComparisonPath")&&-1==Z.imagePath.indexOf("zSlidePath")&&-1==Z.imagePath.indexOf("zOverlayPath")&&-1==Z.imagePath.indexOf("zAnimationPath")&&-1==Z.imagePath.indexOf("zSlidestackPath")){var fi=new Z.NetConnector;ca(Lc,fi,Ta)}}Z.imageList&&(fi=new Z.NetConnector,
k(fi));Z.slideshow&&(fi=new Z.NetConnector,t(fi));this.clearAll=function(a,b,e,f){a&&w();b&&R();e&&(yb&&("undefined"!==typeof Jj&&Z.Utils.arrayClear(Jj),"undefined"!==typeof Kj&&Z.Utils.arrayClear(Kj)),wa&&("undefined"!==typeof A&&Z.Utils.arrayClear(A),"undefined"!==typeof Ac&&Z.Utils.arrayClear(Ac),"undefined"!==typeof Xc&&Z.Utils.arrayClear(Xc),null!=Oa?(Oa.parentNode.removeChild(Oa),Oa=null,"undefined"!==typeof $c&&Z.Utils.arrayClear($c)):(null!=la&&(la.parentNode.removeChild(la),la=null,"undefined"!==
typeof Ha&&Z.Utils.arrayClear(Ha)),null!=ab&&(ab.parentNode.removeChild(ab),ab=null,"undefined"!==typeof xa&&Z.Utils.arrayClear(xa),"undefined"!==typeof wb&&Z.Utils.arrayClear(wb)),null!=hb&&(hb.parentNode.removeChild(hb),hb=null,"undefined"!==typeof cb&&Z.Utils.arrayClear(cb),"undefined"!==typeof wc&&Z.Utils.arrayClear(wc)))),Z.imageFilters&&(ui=ch=ti=null,Gg=!1,"undefined"!==typeof Ga&&Z.Utils.arrayClear(Ga),"undefined"!==typeof Vd&&Z.Utils.arrayClear(Vd),ri=pi=qi=null,mj=lj=kj=jj=ij=hj=gj=fj=ej=
dj=cj=bj=aj=$i=Zi=Yi=Xi=Wi=Vi=Ui=Ti=Si=0));f&&(Ea&&Z.Utils.clearDisplay(Ea),S&&Z.Utils.clearDisplay(S),sa&&Z.Utils.clearDisplay(sa),kd&&Z.Utils.clearDisplay(kd),yb&&Z.Utils.clearDisplay(yb),Ab&&Z.Utils.clearDisplay(Ab),wa&&(Z.Utils.clearDisplay(wa),wa=null),ue&&(n.clearAnnotationPanel(Ta),n.setStatus("annotationPanelInitializedViewport",!1),ue=null),Kb&&Z.Utils.clearDisplay(Kb),ob&&Z.Utils.clearDisplay(ob),xd&&Z.Utils.clearDisplay(xd),ld&&Z.Utils.clearDisplay(ld))};this.setSizeAndPosition=function(a,
b,e,f){ka(a,b,e,f)};this.syncViewportResize=function(a,b,e,f){n.setSizeAndPosition(Z.viewerW,Z.viewerH,0,0);n.resizeViewport(a,b,e,f)};this.resizeViewport=function(a,b,e,f){n.validateXYZDefaults();n.setView(a,b,e,f)};this.loadImageProperties=function(a,b,e){ca(a,b,e)};this.parseZIFHeader=function(a){R();if(73==a[0]&&73==a[1]&&43==a[2]&&0==a[3]&&8==a[4]&&0==a[5]&&0==a[6]&&0==a[7]&&16==a[8]&&0==a[9]&&0==a[10]&&0==a[11]&&0==a[12]&&0==a[13]&&0==a[14]&&0==a[15]){for(var b=Z.Utils.longValue(a,8),e=Z.Utils.longValue(a,
b),f=1,g=null,l=null,k=null,m=null,p=null,v=null,v=2;0!=b;){for(g=0;g<e;g++)switch(l=b+8+20*g,Z.Utils.shortValue(a,l)){case 256:Hb[f-1]=Z.Utils.intValue(a,l+12);break;case 257:lc[f-1]=Z.Utils.intValue(a,l+12);break;case 322:k=Z.Utils.intValue(a,l+12);break;case 323:m=Z.Utils.intValue(a,l+12);break;case 324:var u=tierTileOffsetsCount[f-1]=Z.Utils.longValue(a,l+4);mb[f-1]=Z.Utils.longValue(a,l+12);p+=u;break;case 325:u=tierTileByteCountsCount[f-1]=Z.Utils.longValue(a,l+4),ub[f-1]=1==u?Z.Utils.intValue(a,
l+12):2==u?Z.Utils.intValue(a,l+12)+","+Z.Utils.intValue(a,l+16):Z.Utils.longValue(a,l+12)}b=Z.Utils.longValue(a,b+20*e+8);e=Z.Utils.longValue(a,b);f++}g=Hb[0];l=lc[0];Lb=f-1;Hb.reverse();lc.reverse();tierTileOffsetsCount.reverse();mb.reverse();tierTileByteCountsCount.reverse();ub.reverse();!isNaN(g)&&0<g&&!isNaN(l)&&0<l&&!isNaN(k)&&0<k&&!isNaN(m)&&0<m&&0<p?n.getStatus("initializedViewport")?G(g,l,k,m,p,v,null,null,null,null,null):q(g,l,k,m,p,v,null,null,null,null,null):"ZoomifyImageFolder"==Z.tileSource?
Z.Utils.showMessage(Z.Utils.getResource("z252"),!1,Z.messageDurationStandard,"center"):Z.Utils.showMessage(Z.Utils.getResource("z250"),!1,Z.messageDurationStandard,"center")}};this.parseZIFOffsetChunk=function(a,b){var e=Z.Utils.arrayIndexOfObjectValue(tierTileOffsetChunks,"chunkID",b);-1!=e&&(tierTileOffsetChunks[e].chunk=a,L(b,"offset"))};this.parseZIFByteCountChunk=function(a,b){var e=Z.Utils.arrayIndexOfObjectValue(tierTileByteCountChunks,"chunkID",b);-1!=e&&(tierTileByteCountChunks[e].chunk=
a,L(b,"byteCount"))};this.parseZIFImage=function(a,b,e){a="data:image/jpeg;base64,"+Z.Utils.encodeBase64(a);var f;"image-display"==e?f=n.getStatus("imageSaving")?gc:ib:"image-backfill"==e?f=n.getStatus("imageSaving")?cc:Q:"navigator"==e?f=Z.Navigator.z556:"gallery"==e&&(f=Z.Gallery.initializeGallery);b=Z.Utils.createCallback(null,f,b);Z.Utils.createImageElementFromBytes(a,b)};this.z602=function(a,b){J(a,b)};this.validateXYZDefaults=function(a){a&&Z.Utils.resetParametersXYZ(Z.parameters);var b=parseFloat(Z.Utils.getResource("z143")),
e=parseFloat(Z.Utils.getResource("z144")),f=parseFloat(Z.Utils.getResource("z145")),g=parseFloat(Z.Utils.getResource("DEFAULT_INITIALR")),l=parseFloat(Z.Utils.getResource("z163"));a=parseFloat(Z.Utils.getResource("z153"));b=isNaN(b)?null:b;e=isNaN(e)?null:e;f=isNaN(f)?null:f;g=isNaN(g)?null:g;l=isNaN(l)?null:l;a=isNaN(a)?null:a;Z.bookmarksGet?(Z.initialX||(Z.initialX=b),Z.initialY||(Z.initialY=e),Z.initialZ||(Z.initialZ=f),Z.initialR||(Z.initialR=g),Z.minZ||(Z.minZ=l),Z.maxZ||(Z.maxZ=a)):"IIIFImageServer"==
Z.tileSource?Z.iiifRegion&&(a=Z.iiifRegion.split(","),b=Z.iiifSize.split(","),Z.initialX=Math.round(parseFloat(a[0])+parseFloat(a[2])/2),Z.initialY=Math.round(parseFloat(a[1])+parseFloat(a[3])/2),Z.initialZ=Math.round(parseFloat(b[0])/parseFloat(a[2])*100)/100,Z.initialR=parseInt(Z.iiifRotation,10)):Z.parameters?(Z.parameters.zInitialX||(Z.initialX=b),Z.parameters.zInitialY||(Z.initialY=e),Z.parameters.zInitialZoom||(Z.initialZ=f),Z.parameters.zInitialRotation||(Z.initialR=g),Z.parameters.zMinZoom||
(Z.minZ=l),Z.parameters.zMaxZoom||(Z.maxZ=a)):(Z.initialX=b,Z.initialY=e,Z.initialZ=f,Z.initialR=g,Z.minZ=l,Z.maxZ=a);null===Z.initialX&&(Z.initialX=Z.imageW/2);null===Z.initialY&&(Z.initialY=Z.imageH/2);Z.fitZ=n.z468(null,null,0);Z.fillZ=n.calculateZoomToFill(null,null,0);b=n.getStatus("initializedViewport")?n.getRotation():Z.initialR;a=n.z468(null,null,b);b=n.calculateZoomToFill(null,null,b);1<Z.fitZ&&(null!==Z.maxZ?Z.fitZ>Z.maxZ&&(Z.fitZ=Z.maxZ):"unconverted"==Z.tileSource&&(Z.fitZ=1));1<Z.fillZ&&
(null!==Z.maxZ?Z.fillZ>Z.maxZ&&(Z.fillZ=Z.maxZ):"unconverted"==Z.tileSource&&(Z.fillZ=1));null===Z.minZ||-1==Z.minZ?Z.minZ=Z.fitZ:0==Z.minZ&&(Z.minZ=Z.fillZ);if(null===Z.maxZ||-1==Z.maxZ)Z.maxZ=1;null===Z.initialZ||-1==Z.initialZ?Z.initialZ=a:0==Z.initialZ&&(Z.initialZ=b);Z.initialZ<Z.minZ&&(Z.initialZ=Z.minZ);Z.initialZ>Z.maxZ&&(Z.initialZ=Z.maxZ)};this.getViewW=function(){return qa};this.getViewH=function(){return ra};this.getDisplayW=function(){return Ya};this.getDisplayH=function(){return Za};
this.getImagePath=function(){return Lc};this.setImagePath=function(a){Lc=a};this.getViewportID=function(){return Ta};this.getTierCount=function(){return Lb};this.getTileW=function(){return qc};this.getTileH=function(){return rc};this.getTierCurrent=function(){return Da};this.getTierBackfill=function(){return sb};this.getTierBackfillDynamic=function(){return Gb};this.getTierBackfillOversize=function(){return Sc};this.getTierScale=function(){return Pa};this.getX=function(a){var b=parseFloat(ia.left)-
bc;a=n.getZoom(a);return Rg-b/a};this.getY=function(a){var b=parseFloat(ia.top)-Mb;a=n.getZoom(a);return Qi-b/a};this.getZoom=function(a){var b=Pa;a&&(b=Pa*parseFloat(Ka.width)/Ya);return $a(Da,b)};this.getRotation=function(a){return Z.imageR};this.getCoordinates=function(){new Z.Utils.Point(n.getX(),n.getY())};this.getCoordinatesBookmark=function(a,b){var e="";return e=b?"?"+n.getViewCoordinatesIIIFString(a,null,"bookmark"):"?"+n.getViewCoordinatesString(a)};this.getViewCoordinatesString=function(a){var b=
"x="+Math.round(n.getX(a)).toString(),e="&y="+Math.round(n.getY(a)).toString(),f="&z="+Math.round(100*n.getZoom(a)).toString();a=Math.round(n.getRotation(a));return b+e+f+(0==a?"":"&r="+a.toString())};this.getCoordinatesFull=function(a){return new Z.Utils.Coordinates(n.getX(a),n.getY(a),n.getZoom(a),n.getRotation(a))};this.getCoordinatesDisplayFull=function(){return new Z.Utils.CoordinatesDisplayStyle(ia.left,ia.top,Ka.width,Ka.height,Ka.left,Ka.top,va.width,va.height,va.left,va.top,ia.rotation)};
this.getTiersScaleUpMax=function(){return Ed};this.getTiersScaleDownMax=function(){return ik};this.getTilesCacheMax=function(){return Of};this.getTierWs=function(){return Hb.join(",")};this.getTierHs=function(){return lc.join(", ")};this.getTierTileCounts=function(){return Qa.join(", ")};this.getTilesToLoad=function(){return zb};this.getTilesLoadingNames=function(){return""==Fa.join(", ")?"Current view loading complete":Fa.join(", ")};this.getTilesToDraw=function(){return md};this.getConstrainPan=
function(a){return Z.constrainPan};this.setConstrainPan=function(a){Z.constrainPan="0"!=a;Z.constrainPanLimit=parseInt(a,10);Z.constrainPanStrict="3"==a;Z.constrainPan&&n.toggleConstrainPan(!0)};this.getSmoothPan=function(){return Z.smoothPan};this.setSmoothPan=function(a){Z.smoothPan=a};this.getSmoothPanEasing=function(){return Z.smoothPanEasing};this.setSmoothPanEasing=function(a){Z.smoothPanEasing=a};this.getSmoothPanGlide=function(){return Z.smoothPanGlide};this.setSmoothPanGlide=function(a){Z.smoothPanGlide=
a};this.getSmoothZoom=function(){return Z.smoothZoom};this.setSmoothZoom=function(a){Z.smoothZoom=a};this.getSmoothZoomEasing=function(){return Z.smoothZoomEasing};this.setSmoothZoomEasing=function(a){Z.smoothZoomEasing=a};this.setCoordinatesDisplayVisibility=function(a){a?(Z.Utils.addEventListener(document,"mousemove",Yg),Z.Utils.addEventListener(document,"mousedown",Yg)):(Z.coordinatesVisible=!1,Z.Utils.removeEventListener(document,"mousemove",Yg),Z.Utils.removeEventListener(document,"mousedown",
Yg))};this.setTourPath=function(a,b){n.setHotspotPath(a,b)};this.setHotspotPath=function(a,b){"undefined"===typeof a||Z.Utils.stringValidate(a)?(Z.hotspotPath=Z.Utils.stringRemoveTrailingSlashCharacters(a),Z.hotspotFolder=Z.hotspotPath,".xml"==Z.hotspotPath.toLowerCase().substring(Z.hotspotPath.length-4,Z.hotspotPath.length)&&(Z.hotspotFolder=Z.hotspotFolder.substring(0,Z.hotspotFolder.lastIndexOf("/"))),b||(n.deleteAllHotspots(),Kf(Ta))):(Z.hotspotPath=null,Z.hotspotFolder=null,n.deleteAllHotspots())};
this.getHotspotCurrentID=function(){return K};this.getHotspotCurrentIDExternal=function(){var a=n.getHotspotCurrentID();return currIDExt=A[a].id};this.getHotspots=function(){return A};this.setHotspots=function(a){A=a.slice(0)};this.setAnnotationPath=function(a,b){if("undefined"!==typeof a&&Z.Utils.stringValidate(a)){Z.annotationPath=Z.Utils.stringRemoveTrailingSlashCharacters(a);Z.annotationFolder=Z.annotationPath;var e=Z.annotationPath.toLowerCase();".json"!=e.substring(Z.annotationPath.length-5,
Z.annotationPath.length)&&".xml"!=e.substring(Z.annotationPath.length-4,Z.annotationPath.length)&&(Z.annotationPath=Z.annotationPath+"/"+Z.Utils.getResource("z69"));".xml"==e.substring(Z.annotationPath.length-4,Z.annotationPath.length)&&(Z.annotationFolder=Z.annotationFolder.substring(0,Z.annotationFolder.lastIndexOf("/")));Z.annotations=!0;b||(n.deleteAllAnnotations(),Kf(Ta))}else Z.annotationPath=null,Z.annotationFolder=null,n.deleteAllAnnotations(),Z.annotations=!1};this.getAnnotationsXML=function(){return Jc=
me(Jc)};this.setAnnotationsXML=function(a){Jc=a};this.testSetAnnotationPath=function(){n.setAnnotationPath("Assets/Annotations/annotations2.xml")};this.setXMLCallbackFunction=function(a){Z.xmlCallbackFunction=a};this.setLabelsClickDrag=function(a){Z.labelsClickDrag=a};this.setVisibility=function(a){a=a?"inline-block":"none";zh&&!ud&&(ud=zh.style);ud&&(ud.display=a);Uc&&!ia&&(ia=Uc.style);ia&&(ia.display=a)};this.setOpacity=function(a){Z.Utils.setOpacity(Uc,2<=a?a/100:0>a?0:1<a?1:a)};this.showLists=
function(a){var b=a?"visible":"hidden";ne&&(n.setImageListVisibilty(b),Z.comparison&&Z.Viewport1.setImageListVisibilty(b));Z.hotspots&&Z.Viewer.setVisibilityHotspotChoiceList(a,Ta.toString());gd&&(gd.style.visibility=b);Z.imageSet&&!Z.comparison&&Z.Viewer.setVisibilityImageSetChoiceList(a)};this.z619=function(a){a||(I(we,kc),tg=!0);(!Z.imageSet||Z.comparison||b==Z.imageSetStart||a)&&Lb>Uf&&(I(xe,kc),sg=!0,Lb>Tf&&(I(ie,kc),rg=!0),n.setStatus("backfillPrecachedViewport",!0));kc.sort();kc=Z.Utils.arrayUnique(kc);
lb=kc.slice(0);n.traceDebugValues("tilesBackfillToPrecache",null,lb.length);bb(kc,Q,"simple","image-backfill")};this.prez581s=function(a){if(Z.imageSet)Z.Utils.showMessage(Z.Utils.getResource("ALERT_PRELOADINGIMAGESET-LOADINGTILES"),!1,Z.messageDurationLong,"center"),n.updateView(!0,!0);else{Z.Utils.showMessage(Z.Utils.getResource("ALERT_PRELOADINGONEIMAGE-LOADINGTILES"),!1,Z.messageDurationLong,"center");Z.Utils.arrayClear(Fa);a=0;for(var b=Lb;a<b;a++)for(var e=n.z542(a,null,!0,!0),f=e.l,g=e.r;f<=
g;f++)for(var l=e.t,k=e.b;l<=k;l++){var m=a+"-"+f+"-"+l;Fa[Fa.length]=m}if(0<Fa.length)for(e=(new Date).getTime(),a=0,b=Fa.length;a<b;a++)if(m=Fa[a])m=new T(m,"image-display"),ta(m,e,ib)}};this.updateView=function(a,e){if("undefined"===typeof b||null===b)b=0;if(b!=Z.viewportCurrentID&&!a){var f=Z["Viewport"+b.toString()];Z.imageX=f.getX(!0);Z.imageY=f.getY(!0);Z.imageZ=f.getZoom(!0);Z.imageR=f.getRotation(!0)}var g=Z.mouseIsDown||Z.buttonIsDown||Z.keyIsDown||Z.mouseWheelIsDown,f=Pa!=ad||n.getZoom()!=
Z.imageZ||Z.imageZ!=Z.priorZ,k=parseFloat(ia.left)!=bc||parseFloat(ia.top)!=Mb||n.getX()!=Z.imageX||n.getY()!=Z.imageY,l=Z.fullViewPrior;if(f||k||l||"undefined"!==typeof a&&a&&(!g||Z.animation)||"undefined"!==typeof e&&e){za();if(Z.comparison||Z.overlays||!Z.imageSet||!Z.Viewer.getStatus("readyViewer")||b>Z.viewportCurrentID-1&&b<Z.viewportCurrentID+1||e){var m=!1;if(a||parseFloat(Ka.width)!=sa.width){if(Z.useCanvas){Ka.width=sa.width+"px";Ka.height=sa.height+"px";Ka.left="0px";Ka.top="0px";tb.restore();
tb.save();try{tb.scale(Pa,Pa)}catch(p){Z.Utils.showMessage(Z.Utils.getResource("ERROR_SCALINGCANVASFORUNCONVERTEDIMAGE")),console.log("In function z630 scaling canvas:  "+p)}Ab&&($b.width=sa.width+"px",$b.height=sa.height+"px",$b.left="0px",$b.top="0px");Kb&&(Vb.width=Kb.width+"px",Vb.height=Kb.height+"px",Vb.left="0px",Vb.top="0px");ob&&(mc.width=ob.width+"px",mc.height=ob.height+"px",mc.left="0px",mc.top="0px");S&&(Gb?(va.width=S.width+"px",va.height=S.height+"px",va.left=Dc+"px",va.top=Zc+"px",
Fd.restore(),Fd.save(),Fd.scale(Ec,Ec)):(va.width=Id+"px",va.height=Jd+"px",va.left=Dc+"px",va.top=Zc+"px"))}m=!0}if(a||parseFloat(ia.left)!=bc||parseFloat(ia.top)!=Mb)m=parseFloat(ia.left)-bc,g=parseFloat(ia.top)-Mb,0!=Z.imageR&&(g=Z.Utils.rotatePoint(m,g,Z.imageR),m=g.x,g=g.y),ia.left=bc+"px",ia.top=Mb+"px",Gb||(Dc=parseFloat(va.left)+m,Zc=parseFloat(va.top)+g,va.left=Dc+"px",va.top=Zc+"px"),l=n.getZoom(),Z.imageX=Rg=Z.imageX-m/l,Z.imageY=Qi=Z.imageY-g/l,m=!0;m&&(M(sa,Da,Tc,"centerOut",!1,"1a. Updating view: resetting display positions"),
Z.maskingSelection&&Ab&&mf(),Gb&&M(S,sb,Zb,"simple",!1,"1b. Updating view: resetting backfill positions"));m=!1;if("undefined"!==typeof a&&a||Pa!=ad||n.getZoom()!=Z.imageZ||!n.getStatus("initializedViewport")||e){Pa!=ad&&(Z.imageZ=n.getZoom());Z.imageZ<Z.minZ&&(Z.imageZ=Z.minZ);Z.imageZ>Z.maxZ&&(Z.imageZ=Z.maxZ);l=Ed;for(g=Lb;0<g&&l/2>=Z.imageZ;)g--,l/=2;g=0>g-1?0:g-1;l=Ra(g,Z.imageZ);if(g!=Da||l!=Pa)Z.useCanvas&&(tb.restore(),tb.save(),tb.scale(l,l)),Da!=g&&(Fg=!0),Da=g,Pa=l;ad=Pa;if("unconverted"!=
Z.tileSource){Gb=!1;Da>qg?(sb=Da-Yh,Gb=!0):sb=Da>Tf?ie:Da>Uf?xe:we;tierBackfillScalePrior=Ec=Ra(sb,Z.imageZ);var g=Hb[sb],l=lc[sb],v=Z.imageX*Z.imageZ,u=Z.imageY*Z.imageZ;Gb?(g=qh,Id=Ya*g,Jd=Za*g,Dc=-(Ya/g),Zc=-(Za/g),Tg=tc*g,oe=zc*g,S.width=Id,S.height=Jd,va.width=S.width+"px",va.height=S.height+"px",va.left=Dc+"px",va.top=Zc+"px",Z.useCanvas&&(Ea&&(ic=Ra(Sc,Z.imageZ),Yb.restore(),Yb.save(),Yb.scale(ic,ic),0!=Z.imageR&&Yb.rotate(Z.imageR*Math.PI/180)),Fd.restore(),Fd.translate(Tg,oe),Fd.save(),Fd.scale(Ec,
Ec))):(Id=g*Ec,Jd=l*Ec,Dc=tc-v,Zc=zc-u,S.width=g,S.height=l,Z.useCanvas&&(va.width=Id+"px",va.height=Jd+"px"),va.left=Dc+"px",va.top=Zc+"px");Wg("backfill");M(S,sb,Zb,"simple",!1,"2. Updating view: changing tier - backfill")}!a&&0<Of&&(m=!0)}else n.traceDebugValues("updateView-noChange");"unconverted"!=Z.tileSource&&Gb?W(!0):Ea&&Z.Utils.clearDisplay(Ea)}b==Z.viewportCurrentID||Z.comparison||Z.overlays||!Z.imageSet||e?("unconverted"!=Z.tileSource?(W(),Wg("frontfill"),M(sa,Da,null,"centerOut",m,"3. Updating view: prior to loading of any new tiles")):
"undefined"!==typeof Wb&&(m=-Z.imageX,g=-Z.imageY,Z.Utils.clearDisplay(sa),tb.drawImage(Wb,m,g),n.setStatus("displayLoadedViewport",!0),n.setStatus("displayDrawnViewport",!0),Z.Utils.validateCallback("viewUpdateComplete"),Z.Utils.validateCallback("viewUpdateCompleteGetLabelIDs")),Z.maskingSelection&&setMask(),0<Fa.length?bb(Fa,ib,"centerOut","image-display"):Z.imageFilters&&n.cacheCanvasImage(),n.syncViewportRelated(!0,!0,!0,!0,!0,!0,Z.comparison&&b==Z.viewportCurrentID,Z.overlays&&b==Z.viewportCurrentID,
Z.bookmarksSet,Z.tracking)):(n.setStatus("displayLoadedViewport",!0),n.setStatus("displayDrawnViewport",!0));e&&(m=(n.getViewportID()+1).toString()+" of "+Z.imageSetLength.toString(),Z.Utils.showMessage(Z.Utils.getResource("ALERT_PRELOADINGIMAGESET-UPDATINGVIEW")+"  "+m,!1,Z.messageDurationLong,"center"));k&&Z.Utils.validateCallback("viewPanned");f&&Z.Utils.validateCallback("viewZoomed");(k||f)&&Z.Utils.validateCallback("viewChanged")}};syncTransitionCanvas=function(){kd&&Td&&Cg&&(kd.width=sa.width,
kd.height=sa.height,Td.width=Ka.width,Td.height=Ka.height,Td.left=Ka.left,Td.top=Ka.top,Cg.restore(),Cg.save(),Cg.translate(tc,zc),Cg.scale(Pa,Pa))};this.loadUnconvertedImage=function(a){ea(a)};this.getUnconvertedImage=function(){return Wb};this.createUnconvertedImageThumbnail=function(){if(Z.useCanvas){if("undefined"!==typeof Wb){var a=null,a=150/Z.imageW,b=Z.Utils.createContainerElement("canvas","tempCanvas","inline-block","absolute","visible",Z.imageW*a+"px",Z.imageH*a+"px","0px","0px","none",
"0px","transparent none","0px","0px","normal"),e=b.getContext("2d");try{e.scale(a,a),e.drawImage(Wb,0,0)}catch(f){console.log("In function initializeViewportContinue scaling canvas:  "+f)}a=new Image;a.src=b.toDataURL("image/jpeg",Z.saveImageCompression);return a}window.setTimeout(function(){createUnconvertedImageThumbnail()},100)}};this.formatTilePath=function(a,b,e,f){var g;if("ZoomifyImageFile"==Z.tileSource){var l="offsetLoading",k=g="loading",m;if(1==tierTileOffsetsCount[a])g=mb[a];else{var p=
new Y(a,b,e),v=p.chunkID+","+a+","+b+","+e+","+f+",offset";m=Z.Utils.arrayIndexOfObjectValue(tierTileOffsetChunks,"chunkID",p.chunkID);-1==m?(n.traceDebugValues("z532",p.chunkID+","+a+","+b+","+e+","+f),-1==Z.Utils.arrayIndexOf(Fb,v)&&(Fb[Fb.length]=v),tierTileOffsetChunks[tierTileOffsetChunks.length]={chunkID:p.chunkID,chunk:"loading"},m=new Z.NetConnector,m.loadByteRange(Lc,p.chunkStart,p.chunkEnd,"offset",null,p.chunkID)):"loading"==tierTileOffsetChunks[m].chunk?-1==Z.Utils.arrayIndexOf(Fb,v)&&
(Fb[Fb.length]=v):"loading"!=tierTileOffsetChunks[m].chunk&&(m=tierTileOffsetChunks[m].chunk,g=Z.Utils.longValue(m,p.offsetStartInChunk))}1==tierTileByteCountsCount[a]?k=ub[a]:(m=b+e*Ub[a],2==tierTileByteCountsCount[a]?(e=ub[a],k=0==m?e.substring(0,e.indexOf(",")):e.substring(e.indexOf(",")+1,e.length)):(p=new fa(a,b,e),e=p.chunkID+","+a+","+b+","+e+","+f+",byteCount",m=Z.Utils.arrayIndexOfObjectValue(tierTileByteCountChunks,"chunkID",p.chunkID),-1==m?(-1==Z.Utils.arrayIndexOf(Fb,e)&&(Fb[Fb.length]=
e),tierTileByteCountChunks[tierTileByteCountChunks.length]={chunkID:p.chunkID,chunk:"loading"},m=new Z.NetConnector,m.loadByteRange(Lc,p.chunkStart,p.chunkEnd,"byteCount",null,p.chunkID)):"loading"==tierTileByteCountChunks[m].chunk?-1==Z.Utils.arrayIndexOf(Fb,e)&&(Fb[Fb.length]=e):"loading"!=tierTileByteCountChunks[m].chunk&&(m=tierTileByteCountChunks[m].chunk,k=Z.Utils.intValue(m,p.bcStartInChunk))));"loading"==g||isNaN(g)||"loading"==k||isNaN(k)||(l=Lc+"?"+g.toString()+","+k.toString());g=l}else if("ZoomifyImageFolder"==
Z.tileSource){f=e*Ub[a]+b;for(l=0;l<a;l++)f+=Qa[l];e=Lc+"/TileGroup"+Math.floor(f/256)+"/"+a+"-"+b+"-"+e+"."+Z.tileType;if(Z.browser==Z.browsers.IE&&9>Z.browserVersion||0==Of)e=Z.Utils.cacheProofPath(e);g=e}else if("ZoomifyPFFFile"==Z.tileSource){k="offsetLoading";p=l=0;for(g=Lb-1;g>a;g--)l+=Qa[g];l+=e*Ub[a]+b;g=Math.floor(l/cd);p=-1==l-1?0:l-1;m=Math.floor(p/cd);void 0==sc[g]||"offsetLoading"==sc[g]||void 0==sc[m]||"offsetLoading"==sc[m]?(l=g+","+a+","+b+","+e+","+f,-1==Z.Utils.arrayIndexOf(Fb,l)&&
(Fb[Fb.length]=l),n.traceDebugValues("z531",g+","+a+","+b+","+e+","+f),void 0==sc[g]&&(sc[g]="offsetLoading",e=eh+cd*g*8,b=e+8*cd,pa(e,b,g)),void 0==sc[m]&&(sc[m]="offsetLoading",e=eh+cd*m*8,b=e+8*cd,pa(e,b,g))):(f=Math.floor(sc[g][0]),k=Math.floor(sc[m][0]),m=sc[m][1],g=sc[g][1],p=p%cd*9,m=Math.floor(parseFloat(m.substring(p,p+9))),p=l%cd*9,g=Math.floor(parseFloat(g.substring(p,p+9))),l=0==l?eh+8*yh:k+m,f+=g,k=0<f-l?Z.tileHandlerPathFull+"?file="+Lc+"&requestType=0&begin="+l.toString()+"&end="+f.toString()+
"&vers="+Jf.toString()+"&head="+dh.toString():"z647:"+a+"-"+b+"-"+e);g=k}else"IIIFImageServer"==Z.tileSource?(m=qc,k=rc,p=Hb[a]/Z.imageW,a=Math.round(m/p*b).toString(),f=Math.round(k/p*e).toString(),l=Math.round(m/p).toString(),g=Math.round(k/p).toString(),b=Math.min(Math.round(Z.imageW*p-m*b),qc).toString(),e=Math.min(Math.round(Z.imageH*p-k*e),rc).toString(),k=n.getIIIFQuality(),m=n.getIIIFFormat(),g=Z.imagePath+"/"+a+","+f+","+l+","+g+"/"+b+","+e+"/0/"+k+m):"ImageServer"==Z.tileSource&&(e=-1!=
Z.imagePath.toLowerCase().indexOf(".svs")?"svs":-1!=Z.imagePath.toLowerCase().indexOf(".ndpi")?"ndpi":null,b=100*Z.imageZ,40==Z.sourceMagnification?l=b<=2.5+Ed?32:b<=5+Ed?16:b<=10+Ed?8:b<=25+Ed?4:b<=50+Ed?2:1:20==Z.sourceMagnification&&(l=b<=5+Ed?16:b<=10+Ed?8:b<=20+Ed?4:b<=50+Ed?2:1),e=Z.tileHandlerPathFull+"?FIF="+Lc+"&focal="+Z.focal+"&QLT="+Z.quality+"&DSTL="+Z.imageX*Z.imageZ+","+Z.imageY*Z.imageZ+","+qc+","+rc+","+l+",1&type="+e,Z.Utils.trace(e),g="Assets/Skins/Default/standard/toolbarLogo.png");
return g};this.parseOffsetChunk=function(a){var b=parseInt(a.documentElement.getAttribute("BEGIN"),10),e=a.documentElement.getAttribute("REPLYDATA");a=ug[b];b=Math.floor((b-eh)/8/cd);sc[b]=[];sc[b]=e.split(",",2);b=0;for(e=Fb.length;b<e;b++){var f=Fb[b].split(",");f[0]==a&&(void 0!==f[4]&&"image-display"==f[4]?Tb[Tb.length]=f[1]+"-"+f[2]+"-"+f[3]:"image-backfill"==f[4]&&(fc[fc.length]=f[1]+"-"+f[2]+"-"+f[3]),Fb=Z.Utils.arraySplice(Fb,b,1),b--,e--)}0<Tb.length&&(Tb.sort(),Tb=Z.Utils.arrayUnique(Tb),
n.traceDebugValues("z636",Tb),a=n.getStatus("imageSaving")?gc:ib,aa(Tb,a,"simple","image-display"));0<fc.length&&(fc.sort(),fc=Z.Utils.arrayUnique(fc),a=n.getStatus("imageSaving")?cc:Q,aa(fc,a,"simple","image-backfill"))};this.getIIIFURI=function(a){a=n.getIIIFScheme();var b=n.getIIIFServer(),e=n.getIIIFPrefix(),f=n.getIIIFIdentifier(),g=n.getIIIFRegion(),l=n.getIIIFSize(),k=n.getIIIFRotation(),m=n.getIIIFQuality(),p=n.getIIIFFormat();return a&&b&&f?a+"://"+b+"/"+e+"/"+f+"/"+g+"/"+l+"/"+k+"/"+m+p:
Z.Utils.getResource("ERROR_SETTINGIIIFIMAGEPATH")};this.getIIIFScheme=function(){return"undefined"!=typeof Z.iiifScheme&&Z.Utils.stringValidate(Z.iiifScheme)?Z.iiifScheme:"https"};this.getIIIFServer=function(){return"undefined"!=typeof Z.iiifServer&&Z.Utils.stringValidate(Z.iiifServer)?Z.iiifServer:null};this.getIIIFPrefix=function(){return"undefined"!=typeof Z.iiifPrefix&&Z.Utils.stringValidate(Z.iiifPrefix)?Z.iiifPrefix:null};this.getIIIFIdentifier=function(){return"undefined"!=typeof Z.iiifIdentifier&&
Z.Utils.stringValidate(Z.iiifIdentifier)?Z.iiifIdentifier:null};this.getIIIFRegion=function(){var a=n.getZoom(),b=Math.min(Math.max(0,Math.round(n.getX()-qa/a/2)),Z.imageW).toString(),e=Math.min(Math.max(0,Math.round(n.getY()-ra/a/2)),Z.imageH).toString(),f=Math.min(Z.imageW,Math.round(qa/a)).toString(),a=Math.min(Z.imageH,Math.round(ra/a)).toString();return b+","+e+","+f+","+a};this.getIIIFSize=function(){return qa.toString()+","+ra.toString()};this.getIIIFRotation=function(){return Z.imageR.toString()};
this.getIIIFQuality=function(){return Z.iiifQuality?Z.iiifQuality.toString():"default"};this.getIIIFFormat=function(){return null===Z.iiifFormat||".jpg"!=Z.iiifFormat&&".png"!=Z.iiifFormat?".jpg":Z.iiifFormat.toString()};this.getViewCoordinatesIIIFString=function(a,b,e){var f="",g=Math.round(qa/n.getZoom(a)),l=Math.round(ra/n.getZoom(a)),g=1>g?1:g>Z.imageW?Z.imageW:g,l=1>l?1:l>Z.imageH?Z.imageH:l,k=b?Math.round(b.x):Math.round(n.getX(a));a=b?Math.round(b.y):Math.round(n.getY(a));k-=g/2;a-=l/2;k=0>
k?0:k>Z.imageW?Z.imageW:k;a=0>a?0:a>Z.imageH?Z.imageH:a;k=k.toString();a=a.toString();g=k+","+a+","+g.toString()+","+l.toString();l=qa.toString()+","+ra.toString();b=Math.round(n.getRotation()).toString();var m=n.getIIIFQuality(),p=n.getIIIFFormat(),g=g+"/"+l+"/"+b+"/"+m+p;"show"==e?f='RegionX="'+k+'"   RegionY="'+a:"save"==e?f=Z.imagePath+"/"+g:"bookmark"==e&&(f=Z.imagePath+"/"+g);return f};this.getClickCoordsAtZoom=function(a,b){var e=this.getClickCoordsInImage(a,b);return new Z.Utils.Point(e.x*
b,e.y*b)};this.getClickCoordsInImage=function(a,b,e){a=Z.Utils.event(a);var f=null;if(a){var g=a.type;if("undefined"===typeof b||null==b)b=n.getZoom();if("undefined"===typeof e||null===e)"touchstart"==g||"touchend"==g||"touchcancel"==g?(touch=Z.Utils.getFirstTouch(a),"undefined"!==typeof touch&&(target=touch.target,e=new Z.Utils.Point(touch.pageX,touch.pageY))):(target=Z.Utils.target(a),relatedTarget=Z.Utils.relatedTarget(a),e=Z.Utils.getMousePosition(a));"undefined"!==typeof e&&null!==e&&(a=n.z479(e.x,
e.y),f=n.z485(a.x,a.y,b))}return f};this.getClickZoomCoords3D=function(a,b,e,f,g){var l=parseFloat(Z.Utils.getResource("z93TIERSKIPTHRESHOLD"));b=n.z479(b.x,b.y);b=n.z485(b.x,b.y,Z.imageZ);var k=$a(e,f);a=a.altKey;g?a?k=Z.fitZ:(g=Ra(e,Z.fitZ),f-g<l?k=Z.fitZ:f>1+l?k=$a(e,1):0<e?k=$a(e-1,1):"unconverted"==Z.tileSource&&(k=Z.fitZ)):a?k=Z.maxZ:f<1-l?k=$a(e,1):e<Lb-1?k=$a(e+1,1):1<Z.maxZ&&(k=Z.maxZ);return new Z.Utils.Point3D(b.x,b.y,k)};this.calculateCurrentCenterCoordinates=function(a,b,e){if("undefined"===
typeof a||null===a)a=new Z.Utils.Point(parseFloat(ia.left),parseFloat(ia.top));if("undefined"===typeof e||null===e)e=n.getRotation();0>e&&(e+=360);if("undefined"===typeof b||null===b)b=n.getZoom();var f=Math.round(Z.imageX-(a.x-bc)/b);a=Math.round(Z.imageY-(a.y-Mb)/b);e=Z.Utils.getPositionRotated(f,a,Z.imageX,Z.imageY,-e);return new Z.Utils.Point(e.x,e.y)};this.z542=function(a,b,e,f){if("undefined"===typeof a||null===a)a=Da;if("undefined"===typeof b||null===b)b=!1;return new Kc(n.z541(b,e?a:null,
f),a)};this.z541=function(a,b,e){var f=parseFloat(ia.left)-bc,g=parseFloat(ia.top)-Mb;if(Z.useCanvas)var l=parseFloat(ia.width)/Ua.width,f=f/l,g=g/l;l=n.getZoom();0!=f&&(f/=l);0!=g&&(g/=l);var f=Z.imageX-f,g=Z.imageY-g,k,m,p;a?(a=-(qa/2),m=qa/2,k=-(ra/2),p=ra/2):(a=-(Ya/2),m=Ya/2,k=-(Za/2),p=Za/2);return new dc(f,g,a,m,k,p,l,b,e)};this.HotspotsAllBoundingBoxInPixels=function(){for(var a=new Ib,b=Z.imageCtrX,e=Z.imageCtrX,f=Z.imageCtrY,g=Z.imageCtrY,l=0,k=A.length;l<k;l++){var m=A[l],p=new Wc(m,a,
null,!0),n=m.x-p.w/2,v=m.x+p.w/2,u=m.y-p.h/2,m=m.y+p.h/2;n<b&&(b=n);v>e&&(e=v);u<f&&(f=u);m>g&&(g=m)}a=parseInt(Z.Utils.getResource("DEFAULT_SAVEIMAGELABELMARGIN"),10);b-=a;f-=a;e+=a;g+=a;this.l=b;this.r=e;this.t=f;this.b=g;this.x=b+(e-b)/2;this.y=f+(g-f)/2};this.z480=function(a,b){var e=n.z479(a,b);return new Z.Utils.Point(e.x-bc,e.y-Mb)};this.convertViewportDisplayCoordsToPageCoords=function(a,b){var e=n.convertViewportCoordsToPageCoords(a+bc,b+Mb);return new Z.Utils.Point(e.x,e.y)};this.z479=function(a,
b){var e=Z.Utils.getElementPosition(Ch);return new Z.Utils.Point(a-e.x+bc,b-e.y+Mb)};this.convertViewportCoordsToPageCoords=function(a,b){var e=Z.Utils.getElementPosition(Ch);return new Z.Utils.Point(a+e.x-bc,b+e.y-Mb)};this.convertPageCoordsToImageCoords=function(a,b){var e=n.z479(a,b),e=n.z485(e.x,e.y,Z.imageZ);return new Z.Utils.Point(e.x,e.y)};this.convertImageCoordsToPageCoords=function(a,b,e,f){a=n.z478(a,b,e,f);a=n.convertViewportCoordsToPageCoords(a.x,a.y,Z.imageZ);return new Z.Utils.Point(a.x,
a.y)};this.z485=function(a,b,e,f){if("undefined"===typeof e||null===e)e=Z.imageZ;if("undefined"===typeof f||null===f)f=Z.imageR;0>f&&(f+=360);var g=parseFloat(ia.left)+tc,l=parseFloat(ia.top)+zc;a-=g;b-=l;0!=Z.imageR&&(viewportClickPt=Z.Utils.rotatePoint(a,b,f),a=viewportClickPt.x,b=viewportClickPt.y);return new Z.Utils.Point(a/e+Z.imageX,b/e+Z.imageY)};this.z478=function(a,b,e,f){if("center"==a||isNaN(parseFloat(a)))a=Z.imageCtrX;if("center"==b||isNaN(parseFloat(b)))b=Z.imageCtrY;if("undefined"===
typeof e||null===e)e=Z.imageZ;if("undefined"===typeof f||null===f)f=Z.imageR;0>f&&(f+=360);a=(a-Z.imageX)*e;b=(b-Z.imageY)*e;0!=Z.imageR&&(viewportClickPt=Z.Utils.rotatePoint(a,b,-f),a=viewportClickPt.x,b=viewportClickPt.y);f=parseFloat(ia.left)+tc;e=parseFloat(ia.top)+zc;return new Z.Utils.Point(a+f,b+e)};this.convertImageCoordsToViewportEdgeCoords=function(a,b,e,f){if("undefined"===typeof e||null===e)e=Z.imageZ;if("undefined"===typeof f||null===f)f=Z.imageR;0>f&&(f+=360);a=(Z.imageX-a)*e;b=(Z.imageY-
b)*e;0!=Z.imageR&&(viewportClickPt=Z.Utils.rotatePoint(a,b,-f),a=viewportClickPt.x,b=viewportClickPt.y);return new Z.Utils.Point(bc+a,Mb+b)};this.convertViewportEdgeCoordsToImageCoords=function(a,b,e,f){if("undefined"===typeof e||null===e)e=Z.imageZ;if("undefined"===typeof f||null===f)f=Z.imageR;0>f&&(f+=360);a-=bc;b-=Mb;0!=Z.imageR&&(viewportClickPt=Z.Utils.rotatePoint(a,b,-f),a=viewportClickPt.x,b=viewportClickPt.y);return new Z.Utils.Point(Z.imageX-a/e,Z.imageY-b/e)};this.z468=function(a,b,e){if("undefined"===
typeof a||null===a)a=Z.imageW;if("undefined"===typeof b||null===b)b=Z.imageH;var f=a/b>qa/ra?qa/a:ra/b;if(90==e||270==e)f=a/b>qa/ra?qa/b:ra/a;return f};this.calculateZoomToFill=function(a,b,e){if("undefined"===typeof a||null===a)a=Z.imageW;if("undefined"===typeof b||null===b)b=Z.imageH;var f=a/b>qa/ra?ra/b:qa/a;if(90==e||270==e)f=a/b>qa/ra?ra/a:qa/b;return f};this.calculateZoomForResize=function(a,b,e,f,g){var l=a,k=Z.imageW*a,m=Z.imageH*a;b=f/b;e=g/e;k<f&&m<g?l=a:k==f&&m<g?l=-1:k<f&&m==g?l=-1:k>
f&&m<=g?l=a*b:k<=f&&m>g?l=a*e:k>f&&m>g&&(f=1,1<=b&&1<=e?f=b>e?b:e:1>=b&&1>=e&&(f=b<e?b:e),l=a*f);l<Z.minZ&&(l=Z.minZ);l>Z.maxZ&&(l=Z.maxZ);return l};this.z482=function(a,b){return $a(a,b)};this.syncViewportToNavigator=function(a){var e=Z.imageR;0>e&&(e+=360);var f=ua(a.x,a.y,Z.imageZ,e,"image");a=Z.imageY;var g=f.y,f=dX=Z.imageX-f.x;a=dY=a-g;0!=e&&(270<=e?(f=dY,a=-dX):180<=e?(f=-dX,a=-dY):90<=e&&(f=-dY,a=dX));e=f*Z.imageZ;a*=Z.imageZ;g=a+Mb;ia.left=e+bc+"px";ia.top=g+"px";Ea&&Gb&&(Z.mobileDevice||
Math.abs(e)>qa/2||Math.abs(a)>ra/2)&&M(Ea,Sc,Zb,"simple",!1,"Updating backfill oversize display");Z.Viewer.syncComparisonViewport();Z.Viewer.syncOverlayViewports(null,b)};this.getStatus=function(a){a=Z.Utils.arrayIndexOfObjectValue(Pd,"state",a);return-1==a?!1:Pd[a].status};this.setStatus=function(a,b){var e=!1,f=Z.Utils.arrayIndexOfObjectValue(Pd,"state",a);-1==f?(e=b,Pd[Pd.length]={state:a,status:b}):(!Pd[f].status&&b&&(e=!0),Pd[f].status=b);e&&(Z.Utils.validateCallback(a),Z.Viewer.validateViewerStatus(a))};
this.traceDebugValues=function(a,b,e,f){e="undefined"!==typeof e&&null!==e?e:null;b=null!==b?b:"";switch(a){case "tilesToDisplay":hh=e;Qf=Ud=Rf=Ye=0;md=e;td=0;tilesTimeStart=(new Date).getTime();kh=0;window.clearTimeout(Ze);Ze=null;Ze=window.setTimeout(u,ji);break;case "tilesInCache":Ye=e;break;case "z581-image-display":Rf+=1;break;case "onTileLoad":Ud+=1;td=((new Date).getTime()-e)/1E3;kh=Ud/td;break;case "z507":e=Z.Utils.arrayIndexOf(fe,b);-1!=e&&(fe.splice(e,1),Qf+=1,--md);break;case "tilesBackfillToPrecache":Nb=
e;break;case "onTileBackfillPrecache":vb+=1;break;case "tilesBackfillToDisplay":uh=ih=e;break;case "z599":V+=1;break;case "displayBackfillTile":e=Z.Utils.arrayIndexOf(lb,b),-1!=e&&(lb.splice(e,1),Di+=1,--uh)}2!=Z.debug&&3!=Z.debug||Z.Utils.traceTileStatus(hh,Ye,Rf,Ud,Qf,md);if(2==Z.debug){var g="undefined"!==typeof f&&null!==f&&0<f.length?f.join(", "):"none";e=!0;var l="";switch(a){case "updateView-noChange":l="Updating view: no change of tier.";break;case "tilesToDisplay":l="Tiles to display: "+
g;break;case "tilesInCache":l="Tiles in cache: "+g;break;case "tilesToLoad":l="Tiles to load: "+g;break;case "tilesToLoad-backfill":l="Tiles to load-backfill: "+g;break;case "z622-viewportDisplay":a=[];g=0;for(l=f.length;g<l;g++)a[a.length]=f[g].name;l="Tiles from cache-"+b+": "+a.join(", ");break;case "z622-backfillDisplay":a=[];g=0;for(l=f.length;g<l;g++)a[a.length]=f[g].name;l="Tiles from cache-"+b+": "+a.join(", ");break;case "z577-image-display":l="Tile requests for display: "+b+g;break;case "z577-image-backfill":l=
"Tile requests for backfill: "+b+g;break;case "imageRequestTimeout":l="Image request for "+b;break;case "z581-image-display":l="Tile request-display: "+b;e=!1;break;case "z581-image-backfill":l="Tile request-backfill: "+b;e=!1;break;case "z581DelayForOffset":l="Tile not yet being loaded - offset chunk loading in progress: "+b;break;case "onTileLoad":l="Tiles received-display: "+b;e=!1;break;case "z599":l="Tiles received-backfill: "+b;0==kc.length&&(l+="\n\nTile loading complete for backfill: all requested tiles received.");
e=!1;break;case "z532":l="Tile request recorded for after load offset chunk: "+b;break;case "z637":l="Requesting tiles after offset chunk received: "+g;break;case "z531":l="Tile request recorded for after load offset chunk: "+b;e=!1;break;case "z636":l="Requesting tiles after offset chunk received: "+g;e=!1;break;case "z577Retry":l=b;break;case "z507":l="Tile displaying: "+b;e=!1;break;case "blankLine":l=" "}""!=l&&Z.Utils.trace(l,!1,e)}};this.updateProgress=function(a,b){var e=Z,f;0==a&&0==b?(Z.Utils.validateCallback("loadingTilesComplete"),
Z.Utils.validateCallback("loadingTilesCompleteGetLabelIDs"),f=void 0):(f=Math.round(100-b/a*100),f=Math.round(f/10));e.updateViewPercent=f;Z.ToolbarDisplay&&Z.Toolbar.getInitialized()&&Z.Toolbar.updateProgress(a,b)};this.saveAnnotationsToImageFile=function(a,b,e){if(n.getStatus("initializedViewport")&&ac)if(Z.Utils.stringValidate(Z.saveHandlerPath)||e)if(Z.saveHandlerPath&&-1!=Z.saveHandlerPath.indexOf(Z.Utils.getResource("z13")))Z.Utils.showMessage(Z.Utils.getResource("z14"),!1,Z.messageDurationStandard,
"center");else{var f=a?Z.Utils.getResource("ALERT_IMAGESAVEPREPARING"):Z.Utils.getResource("ALERT_VIEWSAVEPREPARING");Z.Utils.showMessage(f,!1,"none","center");Z.interactive=!1;n.setStatus("imageSaving",!0);Z.Utils.clearDisplay(ac);Z.setCallback("drawLabelsOnCanvasComplete",function(){Z.Utils.functionCallWithDelay(function(){Z.Viewport.saveCanvasDataToFile(a,b,e)},750)});Wd(a);a&&"unconverted"!=Z.tileSource?ye(a):yd(a)}else Z.Utils.showMessage(Z.Utils.getResource("z297"),!0,null,"center")};n.saveCanvasDataToFile=
function(a,b,e){Z.saveImageMessage=a?Z.Utils.getResource("ALERT_IMAGESAVEINPROGRESS"):Z.Utils.getResource("ALERT_VIEWSAVEINPROGRESS");switch(Z.saveImageFormat){case "png":canvasData=ac.toDataURL("image/png");break;default:canvasData=ac.toDataURL("image/jpeg",Z.saveImageCompression)}e?Z.browser==Z.browsers.FIREFOX||Z.browser==Z.browsers.CHROME||Z.browser==Z.browsers.OPERA?(Z.Utils.hideMessage(),b=document.createElement("a"),document.body.appendChild(b),a=Z.Utils.stringRemoveFileExtension(Z.saveImageFilename),
b.download=a+".jpg",b.href=canvasData,b.click(),document.body.removeChild(b)):Z.Utils.showMessage(Z.Utils.getResource("ERROR_IMAGESAVELOCALUNSUPPORTEDBROWSER"),!0,null,"center"):(a=Z.Utils.stringRemoveFileExtension(Z.saveImageFilename),a=a+","+canvasData,(new Z.NetConnector).postImage(Z.saveImageHandlerPath,a),b&&(window.location=canvasData));n.setStatus("imageSaving",!1);Z.interactive=!0};n.parseGeoCoordinatesXML=function(a){if(a=a.getElementsByTagName("SETUP")[0]){Hf=a.getAttribute("GEOTOP");lg=
a.getAttribute("GEOBOTTOM");th=a.getAttribute("GEOLEFT");mg=a.getAttribute("GEORIGHT");var b=th,e=mg,f=Hf;a=lg;var g=b.substring(0,b.indexOf(",",0)),l=b.substring(b.indexOf(",",0)+1,b.indexOf(",",g.length+1)),k=1;"W"==b.substring(b.indexOf(",",g.length+1+l.length)+1,b.length)&&(k=-1);ng=(parseFloat(g)+parseFloat(l)/60)*k;b=e.substring(0,e.indexOf(",",0));g=e.substring(e.indexOf(",",0)+1,e.indexOf(",",b.length+1));l=1;"W"==e.substring(e.indexOf(",",b.length+1+g.length)+1,e.length)&&(l=-1);e=(parseFloat(b)+
parseFloat(g)/60)*l;b=f.substring(0,f.indexOf(",",0));g=f.substring(f.indexOf(",",0)+1,f.indexOf(",",b.length+1));l=1;"S"==f.substring(f.indexOf(",",b.length+1+g.length)+1,f.length)&&(l=-1);Od=(parseFloat(b)+parseFloat(g)/60)*l;f=a.substring(0,a.indexOf(",",0));b=a.substring(a.indexOf(",",0)+1,a.indexOf(",",f.length+1));g=1;"S"==a.substring(a.indexOf(",",f.length+1+b.length)+1,a.length)&&(g=-1);a=(parseFloat(f)+parseFloat(b)/60)*g;Fj=e<ng?180-ng+(180+e):e-ng;Gj=Od-a}};this.parseHotspotsXML=function(a){Z.Utils.arrayClear($c);
Z.Utils.arrayClear(Ac);Z.Utils.arrayClear(Xc);Oh=!1;n.setStatus("XMLParsedViewport",!1);pj=Z.Utils.getResource("z226");Oi=Z.Utils.getResource("z225");hi=Z.Utils.getResource("z131");wi=Z.Utils.getResource("z132");hotspotListTitle=Z.tourPath?Z.Utils.getResource("z444"):Z.Utils.getResource("z424");xi=Z.Utils.getResource("z134");mh=parseFloat(Z.Utils.getResource("DEFAULT_HOTSPOTSMINSCALE"));nh=parseFloat(Z.Utils.getResource("DEFAULT_HOTSPOTSMAXSCALE"));var e=a.getElementsByTagName("SETUP")[0];"undefined"!==
typeof e&&Z.Utils.stringValidate(e)||(e=a.getElementsByTagName("HOTSPOTSETUP")[0],"undefined"!==typeof e&&Z.Utils.stringValidate(e)||(e=Z.Utils.xmlConvertTextToDoc("<HOTSPOTSETUP />").getElementsByTagName("HOTSPOTSETUP")[0]));if(e){var f=e.getAttribute("AUTOSTART");Z.Utils.stringValidate(f)&&(pj="0"!=f&&"false"!=f);f=e.getAttribute("AUTOLOOP");Z.Utils.stringValidate(f)&&(Oi="0"!=f&&"false"!=f);f=e.getAttribute("CHOICELIST");Z.Utils.stringValidate(f)&&(hi=f);f=e.getAttribute("LISTSOURCE");Z.Utils.stringValidate(f)&&
(wi=f);f=Z.Utils.xmlUnescapeMinimal(unescape(e.getAttribute("LISTTITLE")));Z.Utils.stringValidate(f)&&(hotspotListTitle=f);f=e.getAttribute("INITIALVISIBILITY");Z.Utils.stringValidate(f)&&(xi="1"==f||"true"==f);f=parseFloat(e.getAttribute("MINSCALE"));isNaN(f)||(mh=0!=f?f:1E-5);e=parseFloat(e.getAttribute("MAXSCALE"));isNaN(e)||(nh=0!=e?e:1E4)}gb.visibility=xi?"visible":"hidden";Z.Utils.stringValidate(Z.hotspotListTitle)?hotspotListTitle=Z.hotspotListTitle:Z.Utils.stringValidate(hotspotListTitle)&&
(Z.hotspotListTitle=hotspotListTitle);gf(hi,hotspotListTitle,$c,b);a=a.getElementsByTagName("HOTSPOT");e=0;for(f=a.length;e<f;e++){var g=a[e],g=hf(g);n.createHotspotFromXML(g,!0)}2==Z.debug&&Oh&&Z.Utils.trace(Z.Utils.getResource("z246"));n.setStatus("XMLParsedViewport",!0);Ob();Z.tour?(n.initializeAudioMuteButtons(),Z.Utils.validateCallback("tourLoaded"),pj&&!Z.tourStop&&Z.Utils.functionCallWithDelay(function(){n.tourStart()},750)):(Z.Utils.validateCallback("hotspotsLoadedViewport"),n.setStatus("hotspotsLoadedViewport",
!0))};this.createHotspotFromParameters=function(a,b,e,f,g,l,k,m,p,v,u,D,q,O,t,y,I,x,J,A,ja,B,Bb,w,ba,W,E,H,M,K,L,Sa,G,fa,Db,N,Bf,P,T,S,V,Mc,X,R,da){e=Z.Utils.arrayToArrayOfStrings([a,b,e,f,g,l,k,m,p,v,u,D,q,O,t,y,I,x,J,A,ja,B,Bb,w,ba,W,E,H,M,K,L,Sa,G,fa,Db,N,Bf,P,T,S,V,Mc,X,R,da]);a=Z.Utils.xmlConvertTextToDoc('<HOTSPOT ID="'+e[0]+'" NAME="'+e[1]+'" MEDIATYPE="'+e[2]+'" MEDIA="'+e[3]+'" AUDIO="'+e[4]+'" X="'+e[5]+'" Y="'+e[6]+'" ZOOM="'+e[7]+'" XSCALE="'+e[8]+'" YSCALE="'+e[9]+'" RADIUS="'+e[10]+
'" ZMIN="'+e[11]+'" ZMAX="'+e[12]+'" CLICKURL="'+e[13]+'" URLTARGET="'+e[14]+'" ROLLOVER="'+e[15]+'" CAPTION="'+e[16]+'" TOOLTIP="'+e[17]+'" TEXTCOLOR="'+e[18]+'" BACKCOLOR="'+e[19]+'" LINECOLOR="'+e[20]+'" FILLCOLOR="'+e[21]+'" TEXTVISIBLE="'+e[22]+'" BACKVISIBLE="'+e[23]+'" LINEVISIBLE="'+e[24]+'" FILLVISIBLE="'+e[25]+'" CAPTIONPOSITION="'+e[26]+'" SAVED="'+e[27]+'" INTERNALID="'+e[28]+'" POIID="'+e[29]+'" SHOWFOR="'+e[34]+'" TRANSITION="'+e[35]+'" CHANGEFOR="'+e[36]+'" ROTATION="'+e[37]+'" EDITABLE="'+
e[38]+'" POPUP="'+e[39]+'" POPOFFSETX="'+e[40]+'" POPOFFSETY="'+e[41]+'" COMMENT="'+e[42]+'" USER="'+e[43]+'" DATE="'+e[44]+'" ></HOTSPOT>').getElementsByTagName("HOTSPOT")[0];null===a.getAttribute("INTERNALID")&&a.setAttribute("INTERNALID",Xb("hotspot"));b=Z.Utils.xmlConvertTextToDoc("<TEMP></TEMP>");Z.Utils.stringValidate(e[30])&&(L=Z.Utils.xmlConvertTextToDoc(L).getElementsByTagName("CAPTION")[0].innerHTML,f=b.createElement("CAPTION"),f.innerHTML=L,a.appendChild(f));Z.Utils.stringValidate(e[31])&&
(L=Z.Utils.xmlConvertTextToDoc(Sa).getElementsByTagName("TOOLTIP")[0].innerHTML,Sa=b.createElement("TOOLTIP"),Sa.innerHTML=L,a.appendChild(Sa));if(Z.Utils.stringValidate(e[33])){Sa=b.createElement("POLYGON");Sa.setAttribute("CLOSED",e[32]);L=0;for(e=fa.length;L<e;L++)f=b.createElement("POINT"),f.setAttribute("X",fa[L].x),f.setAttribute("Y",fa[L].y),Sa.appendChild(f);a.appendChild(Sa)}n.createHotspotFromXML(a,!0)};this.createHotspotFromXML=function(a,b){b&&(a=wd(a,"hotspot"));var e=new Jg(a);if(Z.Utils.stringValidate(e.media)||
Z.Utils.stringValidate(e.caption)||null!==Z.tourPath||Z.annotations){A[A.length]=e;var f="NAME"==wi?e.name:"CAPTION"==wi?e.caption:e.tooltip;if(Oa){var g=e.internalID;if(null!=Oa){var l=Z.Utils.arrayIndexOfObjectValue($c,"value",g);-1!=l?(Oa.options[l+("none"!=Z.hotspotListTitle&&"none"!=Z.tourListTitle?1:0)]=new Option(f,g.toString()),$c[l]={text:f,value:g}):(Oa.options[Oa.options.length]=new Option(f,g.toString()),$c[$c.length]={text:f,value:g})}}}Z.Utils.stringValidate(e.popup)&&(f=Z.Utils.arrayIndexOfObjectValue(Xc,
"popup",e.popup),-1!=f?Xc[f].element&&(e.popupImage=Xc[f].element.cloneNode(!1)):(Xc[Xc.length]={popup:e.popup,element:null},f=(new Date).getTime(),g=e.popup,uj.loadImage(g,Z.Utils.createCallback(null,Kg,g,f),"hotspot")));var f=new Ib,g=e.mediaType,l=e.media,k=!1,m=!1;l&&(k=-1!=l.indexOf("/circle.")||-1!=l.indexOf("/square.")||-1!=l.indexOf("/triangle.")||-1!=l.indexOf("/arrowDownLeft.")||-1!=l.indexOf("/arrowDownRight.")||-1!=l.indexOf("/arrowUpLeft.")||-1!=l.indexOf("/arrowUpRight.")||-1!=l.indexOf("/arrowUp.")||
-1!=l.indexOf("/arrowDown.")||-1!=l.indexOf("/arrowLeft.")||-1!=l.indexOf("/arrowRight.")||-1!=l.indexOf("/lineHorizontal.")||-1!=l.indexOf("/lineVertical."),m="counter"==l||"circle"==l||"square"==l||"triangle"==l||"arrowDown"==l||"arrowDownLeft"==l||"arrowLeft"==l||"arrowUpLeft"==l||"arrowUp"==l||"arrowUpRight"==l||"arrowRight"==l||"arrowDownRight"==l||"lineHorizontal"==l||"lineVertical"==l);k="External Graphics File"!=l&&(m||k&&Z.labelIconsInternal);!Z.Utils.stringValidate(l)||"text"==g||"polygon"==
l||k?uc(e,f):bf(e,!0);Z.Viewer.getStatus("readyViewer")&&(Z.Utils.validateCallback("labelCreated"),Z.Utils.validateCallback("labelCreatedGetInternalID"))};this.modifyHotspot=function(a,b,e,f,g){var l=-1,l=g?Z.Utils.arrayIndexOfObjectValue(A,"internalID",a):Z.Utils.arrayIndexOfObjectValue(A,"id",a.toString());if(-1!=l){a=A[l];"polygon"!=a.media||"x"!=b&&"y"!=b||(g=new Z.Utils.Point("x"==b?e:a.x,"y"==b?e:a.y),De(a,g));if("polygon"!=a.media||"xScale"!=b&&"yScale"!=b)a[b]=e;else{g=e/100;for(var l=a.polygonPts.slice(0),
k="xScale"==b?"x":"y",m=a[k]-a[k]*g,p=0,n=l.length;p<n;p++)l[p][k]=l[p][k]*g+m;a.polygonPts=l.slice(0)}"rollover"==b&&0==e&&(a.visibility=!0);"media"!=b||"icon"!=a.mediaType||"External Graphics File"!=a.media&&Z.labelIconsInternal||bf(a,!1);"undefined"!==typeof f&&null!==f&&f||Ob()}};this.deleteHotspot=function(a,b,e){var f=-1;e?f=Z.Utils.arrayIndexOfObjectValue(A,"internalID",a):(f=Z.Utils.arrayIndexOfObjectValue(A,"id",a.toString()),-1!=f&&(a=A[f].internalID));-1!=f&&(A=Z.Utils.arraySplice(A,f,
1),cf(a),!b&&Z.hotspots&&null!=Oa&&(a=Z.Utils.arrayIndexOfObjectValue($c,"value",a),-1!=a&&($c=Z.Utils.arraySplice($c,a,1),Z.Utils.updateSelectElement(Oa,$c),b=Oa.length,0!=b&&(Oa.selectedIndex=a>b-1?b-1:a))))};this.deleteAllHotspots=function(){Z.Utils.arrayClear(A);wa&&(wa.innerHTML="");Oa.options.length=0};this.deleteAllMeasureHotspots=function(){var a=A.length;if(0<a&&wa&&0<wa.childNodes.length){for(var b=0;b<a;b++)"measure"==A[b].mediaType&&(A=Z.Utils.arraySplice(A,b,1));Ob()}};this.z623=function(){Ob()};
this.getLabelsVisibility=function(){return n.getHotspotsVisibility()};this.setLabelsVisibility=function(a){n.setLabelsVisibility(a)};this.setLabelVisibility=function(a,b){n.setHotspotVisibility(a,b)};this.setLabelsVisibilityByFilter=function(a,b,e){n.setHotspotsVisibilityByFilter(a,b,e);return e};this.setLabelVisibilityByID=function(a,b,e){n.setHotspotVisibilityByID(a,b,e)};this.setLabelFilterByDisplayList=function(a,b){n.setHotspotFilterByDisplayList(a,b)};this.setHotspotFilterByDisplayList=function(a,
b){wa&&Z.Utils.clearDisplay(wa);Kb&&Z.Utils.clearDisplay(Kb);ob&&Z.Utils.clearDisplay(ob);"undefined"!==typeof a&&null!==a&&0<a.length&&(b?Jh=a:Ih=a);"inline-block"==gb.display&&Lg()};this.clearLabelFilterByDisplayList=function(){n.clearHotspotFilterByDisplayList()};this.clearHotspotFilterByDisplayList=function(){"undefined"!==typeof Ih&&Z.Utils.arrayClear(Ih);"undefined"!==typeof Jh&&Z.Utils.arrayClear(Jh);"inline-block"==gb.display&&Ob()};this.z538=function(a){return Bc(a)};this.getLabelIDsInCurrentView=
function(a,b,e){var f=[];b=new Ib(b);for(var g=n.getZoom(),l=b.box.l,k=b.box.r,m=b.box.t,p=b.box.b,v=0,u=A.length;v<u;v++){var D=A[v];e&&(l=new Wc(D,b,null,!1),k=l.w/2/g,p=l.h/2/g,l=b.box.l-k,k=b.box.r+k,m=b.box.t-p,p=b.box.b+p);D.x>l&&D.x<k&&D.y>m&&D.y<p&&(f[f.length]=a?D.internalID:D.id)}return f};this.getHotspots=function(){return A};this.getHotspotsVisibility=function(){return"inline-block"==gb.display};this.setHotspotsVisibility=function(a){gb.display=a?"inline-block":"none";Ob()};this.setHotspotPopupVisibility=
function(a,b){var e;e=a.firstChild.childNodes;var f=null;if(a.firstChild)for(var g=0,l=e.length;g<l;g++){var k=e[g].firstChild;k&&k.id&&"popup"==k.id&&(f=k)}(e=f)&&e.style&&(e.style.display=b?"inline-block":"none",e.style.visibility=b?"visible":"hidden",Mj++,a.style.zIndex=Mj.toString())};this.setHotspotVisibility=function(a,b){var e=a.firstChild;if(e&&e.style){e.style.visibility="visible";var f=b?"visible":"hidden";e.style.backgroundColor=b?"":"#FFFFFF";Z.Utils.setOpacity(e,b?1:.01);(e=a.firstChild.childNodes[1])&&
e.style&&(e.style.visibility=f);f=a.id.substring(3,a.id.length);f=Z.Utils.arrayIndexOfObjectValue(A,"internalID",f);if(-1!=f){e=A[f];e.visibility=b;var f=e.media,e=e.mediaType,g=-1!=f.indexOf("/circle.")||-1!=f.indexOf("/square.")||-1!=f.indexOf("/triangle.")||-1!=f.indexOf("/arrowDownLeft.")||-1!=f.indexOf("/arrowDownRight.")||-1!=f.indexOf("/arrowUpLeft.")||-1!=f.indexOf("/arrowUpRight.")||-1!=f.indexOf("/arrowUp.")||-1!=f.indexOf("/arrowDown.")||-1!=f.indexOf("/arrowLeft.")||-1!=f.indexOf("/arrowRight.")||
-1!=f.indexOf("/lineHorizontal.")||-1!=f.indexOf("/lineVertical.");(!("counter"!=e&&"icon"!=e||f&&"External Graphics File"==f)&&("counter"==f||"circle"==f||"square"==f||"triangle"==f||"arrowDown"==f||"arrowDownLeft"==f||"arrowLeft"==f||"arrowUpLeft"==f||"arrowUp"==f||"arrowUpRight"==f||"arrowRight"==f||"arrowDownRight"==f||"lineHorizontal"==f||"lineVertical"==f||g&&Z.labelIconsInternal)||f&&"polygon"==f)&&Bd(!0)}}};this.setHotspotsVisibilityByFilter=function(a,e,f){if(0<A.length)if(wa&&0<wa.childNodes.length){for(var g=
0,k=A.length;g<k;g++)if(A[g][a]==e){var l=A[g];l.visibility=f;l=document.getElementById("hot"+l.internalID+(Z.imageSet?"-"+b.toString():""));null!==l&&n.setHotspotVisibility(l,f)}Ri=0}else 10>Ri&&(Ri++,window.setTimeout(function(){n.setHotspotsVisibilityByFilter(a,e,f)},100));return f};this.setHotspotVisibilityByID=function(a,e,f){f=f?"internalID":"id";0<A.length&&(wa&&0<wa.childNodes.length?(f=Z.Utils.arrayIndexOfObjectValue(A,f,a),-1!=f&&(f=document.getElementById("hot"+A[f].internalID+(Z.imageSet?
"-"+b.toString():"")),null!=f&&n.setHotspotVisibility(f,e))):window.setTimeout(function(){setHotspotVisibilityByID(a,e)},100))};this.createAnnotationsXMLFile=function(){var a=Cd();null===Z.editMode||Z.noPost||(Z.Utils.stringValidate(Z.saveHandlerPath)?((new Z.NetConnector).postXML(Z.saveHandlerPath,a,"annotation"),n.parseAnnotationsXML(a)):Z.Utils.showMessage(Z.Utils.getResource("z297"),!0,null,"center"))};this.parseAnnotationsXML=function(a,b){if("undefined"===typeof b||null===b)b=Ta;Z.imageSet&&
Z.Utils.showMessage(Z.Utils.getResource("ALERT_LOADINGANNOTATIONS"),!1,2E3,"center");"undefined"!==typeof Ha&&Z.Utils.arrayClear(Ha);"undefined"!==typeof Ac&&Z.Utils.arrayClear(Ac);"undefined"!==typeof Xc&&Z.Utils.arrayClear(Xc);"undefined"!==typeof xa&&Z.Utils.arrayClear(xa);"undefined"!==typeof wb&&Z.Utils.arrayClear(wb);"undefined"!==typeof Ph&&Z.Utils.arrayClear(Ph);"undefined"!==typeof labelCaptionPositionListDP&&Z.Utils.arrayClear(labelCaptionPositionListDP);"undefined"!==typeof labelTargetListDP&&
Z.Utils.arrayClear(labelTargetListDP);"undefined"!==typeof cb&&Z.Utils.arrayClear(cb);"undefined"!==typeof wc&&Z.Utils.arrayClear(wc);Oh=!1;n.setStatus("XMLParsedViewport",!1);var e=Cd(),f=Pb(e,"root"),g=Pb(e,"setup"),l=a.getElementsByTagName("SETUP");0==l.length&&(l=a.getElementsByTagName("LABELSETUP"));if(0<l.length){l=l[0];temp=l.getAttribute("PANELPOSITION");Z.Utils.stringValidate(temp)&&g.setAttribute("PANELPOSITION",temp);var k=l.getAttribute("INITIALVISIBILITY");Z.Utils.stringValidate(k)&&
(initVis=Z.Utils.getResource("z134")?"0"!=k&&"hide"!=k?"1":"0":"1"!=k&&"show"!=k?"0":"1",g.setAttribute("INITIALVISIBILITY",initVis));k=l.getAttribute("POIVISIBILITY");Z.Utils.stringValidate(k)&&(initVis="1"==Z.Utils.getResource("z66")?"0"!=k&&"hide"!=k?"1":"0":"1"!=k&&"show"!=k?"0":"1",g.setAttribute("POIVISIBILITY",initVis));k=l.getAttribute("LABELVISIBILITY");Z.Utils.stringValidate(k)&&(initVis="1"==Z.Utils.getResource("z52")?"0"!=k&&"hide"!=k?"1":"0":"1"!=k&&"show"!=k?"0":"1",g.setAttribute("LABELVISIBILITY",
initVis));k=l.getAttribute("NOTEVISIBILITY");Z.Utils.stringValidate(k)&&(initVis="1"==Z.Utils.getResource("z60")?"0"!=k&&"hide"!=k?"1":"0":"1"!=k&&"show"!=k?"0":"1",g.setAttribute("NOTEVISIBILITY",initVis));var m=l.getAttribute("COMMENTVISIBILITY");Z.Utils.stringValidate(k)&&(initVis="1"==Z.Utils.getResource("DEFAULT_ANNOTATIONCOMMENTVISIBILITY")?"0"!=m&&"hide"!=m?"1":"0":"1"!=m&&"show"!=m?"0":"1",g.setAttribute("COMMENTVISIBILITY",initVis));temp=l.getAttribute("MINSCALE");Z.Utils.stringValidate(temp)&&
!isNaN(parseFloat(temp))&&0<=parseFloat(temp)&&g.setAttribute("MINSCALE",temp);temp=l.getAttribute("MAXSCALE");Z.Utils.stringValidate(temp)&&!isNaN(parseFloat(temp))&&0<=parseFloat(temp)&&g.setAttribute("MAXSCALE",temp);temp=l.getAttribute("ZOOMIFYXMLVERSION");Z.Utils.stringValidate(temp)&&(isNaN(parseFloat(temp))||4!=parseFloat(temp)||g.setAttribute("ZOOMIFYXMLVERSION",temp));temp=l.getAttribute("TOOLTIPSOURCE");Z.Utils.stringValidate(temp)&&g.setAttribute("TOOLTIPSOURCE",temp)}f.appendChild(g);
Oj=parseFloat(g.getAttribute("ZOOMIFYXMLVERSION"));g=a.getElementsByTagName("POI");l=0;for(k=g.length;l<k;l++){var m=Pb(e,"poi"),p=g[l];temp=p.getAttribute("ID");Z.Utils.stringValidate(temp)&&m.setAttribute("ID",temp);temp=Z.Utils.xmlUnescapeMinimal(unescape(p.getAttribute("NAME")));Z.Utils.stringValidate(temp)&&m.setAttribute("NAME",temp);temp=p.getAttribute("X");Z.Utils.stringValidate(temp)&&!isNaN(parseFloat(temp))&&m.setAttribute("X","center"==temp?Z.imageCtrX.toString():temp);temp=p.getAttribute("Y");
Z.Utils.stringValidate(temp)&&!isNaN(parseFloat(temp))&&m.setAttribute("Y","center"==temp?Z.imageCtrY.toString():temp);temp=p.getAttribute("ZOOM");Z.Utils.stringValidate(temp)&&!isNaN(parseFloat(temp))&&m.setAttribute("ZOOM",temp);temp=p.getAttribute("USER");Z.Utils.stringValidate(temp)&&m.setAttribute("USER",temp);temp=p.getAttribute("DATE");Z.Utils.stringValidate(temp)&&m.setAttribute("DATE",temp);temp=p.getAttribute("EDITABLE");Z.Utils.stringValidate(temp)&&m.setAttribute("EDITABLE",temp);f.appendChild(m);
var v=g[l].getElementsByTagName("LABELS")[0];if("undefined"!==typeof v&&null!==v){p=e.createElement("LABELS");m.appendChild(p);for(var v=v.getElementsByTagName("LABEL"),u=0,D=v.length;u<D;u++){var q=Pb(e,"label"),O=e,t=v[u],y=void 0,I=void 0,y=t.getAttribute("ID");Z.Utils.stringValidate(y)&&q.setAttribute("ID",y);y=Z.Utils.xmlUnescapeMinimal(unescape(t.getAttribute("NAME")));Z.Utils.stringValidate(y)&&q.setAttribute("NAME",y);y=t.getAttribute("MEDIATYPE");Z.Utils.stringValidate(y)&&(q.setAttribute("MEDIATYPE",
y),I=t.getAttribute("MEDIA"),Z.Utils.stringValidate(I)&&q.setAttribute("MEDIA",I),"url"==y?q.setAttribute("MEDIATYPE","icon"):"symbol"==y&&Z.Utils.stringValidate(I)&&"polygon"==I?q.setAttribute("MEDIATYPE","polygon"):"symbol"==y&&Z.Utils.stringValidate(I)&&"caption"==I?(q.setAttribute("MEDIATYPE","text"),q.setAttribute("MEDIA","")):"symbol"==y&&Z.Utils.stringValidate(I)&&"polygon"!=I&&-1!=I.indexOf(".")?q.setAttribute("MEDIATYPE","icon"):"text"==y&&q.setAttribute("MEDIA",""));y=t.getAttribute("X");
Z.Utils.stringValidate(y)&&!isNaN(parseFloat(y))&&q.setAttribute("X","center"==y?Z.imageCtrX.toString():y);y=t.getAttribute("Y");Z.Utils.stringValidate(y)&&!isNaN(parseFloat(y))&&q.setAttribute("Y","center"==y?Z.imageCtrY.toString():y);y=t.getAttribute("ZOOM");Z.Utils.stringValidate(y)&&!isNaN(parseFloat(y))&&q.setAttribute("ZOOM",y);y=t.getAttribute("XSCALE");Z.Utils.stringValidate(y)&&!isNaN(parseFloat(y))&&q.setAttribute("XSCALE",y);y=t.getAttribute("YSCALE");Z.Utils.stringValidate(y)&&!isNaN(parseFloat(y))&&
q.setAttribute("YSCALE",y);y=t.getAttribute("ZMIN");Z.Utils.stringValidate(y)&&!isNaN(parseFloat(y))&&q.setAttribute("ZMIN",y);y=t.getAttribute("ROTATION");Z.Utils.stringValidate(y)&&!isNaN(parseFloat(y))&&q.setAttribute("ROTATION",y);y=t.getAttribute("RADIUS");Z.Utils.stringValidate(y)&&!isNaN(parseFloat(y))&&q.setAttribute("RADIUS",y);y=t.getAttribute("ZMAX");Z.Utils.stringValidate(y)&&!isNaN(parseFloat(y))&&q.setAttribute("ZMAX",y);y=t.getAttribute("CLICKURL");Z.Utils.stringValidate(y)?q.setAttribute("CLICKURL",
y):(y=t.getAttribute("URL"),Z.Utils.stringValidate(y)&&q.setAttribute("CLICKURL",y));y=t.getAttribute("URLTARGET");Z.Utils.stringValidate(y)&&q.setAttribute("URLTARGET",y);y=t.getAttribute("ROLLOVER");Z.Utils.stringValidate(y)&&q.setAttribute("ROLLOVER",y);y=Z.Utils.xmlUnescapeMinimal(unescape(t.getAttribute("CAPTION")));Z.Utils.stringValidate(y)&&q.setAttribute("CAPTION",y);y=Z.Utils.xmlUnescapeMinimal(unescape(t.getAttribute("COMMENT")));Z.Utils.stringValidate(y)&&q.setAttribute("COMMENT",y);y=
Z.Utils.xmlUnescapeMinimal(unescape(t.getAttribute("TOOLTIP")));Z.Utils.stringValidate(y)&&q.setAttribute("TOOLTIP",y);y=t.getAttribute("USER");Z.Utils.stringValidate(y)&&q.setAttribute("USER",y);y=t.getAttribute("DATE");Z.Utils.stringValidate(y)&&q.setAttribute("DATE",y);y=t.getAttribute("TEXTCOLOR");Z.Utils.stringValidate(y)&&q.setAttribute("TEXTCOLOR",Z.Utils.stringValidateColorValue(y));y=t.getAttribute("BACKCOLOR");Z.Utils.stringValidate(y)&&q.setAttribute("BACKCOLOR",Z.Utils.stringValidateColorValue(y));
y=t.getAttribute("LINECOLOR");Z.Utils.stringValidate(y)&&q.setAttribute("LINECOLOR",Z.Utils.stringValidateColorValue(y));y=t.getAttribute("FILLCOLOR");Z.Utils.stringValidate(y)&&q.setAttribute("FILLCOLOR",Z.Utils.stringValidateColorValue(y));y=t.getAttribute("TEXTVISIBLE");Z.Utils.stringValidate(y)&&q.setAttribute("TEXTVISIBLE",y);y=t.getAttribute("BACKVISIBLE");Z.Utils.stringValidate(y)&&q.setAttribute("BACKVISIBLE",y);y=t.getAttribute("LINEVISIBLE");Z.Utils.stringValidate(y)&&q.setAttribute("LINEVISIBLE",
y);y=t.getAttribute("FILLVISIBLE");Z.Utils.stringValidate(y)&&q.setAttribute("FILLVISIBLE",y);y=t.getAttribute("CAPTIONPOSITION");Z.Utils.stringValidate(y)&&q.setAttribute("CAPTIONPOSITION",y);y=t.getAttribute("CATEGORY");Z.Utils.stringValidate(y)&&q.setAttribute("CATEGORY",y);y=t.getElementsByTagName("CAPTION")[0];"undefined"!==typeof y&&null!==y&&(Z.browser==Z.browsers.IE&&11>Z.browserVersion?(y=Z.Utils.xmlConvertDocToText(y),q.setAttribute("CAPTION",y)):q.appendChild(y));y=t.getElementsByTagName("TOOLTIP")[0];
"undefined"!==typeof y&&null!==y&&(Z.browser==Z.browsers.IE&&11>Z.browserVersion?(y=Z.Utils.xmlConvertDocToText(y),q.setAttribute("TOOLTIP",y)):q.appendChild(y));if(I=t.getElementsByTagName("POLYGON")[0]){for(var x=Pb(O,"polygon"),J=0,A=I.getElementsByTagName("POINT").length;J<A;J++){var ja=I.getElementsByTagName("POINT")[J],B=Pb(O,"point"),y=ja.getAttribute("X");Z.Utils.stringValidate(y)&&B.setAttribute("X",y);y=ja.getAttribute("Y");Z.Utils.stringValidate(y)&&B.setAttribute("Y",y);x.appendChild(B)}y=
t.getAttribute("CLOSED");Z.Utils.stringValidate(y)&&q.setAttribute("CLOSED",y);q.appendChild(x)}y=t.getAttribute("POPUP");Z.Utils.stringValidate(y)&&q.setAttribute("POPUP",y);y=t.getAttribute("POPOFFSETX");Z.Utils.stringValidate(y)&&!isNaN(parseFloat(y))&&q.setAttribute("POPOFFSETX",y);y=t.getAttribute("POPOFFSETY");Z.Utils.stringValidate(y)&&!isNaN(parseFloat(y))&&q.setAttribute("POPOFFSETY",y);y=t.getAttribute("EDITABLE");Z.Utils.stringValidate(y)&&q.setAttribute("EDITABLE",y);if(4==Oj&&"polygon"==
q.getAttribute("MEDIA")&&100!=parseFloat(q.getAttribute("ZOOM"))){O=q;t=O.getAttribute("X");y=O.getAttribute("Y");q=100/O.getAttribute("ZOOM");t-=t*q;y-=y*q;if(0<O.getElementsByTagName("POLYGON").length)for(var Bb=O.getElementsByTagName("POLYGON")[0],I=Bb.getElementsByTagName("POINT"),w=[],x=0,J=I.length;x<J;x++)A=parseFloat(I[x].getAttribute("X")),A=isNaN(A)?0:A,A=A*q+t,ja=parseFloat(I[x].getAttribute("Y")),ja=isNaN(ja)?0:ja,ja=ja*q+y,w[w.length]={x:A,y:ja};O.removeChild(Bb);q=Cd();Pb(q,"label");
if(null!=w&&0<w.length){t=q.createElement("POLYGON");y=0;for(I=w.length;y<I;y++)x=q.createElement("POINT"),x.setAttribute("X",w[y].x),x.setAttribute("Y",w[y].y),t.appendChild(x);O.appendChild(t)}q=O}p.appendChild(q)}}v=g[l].getElementsByTagName("NOTES")[0];if("undefined"!==typeof v&&null!==v)for(p=e.createElement("NOTES"),m.appendChild(p),m=v.getElementsByTagName("NOTE"),v=0,u=m.length;v<u;v++)D=Pb(e,"note"),O=m[v],temp=O.getAttribute("ID"),Z.Utils.stringValidate(temp)&&D.setAttribute("ID",temp),
temp=Z.Utils.xmlUnescapeMinimal(unescape(O.getAttribute("NAME"))),Z.Utils.stringValidate(temp)&&D.setAttribute("NAME",temp),temp=Z.Utils.xmlUnescapeMinimal(unescape(O.getAttribute("TEXT"))),Z.Utils.stringValidate(temp)&&D.setAttribute("TEXT",temp),temp=O.getAttribute("USER"),Z.Utils.stringValidate(temp)&&D.setAttribute("USER",temp),temp=O.getAttribute("DATE"),Z.Utils.stringValidate(temp)&&D.setAttribute("DATE",temp),temp=O.getAttribute("EDITABLE"),Z.Utils.stringValidate(temp)&&D.setAttribute("EDITABLE",
temp),p.appendChild(D)}0==g.length&&(m=Pb(e,"poi"),f.appendChild(m));Jc=e;e=Jc.getElementsByTagName("SETUP")[0];ii=e.getAttribute("PANELPOSITION");f=Z.Utils.getResource("z134");Bb=e.getAttribute("INITIALVISIBILITY");xi=f?"0"!=Bb&&"hide"!=Bb:"1"!=Bb&&"show"!=Bb;f=parseFloat(e.getAttribute("MINSCALE"));isNaN(f)||(mh=0!=f?f:1E-5);f=parseFloat(e.getAttribute("MAXSCALE"));isNaN(f)||(nh=0!=f?f:1E4);We=Pj="markup"!=Z.editMode&&"0"!=e.getAttribute("POIVISIBILITY");bd=Qj="0"!=e.getAttribute("LABELVISIBILITY");
Xe=Rj="markup"!=Z.editMode&&"0"!=e.getAttribute("NOTEVISIBILITY");he=Sj="edit"!=Z.editMode&&"0"!=e.getAttribute("COMMENTVISIBILITY");Kh="COMMENT"==e.getAttribute("TOOLTIPSOURCE")?"COMMENT":"TOOLTIP";e=Jc.getElementsByTagName("POI");f=0;for(Bb=e.length;f<Bb;f++){w=Xb("poi");e[f].setAttribute("INTERNALID",w);kf(e[f]);if(g=e[f].getElementsByTagName("LABELS")[0])for(g=g.getElementsByTagName("LABEL"),l=0,k=g.length;l<k;l++)m=Xb("label"),g[l].setAttribute("INTERNALID",m),0<l&&"0"==g[l].getAttribute("ID")&&
"0"==g[l-1].getAttribute("ID")&&g[l].setAttribute("ID",m),g[l].setAttribute("POIID",w),Z.browser==Z.browsers.IE&&11>Z.browserVersion?g[l].parentNode.replaceChild(g[l],hf(g[l])):g[l]=hf(g[l]),n.z495(g[l]);if(g=e[f].getElementsByTagName("NOTES")[0])for(g=g.getElementsByTagName("NOTE"),l=0,k=g.length;l<k;l++)m=Xb("note"),g[l].setAttribute("INTERNALID",m),g[l].setAttribute("POIID",w),$f(g[l])}2==Z.debug&&Oh&&Z.Utils.trace(Z.Utils.getResource("z246"));Jc=me(Jc);n.setStatus("XMLParsedViewport",!0);"markup"==
Z.editMode&&(We=bd=Xe=!1);n.createAnnotationPanel(b);Z.Utils.validateCallback("annotationsLoaded");n.setStatus("annotationsLoadedViewport",!0)};this.createLabelFromParameters=function(a,b,e,f,g,l,k,m,p,v,u,q,D,O,t,y,I,x,J,A,ja,B,w,Bb,ba,W,E,H,M,L,K,Sa,G,fa,Db,N,Bf,P,T,S,V,Mc,X,R,da,Q,Vc){a=Z.Utils.arrayToArrayOfStrings([a,b,e,f,g,l,k,m,p,v,u,q,D,O,t,y,I,x,J,A,ja,B,w,Bb,ba,W,E,H,M,L,K,Sa,G,fa,Db,N,Bf,P,T,S,V,Mc,X,R,da,Q,Vc]);a=Z.Utils.xmlConvertTextToDoc('<LABEL ID="'+a[0]+'" NAME="'+a[1]+'" MEDIATYPE="'+
a[2]+'" MEDIA="'+a[3]+'" AUDIO="'+a[4]+'" X="'+a[5]+'" Y="'+a[6]+'" ZOOM="'+a[7]+'" XSCALE="'+a[8]+'" YSCALE="'+a[9]+'" RADIUS="'+a[10]+'" ZMIN="'+a[11]+'" ZMAX="'+a[12]+'" CLICKURL="'+a[13]+'" URLTARGET="'+a[14]+'" ROLLOVER="'+a[15]+'" CAPTION="'+a[16]+'" COMMENT="'+a[17]+'" TOOLTIP="'+a[18]+'" TEXTCOLOR="'+a[19]+'" BACKCOLOR="'+a[20]+'" LINECOLOR="'+a[21]+'" FILLCOLOR="'+a[22]+'" TEXTVISIBLE="'+a[23]+'" BACKVISIBLE="'+a[24]+'" LINEVISIBLE="'+a[25]+'" FILLVISIBLE="'+a[26]+'" CAPTIONPOSITION="'+a[27]+
'" SAVED="'+a[28]+'" INTERNALID="'+a[29]+'" POIID="'+a[30]+'" POLYGONCLOSED="'+a[33]+'" SHOWFOR="'+a[35]+'" TRANSITION="'+a[36]+'" CHANGEFOR="'+a[37]+'" ROTATION="'+a[38]+'" CATEGORY="'+a[39]+'" EDITABLE="'+a[40]+'" POPUP="'+a[41]+'" POPOFFSETX="'+a[42]+'" POPOFFSETY="'+a[43]+'" USER="'+a[44]+'" INITIALS="'+a[45]+'" DATE="'+a[46]+'" ></LABEL>');b=a.getElementsByTagName("LABEL")[0];Z.Utils.stringValidate(b.getAttribute("INTERNALID"))||b.setAttribute("INTERNALID",Xb("label"));Z.Utils.stringValidate(Sa)&&
(Sa=Z.Utils.xmlConvertTextToDoc(Sa).getElementsByTagName("CAPTION")[0].innerHTML,e=a.createElement("CAPTION"),e.innerHTML=Sa,b.appendChild(e));Sa=G;Z.Utils.stringValidate(Sa)&&(Sa=Z.Utils.xmlConvertTextToDoc(Sa).getElementsByTagName("TOOLTIP")[0].innerHTML,G=a.createElement("TOOLTIP"),G.innerHTML=Sa,b.appendChild(G));if(null!=Db){G=a.createElement("POLYGON");Sa=0;for(e=Db.length;Sa<e;Sa++)f=a.createElement("POINT"),f.setAttribute("X",Db[Sa].x),f.setAttribute("Y",Db[Sa].y),G.appendChild(f);b.appendChild(G)}n.z495(b,
!0)};this.createLabelFromJSON=function(a,b){var e=Z.Utils.jsonConvertObjectToXMLText(a),e=Z.Utils.xmlConvertTextToDoc(e).getElementsByTagName("LABEL")[0];n.z495(e,!0)};this.z495=function(a,b){b&&(a=wd(a,"label"));var e=a.getAttribute("INTERNALID"),f=a.getAttribute("EDITABLE"),f="0"!=f&&"false"!=f,g=Z.Utils.arrayIndexOfObjectValue(xa,"value",e);-1==g&&(g=xa.length);xa[g]={text:a.getAttribute("NAME"),value:e,poiID:a.getAttribute("POIID"),editable:f};n.createHotspotFromXML(a)};this.modifyLabel=function(a,
b,e,f,g){n.modifyHotspot(a.toString(),b,e,f,g)};this.createAnnotationPanel=function(a){var b=a.toString();if(Z.ToolbarDisplay&&Z.Toolbar.getInitialized()){var e=Z.Toolbar.getSkinArray(),f=Z.Toolbar.getSkinSizes();Z["AnnotationPanelDisplay"+b]=Z.Utils.createContainerElement("div","AnnotationPanelDisplay"+b,"inline-block","absolute","hidden","1px","1px","1px","1px","solid","1px","transparent none","0px","0px","normal","default");ue=Ia=Z["AnnotationPanelDisplay"+b];ve=ue.style;Z.ViewerDisplay.appendChild(Ia);
ve.zIndex=(Z.baseZIndex+14).toString();var g=Z.Utils.createContainerElement("div","annotationPanelBackground"+b,"inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal");Ia.appendChild(g);var l=parseInt(Z.Utils.getResource("z63"),10),k=[{text:Z.Utils.getResource("z20"),value:"0"}];if("undefined"===typeof la||null===la){var m=Z.Utils.createContainerElement("div","labelPOITextBox"+b,"inline-block","absolute","hidden","1px","1px","0px","0px","none",
"0px","transparent none","0px","0px","nowrap",null,!0),p=document.createTextNode(Z.Utils.getResource("z410"));m.appendChild(p);la=new Z.Utils.createSelectElement("poiList"+b,"",k,1,1,0,l,"hidden",of,"change");Ia.appendChild(m);Ia.appendChild(la);"markup"!=Z.editMode&&(m=new Z.Utils.Button("buttonPOIGo"+b,null,Z.skinPath,e[30],e[31],e[32],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"TIP_POIGO"),Ia.appendChild(m.elmt))}else Z.Utils.arrayClear(Ha);"undefined"===typeof ab||null===ab?("markup"!=
Z.editMode&&(m=Z.Utils.createContainerElement("div","labelLabelTextBox"+b,"inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0),p=document.createTextNode(Z.Utils.getResource("z408")),m.appendChild(p),Ia.appendChild(m)),ab=new Z.Utils.createSelectElement("labelList"+b,"",k,1,1,0,l,"hidden",gg,"change"),Ia.appendChild(ab),e=new Z.Utils.Button("buttonLabelGo"+b,null,Z.skinPath,e[30],e[31],e[32],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,
"TIP_LABELGO"),Ia.appendChild(e.elmt),he&&(e="markup"!=Z.editMode,m=Z.Utils.getResource("CONTENT_ANNOTATIONPLACEHOLDERCOMMENTTEXT"),e=Z.Utils.createTextElement("commentTextElement"+b,m,"1px","1px","1px","1px","0px","solid","1px",e,"verdana","1px","none",null,1,"auto","auto",null),Z.Utils.addEventListener(e.firstChild,"focus",od),Z.Utils.addEventListener(e.firstChild,"blur",Yc),Ia.appendChild(e))):(Z.Utils.arrayClear(xa),Z.Utils.arrayClear(wb));if("undefined"===typeof hb||null===hb){if(e=Z.Utils.createContainerElement("div",
"labelNoteTextBox"+b,"inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0),m=document.createTextNode(Z.Utils.getResource("z409")),e.appendChild(m),hb=new Z.Utils.createSelectElement("noteList"+b,"",k,1,1,0,l,"hidden",hg,"change"),l=Z.Utils.getResource("z21"),l=Z.Utils.createTextElement("noteTextElement"+b,l,"1px","1px","1px","1px","0px","solid","1px",!0,"verdana","1px","none",null,1,"auto","auto",null),Z.Utils.addEventListener(l.firstChild,
"focus",od),Z.Utils.addEventListener(l.firstChild,"blur",Yc),Ia.appendChild(e),Ia.appendChild(hb),Ia.appendChild(l),b=document.getElementById("textBoxFor-noteTextElement"+b))b.style.visibility="hidden"}else Z.Utils.arrayClear(cb),Z.Utils.arrayClear(wc);null===Z.editMode?(dg(f,a),n.getStatus("XMLParsedViewport")&&Ge()):ag(a);Z.Utils.addEventListener(g,"mousedown",Z.Utils.preventDefault)}else window.setTimeout(function(){n.createAnnotationPanel(a)},100)};this.calculateAnnotationPanelDimensions=function(a,
b,e,f){var g=parseInt(Z.Utils.getResource("z65"),10),l=parseInt(Z.Utils.getResource("z61"),10);"markup"==Z.editMode?(g-=20,l+=115,a||(l-=24),b||(l-=24),e||(l-=115),f||(l-=80)):null!==Z.editMode?(l+=244,a||(l-=50),b||(l-=215),e||(l-=140),f||(l-=80)):(a||(l-=24),b||(l-=24),e||(l-=115),f||(l-=80),a||e||f||(l-=9));this.w=g;this.h=l};this.calculateAnnotationPanelCoords=function(a,b,e,f,g){if(0==Z.annotationPanelVisible)e=a=-1E3;else switch(a){case "0":e=a=-1E3;break;case "1":e=a=15;break;case "2":a=f-
b-15;e=15;2==Z.trackingPanelPosition&&(e+=20);2==Z.imageSetListPosition&&(e+=20);break;case "3":a=f-b-15;e=0<Z.toolbarVisible&&8!=Z.toolbarVisible?g-e-15:g-15;break;case "4":a=15;e=0<Z.toolbarVisible&&8!=Z.toolbarVisible?g-e-15:g-15;break;default:a=f-b-15,e=15}return new Z.Utils.Point(a,e)};this.sizeAndPositionAnnotationPanel=function(a,b,e,f,g){"undefined"!==typeof b&&null!==b&&(a.width=b+"px");"undefined"!==typeof e&&null!==e&&(a.height=e+"px");"undefined"!==typeof f&&null!==f&&(a.left=f+"px");
"undefined"!==typeof g&&null!==g&&(a.top=g+"px")};this.clearAnnotationPanel=function(a){ue&&(hb=ab=la=null,Z.Utils.deleteDiv("AnnotationPanelDisplay"+a))};this.setLabelMaskByDisplayID=function(a,b){var e=[];e[0]=a;n.setHotspotMaskByDisplayList(e,b)};this.setLabelMaskByDisplayList=function(a,b){n.setHotspotMaskByDisplayList(a,b)};this.setHotspotMaskByDisplayList=function(a,b){if(Ab&&"undefined"!==typeof a&&null!==a&&0<a.length)if(Z.maskingSelection){var e=function(){setMask(a,b);Z.Viewport.maskFadeTimeoutHandler("in");
Z.clearCallback("maskClear",e)};Z.setCallback("maskClear",e);Z.Viewport.clearMask()}else setMask(a,b),Z.Viewport.maskFadeTimeoutHandler("in")};setMask=function(a,b){("undefined"===typeof a||null===a)&&"undefined"!==typeof pf&&null!==pf&&0<pf.length&&(a=pf);if("undefined"!==typeof a&&null!==a&&0<a.length){pf=a.slice(0);if("undefined"===typeof b||null===b)b=!1;Ab&&(Ab.width=sa.width,Ab.height=sa.height,$b.width=Ka.width,$b.height=Ka.height,$b.left=Ka.left,$b.top=Ka.top,Wa.restore(),Wa.save(),Wa.translate(tc,
zc));mf();for(var e=a,f=b,g=0,l=A.length;g<l;g++){var k=A[g],m=f?k.internalID:k.id,p=Z.Utils.arrayMap(e,String);if(-1!=Z.Utils.arrayIndexOf(p,m))if(Z.useCanvas){if(k.visibility||k.rollover||rollover){Wa.save();Wa.globalCompositeOperation="xor";Wa.translate((k.x-Z.imageX)*Z.imageZ,(k.y-Z.imageY)*Z.imageZ);Wa.lineWidth=1E-6;Wa.strokeStyle=k.lineColor;Wa.globalAlpha=1;var p=Pa/ad,v=n.getZoom(),m=k.xScale/100/p*v,p=k.yScale/100/p*v;1!=m&&1!=p&&Wa.scale(m,p);m=k.x;p=k.y;Wa.beginPath();if(k.polygonPts){var v=
k.polygonPts.slice(0),u=v[0].x-m,q=v[0].y-p;Wa.moveTo(u,q);for(var D=1,O=v.length;D<O;D++)Wa.lineTo(v[D].x-m,v[D].y-p);"freehand"!=k.mediaType&&k.polyClosed&&(Wa.lineTo(u,q),Wa.closePath())}else v=100/k.z*k.iW,u=100/k.z*k.iH,m=0,p=-1==k.media.indexOf("triangle")?0:.23*k.iH,k=Math.max(v,u)/2*1.2,Wa.arc(m,p,k,0,2*Math.PI);Wa.fill();Wa.restore()}}else mi||(Z.Utils.showMessage(Z.Utils.getResource("z9")),mi=!0)}}};this.clearMask=function(){Ab&&Z.Viewport.maskFadeTimeoutHandler("out")};this.maskFadeTimeoutHandler=
function(a){if(Ab){Z.maskingSelection||null===a||(Z.maskingSelection=!0,$b.display="inline-block");if("in"==a)Z.maskOpacity+=Nj,1<Z.maskOpacity&&(Z.maskOpacity=1,a=null,Z.Utils.validateCallback("maskSet"));else if("out"==a||"outIn"==a)Z.maskOpacity-=Nj,0>=Z.maskOpacity&&(Z.maskOpacity=0,"outIn"==a?a="In":(Z.maskingSelection=!1,Z.Utils.clearDisplay(Ab),$b.display="none",a=null,Z.Utils.validateCallback("maskClear")));Z.Utils.setOpacity(Ab,Z.maskOpacity);null!==a&&0<Z.maskOpacity&&1>Z.maskOpacity?Z.maskFadeTimeout=
window.setTimeout(function(){Z.Viewport.maskFadeTimeoutHandler(a)},50):(window.clearTimeout(Z.maskFadeTimeout),Z.maskFadeTimeout=null)}else a=null,Z.maskingSelection=!1};this.goToPOICurrent=function(){var a=n.getCurrentPOIID();a&&!isNaN(parseInt(a),10)&&n.goToPOIByID(a)};this.goToPOIByID=function(a){var b=Z.Utils.arrayIndexOfObjectValue(Ha,"value",a);if(-1!=b){var e;e=Ha[b].x;a="center"==e?Z.imageCtrX:parseFloat(e);e=Ha[b].y;var f="center"==e?Z.imageCtrY:parseFloat(e);e=Ha[b].z;b="-1"==e?Z.fitZ:parseFloat(e);
n.getStatus("annotationPanelInitializedViewport")?n.zoomAndPanToView(a,f,b/100):n.setView(a,f,b/100)}};this.getCurrentPOIID=function(){var a=null;0<la.length&&(a=la[la.selectedIndex].value);return a};this.getPOIEditable=function(a){var b=Z.editAdmin;b||(a=Z.Utils.arrayIndexOfObjectValue(Ha,"value",a),-1!=a&&(b=Ha[a].editable));return b};this.goToLabelCurrent=function(){n.goToLabelByID(null,X)};this.goToLabelByID=function(a,b,e){"undefined"!==typeof b&&null!==b?X=b:"undefined"!==typeof a&&null!==a&&
(a="undefined"!==typeof e&&null!==e&&e?Z.Utils.arrayIndexOfObjectValue(A,"internalID",a):Z.Utils.arrayIndexOfObjectValue(A,"id",a),X=-1!=a?A[a]:null);X&&(e=X.x,a="center"==e?Z.imageCtrX:parseFloat(e),e=X.y,b="center"==e?Z.imageCtrY:parseFloat(e),e=X.z,e="-1"==e?Z.fitZ:parseFloat(e),n.zoomAndPanToView(a,b,e/100))};this.getCurrentLabel=function(){return X};this.getCurrentLabelID=function(){var a=null;X&&(a=X.internalID);return a};this.getLabelEditable=function(a){var b=Z.editAdmin;b||(a=Z.Utils.arrayIndexOfObjectValue(xa,
"value",a),-1!=a&&(b=xa[a].editable,b=!("undefined"!==typeof b&&0==b)));return b};this.setCurrentLabel=function(a,b){var e=b?Z.Utils.arrayIndexOfObjectValue(A,"internalID",a):Z.Utils.arrayIndexOfObjectValue(A,"id",a);-1!=e&&(X=A[e],K=X.internalID,Ob())};this.getLabelXMLText=function(a){var b=null,b=null;a=Z.Utils.arrayIndexOfObjectValue(A,"internalID",a);-1!=a&&(b=n.convertLabelToXML(A[a]),b=Z.Utils.xmlConvertDocToText(b));return b};this.getLabelJSONObject=function(a,b){var e=null,f=b?Z.Utils.arrayIndexOfObjectValue(A,
"internalID",a):Z.Utils.arrayIndexOfObjectValue(A,"id",a);-1!=f&&(e=n.convertLabelToJSON(A[f]));return e};this.getCurrentNoteID=function(){var a=null;0<hb.length&&(a=hb[hb.selectedIndex].value);return a};this.getNoteEditable=function(a){var b=Z.editAdmin;b||(a=Z.Utils.arrayIndexOfObjectValue(cb,"value",a),-1!=a&&(b=cb[a].editable));return b};this.toggleEditMode=function(){var a=!1;null!==Z.editMode?(We=Pj,bd=Qj,he=Sj,Xe=Rj,Z.editMode=null,Z.measureVisible=!1,n.saveAnnotations(!0,!0,null),a=!0):"undefined"!==
typeof Z.parameters&&null!==Z.parameters&&("undefined"===Z.parameters.zEditMode||"1"!=Z.parameters.zEditMode&&"2"!=Z.parameters.zEditMode?"undefined"===typeof Z.parameters.zMarkupMode||"1"!=Z.parameters.zMarkupMode&&"2"!=Z.parameters.zMarkupMode||(We=bd=Xe=!1,Z.editMode="markup",a=!0):(Z.editMode="edit",a=!0),Z.measureVisible="undefined"!==typeof Z.parameters.zEditMode&&"0"==Z.parameters.zMeasureVisible);Z.Toolbar&&a&&Z.Toolbar.toggleAnnotationPanelMode(Z.editMode)};this.setEditModeLabel=function(a,
b,e,f){var g=Ta.toString(),l=Z.labelMode;Z.labelMode=a;Z.Utils.removeEventListener(document,"mousemove",nb);Z.Utils.removeEventListener(document,"touchmove",nb);"view"==a&&null===Z.editMode||Z.Utils.showMessage(Z.Utils.getResource("ALERT_HOWTOEDITMODE"+a.toUpperCase()),!1,Z.messageDurationLong,"center",!0);Z.overlayMessage&&(Z.overlayMessage.parentNode.style.display="none");if("edit"==Z.editMode&&"editLabel"==Z.editing)if(n.modifyHotspot(K,"mediaType",a,!0,!0),"freehand"==a)"freehand"!=l&&n.modifyHotspot(K,
"polygonPts",null,!0,!0),n.modifyHotspot(K,"image",null,!0,!0),n.modifyHotspot(K,"closed","false",!0,!0),n.modifyHotspot(K,"media","polygon",!1,!0);else if("text"==a)n.modifyLabel(K,"image",null,!0,!0),n.modifyLabel(K,"captionPosition","5",!0,!0),n.modifyLabel(K,"media",null,!1,!0);else if("icon"==a){if(e=document.getElementById("labelIconList"+g)){f&&"icon"!=l&&0<e.selectedIndex&&(f=!0);e=e[e.selectedIndex].value;switch(e){case "shim":e=Z.labelIconsInternal?"circle":jc+"/circle.png";break;case "External Graphics File":break;
default:e=Z.labelIconsInternal?e:jc+"/"+e}n.modifyHotspot(K,"media",e,!1,!0)}}else if("rectangle"==a){if(X&&X.polygonPts&&4==X.polygonPts.length&&("polygon"==l||"measure"==l)?(e=Yd(X.polygonPts,0),n.modifyHotspot(K,"polygonPts",e,!0,!0),e=Yd(X.polygonPts,1),n.modifyHotspot(K,"polygonPts",e,!0,!0),e=Yd(X.polygonPts,2),n.modifyHotspot(K,"polygonPts",e,!0,!0),e=Yd(X.polygonPts,3),n.modifyHotspot(K,"polygonPts",e,!0,!0)):n.modifyHotspot(K,"polygonPts",null,!0,!0),n.modifyHotspot(K,"image",null,!0,!0),
n.modifyHotspot(K,"media","polygon",!1,!0),e=X&&X.polygonPts&&0<X.polygonPts.length)e=new Z.Utils.Point(X.polygonPts[0].x,X.polygonPts[0].y),Xd(K,e)}else"polygon"==a?("view"!=l&&"rectangle"!=l&&"polygon"!=l&&"measure"!=l&&n.modifyHotspot(K,"polygonPts",null,!0,!0),n.modifyHotspot(K,"image",null,!0,!0),n.modifyHotspot(K,"media","polygon",!1,!0)):"measure"==a&&((e=X&&X.polygonPts&&0<X.polygonPts.length)&&"rectangle"!=l&&"polygon"!=l&&"measure"!=l&&n.modifyHotspot(K,"polygonPts",null,!0,!0),n.modifyHotspot(K,
"image",null,!0,!0),n.modifyHotspot(K,"media","polygon",!1,!0),e&&(e=new Z.Utils.Point(X.polygonPts[0].x,X.polygonPts[0].y),Xd(K,e)));Z.Toolbar&&0!=Z.annotationPanelVisible&&(null!==Z.editMode?(e="view"==a?"buttonViewMode"+g:"buttonEditMode"+Z.Utils.stringUpperCaseFirstLetter(a)+g,Z.Toolbar.positionButtonBorder(e)):Z.measureVisible&&(e=document.getElementById("buttonMeasure"+g),l=document.getElementById("buttonMeasureExit"+g),e&&l&&(e.style.display="measure"==Z.labelMode?"none":"inline-block",l.style.display=
"measure"==Z.labelMode?"inline-block":"none")),n.toggleLabelIconPicker("icon"==a&&!f),b&&"icon"==a&&"undefined"!==typeof iconMedia&&Z.Utils.stringValidate(iconMedia)&&(e=document.getElementById("labelIconList"+g)))&&(a=iconMedia.lastIndexOf("/")+1,b=iconMedia.lastIndexOf("."),-1!=a&&-1!=b&&(a=iconMedia.substring(a,b).toLowerCase(),a=Z.Utils.arrayIndexOfObjectValueSubstring(e,"value",a,null,!0),-1!=a&&(e.selectedIndex=a)));Th=qb=null;ig=!1;Qb=!0;da?Bd():Ob()};this.getEditability=function(a,b){var e=
!0,f=!n.getPOIEditable(n.getCurrentPOIID()),g=!n.getLabelEditable(n.getCurrentLabelID()),l=!n.getNoteEditable(n.getCurrentNoteID());f?"poi"==a&&"edit"==b?(Z.Utils.showMessage(Z.Utils.getResource("ALERT_NONEDITABLEPOI"),!1,Z.messageDurationShort,"center"),e=!1):"label"==a?(Z.Utils.showMessage(Z.Utils.getResource("ALERT_NONEDITABLELABELPOI"),!1,Z.messageDurationShort,"center"),e=!1):"note"==a&&(Z.Utils.showMessage(Z.Utils.getResource("ALERT_NONEDITABLENOTEPOI"),!1,Z.messageDurationShort,"center"),e=
!1):"label"==a&&"edit"==b&&g?(Z.Utils.showMessage(Z.Utils.getResource("ALERT_NONEDITABLELABEL"),!1,Z.messageDurationShort,"center"),e=!1):"note"==a&&"edit"==b&&l&&(Z.Utils.showMessage(Z.Utils.getResource("ALERT_NONEDITABLENOTE"),!1,Z.messageDurationShort,"center"),e=!1);return e};this.toggleLabelColorPicker=function(a){var b=document.getElementById("buttonContainerLabelColors"+(Z.annotationFileShared?"0":Ta.toString()));if(b){var e="inline-block"==b.style.display;b.style.display=("undefined"!==typeof a&&
null!==a?a:!e)?"inline-block":"none"}};this.setDrawingColor=function(a,b){var e=Z.annotationFileShared?"0":Ta.toString();"markup"!=Z.editMode&&n.toggleLabelColorPicker(!1);var f;switch(a){case "buttonColor0"+e:f="#FFFFFF";break;case "buttonColor1"+e:f="#FFFF00";break;case "buttonColor2"+e:f="#00FFFF";break;case "buttonColor3"+e:f="#800080";break;case "buttonColor4"+e:f="#008000";break;case "buttonColor5"+e:f="#FF0000";break;case "buttonColor6"+e:f="#0000FF";break;case "buttonColor7"+e:f="#000000"}Hi=
lineStrokeColor=f;if(Z.markupMode||Z.editMode)Ae=f;e="#FFFFFF"==f?"#000000":"#FFFFFF";b||null===K||"edit"!=Z.editMode||"addLabel"!=Z.editing&&"editLabel"!=Z.editing||(n.modifyHotspot(K,"textColor",f,!0,!0),n.modifyHotspot(K,"backColor",e,!0,!0),n.modifyHotspot(K,"lineColor",f,!1,!0))};this.toggleLabelIconPicker=function(a){var b=document.getElementById("buttonContainerLabelIcons"+Ta.toString());if(b){var e="inline-block"==b.style.display;b.style.display=("undefined"!==typeof a&&null!==a?a:!e)?"inline-block":
"none"}};this.addNewPOI=function(){n.getEditability("poi","add")&&(ph=0<la.options.length?la.options[la.selectedIndex].value:0,Rb("save","pois"),jf(),Pc(Ha[Ha.length-1].value),Jb("poi","addPOI"))};this.editCurrentPOI=function(){n.getEditability("poi","edit")&&(ph=la.options[la.selectedIndex].value,Rb("save","pois"),Jb("poi","editPOI"))};this.deleteCurrentPOI=function(){Jb("poi",null);if("undefined"!==typeof la&&null!==la&&0<la.options.length){var a=-1!=la.selectedIndex?la.selectedIndex:0,b=la[la.selectedIndex].value,
b=Z.Utils.arrayIndexOfObjectValue(Ha,"value",b);-1!=b&&(Ha=Z.Utils.arraySplice(Ha,b,1));0<Ha.length?(b=Ha.length-1,b=Ha[a<=b?a:b].value):b=null;Pc(b);ph=0<la.options.length?la.options[la.selectedIndex].value:0;Rb("save","pois")}n.saveAnnotations(!0,!1,"poi")};this.cancelEditsPOI=function(){Jb("poi",null);Z.Utils.showMessage(Z.Utils.getResource("z2"),!1,Z.messageDurationVeryShort,"center");Rb("rollback","pois");Pc(ph)};this.saveEditsPOI=function(a){var b=n.getStatus("XMLParsedViewport")&&null!==Z.editing&&
Z.Viewport.verifyEditsUnsaved();a||Jb("poi",null);b&&(ph=la.options[la.selectedIndex].value,n.saveAnnotations(!0,!0,"poi"),Rb("save","pois"),Z.Utils.validateCallback("poiSaved"))};this.addNewLabel=function(){n.getEditability("label","add")&&(eg=0<ab.options.length?ab.options[ab.selectedIndex].value:0,Rb("save","labels"),K=null,Jb("labelPartial","addLabel"))};this.editCurrentLabel=function(){if(n.getEditability("label","edit")&&(eg=K,Rb("save","labels"),Jb("label","editLabel"),null!==X)){var a=X.media,
b=X.mediaType;"view"!=Z.labelMode&&null!==Z.editing&&n.setEditModeLabel(b,!0,a,!0);var e=-1!=a.indexOf("/circle.")||-1!=a.indexOf("/square.")||-1!=a.indexOf("/triangle.")||-1!=a.indexOf("/arrowDownLeft.")||-1!=a.indexOf("/arrowDownRight.")||-1!=a.indexOf("/arrowUpLeft.")||-1!=a.indexOf("/arrowUpRight.")||-1!=a.indexOf("/arrowUp.")||-1!=a.indexOf("/arrowDown.")||-1!=a.indexOf("/arrowLeft.")||-1!=a.indexOf("/arrowRight.")||-1!=a.indexOf("/lineHorizontal.")||-1!=a.indexOf("/lineVertical.");(!("counter"!=
b&&"icon"!=b||a&&"External Graphics File"==a)&&("counter"==a||"circle"==a||"square"==a||"triangle"==a||"arrowDown"==a||"arrowDownLeft"==a||"arrowLeft"==a||"arrowUpLeft"==a||"arrowUp"==a||"arrowUpRight"==a||"arrowRight"==a||"arrowDownRight"==a||"lineHorizontal"==a||"lineVertical"==a||e&&Z.labelIconsInternal)||a&&"polygon"==a)&&Bd()}};this.deleteCurrentLabel=function(){Z.Utils.removeEventListener(document,"mousemove",nb);Z.Utils.removeEventListener(document,"touchmove",nb);"markup"!=Z.editMode&&n.toggleLabelColorPicker(!1);
n.toggleLabelIconPicker(!1);"markup"!=Z.editMode&&Jb("label",null);"undefined"!==typeof ab&&null!==ab&&0<ab.options.length&&n.deleteLabel(ab[ab.selectedIndex].value)};this.deleteLabel=function(a,b){if("undefined"!==typeof b&&null!==b&&!b)for(var e=0,f=A.length;e<f;e++)if(A[e].id==a){a=A[e].internalID;break}"undefined"!==typeof a&&null!==a&&"undefined"!==typeof xa&&null!==xa&&(e=a.toString(),f=Z.Utils.arrayIndexOfObjectValue(xa,"value",e),-1!=f&&(xa=Z.Utils.arraySplice(xa,f,1),f=Z.Utils.arrayIndexOfObjectValue(wb,
"value",e),-1!=f&&(wb=Z.Utils.arraySplice(wb,f,1)),n.deleteHotspot(e,null,!0),0<wb.length&&"undefined"!==typeof ab&&null!==ab&&0<ab.options.length?(e=-1!=ab.selectedIndex?ab.selectedIndex:0,f=wb.length-1,a=wb[e<=f?e:f].value):a=null,tf||Z.tracking?Bd():(nc(la.options[la.selectedIndex].value,a),eg=0<ab.options.length?ab.options[ab.selectedIndex].value:"0",Rb("save","labels"),n.saveAnnotations(!0,!1,"label"))))};this.deleteAllLabels=function(){wa&&("undefined"!==typeof A&&Z.Utils.arrayClear(A),"undefined"!==
typeof Ac&&Z.Utils.arrayClear(Ac),"undefined"!==typeof Xc&&Z.Utils.arrayClear(Xc),null!=Oa?"undefined"!==typeof $c&&Z.Utils.arrayClear($c):("undefined"!==typeof Ha&&Z.Utils.arrayClear(Ha),"undefined"!==typeof xa&&Z.Utils.arrayClear(xa),"undefined"!==typeof wb&&Z.Utils.arrayClear(wb),"undefined"!==typeof cb&&Z.Utils.arrayClear(cb),"undefined"!==typeof wc&&Z.Utils.arrayClear(wc)));Ob()};this.cancelEditsLabel=function(){Z.Utils.removeEventListener(document,"mousemove",nb);Z.Utils.removeEventListener(document,
"touchmove",nb);"markup"!=Z.editMode&&n.toggleLabelColorPicker(!1);n.toggleLabelIconPicker(!1);Jb("label",null);Z.Utils.showMessage(Z.Utils.getResource("z2"),!1,Z.messageDurationVeryShort,"center");Rb("rollback","labels");Qb=!0;nc(la.options[la.selectedIndex].value,eg);Ob()};this.saveEditsLabel=function(a,b,e){"markup"!=Z.editMode&&n.toggleLabelColorPicker(!1);n.toggleLabelIconPicker(!1);if(Z.browser==Z.browsers.IE&&!Z.fullView){var f=Ta.toString(),g=X.internalID,l=document.getElementById("labelNameTextElement"+
f);if(l){var k=ab.selectedIndex;wb[k].text=l.value;var m=n.getCurrentPOIID(),k=ab[k].value,m=Z.Utils.arrayIndexOfObjectTwoValues(xa,"poiID",m,null,"value",k);-1!=m&&(xa[m].text=l.value);xa.sort(Oc);wb.sort(Oc);Z.Utils.updateSelectElement(ab,wb,k);k=Z.Utils.arrayIndexOfObjectValue(A,"internalID",g);-1!=k&&(A[k].name=l.value)}if(l=document.getElementById("captionTextElement"+f))property=(l=l.value)&&-1!=l.indexOf("<CAPTION>")?"captionHTML":"caption",Z.viewportCurrent.modifyHotspot(g,property,l,!1,!0);
if(f=document.getElementById("commentTextElement"+f))k=Z.Utils.arrayIndexOfObjectValue(A,"internalID",g),-1!=k&&(A[k].comment=f.value)}g=Z.saveImageHandlerProvided||n.getStatus("XMLParsedViewport")&&null!==Z.editing&&Z.Viewport.verifyEditsUnsaved();a||"markup"==Z.editMode||(Z.Utils.removeEventListener(document,"mousemove",nb),Z.Utils.removeEventListener(document,"touchmove",nb),Jb("label",null));b&&n.setEditModeLabel("view",!1);g&&(eg=0<ab.options.length?ab.options[ab.selectedIndex].value:0,n.saveAnnotations(b,
e,"label"),Rb("save","labels"),Qb=!0,nc(la.options[la.selectedIndex].value,eg,!0),Z.Utils.validateCallback("labelSaved"),Z.Utils.validateCallback("labelSavedGetJSONObject"));Ob()};this.addNewNote=function(){if(n.getEditability("note","add")){ei=0<hb.options.length?hb.options[hb.selectedIndex].value:0;Rb("save","notes");var a=Z.Utils.arrayToArrayOfStrings([void 0,void 0,void 0,void 0,void 0,void 0]),a=Z.Utils.xmlConvertTextToDoc('<NOTE ID="'+a[0]+'" NAME="'+a[1]+'" TEXT="'+a[2]+'" INTERNALID="'+a[3]+
'" POIID="'+a[4]+'" EDITABLE="'+a[5]+'" ></NOTE>').getElementsByTagName("NOTE")[0];$f(a,!0);a=cb[cb.length-1];Hd(a.poiID,a.value);Jb("note","addNote")}};this.editCurrentNote=function(){n.getEditability("note","edit")&&(ei=hb.options[hb.selectedIndex].value,Rb("save","notes"),Jb("note","editNote"))};this.deleteCurrentNote=function(){Jb("note",null);if("undefined"!==typeof hb&&null!==hb&&0<hb.options.length){var a=-1!=hb.selectedIndex?hb.selectedIndex:0,b=hb[hb.selectedIndex].value,b=Z.Utils.arrayIndexOfObjectValue(cb,
"value",b);-1!=b&&(cb=Z.Utils.arraySplice(cb,b,1));0<cb.length?(b=cb.length-1,b=cb[a<=b?a:b].value):b=null;"markup"!=Z.editMode&&Hd(la.options[la.selectedIndex].value,b);ei=0<hb.options.length?hb.options[hb.selectedIndex].value:0;Rb("save","notes")}n.saveAnnotations(!0,!1,"note")};this.cancelEditsNote=function(){Jb("note",null);Z.Utils.showMessage(Z.Utils.getResource("z2"),!1,Z.messageDurationVeryShort,"center");Rb("rollback","notes");Hd(la.options[la.selectedIndex].value,ei)};this.saveEditsNote=
function(a){var b=n.getStatus("XMLParsedViewport")&&null!==Z.editing&&Z.Viewport.verifyEditsUnsaved();a||Jb("note",null);b&&(ei=hb.options[hb.selectedIndex].value,n.saveAnnotations(!0,!1,"note"),Rb("save","notes"),Z.Utils.validateCallback("noteSaved"))};this.deleteAllAnnotations=function(){var a=Z.Utils.xmlConvertTextToDoc("<ZAS></ZAS>"),b=a.getElementsByTagName("ZAS")[0],e=Pb(a,"setup");b.appendChild(e);var b=Jc.getElementsByTagName("SETUP")[0],f=b.getAttribute("PANELPOSITION");Z.Utils.stringValidate(f)&&
e.setAttribute("PANELPOSITION",f);var g,f=b.getAttribute("INITIALVISIBILITY");Z.Utils.stringValidate(f)&&(g=Z.Utils.getResource("z134")?"0"!=f&&"hide"!=f?"1":"0":"1"!=f&&"show"!=f?"0":"1",e.setAttribute("INITIALVISIBILITY",g));f=b.getAttribute("POIVISIBILITY");Z.Utils.stringValidate(f)&&(g="1"==Z.Utils.getResource("z66")?"0"!=f&&"hide"!=f?"1":"0":"1"!=f&&"show"!=f?"0":"1",e.setAttribute("POIVISIBILITY",g));f=b.getAttribute("LABELVISIBILITY");Z.Utils.stringValidate(f)&&(f="1"==Z.Utils.getResource("z52"),
e.setAttribute("LABELVISIBILITY",f?"0"!=f&&"hide"!=f?"1":"0":"1"!=f&&"show"!=f?"0":"1"));f="1"==b.getAttribute("NOTEVISIBILITY");Z.Utils.stringValidate(f)&&(g=Z.Utils.getResource("z60")?"0"!=f&&"hide"!=f?"1":"0":"1"!=f&&"show"!=f?"0":"1",e.setAttribute("NOTEVISIBILITY",g));g=setupSource.getAttribute("COMMENTVISIBILITY");Z.Utils.stringValidate(f)&&(g="1"==Z.Utils.getResource("DEFAULT_ANNOTATIONCOMMENTVISIBILITY")?"0"!=g&&"hide"!=g?"1":"0":"1"!=g&&"show"!=g?"0":"1",setupNew.setAttribute("COMMENTVISIBILITY",
g));f=b.getAttribute("MINSCALE");Z.Utils.stringValidate(f)&&!isNaN(parseFloat(f))&&0<=parseFloat(f)&&e.setAttribute("MINSCALE",f);f=b.getAttribute("MAXSCALE");Z.Utils.stringValidate(f)&&!isNaN(parseFloat(f))&&0<=parseFloat(f)&&e.setAttribute("MAXSCALE",f);wa&&("undefined"!==typeof A&&Z.Utils.arrayClear(A),"undefined"!==typeof Ac&&Z.Utils.arrayClear(Ac),"undefined"!==typeof Xc&&Z.Utils.arrayClear(Xc),null!=Oa?"undefined"!==typeof $c&&Z.Utils.arrayClear($c):("undefined"!==typeof Ha&&Z.Utils.arrayClear(Ha),
"undefined"!==typeof xa&&Z.Utils.arrayClear(xa),"undefined"!==typeof wb&&Z.Utils.arrayClear(wb),"undefined"!==typeof cb&&Z.Utils.arrayClear(cb),"undefined"!==typeof wc&&Z.Utils.arrayClear(wc)));Z.Viewport.parseAnnotationsXML(a);Ob()};this.saveLabel=function(a,b){if("undefined"!==typeof b&&null!==b&&!b)for(var e=0,f=A.length;e<f;e++)if(A[e].id==a){a=A[e].internalID;break}"undefined"!==typeof a&&null!==a&&(e=Z.Utils.arrayIndexOfObjectValue(A,"internalID",a),e=-1!=e?A[e]:null)&&(f=Jc,Jc=n.convertLabelToXML(e),
n.saveAnnotations(!0,!0,"label"),Jc=f)};this.convertLabelToXML=function(a){var b,e=Cd(),f=Pb(e,"label");f.setAttribute("ID",a.id);f.setAttribute("NAME",Z.Utils.xmlEscapeMinimal(a.name));f.setAttribute("MEDIATYPE",a.mediaType);f.setAttribute("MEDIA",a.media);f.setAttribute("X",a.x);f.setAttribute("Y",a.y);f.setAttribute("ZOOM",a.z);f.setAttribute("XSCALE",a.xScale);f.setAttribute("YSCALE",a.yScale);f.setAttribute("ZMIN",a.zMin);f.setAttribute("ZMAX",a.zMax);f.setAttribute("CLICKURL",a.clickURL);f.setAttribute("URLTARGET",
a.urlTarget);b=1==a.rollover?"1":"0";f.setAttribute("ROLLOVER",b);f.setAttribute("CAPTION",Z.Utils.xmlEscapeMinimal(a.caption));he&&f.setAttribute("COMMENT",Z.Utils.xmlEscapeMinimal(a.comment));f.setAttribute("TOOLTIP",Z.Utils.xmlEscapeMinimal(a.tooltip));f.setAttribute("USER",a.user);f.setAttribute("DATE",a.date);f.setAttribute("TEXTCOLOR",a.textColor);f.setAttribute("BACKCOLOR",a.backColor);f.setAttribute("LINECOLOR",a.lineColor);f.setAttribute("FILLCOLOR",a.fillColor);b=0!=a.textVisible?"1":"0";
f.setAttribute("TEXTVISIBLE",b);b=0!=a.backVisible?"1":"0";f.setAttribute("BACKVISIBLE",b);b=0!=a.lineVisible?"1":"0";f.setAttribute("LINEVISIBLE",b);b=0!=a.fillVisible?"1":"0";f.setAttribute("FILLVISIBLE",b);f.setAttribute("CAPTIONPOSITION",a.captionPosition);f.setAttribute("INTERNALID",a.internalID.toString());f.setAttribute("POIID",a.poiID.toString());f.setAttribute("POPUP",a.popup);f.setAttribute("POPOFFSETX",a.popupOffsetX);f.setAttribute("POPOFFSETX",a.popupOffsetY);f.setAttribute("ROTATION",
a.rotation);f.setAttribute("CATEGORY",a.category);f.setAttribute("EDITABLE",a.editable);b=a.captionHTML;if(Z.Utils.stringValidate(b)&&(b=Z.Utils.xmlConvertTextToDoc(b).getElementsByTagName("CAPTION")[0])){b=b.innerHTML;var g=e.createElement("CAPTION");g.innerHTML=b;f.appendChild(g)}b=a.tooltipHTML;Z.Utils.stringValidate(b)&&(b=Z.Utils.xmlConvertTextToDoc(b).getElementsByTagName("TOOLTIP")[0])&&(b=b.innerHTML,g=e.createElement("TOOLTIP"),g.innerHTML=b,f.appendChild(g));if(a=a.polygonPts){b=e.createElement("POLYGON");
for(var g=0,l=a.length;g<l;g++){var k=e.createElement("POINT");k.setAttribute("X",a[g].x);k.setAttribute("Y",a[g].y);b.appendChild(k)}f.appendChild(b)}return f};this.convertLabelToJSON=function(a){var b=null;a=n.convertLabelToXML(a);a=Z.Utils.jsonConvertXMLTextToJSONText(a);try{b=JSON.parse(a)}catch(e){Z.Utils.showMessage(e.name+Z.Utils.getResource("z277")+e.message)}return b};this.saveAnnotations=function(a,b,e){if((Z.annotationsAutoSave||a)&&null!==Z.editMode&&!Z.noPost){if(Z.localUse)Z.Utils.showMessage(Z.Utils.getResource("ERROR_UNSUPPORTEDLOCALSAVING"),
!1,Z.messageDurationStandard,"center",!0);else if(Z.Utils.stringValidate(Z.saveHandlerPath))if(-1!=Z.saveHandlerPath.indexOf(Z.Utils.getResource("z13")))Z.Utils.showMessage(Z.Utils.getResource("z14"),!1,Z.messageDurationStandard,"center",!0);else{Z.Utils.showMessage(Z.Utils.getResource("z15"),!1,Z.messageDurationStandard,"center");Jc=me(Jc);if(Z.noPostDefaults){a=Z.Utils.xmlConvertDocToText(Jc);a=Z.Utils.xmlConvertTextToDoc(a);e=a.getElementsByTagName("SETUP")[0];"2"==e.getAttribute("PANELPOSITION")&&
e.removeAttribute("PANELPOSITION");"1"==e.getAttribute("INITIALVISIBILITY")&&e.removeAttribute("INITIALVISIBILITY");"1"==e.getAttribute("POIVISIBILITY")&&e.removeAttribute("POIVISIBILITY");"1"==e.getAttribute("LABELVISIBILITY")&&e.removeAttribute("LABELVISIBILITY");"1"==e.getAttribute("NOTEVISIBILITY")&&e.removeAttribute("NOTEVISIBILITY");"1"==e.getAttribute("COMMENTVISIBILITY")&&e.removeAttribute("COMMENTVISIBILITY");.2==parseFloat(e.getAttribute("MINSCALE"))&&e.removeAttribute("MINSCALE");2==parseFloat(e.getAttribute("MAXSCALE"))&&
e.removeAttribute("MAXSCALE");e=a.getElementsByTagName("POI");for(var f=0,g=e.length;f<g;f++){var l=e[f];l.getAttribute("NAME")==Z.Utils.getResource("z43")&&l.removeAttribute("NAME");"center"==l.getAttribute("X")&&l.removeAttribute("X");"center"==l.getAttribute("Y")&&l.removeAttribute("Y");"-1"==l.getAttribute("ZOOM")&&l.removeAttribute("ZOOM");l.hasAttribute("INTERNALID")&&l.removeAttribute("INTERNALID");if(l=e[f].getElementsByTagName("LABELS")[0])for(var l=l.getElementsByTagName("LABEL"),k=0,m=
l.length;k<m;k++){var p=l[k];p.getAttribute("NAME")==Z.Utils.getResource("z37")&&p.removeAttribute("NAME");"center"==p.getAttribute("X")&&p.removeAttribute("X");"center"==p.getAttribute("Y")&&p.removeAttribute("Y");"100"==p.getAttribute("ZOOM")&&p.removeAttribute("ZOOM");"100"==p.getAttribute("XSCALE")&&p.removeAttribute("XSCALE");"100"==p.getAttribute("YSCALE")&&p.removeAttribute("YSCALE");""==p.getAttribute("RADIUS")&&p.removeAttribute("RADIUS");"0"==p.getAttribute("ZMIN")&&p.removeAttribute("ZMIN");
"0"==p.getAttribute("ZMAX")&&p.removeAttribute("ZMAX");""==p.getAttribute("CLICKURL")&&p.removeAttribute("CLICKURL");"_blank"==p.getAttribute("URLTARGET")&&p.removeAttribute("URLTARGET");"0"==p.getAttribute("ROLLOVER")&&p.removeAttribute("ROLLOVER");""==p.getAttribute("CAPTION")&&p.removeAttribute("CAPTION");""==p.getAttribute("COMMENT")&&p.removeAttribute("COMMENT");""==p.getAttribute("TOOLTIP")&&p.removeAttribute("TOOLTIP");p.getAttribute("TEXTCOLOR")==Z.Utils.getResource("z25")&&p.removeAttribute("TEXTCOLOR");
p.getAttribute("BACKCOLOR")==Z.Utils.getResource("z22")&&p.removeAttribute("BACKCOLOR");p.getAttribute("LINECOLOR")==Z.Utils.getResource("z48")&&p.removeAttribute("LINECOLOR");p.getAttribute("FILLCOLOR")==Z.Utils.getResource("z46")&&p.removeAttribute("FILLCOLOR");p.getAttribute("TEXTVISIBLE")==Z.Utils.getResource("z26")&&p.removeAttribute("TEXTVISIBLE");p.getAttribute("BACKVISIBLE")==Z.Utils.getResource("z23")&&p.removeAttribute("BACKVISIBLE");p.getAttribute("LINEVISIBLE")==Z.Utils.getResource("z49")&&
p.removeAttribute("LINEVISIBLE");p.getAttribute("FILLVISIBLE")==Z.Utils.getResource("z47")&&p.removeAttribute("FILLVISIBLE");p.getAttribute("CAPTIONPOSITION")==Z.Utils.getResource("z24")&&p.removeAttribute("CAPTIONPOSITION");p.getAttribute("EDITABLE")==Z.Utils.getResource("CONTENT_EDITABLE")&&p.removeAttribute("EDITABLE");p.hasAttribute("INTERNALID")&&p.removeAttribute("INTERNALID")}if(l=e[f].getElementsByTagName("NOTES")[0])for(l=l.getElementsByTagName("NOTE"),k=0,m=l.length;k<m;k++)p=l[k],p.getAttribute("NAME")==
Z.Utils.getResource("z40")&&p.removeAttribute("NAME"),p.getAttribute("TEXT")==Z.Utils.getResource("z41")&&p.removeAttribute("TEXT"),p.hasAttribute("INTERNALID")&&p.removeAttribute("INTERNALID")}}else a=Jc;annotationsXMLOut=a;(new Z.NetConnector).postXML(Z.saveHandlerPath,annotationsXMLOut,"annotation")}else Z.Utils.showMessage(Z.Utils.getResource("z297"),!0,null,"center",!0);Z.saveImageHandlerProvided&&b&&n.saveAnnotationsToImageFile(Z.saveImageFull?!0:null)}};this.setAllHotspotsSaved=function(){for(var a=
0,b=A.length;a<b;a++)A[a].saved=!0};this.verifyEditsUnsaved=function(a){if("undefined"!==typeof Jc){a=me(Jc);var b=Z.Utils.xmlConvertDocToText(Jc)!=Z.Utils.xmlConvertDocToText(a)}return b};this.parseTrackingXML=function(a,b){if("undefined"===typeof b||null===b)b=Ta;Z.imageSet&&Z.Utils.showMessage(Z.Utils.getResource("ALERT_LOADINTRACKINGDATA"),!1,2E3,"center");"undefined"!==typeof rd&&Z.Utils.arrayClear(rd);"undefined"!==typeof qd&&Z.Utils.arrayClear(qd);"undefined"!==typeof yc&&Z.Utils.arrayClear(yc);
n.setStatus("XMLParsedViewport",!1);var e=a.getElementsByTagName("SETUP")[0],f=e.getAttribute("PANELPOSITION");Z.trackingPanelPosition=Z.Utils.stringValidate(f)?f:Z.Utils.getResource("DEFAULT_TRACKINGPANELPOSITION");if(e=e.getElementsByTagName("TYPES")[0])for(var e=e.getElementsByTagName("TYPE"),f=0,g=e.length;f<g;f++){var l=e[f];rd[rd.length]={text:l.getAttribute("NAME"),value:l.getAttribute("ID"),mediaType:l.getAttribute("MEDIATYPE"),media:l.getAttribute("MEDIA"),radius:l.getAttribute("RADIUS"),
caption:l.getAttribute("CAPTION"),captionPosition:l.getAttribute("CAPTIONPOSITION"),fillColor:l.getAttribute("FILLCOLOR")}}if(e=a.getElementsByTagName("CELLS")[0])for(e=e.getElementsByTagName("CELL"),f=0,g=e.length;f<g;f++)l=e[f],qd[qd.length]={id:l.getAttribute("ID"),complete:"0"!=l.getAttribute("COMPLETE"),user:l.getAttribute("USER"),date:l.getAttribute("DATE")};if(e=a.getElementsByTagName("INSTANCES")[0]){e=e.getElementsByTagName("LABEL");f=0;for(g=e.length;f<g;f++){var k=Xb("label"),l=e[f];l.setAttribute("INTERNALID",
k);0<f&&"0"==l.getAttribute("ID")&&"0"==e[f-1].getAttribute("ID")&&l.setAttribute("ID",k);l.setAttribute("POIID","TZ");null===l.getAttribute("TEXTCOLOR")&&l.setAttribute("TEXTCOLOR","#FFFFFF");l.setAttribute("TEXTVISIBLE","1");l.setAttribute("FILLVISIBLE","1");l.setAttribute("CATEGORY",l.getAttribute("TYPEID"));k=l.getAttribute("NAME");l.setAttribute("TOOLTIP",k+" : "+l.getAttribute("USER"));var m=l.getAttribute("TYPEID"),p=l.getAttribute("ID"),v=l.getAttribute("CELL"),u=l.getAttribute("X"),q=l.getAttribute("Y"),
D=l.getAttribute("ZOOM"),O=l.getAttribute("USER"),t=Z.Utils.stringPadFront(v,6,"0")+Z.Utils.stringPadFront(p,6,"0");yc[yc.length]={text:v+"   "+u+", "+q+", "+D+": "+O,value:p,sortKey:t,cell:v,typeID:m,x:u,y:q,zoom:D,user:O,name:k,mediaType:l.getAttribute("MEDIATYPE"),media:l.getAttribute("MEDIA"),radius:l.getAttribute("RADIUS"),caption:l.getAttribute("CAPTION"),captionPosition:l.getAttribute("CAPTIONPOSITION"),fillColor:l.getAttribute("FILLCOLOR"),initials:l.getAttribute("INITIALS"),date:l.getAttribute("DATE")};
n.z495(l)}n.syncTrackingToViewport()}n.setStatus("XMLParsedViewport",!0);n.createTrackingPanel(b);Z.initialTrackingOverlayVisible&&(Z.Viewer.getStatus("readyViewer")?n.toggleTrackingNavigatorOverlay(!0):Z.setCallback("readyViewer",function(){n.toggleTrackingNavigatorOverlay(!0)}));n.setStatus("trackingLoadedViewport",!0);Z.Utils.validateCallback("trackingLoaded")};this.createTrackingPanel=function(a){if(!Z.ToolbarDisplay||!Z.Toolbar.getInitialized())window.setTimeout(function(){n.createTrackingPanel(a)},
100);else if("undefined"===typeof Z["TrackingPanelDisplay"+a.toString()]){var b=Z.Toolbar.getSkinArray(),e=a.toString();Z["TrackingPanelDisplay"+e]=Z.Utils.createContainerElement("div","TrackingPanelDisplay"+e,"inline-block","absolute","hidden","1px","1px","1px","1px","solid","1px","transparent none","0px","0px","normal","default");Ij=hc=Z["TrackingPanelDisplay"+e];Pg=Ij.style;Z.ViewerDisplay.appendChild(hc);Pg.zIndex=(Z.baseZIndex+22).toString();var f=Z.Utils.createContainerElement("div","trackingPanelBackground"+
e,"inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal");hc.appendChild(f);var g=parseInt(Z.Utils.getResource("DEFAULT_TRACKINGPANELLISTFONTSIZE"),10);Z.Utils.getResource("CONTENT_TRACKINGPLACEHOLDERLISTTEXT");if("undefined"===typeof counterCountainer||null===counterCountainer){var l=Z.Utils.createContainerElement("div","containerCounterLabels"+e,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px",
"0px","nowrap",null,!0);hc.appendChild(l);var k=Z.Utils.createContainerElement("div","labelAddTextBox"+e,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0),m=document.createTextNode(Z.Utils.getResource("UI_TRACKINGPANELLABELADD"));k.appendChild(m);l.appendChild(k);k=Z.Utils.createContainerElement("div","labelShowTextBox"+e,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",
null,!0);m=document.createTextNode(Z.Utils.getResource("UI_TRACKINGPANELLABELSHOW"));k.appendChild(m);l.appendChild(k);k=Z.Utils.createContainerElement("div","labelNameTextBox"+e,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);m=document.createTextNode(Z.Utils.getResource("UI_TRACKINGPANELLABELNAME"));k.appendChild(m);l.appendChild(k);k=Z.Utils.createContainerElement("div","labelCountPerCellTextBox"+e,"inline-block","absolute",
"visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);m=document.createTextNode(Z.Utils.getResource("UI_TRACKINGPANELLABELCOUNT"));k.appendChild(m);l.appendChild(k);k=Z.Utils.createContainerElement("div","labelCountPerImageTextBox"+e,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);m=document.createTextNode(Z.Utils.getResource("UI_TRACKINGPANELLABELCOUNTALL"));k.appendChild(m);l.appendChild(k);
k=Z.Utils.createContainerElement("div","labelListTextBox"+e,"inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);m=document.createTextNode(Z.Utils.getResource("UI_TRACKINGPANELLABELLIST"));k.appendChild(m);l.appendChild(k);l=Z.Utils.createContainerElement("div","containerCounterListLabels"+e,"none","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);hc.appendChild(l);k=Z.Utils.createContainerElement("div",
"labelCellTextBox"+e,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);m=document.createTextNode(Z.Utils.getResource("UI_TRACKINGPANELLABELCELL"));k.appendChild(m);l.appendChild(k);k=Z.Utils.createContainerElement("div","labelXTextBox"+e,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);m=document.createTextNode(Z.Utils.getResource("UI_TRACKINGPANELLABELX"));
k.appendChild(m);l.appendChild(k);k=Z.Utils.createContainerElement("div","labelYTextBox"+e,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);m=document.createTextNode(Z.Utils.getResource("UI_TRACKINGPANELLABELY"));k.appendChild(m);l.appendChild(k);k=Z.Utils.createContainerElement("div","labelZoomTextBox"+e,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);
m=document.createTextNode(Z.Utils.getResource("UI_TRACKINGPANELLABELZOOM"));k.appendChild(m);l.appendChild(k);k=Z.Utils.createContainerElement("div","labelUserNameTextBox"+e,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);m=document.createTextNode(Z.Utils.getResource("UI_TRACKINGPANELLABELUSERNAME"));k.appendChild(m);l.appendChild(k);var p="#FFFFFF",k=l=20,m=1,v=120,u=20,q=6,D=parseInt(Z.Utils.getResource("DEFAULT_TRACKINGPANELLABELFONTSIZE"),
10),O=8,t=0;Qg=Z.Utils.createContainerElement("div","containerTracking"+e,"inline-block","absolute","scroll","1px","1px","0px","0px","solid","1px","#FFFFFF","0px","0px","nowrap",null,!0);Qg.style.overflowX="hidden";hc.appendChild(Qg);for(var y=0,I=rd.length;y<I;y++){p=0==y%2?"#F8F8F8":"#FFFFFF";p=Z.Utils.createContainerElement("div","rowContainer","inline-block","absolute","hidden","100%","24px","0px",t+"px","none","0px",p,"0px","0px","nowrap",null,!0);Qg.appendChild(p);parseFloat(Z.Utils.getResource("UI_TOOLBARINTERNALBACKGROUNDALPHA"));
Z.Utils.getResource("UI_TOOLBARINTERNALBACKGROUNDCOLOR");var x=Z.Utils.stringValidateColorValue(rd[y].fillColor),J="buttonCounterType"+y.toString();p[J]=Z.Utils.createContainerElement("div",J,"inline-block","absolute","visible","22px","14px",O+"px","4px","solid","1px",x,"0px","0px","normal");p[J].title=Z.Utils.getResource("TIP_COUNTERTYPE");"edit"!=Z.trackingEditMode?Z.Utils.setOpacity(p[J],.7,""):0<y?Z.Utils.setOpacity(p[J],.4,""):Mi=p[J];p.appendChild(p[J]);"edit"==Z.trackingEditMode&&(Z.Utils.addEventListener(p[J],
"mouseover",wf),Z.Utils.addEventListener(p[J],"mousedown",wf),Z.Utils.addEventListener(p[J],"mouseout",wf));O+=34;x="checkboxCountersShow"+y.toString();p[x]=new Z.Utils.Checkbox(x,"show",l+"px",k+"px",O+"px",m+"px","click",Z.Toolbar.z457,"TIP_COUNTERTYPESHOW");p.appendChild(p[x]);document.getElementById(x).checked=!0;O+=34;x="rowNameTextBox"+y.toString();J="rowNameTextNode"+y.toString();p[x]=Z.Utils.createContainerElement("div",x,"inline-block","absolute","hidden",v+"px",u+"px",O+"px",q+"px","none",
"0px","transparent none","0px","0px","nowrap",null,!0);p[J]=document.createTextNode(rd[y].text);p[x].appendChild(p[J]);p.appendChild(p[x]);Z.Utils.setTextNodeStyle(p[x],"black","verdana",D+"px","none","normal","normal","normal","normal","1em","left","none");O+=v+12;x="rowCountPerCellTextBox"+y.toString();J="rowCountPerCellTextNode"+y.toString();p[x]=Z.Utils.createContainerElement("div",x,"inline-block","absolute","hidden",v+"px",u+"px",O+"px",q+"px","none","0px","transparent none","0px","0px","nowrap",
null,!0);p[J]=document.createTextNode("...");p[x].appendChild(p[J]);p.appendChild(p[x]);Z.Utils.setTextNodeStyle(p[x],"black","verdana",D+"px","none","normal","normal","normal","normal","1em","left","none");O+=30;x="rowCountPerImageTextBox"+y.toString();J="rowCountPerImageTextNode"+y.toString();p[x]=Z.Utils.createContainerElement("div",x,"inline-block","absolute","hidden",v+"px",u+"px",O+"px",q+"px","none","0px","transparent none","0px","0px","nowrap",null,!0);p[J]=document.createTextNode("...");
p[x].appendChild(p[J]);p.appendChild(p[x]);Z.Utils.setTextNodeStyle(p[x],"black","verdana",D+"px","none","normal","normal","normal","normal","1em","left","none");O+=26;x="buttonCounterListShow"+y.toString();p[x]=new Z.Utils.Button(x,null,Z.skinPath,b[30],b[31],b[32],"15px","15px",O+"px","4px","mousedown",Z.Toolbar.z457,"TIP_COUNTERLIST");p.appendChild(p[x].elmt);O="rowCounterFilteredList"+e;hc[O]=new Z.Utils.createSelectElement(O,"",xf,1,0,0,g,"hidden",Dd,"click");hc[O].style.fontSize="12px";hc[O].size=
15;hc.appendChild(hc[O]);O=8;t+=24}}g=Z.Utils.createContainerElement("div","labelCurrentCellTextBox"+e,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);t=document.createTextNode(Z.Utils.getResource("UI_TRACKINGPANELLABELCURRENTCELL"));g.appendChild(t);hc.appendChild(g);g=Z.Utils.createContainerElement("div","currentCellTextBox"+e,"inline-block","absolute","hidden",v+"px",u+"px",O+"px",q+"px","none","0px","transparent none","0px",
"0px","nowrap",null,!0);v=document.createTextNode("...");g.appendChild(v);hc.appendChild(g);Z.Utils.setTextNodeStyle(v,"black","verdana",D+"px","none","normal","normal","normal","normal","1em","left","none");"edit"==Z.trackingEditMode&&(g=new Z.Utils.Graphic("countingDivider"+e,Z.skinPath,b[20],"1px","1px","1px","1px"),hc.appendChild(g.elmt));g=Z.Utils.createContainerElement("div","labelCountingCompleteTextBox"+e,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none",
"0px","0px","nowrap",null,!0);D=document.createTextNode(Z.Utils.getResource("UI_TRACKINGPANELLABELCOUNTINGCOMPLETE"));g.appendChild(D);hc.appendChild(g);g=new Z.Utils.Checkbox("checkboxCountingComplete"+e,!0,l+"px",k+"px",O+"px",m+"px","click",Z.Toolbar.z457,"TIP_COUNTINGCOMPLETE");hc.appendChild(g);g=new Z.Utils.Button("buttonToggleTrackingNav"+e,null,Z.skinPath,b[162],b[163],b[164],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"TIP_TRACKINGNAVTOGGLE");hc.appendChild(g.elmt);"edit"==Z.trackingEditMode&&
(g=new Z.Utils.Button("buttonTrackingClearLast"+e,null,Z.skinPath,b[165],b[166],b[167],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"TIP_COUNTERCLEARLAST"),hc.appendChild(g.elmt),g=new Z.Utils.Button("buttonTrackingClearType"+e,null,Z.skinPath,b[168],b[169],b[170],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"TIP_COUNTERCLEARTYPE"),hc.appendChild(g.elmt),g=new Z.Utils.Button("buttonTrackingClearAll"+e,null,Z.skinPath,b[171],b[172],b[173],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,
"TIP_COUNTERSCLEARALL"),hc.appendChild(g.elmt),g=new Z.Utils.Graphic("trackingDivider"+e,Z.skinPath,b[20],"1px","1px","1px","1px"),hc.appendChild(g.elmt),g=new Z.Utils.Button("buttonTrackingSave"+e,null,Z.skinPath,b[174],b[175],b[176],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"TIP_COUNTERSSAVE"),hc.appendChild(g.elmt));b=new Z.Utils.Button("buttonCounterListHide"+e,null,Z.skinPath,b[30],b[31],b[32],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"TIP_COUNTINGLISTHIDE");hc.appendChild(b.elmt);
uf(a);n.syncTrackingToViewport();Z.Utils.addEventListener(f,"mousedown",Z.Utils.preventDefault)}};this.calculateTrackingPanelCoords=function(a,b,e,f,g){if(0==Z.trackingPanelVisible)e=a=-1E3;else switch(a){case "0":e=a=-1E3;break;case "1":e=a=5;break;case "2":a=f-b-5-2;e=5;2==Z.imageSetListPosition&&(e+=20);break;case "3":a=f-b-5;e=0<Z.toolbarVisible&&8!=Z.toolbarVisible?g-e-5:g-5;break;case "4":a=5;e=0<Z.toolbarVisible&&8!=Z.toolbarVisible?g-e-5:g-5;break;default:a=f-b-5,e=5}return new Z.Utils.Point(a,
e)};this.sizeAndPositionTrackingPanel=function(a,b,e,f,g){"undefined"!==typeof b&&null!==b&&(a.width=b+"px");"undefined"!==typeof e&&null!==e&&(a.height=e+"px");"undefined"!==typeof f&&null!==f&&(a.left=f+"px");"undefined"!==typeof g&&null!==g&&(a.top=g+"px")};this.goToNextCell=function(a){a=n.calculateNextCellCoordinates(a);n.zoomAndPanToView(a.x,a.y)};this.calculateNextCellCoordinates=function(a){var b=Math.round(n.getX()),e=Math.round(n.getY()),f=n.getZoom(),g=Math.max(0,Math.floor(b*f/Z.viewerW)),
l=Math.max(0,Math.floor(e*f/Z.viewerH));switch(a){case "left":--g;break;case "right":g+=1;break;case "up":--l;break;case "down":l+=1}f=Math.round(100*f);f=(1.5>f?1.25:2>f?1.5:2.5>f?2:4>f?2.5:5>f?4:10>f?5:16>f?10:20>f?16:25>f?20:32>f?25:40>f?32:50>f?40:60>f?50:100>f?60:150>f?100:250>f?150:250)/100;a=Math.ceil(Z.viewerW/f);var f=Math.ceil(Z.viewerH/f),k=Math.ceil(Z.imageW/a)-1;0>g&&(g=0);g>k&&(g=k);k=Math.ceil(Z.imageH/f)-1;0>l&&(l=0);l>k&&(l=k);b=new Z.Utils.Point(b,e);b=Math.round(g*a+a/2);e=Math.round(l*
f+f/2);0>b-a/2&&(b=a/2);0>e-f/2&&(e=f/2);return b=new Z.Utils.Point(b,e)};this.syncTrackingToViewport=function(){if(Z.tracking){Z.trackingCellCurrent=n.getCurrentTrackingCellID();var a=document.getElementById("currentCellTextBox"+Ta.toString());a&&(a.textContent=Z.trackingCellCurrent);var a=Z.Utils.arrayIndexOfObjectValue(qd,"id",Z.trackingCellCurrent),b=document.getElementById("checkboxCountingComplete"+Ta.toString());b&&(b.checked=-1!=a&&qd[a].complete?!0:!1);if(Z.trackingCounts){n.calculateCounterCounts();
for(var b=0,e=rd.length;b<e;b++){var f=0<Z.trackingCounts.length?Z.trackingCounts[b].countCell.toString():"0",a=0<Z.trackingCounts.length?Z.trackingCounts[b].countImage.toString():"0",g=document.getElementById("rowCountPerCellTextBox"+b.toString());g&&(g.firstChild.textContent=f);if(f=document.getElementById("rowCountPerImageTextBox"+b.toString()))f.firstChild.textContent=a}if(Z.userLogging)for(b=0,e=Z.userList.length;b<e;b++)if(a=null!==Z.userList[b].countImage?Z.userList[b].countImage.toString():
"0",f=document.getElementById("rowCountPerUserTextBox"+b.toString()))f.firstChild.textContent=a}Z.Navigator&&Z.Navigator.getInitialized()&&Z.Navigator.drawNavigatorTrackingOverlay(qd)}};this.getCurrentTrackingCellID=function(){var a=n.getX(),b=n.getY(),e=n.getZoom();return n.getTrackingCellIDFromCoordinates(a,b,e)};this.getTrackingCellIDFromCoordinates=function(a,b,e){if("undefined"===typeof a||null===a)a=n.getX();if("undefined"===typeof b||null===b)b=n.getY();if("undefined"===typeof e||null===e)e=
n.getZoom();b=Math.max(0,Math.floor(b*e/Z.viewerH));a=Math.max(0,Math.floor(a*e/Z.viewerW));e=Math.round(100*e).toString();return b.toString()+":"+a.toString()+":"+e};this.getCoordinatesFromTrackingCellID=function(a){var b=null,e=null,f=null;"undefined"!==typeof a&&null!==a&&(a=a.split(":"),b=parseInt(a[1],10),e=parseInt(a[0],10),f=parseInt(a[2],10));return new Z.Utils.Point3D(b,e,f)};this.calculateCounterCounts=function(){if(Z.tracking&&yc){var a,b,e="undefined"!==typeof rd&&0<rd.length,f=Z.trackingCellCurrent;
Z.Utils.arrayClear(Z.trackingCounts);var g=Z.userLogging&&"undefined"!==typeof Z.userList&&0<Z.userList.length;g&&(Z.Utils.arrayClearObjectValue(Z.userList,"countCell"),Z.Utils.arrayClearObjectValue(Z.userList,"countImage"));for(var l=0,k=yc.length;l<k;l++){b=yc[l];if(e){a=0;for(var p=rd.length;a<p;a++)"undefined"===typeof Z.trackingCounts[a]&&(Z.trackingCounts[a]={typeID:a.toString,countCell:0,countImage:0}),b.typeID==a.toString()&&(b.cell==f&&(Z.trackingCounts[a].countCell+=1),Z.trackingCounts[a].countImage+=
1)}if(g)for(var p=0,m=Z.userList.length;p<m;p++)a=Z.userList[p],a.name==b.user&&(a.countImage+=1,b.cell==f&&(a.countCell+=1))}}};this.setCellCountComplete=function(a){var b=Z.Utils.arrayIndexOfObjectValue(qd,"id",Z.trackingCellCurrent);-1==b&&(b=qd.length);qd[b]={id:Z.trackingCellCurrent,complete:a,user:Z.userName,date:Z.Utils.getCurrentUTCDateAsString()};Z.Navigator.drawNavigatorTrackingOverlay(qd)};this.getTrackingCells=function(){return qd};this.toggleTrackingNavigatorOverlay=function(a){Z.trackingOverlayVisible=
"undefined"!==typeof a&&null!==a?a:!Z.trackingOverlayVisible;if(a=document.getElementById("navigatorTrackingOverlay"))a.style.display=Z.trackingOverlayVisible?"inline-block":"none",vf(a)};this.setSizeAndPositionNavigatorTrackingOverlay=function(a,b,e,f,g){if("undefined"===typeof g||null===g)g=document.getElementById("navigatorTrackingOverlay");g&&(g=g.style,g.width=a+"px",g.height=b+"px",g.left=e+"px",g.top=f+"px")};this.deleteCounterLast=function(){var a=yc.length-1;-1!=a&&(n.deleteLabel(yc[a].value),
yc=Z.Utils.arraySplice(yc,a,1),n.syncTrackingToViewport())};this.deleteCountersOfType=function(a){for(var b=0,e=rd.length;b<e;b++)for(var f=0,g=yc.length;f<g;f++)yc[f].typeID==a&&(n.deleteLabel(yc[f].value),yc=Z.Utils.arraySplice(yc,f,1),g--);n.syncTrackingToViewport()};this.deleteCountersAll=function(){n.deleteAllLabels();Z.Utils.arrayClear(yc);n.syncTrackingToViewport()};this.saveTracking=function(a,b,e){Z.localUse?Z.Utils.showMessage(Z.Utils.getResource("ERROR_UNSUPPORTEDLOCALSAVING"),!1,Z.messageDurationStandard,
"center",!0):Z.Utils.stringValidate(Z.saveHandlerPath)?-1!=Z.saveHandlerPath.indexOf(Z.Utils.getResource("z13"))?Z.Utils.showMessage(Z.Utils.getResource("z14"),!1,Z.messageDurationStandard,"center"):(Z.Utils.showMessage(Z.Utils.getResource("z15"),!1,2E3,"center"),a=updateTrackingXML(a,b,e),(new Z.NetConnector).postXML(Z.saveHandlerPath,a,"tracking")):Z.Utils.showMessage(Z.Utils.getResource("z297"),!0,null,"center")};updateTrackingXML=function(a,b,e){var f;f=Z.Utils.xmlConvertTextToDoc("<TRACKINGDATA></TRACKINGDATA>");
var g=Zd(f,"root"),l=Zd(f,"setup"),k;k=Z.trackingPanelPosition;Z.Utils.stringValidate(k)&&l.setAttribute("PANELPOSITION",k);g.appendChild(l);if(0<a.length){var p=f.createElement("TYPES"),l=0;for(k=a.length;l<k;l++){var m=Zd(f,"type"),n=a[l],v=void 0,v=n.value;Z.Utils.stringValidate(v)&&m.setAttribute("ID",v);v=n.text;Z.Utils.stringValidate(v)&&m.setAttribute("NAME",v);v=n.mediaType;Z.Utils.stringValidate(v)&&m.setAttribute("MEDIATYPE",v);v=n.media;Z.Utils.stringValidate(v)&&m.setAttribute("MEDIA",
v);v=n.radius;Z.Utils.stringValidate(v)&&m.setAttribute("RADIUS",v);v=n.caption;Z.Utils.stringValidate(v)&&m.setAttribute("CAPTION",v);v=n.captionPosition;Z.Utils.stringValidate(v)&&m.setAttribute("CAPTIONPOSITION",v);v=n.fillColor;Z.Utils.stringValidate(v)&&m.setAttribute("FILLCOLOR",v);p.appendChild(m)}}g.appendChild(p);if(0<b.length){var u=f.createElement("CELLS"),l=0;for(k=b.length;l<k;l++)a=Zd(f,"cell"),p=b[l],m=void 0,m=p.value,Z.Utils.stringValidate(m)&&a.setAttribute("ID",m),m=p.complete?
"1":"0",Z.Utils.stringValidate(m)&&a.setAttribute("COMPLETE",m),m=p.user,Z.Utils.stringValidate(m)&&a.setAttribute("USER",m),m=p.date,Z.Utils.stringValidate(m)&&a.setAttribute("DATE",m),u.appendChild(a)}g.appendChild(u);if(0<e.length){var q=f.createElement("INSTANCES"),l=0;for(k=e.length;l<k;l++)b=Zd(f,"label"),u=e[l],a=void 0,a=u.value,Z.Utils.stringValidate(a)&&b.setAttribute("ID",a),a=u.typeID,Z.Utils.stringValidate(a)&&b.setAttribute("TYPEID",a),a=u.name,Z.Utils.stringValidate(a)&&b.setAttribute("NAME",
a),a=u.mediaType,Z.Utils.stringValidate(a)&&b.setAttribute("MEDIATYPE",a),a=u.media,Z.Utils.stringValidate(a)&&b.setAttribute("MEDIA",a),a=u.radius,Z.Utils.stringValidate(a)&&b.setAttribute("RADIUS",a),a=u.caption,Z.Utils.stringValidate(a)&&b.setAttribute("CAPTION",a),a=u.captionPosition,Z.Utils.stringValidate(a)&&b.setAttribute("CAPTIONPOSITION",a),a=u.fillColor,Z.Utils.stringValidate(a)&&b.setAttribute("FILLCOLOR",a),a=u.cell,Z.Utils.stringValidate(a)&&b.setAttribute("CELL",a),a=u.x,Z.Utils.stringValidate(a)&&
b.setAttribute("X",a),a=u.y,Z.Utils.stringValidate(a)&&b.setAttribute("Y",a),a=u.zoom,Z.Utils.stringValidate(a)&&b.setAttribute("ZOOM",a),a=u.user,Z.Utils.stringValidate(a)&&b.setAttribute("USER",a),a=u.initials,Z.Utils.stringValidate(a)&&b.setAttribute("INITIALS",a),a=u.date,Z.Utils.stringValidate(a)&&b.setAttribute("DATE",a),q.appendChild(b)}g.appendChild(q);return f};this.trackingEventsManager=function(a,e){if(a){var f=Z.Utils.target(a);if(f){var g=Ta.toString(),k=f.parentNode.id,k=k.substring(k.length-
1,k.length);switch(e){case "containerFor-checkboxCountersShow"+k:Z.Viewport.setHotspotsVisibilityByFilter("category",k,f.checked);break;case "containerFor-checkboxCountingComplete"+g:Z.Viewport.setCellCountComplete(f.checked);break;case "buttonCounterListShow":Z.Utils.arrayClear(xf);for(var f=0,l=yc.length;f<l;f++){var m=yc[f];m.typeID==k&&(xf[xf.length]={text:m.text,value:m.value,sortKey:m.sortKey,x:m.x,y:m.y,zoom:m.zoom})}Z.Utils.arraySortByObjectValue(xf,"sortKey");k=document.getElementById("rowCounterFilteredList"+
g);Z.Utils.updateSelectElement(k,xf,0);k.style.visibility="visible";if(k=document.getElementById("buttonCounterListHide"+g))k.style.display="inline-block";if(k=document.getElementById("containerCounterLabels"+g))k.style.display="none";if(k=document.getElementById("containerCounterListLabels"+g))k.style.display="inline-block";break;case "buttonCounterListHide"+g:f=0;for(l=Qg.children.length;f<l;f++)k=document.getElementById("rowCounterFilteredList"+b.toString()),k.style.visibility="hidden";window.setTimeout(function(){var a=
document.getElementById("buttonCounterListHide"+g);a&&(a.style.display="none")},10);if(k=document.getElementById("containerCounterLabels"+g))k.style.display="inline-block";if(k=document.getElementById("containerCounterListLabels"+g))k.style.display="none";break;case "buttonToggleTrackingNav"+g:n.toggleTrackingNavigatorOverlay();break;case "buttonTrackingClearLast"+g:n.deleteCounterLast();break;case "buttonTrackingClearType"+g:n.deleteCountersOfType(Z.trackingTypeCurrent);break;case "buttonTrackingClearAll"+
g:n.deleteCountersAll();break;case "buttonTrackingSave"+g:n.saveTracking(rd,qd,yc);break;case "containerFor-checkboxUserCountersShow"+k:Z.Viewport.setHotspotsVisibilityByFilter("user",Z.userList[k].name,f.checked)}}}};this.tourStart=function(){n.tourStop();if(!Z.tourStop){Z.tourPlaying=!0;var a=document.getElementById("buttonTourStop"),b=document.getElementById("buttonTourStart");a&&b&&(a.style.display="inline-block",b.style.display="none");Z.screensaver?Z.constrainPanStrict||(Z.constrainPanStrict=
!0):Z.Utils.playAudio(Sh,A[Zf].audio);var e=Z.screensaver?0:Ja(Zf,"next",A.length-1);null!==e&&Z.Utils.functionCallWithDelay(function(){n.goToDestination(e)},1500)}};this.tourStop=function(){Z.tourPlaying=!1;var a=document.getElementById("buttonTourStop"),b=document.getElementById("buttonTourStart");a&&b&&(a.style.display="none",b.style.display="inline-block")};this.priorDestination=function(a){Z.tourPlaying&&a&&n.tourStop();Z.screensaver?n.zoomAndPanToView(Z.priorX,Z.priorY,Z.priorZ,Z.priorR):destinationChange("prior")};
this.nextDestination=function(a){Z.tourPlaying&&a&&n.tourStop();destinationChange("next")};destinationChange=function(a){var b;if(Z.screensaver)Z.Utils.functionCallWithDelay(function(){n.goToDestination(0)},0<Z.screensaverSpeed?8E3/Z.screensaverSpeed:3E3);else if("undefined"!==typeof Oa&&null!==Oa&&0<Oa.length){Z.Utils.playAudio(Sh,A[Zf].audio);var e=Z.tourPlaying?A[Zf].showFor:0;Z.Utils.stringValidate(A[Zf].audio)&&(e+=500);b=Ja(Zf,a,A.length-1);null!==b?(Z.screensaver||Z.Utils.loadAudio(A[b].audio),
Z.Utils.functionCallWithDelay(function(){n.goToDestination(b)},e)):n.tourStop()}};this.goToDestination=function(a){if(Z.tourStop)n.tourStop(),Z.tourStop=!1;else{var b,e,f,g=Z.tourPlaying?n.nextDestination:null;if(Z.screensaver){a=Z.Utils.getRandomInt(1,Z.imageW);b=Z.Utils.getRandomInt(1,Z.imageH);e=Z.Utils.getRandomInt(100*Z.minZ,100*Z.maxZ)/100;500>Z.imageX-a&&(a+=500,a>Z.imageW&&(a-=1E3));500>Z.imageY-b&&(b+=500,b>Z.imageH&&(b-=1E3));.3>Z.imageZ-e&&(e+=.3,e>Z.maxZ&&(e-=.6));f=0;var l=0<Z.screensaverSpeed?
8E3/Z.screensaverSpeed:null;null!==l?n.zoomAndPanToView(a,b,e,f,l,null,g):n.setView(a,b,e,f,g)}else{Zf=a;var k=A[a];a=k.x;b=k.y;e=k.z/100;f=k.rotation;l=k.changeFor;switch(A.transition){case "ZoomAndPanToView":n.zoomAndPanToView(a,b,e,f,l,null,g);break;case "SetView":n.setView(a,b,e,f,g);break;default:n.zoomAndPanToView(a,b,e,f,l,null,g)}g=Z.Utils.arrayIndexOfObjectValue(Oa.options,"value",k.internalID.toString());-1!=g&&(Oa.selectedIndex=g)}}};this.parseImageListXML=function(a,b){Z.Utils.arrayClear(He);
nj=Z.Utils.getResource("DEFAULT_IMAGELISTPOSITION");oj=Z.Utils.getResource("DEFAULT_IMAGELISTSOURCE");var e=a.getElementsByTagName("SETUP")[0];if(e){var f=e.getAttribute("LISTPOSITION");Z.Utils.stringValidate(f)&&(nj=f);f=e.getAttribute("LISTSOURCE");Z.Utils.stringValidate(f)&&(oj=f);e=e.getAttribute("LISTTITLE");Z.Utils.stringValidate(e)&&(Z.imageListTitle=e)}for(var e=a.getElementsByTagName("IMAGE"),f=0,g=e.length;f<g;f++){for(var l=e[f],k=l.getAttribute("NAME"),m=l.getAttribute("MEDIA"),k="NAME"==
oj?k:m.substring(m.lastIndexOf("/")+1,m.length),p=Xb("image"),n="",v=0,u=l.attributes.length;v<u;v++){var q=l.attributes[v];if("MEDIA"!=q.name&&"NAME"!=q.name&&Z.Utils.stringValidate(q.value)){var D="";switch(q.name){case "INITIALX":D="zInitialX";break;case "INITIALY":D="zInitialY";break;case "INITIALZOOM":D="zInitialZoom";break;case "MINZOOM":D="zMinZoom";break;case "MAXZOOM":D="zMaxZoom";break;case "INITIALROTATION":D="zInitialRotation";break;case "RULERLISTTYPE":D="zRulerListType";break;case "UNITS":D=
"zUnits";break;case "UNITSPERIMAGE":D="zUnitsPerImage";break;case "PIXELSPERUNIT":D="zPixelsPerUnit";break;case "SOURCEMAGNIFICATION":D="zSourceMagnification";break;case "IMAGEPROPERTIES":D="zImageProperties";break;case "TILESPNG":D="zTilesPNG";break;case "TILEW":D="zTileW";break;case "TILEH":D="zTileH";break;case "IMAGEW":D="zImageW";break;case "IMAGEH":D="zImageH";break;case "MAGNIFICATION":D="zMagnification";break;case "FOCAL":D="zFocal";break;case "QUALITY":D="zQuality";break;case "HOTSPOTS":D=
"zHotspotPath";break;case "ANNOTATIONS":D="zAnnotationPath";break;case "TRACKING":D="zTrackingPath"}n+=D+"="+q.value;v<u-1&&(n+="&")}}null===l.getAttribute("TILEW")&&(n+="&zTileW=256");null===l.getAttribute("TILEH")&&(n+="&zTileH=256");He[He.length]={text:k,value:p,media:m,optionalParams:n}}Cc(Z.imageListTitle,He,b)};this.setSizeAndPositionImageList=function(a,e,f){if("undefined"===typeof a||null===a)a=Z.tracking&&Z.navigatorVisible&&null!==Z.navigatorW?Z.navigatorW+2:parseInt(Z.Utils.getResource("DEFAULT_IMAGELISTWIDTH"),
10);var g=n.calculateImageListCoords(qa,ra,b);if("undefined"===typeof e||null===e)e=g.x;if("undefined"===typeof f||null===f)f=g.y;ne.style.width=a+"px";ne.style.left=e+"px";ne.style.top=f+"px"};this.calculateImageListCoords=function(a,b,e){var f=nj,g=Ni;Z.tracking&&"1"==f&&(g+=2);var l;switch(f){case "0":b=l=0;break;case "1":Z.tracking?(b=parseInt(Z.Utils.getResource("DEFAULT_USERPANELHEIGHT"),10),l=Z.navigatorL,b=Z.navigatorT+Z.navigatorH+Z.rulerH+b+6):b=l=25;break;case "2":l=a-g-25;b=20;break;case "3":l=
a-g-25;b=0<Z.toolbarVisible&&8!=Z.toolbarVisible?b-50:b-37.5;break;case "4":l=25;b=0<Z.toolbarVisible&&8!=Z.toolbarVisible?b-50:b-37.5;break;default:l=a-g,b=25}Z.comparison&&"undefined"!==typeof e&&null!==e&&(0!=e||"2"!=f&&"3"!=f?1!=e||"1"!=f&&"4"!=f||(l=2*a-(25+g)):l=a-25);return new Z.Utils.Point(l,b)};this.setImageListVisibilty=function(a){ne.style.visibility=a};this.parseSlidesXML=function(a){Z.Utils.arrayClear(Qc);Z.Utils.arrayClear(vi);gi=Z.Utils.getResource("DEFAULT_SLIDESHOWAUTOSTART");Pi=
Z.Utils.getResource("DEFAULT_SLIDESHOWAUTOLOOP");Uh=Z.Utils.getResource("z202");qj=parseInt(Z.Utils.getResource("z204"),10);rj=Z.Utils.getResource("z203");null===Z.slideListTitle&&(Z.slideListTitle=Z.Utils.getResource("z443"));var b=a.getElementsByTagName("SETUP")[0];if(b){var e=b.getAttribute("AUTOSTART");Z.Utils.stringValidate(e)&&(gi="0"!=e&&"false"!=e);e=b.getAttribute("AUTOLOOP");Z.Utils.stringValidate(e)&&(Pi="0"!=e&&"false"!=e);e=b.getAttribute("CHOICELIST");Z.Utils.stringValidate(e)&&(Uh=
e);e=b.getAttribute("LISTSOURCE");Z.Utils.stringValidate(e)&&(rj=e);b=b.getAttribute("LISTTITLE");Z.Utils.stringValidate(b)&&(Z.slideListTitle=b)}a=a.getElementsByTagName("SLIDE");b=0;for(e=a.length;b<e;b++){var f=new ae(a[b]);Qc[Qc.length]=f;var g="NAME"==rj?f.name:f.media.substring(f.media.lastIndexOf("/")+1,f.media.length);vi[vi.length]={text:g,value:f.internalID}}a=Z.slideListTitle;b=vi;e="0"==Uh?"hidden":"visible";f=n.calculateSlideListCoords(qa,ra);"undefined"===typeof gd||null===gd?(gd=new Z.Utils.createSelectElement("slideList",
a,b,qj,f.x,f.y,null,e,xb,"change"),Z.ViewerDisplay.appendChild(gd),Z.slideList=!0,yf=0,a=Z.Utils.stringValidate(Z.slideListTitle)&&"none"!=Z.slideListTitle?1:0,gd.selectedIndex=a):Z.Utils.arrayClear(b);n.initializeAudioMuteButtons();null===Z.imagePath||"null"==Z.imagePath||-1!=Z.imagePath.indexOf("zSlidePath")?n.goToSlide(0,!0):gi&&n.slideshowStart()};this.calculateSlideListCoords=function(a,b){var e=qj,f;switch(Uh){case "0":f=e=0;break;case "1":f=e=25;break;case "2":e=a-e-25;f=20;break;case "3":e=
a-e-25;f=0<Z.toolbarVisible&&8!=Z.toolbarVisible?b-50:b-37.5;break;case "4":e=25;f=0<Z.toolbarVisible&&8!=Z.toolbarVisible?b-50:b-37.5;break;default:e=a-e,f=25}return new Z.Utils.Point(e,f)};this.slideshowStart=function(a){n.slideshowStop();Z.slideshowPlaying=!0;var b=document.getElementById("buttonSlideshowStop"),e=document.getElementById("buttonSlideshowStart");b&&e&&(b.style.display="inline-block",e.style.display="none");Z.Utils.playAudio(Sh,Qc[yf].audio);var b=Z.slideshowPlaying?Qc[yf].showFor:
0,f=a?0:Ja(yf,"next",Qc.length-1);null!==f&&(Z.Utils.loadAudio(Qc[f].audio),Z.Utils.functionCallWithDelay(function(){n.goToSlide(f,null,null,!0)},b))};this.slideshowStop=function(){Z.slideshowPlaying=!1;var a=document.getElementById("buttonSlideshowStop"),b=document.getElementById("buttonSlideshowStart");a&&b&&(a.style.display="none",b.style.display="inline-block")};this.priorSlide=function(a){Z.slideshowPlaying&&a&&n.slideshowStop();ya("prior")};this.nextSlide=function(a){Z.slideshowPlaying&&a&&
n.slideshowStop();ya("next")};this.goToSlide=function(a,b,e,f){if(Z.slideshowPlaying||b||e||f){yf=a;a=Qc[a];e=Z.Utils.parametersToDelimitedString(Z.parameters,"&");temp=a.initialX;var g=Z.Utils.stringValidate(temp)?"center"==temp?"zInitialX="+(Z.imageW/2).toString():isNaN(parseFloat(temp))?null:"zInitialX="+temp:null;temp=a.initialY;f=Z.Utils.stringValidate(temp)?"center"==temp?"zInitialY="+(Z.imageH/2).toString():isNaN(parseFloat(temp))?null:"zInitialY="+temp:null;temp=a.initialZoom;var l=Z.Utils.stringValidate(temp)?
isNaN(parseFloat(temp))?null:"zInitialZoom="+temp:null;temp=a.minZoom;var k=Z.Utils.stringValidate(temp)?isNaN(parseFloat(temp))?null:"zMinZoom="+temp:null;temp=a.maxZoom;var m=Z.Utils.stringValidate(temp)?isNaN(parseFloat(temp))?null:"zMaxZoom="+temp:null;temp=a.hotspotPath;var p=Z.Utils.stringValidate(temp)?"zHotspotPath="+temp:null;temp=a.annotationPath;var n=Z.Utils.stringValidate(temp)?"zAnnotationPath="+temp:null,g=null!==g?g:null,g=null!==f?null!==g?g+"&"+f:f:null,g=null!==l?null!==g?g+"&"+
l:l:null,g=null!==k?null!==g?g+"&"+k:k:null,g=null!==m?null!==g?g+"&"+m:m:null,g=null!==p?null!==g?g+"&"+p:p:null;f=null!==n?null!==g?g+"&"+n:n:null;l=Z.Utils.stringValidate(f)?"&":"";e=e+l+f;switch(a.transition){case "Fade":Z.Viewer.setImageWithFade(a.media,e,b,a.changeFor);break;case "None":Z.Viewer.setImage(a.media,e,b);break;default:Z.Viewer.setImageWithFade(a.media,e,b)}b=Z.Utils.arrayIndexOfObjectValue(gd.options,"value",a.internalID.toString());-1!=b&&(gd.selectedIndex=b);Z.Gallery&&Z.Gallery.getInitialized()&&
Z.Gallery.syncGalleryToViewport(b-1)}};this.getSlides=function(){return Qc};this.slideTransitionTimeoutHandler=function(a,b,e,f,g){if("undefined"===typeof g||null===g)g=50;f&&(Z.Viewer.setImage(b,e,f),a="in");window.clearTimeout(Z.slideTransitionTimeout);Z.slideTransitionTimeout=null;"out"==a?0<=Z.slideOpacity?(Z.slideOpacity-=Lj,a="out"):(Z.slideOpacity=0,a="in",Z.setCallback("viewUpdateComplete",function(){Z.slideTransitionTimeout=window.setTimeout(function(){Z.Viewport.slideTransitionTimeoutHandler(a,
b,e)},g)}),Z.Viewer.setImage(b,e,null)):(0==Z.slideOpacity&&(Z.Utils.playAudio(Sh,Qc[yf].audio),Z.clearCallback("viewUpdateComplete",function(){Z.slideTransitionTimeout=window.setTimeout(function(){Z.Viewport.slideTransitionTimeoutHandler(a,b,e)},g)})),1>=Z.slideOpacity?(Z.slideOpacity+=Lj,a="in"):(Z.slideOpacity=1,a=null));Ua&&Z.Utils.setOpacity(Ua,Z.slideOpacity);Z.NavigatorDisplay&&Z.Utils.setOpacity(Z.NavigatorDisplay,Z.slideOpacity);Z.GalleryDisplay&&Z.Utils.setOpacity(Z.GalleryDisplay,Z.slideOpacity);
null!==a&&0!=Z.slideOpacity&&(Z.slideTransitionTimeout=window.setTimeout(function(){Z.Viewport.slideTransitionTimeoutHandler(a,b,e)},g))};this.initializeAudioMuteButtons=function(){if(Z.audioContent){var a=document.getElementById("buttonAudioOn");a&&(a.style.display="inline-block")}};this.audioMute=function(a){Z.audioMuted=a;var b=document.getElementById("buttonAudioMuted"),e=document.getElementById("buttonAudioOn");b&&e&&(a?(b.style.display="inline-block",e.style.display="none"):(b.style.display=
"none",e.style.display="inline-block"))};this.setViewNoUpdate=function(a,b,e,f,g,l,k,m,p,n,v){ia.left=a;ia.top=b;Ka.width=e;Ka.height=f;Ka.left=g;Ka.top=l;va.width=k;va.height=m;va.left=p;va.top=n;ia.rotation=v};this.setView=function(a,b,e,f,g,l){Eb(a,b,e,f,g,l)};this.zoom=function(a){if("stop"!=a||"stop"!=Z.zooming){switch(a){case "out":0<=Gc&&(Gc-=re);break;case "in":0>=Gc&&(Gc+=re);break;case "stop":Gc=0}Z.zooming=0==Gc?"stop":0<Gc?"in":"out";if(0!=Gc){if(!be){if(0>Gc&&Z.imageZ>Z.minZ||0<Gc&&Z.imageZ<
Z.maxZ)n.toggleWatermarks(!1),A&&39<A.length&&n.setHotspotsVisibility(!1);Z.useCanvas||Z.Utils.clearDisplay(yb);be=window.setTimeout(Me,zf)}}else v(),n.updateView(),n.toggleWatermarks(!0),A&&39<A.length&&n.setHotspotsVisibility(!0)}};this.pan=function(a){if("horizontalStop"!=a||"stop"!=Z.panningX)if("verticalStop"!=a||"stop"!=Z.panningY){if(!Z.tracking)switch(a){case "left":0>=Rc&&(Rc+=Zg);break;case "up":0>=xc&&(xc+=Zg);break;case "down":0<=xc&&(xc-=Zg);break;case "right":0<=Rc&&(Rc-=Zg);break;case "horizontalStop":Rc=
0;break;case "verticalStop":xc=0;break;case "stop":xc=Rc=0}Z.panningX=0==Rc?"stop":0<Rc?"left":"right";Z.panningY=0==xc?"stop":0<xc?"up":"down";$a(Da,1);$a(Da,1);0!=Rc||0!=xc?be||(n.toggleWatermarks(!1),Z.useCanvas||Z.Utils.clearDisplay(yb),A&&39<A.length&&n.setHotspotsVisibility(!1),be=window.setTimeout(Me,zf)):(v(),n.updateView(),n.toggleWatermarks(!0),A&&39<A.length&&n.setHotspotsVisibility(!0))}};this.zoomAndPanToView=function(a,b,e,f,g,l,k){n.zoomAndPanAllStop();if(Z.clickZoomAndPanBlock)Z.clickZoomAndPanBlock=
!1;else{if("undefined"===typeof a||null===a)a=Z.imageX;if("undefined"===typeof b||null===b)b=Z.imageY;if("undefined"===typeof e||null===e)e=Z.imageZ;if("undefined"===typeof f||null===f)f=Z.imageR;if("undefined"===typeof g||null===g)g=bi;if("undefined"===typeof l||null===l)l=vh;if("center"==a||isNaN(parseFloat(a)))a=Z.imageCtrX;if("center"==b||isNaN(parseFloat(b)))b=Z.imageCtrY;if(-1==e||isNaN(parseFloat(e)))e=Z.fitZ;n.toggleWatermarks(!1);Z.useCanvas||Z.Utils.clearDisplay(yb);A&&39<A.length&&n.setHotspotsVisibility(!1);
if("undefined"===typeof a||null===a)a=Z.initialX;if("undefined"===typeof b||null===b)b=Z.initialY;if("undefined"===typeof f||null===f)f=Z.imageR;"undefined"===typeof e||null===e?e=Z.initialZ:100<e?e/=100:e>Z.maxZ?e=Z.maxZ:e<Z.maxZ&&e>Z.maxZ-.01&&(e=Z.maxZ);b=ua(a,b,e,f,"image");a=b.x;b=b.y;e=pb(e);if(Math.round(a)!=Math.round(Z.imageX)||Math.round(b)!=Math.round(Z.imageY)||Math.round(1E5*e)!=Math.round(1E5*Z.imageZ)||Math.round(f)!=Math.round(Z.imageR))Z.interactive=!1,jg=0,p(a,b,e,f,g,l,k)}};this.zoomAndPanAllStop=
function(a,b){Z.interactive&&(Af&&D(),Z.tourPlaying&&b&&(n.tourStop(),a=!1),Z.slideshowPlaying&&b&&(n.slideshowStop(),a=!1),Z.smoothPan&&null!==fd&&(Z.mouseIsDown||H(!0),a=!0),a||n.updateView())};this.syncViewportRelated=function(a,e,f,g,k,l,m,p,v,u){Z.watermarks&&("undefined"===typeof a||null===a||a)&&yb&&(Z.Utils.clearDisplay(yb),Mc());A&&("undefined"===typeof e||null===e||e)&&Ob();Z.sliderZoomVisible&&("undefined"===typeof f||null===f||f)&&(Z.ToolbarDisplay&&Z.Toolbar.getInitialized()&&(a=n.getZoom(),
Z.Toolbar.syncSliderToViewportZoom(a)),Z.Utils.validateCallback("viewZoomingGetCurrentZoom"));Z.Navigator&&("undefined"===typeof g||null===g||g)&&Va();Z.Ruler&&("undefined"===typeof k||null===k||k)&&Z.Ruler&&Z.Ruler.getInitialized()&&Z.Ruler.syncToViewport();Z.sliderImageSetVisible&&"undefined"!==typeof l&&l&&Z.Viewer.syncToolbarImageSetSliderToViewport(Z.viewportCurrentID);Z.comparison&&("undefined"===typeof m||null===m||m)&&Z.Viewer.syncComparisonViewport(m);Z.overlays&&("undefined"===typeof p||
null===p||p)&&Z.Viewer.syncOverlayViewports(p,b);Z.bookmarksSet&&("undefined"===typeof v||null===v||v)&&Z.Utils.setBookmarksURL();Z.tracking&&("undefined"===typeof u||null===u||u)&&n.syncTrackingToViewport();Z.Utils.validateCallback("viewChanging")};this.z633=function(a,b){O(a,b)&&n.syncViewportRelated()};this.reset=function(a){Z.maskingSelection&&Z.maskClearOnUserAction&&n.clearMask();a?(Z.Utils.setButtonDefaults(buttonReset),n.zoomAndPanToView(Z.priorX,Z.priorY,Z.priorZ,Z.priorR)):n.zoomAndPanToView(Z.initialX,
Z.initialY,Z.initialZ,Z.initialR);za(!0)};this.labelScale=function(a){switch(a){case "down":0<=ce&&(ce-=yi);break;case "up":0>=ce&&(ce+=yi);break;case "stop":ce=0}0!=ce?Ug||(Ug=window.setTimeout(Bb,Dj)):(Ug&&(window.clearTimeout(Ug),Ug=null),ce=0)};this.toggleWatermarks=function(a){if(vd){var b="inline-block"==vd.display;vd.display=("undefined"!==typeof a&&null!==a?a:!b)?"inline-block":"none"}};this.toggleConstrainPan=function(a){Z.constrainPan="undefined"!==typeof a&&null!==a?a:!Z.constrainPan;if(Z.constrainPan){a=
parseFloat(Ka.left);var b=parseFloat(Ka.top);a=ua(a,b,Z.imageZ,Z.imageR,"container");ia.left=a.x+"px";ia.top=a.y+"px";n.updateView()}};this.toggleSmoothPan=function(){H();Z.smoothPan=!Z.smoothPan};this.toggleSmoothZoom=function(){D();Z.smoothZoom=!Z.smoothZoom};this.buttonToggleBackfillHandler=function(){n.toggleBackfill()};this.toggleBackfill=function(a){var b=document.getElementById("viewportBackfillDisplay"+Ta.toString());if(b){var b=b.style,e="inline-block"==b.display;b.display=("undefined"!==
typeof a&&null!==a?a:!e)?"inline-block":"none"}};this.buttonToggleDisplayHandler=function(){n.toggleDisplay()};this.toggleDisplay=function(a){var b=document.getElementById("viewportDisplay"+Ta.toString());b&&(Ka=b.style,b="inline-block"==Ka.display,Ka.display=("undefined"!==typeof a&&null!==a?a:!b)?"inline-block":"none")};this.toggleDisplaysOther=function(a){a=a?"inline-block":"none";ud&&(ud.display=a);va&&(va.display=a);Td&&(Td.display=a);Te&&(Te.display=a);vd&&(vd.display=a);Vb&&(Vb.display=a);
mc&&(mc.display=a);gb&&(gb.display=a);Md&&(Md.display=a)};this.zoomAndPanToZoomRectangle=function(a){var b=Math.min(a[0].x,a[1].x,a[2].x,a[3].x),e=Math.max(a[0].x,a[1].x,a[2].x,a[3].x),f=Math.min(a[0].y,a[1].y,a[2].y,a[3].y);a=Math.max(a[0].y,a[1].y,a[2].y,a[3].y);e-=b;a-=f;var b=b+e/2,f=f+a/2,g=n.getRotation(),e=n.z468(e,a,g);n.zoomAndPanToView(b,f,e)};this.toggleFullViewModeExternal=function(){bh=!0;n.toggleFullViewMode()};this.toggleFullViewMode=function(a,b){Z.maskingSelection&&Z.maskClearOnUserAction&&
n.clearMask();Z.ToolbarDisplay&&Z.Toolbar.show(!1);var e=null,f=null;Z.fullViewPrior=Z.fullView;Z.fullView="undefined"!==typeof a&&null!==a?a:!Z.fullView;var g=document.body.style,l=document.documentElement.style,k=Z.ViewerDisplay.style,e=Z.Utils.getElementStyle(Z.pageContainer);Z.fullView?(f=Z.Utils.getContainerSize(Z.pageContainer,Z.ViewerDisplay),$g=f.x,wh=f.y,xh=g.overflow,ci=l.overflow,ah=Z.Utils.stringValidate(e.backgroundColor)&&"transparent"!=e.backgroundColor?e.backgroundColor:Z.Utils.stringValidate(g.backgroundColor)&&
"transparent"!=g.backgroundColor?g.backgroundColor:Z.Utils.getResource("z120"),di=k.zIndex,Z.fullScreenSupported&&!Z.fullPageVisible?(f=Z.Utils.getScreenSize(),Z.fullScreenEntering=!0,Z.Utils.fullScreenView(Z.ViewerDisplay,!0)):(f=Z.Utils.getWindowSize(),Z.mobileDevice?(g.width=f.x,g.height=f.y):(g.width="100%",g.height="100%")),e=f.x,f=f.y,g.overflow="hidden",l.overflow="hidden",k.backgroundColor=ah,k.position="fixed",k.zIndex="99999999",Z.autoResize&&Z.Utils.removeEventListener(window,"resize",
Z.Viewer.viewerEventsHandler)):(g.overflow=xh,l.overflow=ci,k.backgroundColor=ah,k.position="relative",k.zIndex=di,Z.fullScreenSupported&&!Z.fullPageVisible&&Z.Utils.fullScreenView(Z.ViewerDisplay,!1,b),g.width=$g,g.height=wh,e=$g,f=wh,isNaN(e)&&(e=Z.ViewerDisplay.clientWidth),isNaN(f)&&(f=Z.ViewerDisplay.clientHeight),bh=!1,Z.autoResize&&Z.Utils.addEventListener(window,"resize",Z.Viewer.viewerEventsHandler));Z.initialFullPage&&n.setSizeAndPosition(e,f);g=Z.viewportCurrent.calculateZoomForResize(Z.viewportCurrent.getZoom(),
Z.viewerW,Z.viewerH,e,f);Z.Viewer.resizeViewer(e,f,g);g=null;if(Z.comparison)(g=0==n.getViewportID()?Z.Viewport1:Z.Viewport0)&&g.syncViewportResize(Z.imageX,Z.imageY,Z.imageZ,Z.imageR);else if(Z.overlays)for(l=0,k=Z.imageSetLength-1;l<k;l++)Z["Viewport"+l.toString()].syncViewportResize(Z.imageX,Z.imageY,Z.imageZ,Z.imageR);Z.imageList&&n.getStatus("initializedImageList")&&(n.setSizeAndPositionImageList(),g&&g.getStatus("initializedImageList")&&g.setSizeAndPositionImageList());g=Z.fullView;l=document.getElementById("buttonFullView");
k=document.getElementById("buttonFullViewExit");l&&k&&(l.style.display=g?"none":"inline-block",k.style.display=g?"inline-block":"none");bh?(Qe||(g=Z.Utils.getResource("z420"),l=parseFloat(Z.viewerW)-54,k=parseFloat(Z.viewerH)-54,e=Z.Utils.getResource("DEFAULT_FULLVIEWEXITEXTERNALBUTTONCOLOR"),Qe=new Z.Utils.Button("buttonFullViewExitExternal",g,null,null,null,null,"34px","34px",l+"px",k+"px","mousedown",Bf,"z391EXITEXTERNAL","solid","1px",e,"0px","0px"),Z.ViewerDisplay.appendChild(Qe.elmt)),Qe.elmt.style.display=
"inline-block"):Qe&&(Qe.elmt.style.display="none");Z.fullViewPrior=!1};this.rotate=function(a,b){za();if(!Z.rotationFree||b)0!=Z.imageR%90&&(Z.imageR=90*Math.round(Z.imageR/90)),n.rotateStep("clockwise"==a?90:-90,!0);else if("stop"!=a||"stop"!=Z.rotating)Nd="stop"==a?0:"clockwise"==a?ai:-ai,Z.rotating=0==Nd?"stop":0<Nd?"clockwise":"counterwise",0!=Nd?de||(de=window.setTimeout(rh,sh)):(Nd=0,de&&(window.clearTimeout(de),de=null),n.updateView())};this.rotateStep=function(a,b,e){if(Z.interactive)if(Z.rotationSupported)if(a=
Z.imageR+a,Z.rotationFree)Z.Utils.rotateElement(ia,a),Z.imageR=a,Va();else{Z.interactive=!1;var f=fb(a);b?n.zoomAndPanToView(Z.imageX,Z.imageY,Z.imageZ,a,600,12,function(){Z.imageR=f}):e?(Z.Utils.rotateElement(ia,Z.imageR,!0),Z.interactive=!0):(Z.Utils.rotateElement(ia,a),Ea&&0!=Z.imageR&&Yb.rotate((a-Z.imageR)*Math.PI/180),Z.imageR=f,n.zoomAndPanToView(Z.imageX,Z.imageY,Z.imageZ))}else Z.Utils.showMessage(Z.Utils.getResource("z12"))};this.toggleEditModeMeasure=function(a){n.zoomAndPanAllStop();Z.maskingSelection&&
Z.maskClearOnUserAction&&n.clearMask();"undefined"!==typeof a&&!a||"measure"==Z.labelMode?(null===Z.editMode&&"measure"==Z.labelMode&&0<A.length&&(n.deleteAllMeasureHotspots(),K=null),n.setEditModeLabel("view")):n.setEditModeLabel("measure")};this.getImageFilterValuePrior=function(a){var b=0;switch(a){case "brightness":b=Si;break;case "contrast":b=Ti;break;case "sharpness":b=Ui;break;case "blurriness":b=Vi;break;case "colorRed":b=Wi;break;case "colorGreen":b=Xi;break;case "colorBlue":b=Yi;break;case "colorRedRange":b=
Zi;break;case "colorGreenRange":b=$i;break;case "colorBlueRange":b=aj;break;case "colorRedRange2":b=bj;break;case "colorGreenRange2":b=cj;break;case "colorBlueRange2":b=dj;break;case "gamma":b=ej;break;case "gammaRed":b=fj;break;case "gammaGreen":b=gj;break;case "gammaBlue":b=hj;break;case "hue":b=ij;break;case "saturation":b=jj;break;case "lightness":b=kj;break;case "whiteBalance":b=lj;break;case "noise":b=mj}return b};this.setImageFilterValuePrior=function(a,b){switch(a){case "brightness":Si=b;
break;case "contrast":Ti=b;break;case "sharpness":Ui=b;break;case "blurriness":Vi=b;break;case "colorRed":Wi=b;break;case "colorGreen":Xi=b;break;case "colorBlue":Yi=b;break;case "colorRedRange":Zi=b;break;case "colorGreenRange":$i=b;break;case "colorBlueRange":aj=b;break;case "colorRedRange2":bj=b;break;case "colorGreenRange2":cj=b;break;case "colorBlueRange2":dj=b;break;case "gamma":ej=b;break;case "gammaRed":fj=b;break;case "gammaGreen":gj=b;break;case "gammaBlue":hj=b;break;case "hue":ij=b;break;
case "saturation":jj=b;break;case "lightness":kj=b;break;case "whiteBalance":lj=b;break;case "noise":mj=b}};this.setImageFilter=function(a,b,e){Z.Utils.arrayClear(Vd);if("undefined"!==typeof a&&null!==a&&"null"!==a)if(void 0!==typeof b&&null!==b&&0==b&&-1==a.indexOf("Range"))Vg(a);else{for(var f=void 0!==typeof b&&null!==b,g="grayscale"==a||"threshold"==a||"inversion"==a||"normalize"==a||"equalize"==a||"edges"==a||"sepia"==a,l=Z.Utils.arrayIndexOfObjectValue(Ga,"filter",a),k=-1==l,m=0<Ga.length&&
Ga[Ga.length-1].filter==a,p=0<Ga.length,v=0,u=Ga.length;v<u;v++){var D=Ga[v].filter.toLowerCase();if(-1==D.indexOf("color")&&-1==D.indexOf("gamma")){p=!1;break}}if(f||g){f=!1;if(p&&-1!=l)Z.Toolbar.addFilterToImageFilterList(a,b,null,!0),Ga[l].value=b,Ga[l].value2=e,a=null,f=!0;else if(m&&!g)Z.Toolbar.addFilterToImageFilterList(a,b),Ga[Ga.length-1].value=b,Ga[Ga.length-1].value2=e,f=!0;else if(k||!g)Z.Toolbar.addFilterToImageFilterList(a,b,e),Ga[Ga.length]={filter:a,value:b,value2:e},f=!0;f&&(1<Ga.length&&
(a=null),validateImageFiltersConvolve(),n.applyImageFilter(a,b,null,e))}}};this.clearImageFilterLast=function(){0<Ga.length&&Vg(Ga[Ga.length-1].filter,!0)};this.clearImageFiltersAll=function(){if(0<Ga.length){for(var a=0,b=Ga.length;a<b;a++)Z.Toolbar.clearImageFilterInPanel(Ga[a].filter);Z.Utils.arrayClear(Ga);validateImageFiltersConvolve();n.updateView(!0)}Z.Toolbar.setFilterSliderReferences(imageFilterCurrent)};this.imageFilterButtonsHandler=function(a,b){var e="plus"==b?1:-1;if(Z.Utils.stringValidate(a)){var e=
.05*e,f=n.getImageFilterRangeMaxAbsolute(a),e=n.getImageFilterValuePrior(a)+f*e,e=constrainImageFilter(a,e);Z.Toolbar.syncImageFilterPanel(a,e);n.setImageFilterValuePrior(a,e);n.setImageFilter(a,e)}};this.getImageFilterRange=function(a){var b=0,e=100;switch(a){case "brightness":b=-150;e=150;break;case "contrast":b=-50;e=100;break;case "sharpness":e=40;break;case "blurriness":e=30;break;case "colorRed":b=-100;e=100;break;case "colorGreen":b=-100;e=100;break;case "colorBlue":b=-100;e=100;break;case "colorRedRange":b=
0;e=n.getImageFilterRangeMaxAbsolute(a);break;case "colorGreenRange":b=0;e=n.getImageFilterRangeMaxAbsolute(a);break;case "colorBlueRange":b=0;e=n.getImageFilterRangeMaxAbsolute(a);break;case "colorRedRange2":b=0;e=n.getImageFilterRangeMaxAbsolute(a);break;case "colorGreenRange2":b=0;e=n.getImageFilterRangeMaxAbsolute(a);break;case "colorBlueRange2":b=0;e=n.getImageFilterRangeMaxAbsolute(a);break;case "gamma":b=0;e=2;break;case "gammaRed":b=0;e=2;break;case "gammaGreen":b=0;e=2;break;case "gammaBlue":b=
0;e=2;break;case "hue":b=0;e=351;break;case "saturation":b=-100;e=100;break;case "lightness":b=-100;e=100;break;case "whiteBalance":b=0;e=4E4;break;case "noise":b=0,e=100}return new Z.Utils.RangeScale(b,e)};this.getImageFilterRangeMaxAbsolute=function(a){var b=100;switch(a){case "brightness":b=300;break;case "contrast":b=150;break;case "sharpness":b=40;break;case "blurriness":b=30;break;case "colorRed":b=200;break;case "colorGreen":b=200;break;case "colorBlue":b=200;break;case "colorRedRange":b=255;
break;case "colorGreenRange":b=255;break;case "colorBlueRange":b=255;break;case "colorRedRange2":b=255;break;case "colorGreenRange2":b=255;break;case "colorBlueRange2":b=255;break;case "gamma":b=2;break;case "gammaRed":b=2;break;case "gammaGreen":b=2;break;case "gammaBlue":b=2;break;case "hue":b=359;break;case "saturation":b=200;break;case "lightness":b=200;break;case "whiteBalance":b=4E4;break;case "noise":b=100}return b};constrainImageFilter=function(a,b){if("undefined"!==typeof b&&null!==b&&""!=
b&&!isNaN(b)){var e=n.getImageFilterRange(a);b=Math.max(b,e.min);b=Math.min(b,e.max)}return b};validateImageFiltersConvolve=function(){var a=-1!=Z.Utils.arrayIndexOfObjectValue(Ga,"filter","sharpness"),b=-1!=Z.Utils.arrayIndexOfObjectValue(Ga,"filter","blurriness"),e=-1!=Z.Utils.arrayIndexOfObjectValue(Ga,"filter","edges");Gg=a||b||e};this.applyImageFilter=function(a,b,e,f){"undefined"!==typeof ui&&"undefined"!==typeof ch&&(null!==ti||null!==ch?(window.clearTimeout(ui),ui=null,window.clearTimeout(ch),
ch=null):ti=window.setTimeout(function(){ti=null;var g="sharpness"==a||"blurriness"==a||"edges"==a;Z.buttonIsDown&&!g?Vh(a,b,f):("undefined"!==typeof Vd&&Z.Utils.arrayClear(Vd),Cf(sa,a,b,e,f),g&&Z.Utils.showMessage(Z.Utils.getResource("z11-CONVOLUTION"),!1,null,"center",!1,"2"),ch=window.setTimeout(function(){ch=null;Cf(S,a,b,e,f);Z.Utils.hideMessage()},100))},100))};this.cacheCanvasImage=function(a){a?pi=tb.getImageData(0,0,sa.width,sa.height):(qi=tb.getImageData(0,0,sa.width,sa.height),ri=Fd.getImageData(0,
0,S.width,S.height))};this.cacheTileImage=function(a){Vd[Vd.length]=a};this.getSmoothPanGliding=function(){return Cb};this.setSmoothPanGliding=function(a){Cb=a};this.fullScreenEscapeHandler=function(a){Z.fullScreenEntering?Z.fullScreenEntering=!1:n.toggleFullViewMode(!1,!0)};this.mouseWheelHandler=function(a,b){Z.mouseWheelIsDown=!0;Z.mouseWheelCompleteTimer&&window.clearTimeout(Z.mouseWheelCompleteTimer);Z.mouseWheelCompleteTimer=window.setTimeout(Z.Viewer.z586,Z.mouseWheelCompleteDuration);if(!("zoom"!=
Z.sliderFocus||Z.imageSet&&b)){var e=n.z482(Da,Pa*(1+(0<a?re:-re)));constrainedZ=pb(e);constrainedZ!=Z.imageZ&&(Z.zooming=0<a?"in":0>a?"out":"stop",n.z633(constrainedZ))}else if("imageSet"==Z.sliderFocus||b)0<a?Z.Viewer.viewportNext():0>a&&Z.Viewer.viewportPrior()}};
Z.ZoomifyToolbar=function(b){function a(){var a=parseFloat(Z.Utils.getResource("UI_TOOLBARINTERNALBACKGROUNDALPHA")),b=Z.Utils.getResource("UI_TOOLBARINTERNALBACKGROUNDCOLOR"),e=Z.Utils.getResource("UI_TOOLBARINTERNALBUTTONUPCOLOR"),f=Z.viewerW/2-50,k=Z.viewerH-25-10,m=Math.round(25),u=Math.round(25/1.5),q=(100-3*m)/4,t=(25-u)/2;Z.ToolbarDisplay=Z.Utils.createContainerElement("div","ToolbarDisplay","inline-block","absolute","visible","100px","25px",f+"px",k+"px","none","0px","transparent none","0px",
"0px","normal");dc=Z.ToolbarDisplay.style;f=Z.Utils.createContainerElement("div","toolbarBackgroundInternal","inline-block","absolute","visible","100px","25px","0px","0px","solid","1px",b,"0px","0px","normal");Z.Utils.setOpacity(f,a,b);Z.ToolbarDisplay.appendChild(f);a=Z.Utils.createContainerElement("div","buttonZoomOutInternal","inline-block","absolute","visible",m+"px",u+"px",q+1+"px",t+1+"px","none","0px",e,"0px","0px","normal");Z.Utils.setOpacity(a,.4,b);f=Z.Utils.getResource("UI_TOOLBARINTERNALBUTTONZOOMOUTTEXT");
f=document.createTextNode(f);a.appendChild(f);Z.ToolbarDisplay.appendChild(a);Ba=a.style;Z.Utils.setTextNodeStyle(f,"black","verdana","15px","none","normal","normal","normal","bold","1em","center","none");Z.Utils.disableTextInteraction(f);f=Z.Utils.createContainerElement("div","buttonResetInternal","inline-block","absolute","visible",m+"px",u+"px",2*q+m+1+"px",t+1+"px","none","0px",e,"0px","0px","normal");Z.Utils.setOpacity(f,.4,b);k=Z.Utils.getResource("UI_TOOLBARINTERNALBUTTONRESETTEXT");k=document.createTextNode(k);
f.appendChild(k);Z.ToolbarDisplay.appendChild(f);Q=f.style;Z.Utils.setTextNodeStyle(k,"blue","verdana","15px","none","normal","normal","normal","bold","1em","center","none");Z.Utils.disableTextInteraction(k);e=Z.Utils.createContainerElement("div","buttonZoomInInternal","inline-block","absolute","visible",m+"px",u+"px",3*q+2*m+1+"px",t+1+"px","none","0px",e,"0px","0px","normal");Z.Utils.setOpacity(e,.4,b);b=Z.Utils.getResource("UI_TOOLBARINTERNALBUTTONZOOMINTEXT");b=document.createTextNode(b);e.appendChild(b);
Z.ToolbarDisplay.appendChild(e);ib=e.style;Z.Utils.setTextNodeStyle(b,"black","verdana","15px","none","normal","normal","normal","bold","1em","center","none");Z.Utils.disableTextInteraction(b);Z.Utils.addEventListener(a,"mouseover",ea);Z.Utils.addEventListener(a,"mousedown",ea);Z.Utils.addEventListener(a,"mouseup",ea);Z.Utils.addEventListener(a,"mouseout",ea);Z.Utils.addEventListener(f,"mouseover",ea);Z.Utils.addEventListener(f,"mousedown",ea);Z.Utils.addEventListener(f,"mouseup",ea);Z.Utils.addEventListener(f,
"mouseout",ea);Z.Utils.addEventListener(e,"mouseover",ea);Z.Utils.addEventListener(e,"mousedown",ea);Z.Utils.addEventListener(e,"mouseup",ea);Z.Utils.addEventListener(e,"mouseout",ea);dc.zIndex=(Z.baseZIndex+2).toString();Z.ViewerDisplay.appendChild(Z.ToolbarDisplay);Z.Utils.addEventListener(Z.ToolbarDisplay,"mouseover",Z.Utils.stopPropagation);g(!0)}function e(){Z.Gallery&&Z.Gallery.getInitialized()?Z.Gallery.setSizeAndPosition():window.setTimeout(e,100)}function f(){window.clearInterval(Db);Db=
null;var a=document.getElementById("progressTextBoxCenteredDiv");a&&(a=a.firstChild)&&(a.nodeValue="")}function g(a){!aa&&a&&(aa=!0,Z.Utils.validateCallback("toolbarInitialized"),Z.Viewer.validateViewerReady("toolbarInitialized"))}function m(a){4>Z.toolbarVisible&&!Z.mobileDevice||8==Z.toolbarVisible||Z.toolbarInternal?k(a):t(!a)}function k(a){dc&&(dc.display=a?"inline-block":"none")}function t(a){Z.ToolbarMinimized=a;if(dc){var b=document.getElementById("buttonContainer"),e=document.getElementById("toolbarBackground"),
f=document.getElementById("buttonMinimize"),g=document.getElementById("buttonExpand"),k=document.getElementById("logoDivider"),m=0;g&&!Vc&&(m=parseFloat(g.style.left)+parseFloat(g.style.width)+4);if(Z.imageFilters)var u=document.getElementById("imageFilterPanelBackground"),q=document.getElementById("buttonContainerImageFilter");var t=Z.toolbarCurrentW;a?(b&&(b.style.display="none"),f&&g&&!Vc&&(k&&(k.style.display="none"),f.style.display="none",g.style.display="inline-block"),dc.width=m+"px",e&&(e.style.width=
m+"px"),u&&q&&(u.style.width="0px",q.style.display="none")):(b&&(b.style.display="inline-block"),f&&g&&!Vc&&(k&&(k.style.display="inline-block"),f.style.display="inline-block",g.style.display="none"),dc.width=t+"px",e&&(e.style.width=t+"px"),u&&q&&Jg&&(u.style.width=Kf+"px",q.style.display="inline-block"))}}function q(a){if("undefined"!==typeof trszS&&"undefined"!==typeof btszS){a=(a-Z.minZ)/(Z.maxZ-Z.minZ);var b=parseFloat(trszS.left),e=parseFloat(trszS.left)+parseFloat(trszS.width)-parseFloat(btszS.width)-
b;btszS.left=a*e+b+"px"}}function G(a){"undefined"!==typeof btsZ&&(fb=!0,a=Z.Utils.getMousePosition(a),btsZ.mouseXPrior=a.x,btsZ.mouseYPrior=a.y)}function w(){if("undefined"!==typeof trszS&&"undefined"!==typeof btsZ&&"undefined"!==typeof btszS){var a=parseFloat(trszS.left),e=parseFloat(trszS.left)+parseFloat(trszS.width)-parseFloat(btszS.width),f=parseFloat(btszS.left)+(ja.x-btsZ.mouseXPrior);f<a?f=a:f>e?f=e:btsZ.mouseXPrior=ja.x;btszS.left=f+"px";a=Z.minZ+(f-a)/(e-a)*(Z.maxZ-Z.minZ);e=a-b.getZoom();
Z.zooming=0<e?"in":0>e?"out":"stop";b.z633(a)}}function R(a,e,f){if("undefined"===typeof f||null===f)f=e;if("sliderStart"!=f||!Kg)if(a=Z.Utils.event(a))switch(f){case "z653":P(e);if("undefined"!==typeof xb&&"undefined"!==typeof ya){e=parseFloat(ya.left);var g=parseFloat(ya.left)+parseFloat(ya.width)-parseFloat(za.width);f=Z.Utils.getElementPosition(xb);a=Z.Utils.getMousePosition(a).x-f.x-parseFloat(za.width)/2;f=ka(a,e,g);if(f!=b.getImageFilterValuePrior(ga)){var k,m;(g=null!==za&&null!==Eb)?(k=parseFloat(za.left)-
e,e=parseFloat(Eb.left)-e,k=Math.abs(k-a),e=Math.abs(e-a),k<e?(e=f,k=b.getImageFilterValuePrior(ga+"2"),a=za,m=ga):(e=b.getImageFilterValuePrior(ga),k=f,a=Eb,"2"!=ga.substring(ga.length-1)&&(m=ga+"2"))):(e=f,a=za,m=ga);L.syncImageFilterPanel(m,f,a);b.setImageFilterValuePrior(m,f);b.setImageFilter(m,e,k)}}break;case "sliderStart":Kg=!0;P(e);"hue"!=ga&&"saturation"!=ga&&"sharpness"!=ga&&"blurriness"!=ga||Z.Utils.showMessage("\n"+Z.Utils.stringUpperCaseFirstLetter(ga)+Z.Utils.getResource("z11-CONVOLUTION-ONMOUSEUP"),
!1,null,"center",!0,"2");"undefined"!==typeof Ja&&(Wc=!0,k=Z.Utils.getMousePosition(a),Ja.mouseXPrior=k.x,Ja.mouseYPrior=k.y,Lg&&b.cacheCanvasImage(!0));break;case "sliderSlide":"undefined"!==typeof ya&&"undefined"!==typeof Ja&&"undefined"!==typeof za&&(e=parseFloat(ya.left),g=parseFloat(ya.left)+parseFloat(ya.width)-parseFloat(za.width),m=parseFloat(za.left)+(Qd.x-Ja.mouseXPrior),m<e?m=e:m>g?m=g:Ja.mouseXPrior=Qd.x,a=ka(m-e,e,g),za.left=m+"px",(g=null!==za&&null!==Eb)?((g="2"!=ga.substring(ga.length-
1))?(e=a,k=b.getImageFilterValuePrior(ga+"2")):(e=b.getImageFilterValuePrior(ga.substring(0,ga.length-1)),k=a),g?parseFloat(Eb.left)<=m&&(Eb.left=m+"px",m=ga+"2",L.setImageFilterText(m,e),b.setImageFilterValuePrior(m,e)):parseFloat(Eb.left)>=m&&(Eb.left=m+"px",m=ga.substring(0,ga.length-1),L.setImageFilterText(m,k),b.setImageFilterValuePrior(m,k))):e=a,a!=b.getImageFilterValuePrior(ga)&&(L.setImageFilterText(ga,a),"hue"!=ga&&"saturation"!=ga&&"sharpness"!=ga&&"blurriness"!=ga&&b.applyImageFilter(ga,
e,"canvas",k),b.setImageFilterValuePrior(ga,a)));break;case "sliderEnd":Kg=!1;"undefined"!==typeof ya&&"undefined"!==typeof Ja&&"undefined"!==typeof za&&(e=parseFloat(ya.left),g=parseFloat(ya.left)+parseFloat(ya.width)-parseFloat(za.width),m=parseFloat(za.left)+(Qd.x-Ja.mouseXPrior),m<e?m=e:m>g?m=g:Ja.mouseXPrior=Qd.x,a=ka(m-e,e,g),za.left=m+"px",-1==ga.indexOf("Range")?e=a:((g="2"!=ga.substring(ga.length-1))?(e=a,k=b.getImageFilterValuePrior(ga+"2")):(e=b.getImageFilterValuePrior(ga.substring(0,
ga.length-1)),k=a),g?parseFloat(Eb.left)<=m&&(Eb.left=m+"px",m=ga+"2",L.setImageFilterText(m,e),b.setImageFilterValuePrior(m,e)):parseFloat(Eb.left)>=m&&(Eb.left=m+"px",m=ga.substring(0,ga.length-1),L.setImageFilterText(m,k),b.setImageFilterValuePrior(m,k))),a!=b.getImageFilterValuePrior(ga)||"sliderEnd"==f)&&(L.setImageFilterText(ga,a),b.setImageFilter(ga,e,k),validateImageFiltersConvolve(),b.applyImageFilter(ga,e,null,k),b.setImageFilterValuePrior(ga,a));Wc=!1;break;case "imageFilterText":k=a.type;
m=Z.Utils.target(a);e=m.value;if("undefined"!==typeof e&&null!==e&&""!=e&&!isNaN(e)||"blur"==k)switch(k){case "focus":0==m.value&&(m.value="");ga=m.id.substring(0,m.id.indexOf("TextElement"));P(null,ga);break;case "input":e!=b.getImageFilterValuePrior(ga)&&(e=constrainImageFilter(ga,e),m.value=e,L.setImageFilterSlider(ga,e),b.setImageFilter(ga,e));break;case "change":ga!=Ob&&e!=b.getImageFilterValuePrior(ga)&&(e=constrainImageFilter(ga,e),m.value=e,L.setImageFilterSlider(ga,e),b.setImageFilter(ga,
e));break;case "blur":""==m.value&&(m.value=0)}break;case "checkbox":m=Z.Utils.target(a);fa();k=m.checked;m=e.substring(e.indexOf("Filter")+6,e.length).toLowerCase();e=null;k||(e=0);b.setImageFilter(m,e);break;case "buttonImageFilterPlus":P(null,ga);b.imageFilterButtonsHandler(ga,"plus");break;case "buttonImageFilterMinus":P(null,ga),b.imageFilterButtonsHandler(ga,"minus")}}function U(a){R(a,null,"imageFilterText")}function P(a,b,e){var f=!1;"undefined"===typeof a||null===a?"undefined"!==typeof b&&
Z.Utils.stringValidate(b)?(ga=b,f=!0):"undefined"!==typeof ga&&Z.Utils.stringValidate(ga)||(ga="brightness",f=!0):(b=17,-1!=a.indexOf("buttonSliderFilter")&&(b=18),a=a.substring(b,a.length),ga=Z.Utils.stringLowerCaseFirstLetter(a),f=!0);f&&(Z.Toolbar.setFilterSliderReferences(ga),e||(Lg=ga!=Ob,Ob=ga))}function ka(a,e,f){var g=b.getImageFilterValuePrior(ga);if(a!=Me){Me=a;a/=f-e;0>a&&(a=0);1<a&&(a=1);switch(ga){case "brightness":a-=.5;break;case "contrast":a-=.3333;break;case "colorRed":a-=.5;break;
case "colorGreen":a-=.5;break;case "colorBlue":a-=.5;break;case "saturation":a-=.5;break;case "lightness":a-=.5}g=b.getImageFilterRangeMaxAbsolute(ga)*a;g=-1==ga.indexOf("gamma")?Math.round(g):Math.round(10*g)/10}return g}function ca(a,b){Qd=new Z.Utils.Point(a.clientX,a.clientY)}function J(a,b){var e=Z.Utils.getFirstTouch(a);e&&(Qd=new Z.Utils.Point(e.pageX,e.pageY))}function ba(a){if("undefined"!==typeof trsisS&&"undefined"!==typeof btsisS){a=Z.viewportCurrentID/(Z.imageSetLength-1);var b=parseFloat(trsisS.left),
e=parseFloat(trsisS.left)+parseFloat(trsisS.width)-parseFloat(btsisS.width)-b;btsisS.left=a*e+b+"px"}}function I(a){btsiS&&(cc=!0,a=Z.Utils.getMousePosition(a),btsiS.mouseXPrior=a.x,btsiS.mouseYPrior=a.y)}function W(){if(trsiS&&btsiS&&btsiS){var a=parseFloat(trsisS.left),b=parseFloat(trsisS.left)+parseFloat(trsisS.width)-parseFloat(btsisS.width),e=parseFloat(btsisS.left)+(yd.x-btsiS.mouseXPrior);e<a?e=a:e>b?e=b:btsiS.mouseXPrior=yd.x;btsisS.left=e+"px";a=Math.round((e-a)/(b-a)*(Z.imageSetLength-1));
a!=Z.viewportCurrentID&&Z.Viewer.viewportSelect(a,!0)}}function M(a){yd=new Z.Utils.Point(a.clientX,a.clientY)}function oa(a){(a=Z.Utils.getFirstTouch(a))&&(yd=new Z.Utils.Point(a.pageX,a.pageY))}function ea(a){if(a=Z.Utils.event(a)){var e=a.type,f=Z.Utils.target(a);if(f){Ba.background=Xa;Q.background=Xa;ib.background=Xa;var g=f.id;a=a.altKey;switch(e){case "mouseover":f.style.background=ha;break;case "mousedown":f.style.background=ma;"buttonZoomInInternal"==g?a||b.zoom("in"):"buttonZoomOutInternal"==
g&&(a||b.zoom("out"));break;case "mouseup":f.style.background=ha,b.zoom("stop"),"buttonResetInternal"==g&&b.reset(a)}}}}function E(a){if(a=Z.Utils.event(a)){var e=a.type,f=Z.Utils.target(a);if(f){var g=f.parentNode;if(g){var k=g;tbID=g.id}}f=Z.Utils.relatedTarget(a)}"mousedown"==e&&b&&"buttonAudioOn"!=tbID&&"buttonAudioMuted"!=tbID&&(b.zoomAndPanAllStop(!1,!0),Z.maskingSelection&&Z.maskClearOnUserAction&&b.clearMask());if((Z.interactive||"mousedown"!=e&&"mouseup"!=e||"buttonRotateClockwise"==tbID||
"buttonRotateCounterwise"==tbID)&&(!f||"[object HTMLSelectElement]"!=f&&"[object HTMLOptionElement]"!=f)&&!Z.Utils.isRightMouseButton(a)){Z.touchSupport&&a.preventDefault();if(tbID&&-1!=tbID.indexOf("viewportContainer")||fb||Wc||cc)fb?g=document.getElementById("buttonSliderZoom"):cc&&(g=document.getElementById("buttonSliderImageSet")),g&&(tbID=g.id);Y(g,e);if(tbID&&"buttonBackground"!=tbID&&e)switch(e){case "click":e=-1!=tbID.toLowerCase().indexOf("checkbox");b&&e&&jb(a,tbID);break;case "mouseover":if("trackSliderZoom"!=
tbID&&"trackSliderImageSet"!=tbID)if(Z.Utils.removeEventListener(g.childNodes[0],"mouseover",E),Z.Utils.addEventListener(g.childNodes[1],"mousedown",E),Z.Utils.addEventListener(g.childNodes[1],"mouseout",E),fb&&k&&Z.Utils.addEventListener(k.childNodes[0],"mouseup",E),cc&&k&&Z.Utils.addEventListener(k.childNodes[0],"mouseup",E),"buttonZoomIn"==tbID||"buttonSliderZoom"==tbID||"buttonZoomOut"==tbID)Z.sliderFocus="zoom";else{if("buttonImageSetPrior"==tbID||"buttonSliderImageSet"==tbID||"buttonImageSetNext"==
tbID)Z.sliderFocus="imageSet"}else Z.Utils.addEventListener(g.childNodes[0],"mouseout",E),Z.sliderFocus="trackSliderImageSet"==tbID?"imageSet":"zoom";break;case "mousedown":Z.buttonIsDown=!0;!Z.fullView&&document.activeElement&&document.activeElement.blur();"trackSliderZoom"!=tbID&&"trackSliderImageSet"!=tbID&&-1==tbID.indexOf("trackSliderFilter")?(Z.Utils.removeEventListener(g.childNodes[1],"mousedown",E),Z.Utils.removeEventListener(g.childNodes[1],"mouseout",E),Z.Utils.addEventListener(g.childNodes[2],
"mouseup",E),Z.Utils.addEventListener(g.childNodes[2],"mouseout",E),"buttonSliderZoom"==tbID?(G(a),T(a),Z.Utils.addEventListener(document,"mousemove",T),Va||(Va=window.setInterval(w,pb)),Z.Utils.addEventListener(document,"mouseup",E)):-1!=tbID.indexOf("buttonSliderFilter")?(R(a,tbID,"sliderStart"),ca(a,tbID),Z.Utils.addEventListener(document,"mousemove",ca),Nc||(Nc=window.setInterval(function(){R(a,tbID,"sliderSlide")},nd)),Z.Utils.addEventListener(document,"mouseup",E)):"buttonSliderImageSet"==tbID&&
(I(a),M(a),Z.Utils.addEventListener(document,"mousemove",M),gc||(gc=window.setInterval(W,zd)),Z.Utils.addEventListener(document,"mouseup",E))):Z.Utils.addEventListener(document,"mouseup",E);b&&jb(a,tbID);break;case "mouseup":Z.buttonIsDown=!1;"trackSliderZoom"!=tbID&&"trackSliderImageSet"!=tbID&&-1==tbID.indexOf("trackSliderFilter")?(Z.Utils.removeEventListener(g.childNodes[2],"mouseup",E),Z.Utils.removeEventListener(g.childNodes[2],"mouseout",E),Z.Utils.addEventListener(g.childNodes[1],"mousedown",
E),Z.Utils.addEventListener(g.childNodes[1],"mouseout",E),k&&(fb||Wc||cc)&&Z.Utils.removeEventListener(k.childNodes[0],"mouseup",E)):Z.Utils.addEventListener(document,"mouseup",E);b&&jb(a,tbID);break;case "mouseout":if("trackSliderZoom"!=tbID&&-1==tbID.indexOf("trackSliderFilter")&&"trackSliderImageSet"!=tbID){if(Z.Utils.removeEventListener(g.childNodes[1],"mousedown",E),Z.Utils.removeEventListener(g.childNodes[1],"mouseout",E),Z.Utils.addEventListener(g.childNodes[0],"mouseover",E),b&&jb(a,tbID),
"buttonImageSetPrior"==tbID||"buttonSliderImageSet"==tbID||"trackSliderImageSet"==tbID||"buttonImageSetNext"==tbID||"buttonZoomIn"==tbID||"buttonSliderZoom"==tbID||"buttonZoomOut"==tbID)Z.sliderFocus=2==Z.mouseWheel?"imageSet":"zoom"}else Z.Utils.removeEventListener(g.childNodes[0],"mouseout",E),Z.sliderFocus=2==Z.mouseWheel?"imageSet":"zoom";break;case "touchstart":"buttonSliderZoom"==tbID?(G(a),Ca(a),Z.Utils.addEventListener(document,"touchmove",Ca),Va||(Va=window.setInterval(w,pb))):-1!=tbID.indexOf("buttonSliderFilter")?
(R(a,tbID,"sliderStart"),J(a,tbID),Z.Utils.addEventListener(document,"touchmove",J),Nc||(Nc=window.setInterval(function(){R(a,tbID,"sliderSlide")},nd))):"buttonSliderImageSet"==tbID&&(I(a),oa(a),Z.Utils.addEventListener(document,"touchmove",oa),gc||(gc=window.setInterval(W,zd)));Z.Utils.addEventListener(g,"touchend",E);Z.Utils.addEventListener(g,"touchcancel",E);b&&jb(a,tbID);break;case "touchend":Z.Utils.addEventListener(g,"touchstart",E);b&&jb(a,tbID);break;case "touchcancel":Z.Utils.addEventListener(g,
"touchstart",E);b&&jb(a,tbID);break;case "MSPointerDown":"buttonSliderZoom"==tbID?(G(a),Ca(a),Z.Utils.addEventListener(document,"MSPointerMove",Ca),Va||(Va=window.setInterval(w,pb))):-1!=tbID.indexOf("SliderFilter")?(R(a,tbID,"sliderStart"),J(a,tbID),Z.Utils.addEventListener(document,"MSPointerMove",J),Nc||(Nc=window.setInterval(function(){R(a,tbID,"sliderSlide")},nd))):"buttonSliderImageSet"==tbID&&(I(a),oa(a),Z.Utils.addEventListener(document,"MSPointerMove",oa),gc||(gc=window.setInterval(W,zd)));
Z.Utils.addEventListener(g,"MSPointerUp",E);b&&jb(a,tbID);break;case "MSPointerUp":Z.Utils.addEventListener(g,"MSPointerDown",E),b&&jb(a,tbID)}}}function jb(a,e){var f=a.type,g=Z.annotationFileShared?"0":ta,k=a.altKey;if("click"==f)Z.comparison&&-1!=e.indexOf("Sync")?(f=Z.Utils.target(a),Z.syncComparison=f.checked,Z.Viewer.syncComparisonViewport(!0)):Z.tracking&&-1!=e.indexOf("Count")?b.trackingEventsManager(a,e):Z.userLogging&&-1!=e.indexOf("User")?b.trackingEventsManager(a,e):Z.imageFilters&&-1!=
e.indexOf("Filter")&&R(a,e,"checkbox");else if("mousedown"==f||"touchstart"==f)switch(fa(),L.positionButtonBorder(e),Z.tracking&&-1!=e.indexOf("buttonCounterListShow")&&(e="buttonCounterListShow"),e){case "buttonMinimize":k?b.setHotspotsVisibility(!b.getHotspotsVisibility()):(L.minimize(!0),Z.Navigator&&(Z.Navigator.setVisibility(!1),Z.comparison&&Z.Navigator2.setVisibility(!1)),Z.Gallery&&Z.Gallery.setVisibility(!1));break;case "buttonExpand":k?b.setHotspotsVisibility(!b.getHotspotsVisibility()):
(L.minimize(!1),Z.Navigator&&(Z.Navigator.setVisibility(!0),Z.comparison&&Z.Navigator2.setVisibility(!0)),Z.Gallery&&Z.Gallery.setVisibility(!0));break;case "buttonZoomOut":k||b.zoom("out");break;case "buttonZoomIn":k||b.zoom("in");break;case "buttonPanLeft":b.pan("left");break;case "buttonPanUp":b.pan("up");break;case "buttonPanDown":b.pan("down");break;case "buttonPanRight":b.pan("right");break;case "buttonReset":b.reset(k);break;case "buttonFullView":break;case "buttonFullViewExit":break;case "buttonMeasure":b.toggleEditModeMeasure(!0);
break;case "buttonMeasureExit":b.toggleEditModeMeasure(!1);break;case "buttonHelp":Z.annotations&&null===Z.editMode?Z.Utils.showHelp(Z.Utils.getResource("z32")+Z.Utils.getResource("z30")+Z.Utils.getResource("z29")):Z.Utils.showHelp(Z.Utils.getResource("z32"));break;case "buttonHelpMarkup"+g:Z.Utils.showHelp(Z.Utils.getResource("z31"));break;case "buttonHelpAnnotation"+g:Z.Utils.showHelp(Z.Utils.getResource("z28"));break;case "buttonRotateClockwise":b.rotate("clockwise",k);break;case "buttonRotateCounterwise":b.rotate("counterwise",
k);break;case "buttonTourPrior":b.priorDestination(!0);break;case "buttonTourNext":b.nextDestination(!0);break;case "buttonTourStart":b.tourStart();break;case "buttonTourStop":b.tourStop();break;case "buttonSlideshowPrior":b.priorSlide(!0);break;case "buttonSlideshowNext":b.nextSlide(!0);break;case "buttonSlideshowStart":b.slideshowStart();break;case "buttonSlideshowStop":b.slideshowStop();break;case "buttonAudioOn":b.audioMute(!0);break;case "buttonAudioMuted":b.audioMute(!1);break;case "buttonImageFilterPanelShow":L.imageFilterPanelShow();
break;case "buttonImageFilterPanelHide":L.imageFilterPanelHide();break;case "buttonImageFilterPanelHideOnPanel":L.imageFilterPanelHide();break;case "buttonImageSetPrior":Z.animation&&Z.Viewer.viewportChange("backward");break;case "buttonImageSetNext":Z.animation&&Z.Viewer.viewportChange("forward");break;case "buttonPreload":Z.imageSet?Z.Viewer.prez581s():Z.Viewport.prez581s();break;case "buttonPOIGo"+g:b.goToPOICurrent();break;case "buttonPOIAdd"+g:b.addNewPOI();break;case "buttonPOIEdit"+g:b.editCurrentPOI();
break;case "buttonPOIDelete"+g:b.deleteCurrentPOI();break;case "buttonPOICancel"+g:b.cancelEditsPOI();break;case "buttonPOISave"+g:b.saveEditsPOI();break;case "buttonLabelGo"+g:b.goToLabelCurrent();break;case "buttonLabelAdd"+g:b.addNewLabel();break;case "buttonLabelEdit"+g:b.editCurrentLabel();break;case "buttonLabelDelete"+g:b.deleteCurrentLabel();break;case "buttonLabelCancel"+g:b.cancelEditsLabel();break;case "buttonLabelSave"+g:b.saveEditsLabel(!1,!0,!0);break;case "buttonNoteAdd"+g:b.addNewNote();
break;case "buttonNoteEdit"+g:b.editCurrentNote();break;case "buttonNoteDelete"+g:b.deleteCurrentNote();break;case "buttonNoteCancel"+g:b.cancelEditsNote();break;case "buttonNoteSave"+g:b.saveEditsNote();break;case "buttonClearAll"+g:b.deleteAllAnnotations();break;case "buttonViewMode"+g:b.setEditModeLabel("view");break;case "buttonEditColorPicker"+g:b.toggleLabelColorPicker();break;case "buttonEditModeFreehand"+g:b.setEditModeLabel("freehand");break;case "buttonEditModeText"+g:b.setEditModeLabel("text");
break;case "buttonEditModeIcon"+g:b.setEditModeLabel("icon");break;case "buttonEditModeRectangle"+g:b.setEditModeLabel("rectangle");break;case "buttonEditModePolygon"+g:b.setEditModeLabel("polygon");break;case "buttonEditModeMeasure"+g:b.setEditModeLabel("measure");break;case "buttonLabelScaleDown"+g:b.labelScale("down");break;case "buttonLabelScaleUp"+g:b.labelScale("up");break;case "buttonCounterListShow":b.trackingEventsManager(a,e);break;case "buttonCounterListHide"+g:b.trackingEventsManager(a,
e);break;case "buttonToggleTrackingNav"+g:b.trackingEventsManager(a,e);break;case "buttonTrackingClearLast"+g:b.trackingEventsManager(a,e);break;case "buttonTrackingClearType"+g:b.trackingEventsManager(a,e);break;case "buttonTrackingClearAll"+g:b.trackingEventsManager(a,e);break;case "buttonTrackingSave"+g:b.trackingEventsManager(a,e);break;default:"buttonColor"==e.substr(0,11)&&b.setDrawingColor(e)}else if("mouseup"==f||"touchend"==f||"touchcancel"==f)if("buttonSliderZoom"==e||fb)Va&&(window.clearInterval(Va),
Va=null),bb(),fb=!1,Z.zooming="stop",b.updateView();else if("trackSliderZoom"==e)"undefined"!==typeof trsZ&&"undefined"!==typeof trszS&&(f=Z.Utils.getElementPosition(trsZ),f=Z.Utils.getMousePosition(a).x-f.x,g=parseFloat(trszS.width),f=Z.minZ+(f-0)/(g-0)*(Z.maxZ-Z.minZ),f<Z.minZ+.1&&(f=Z.minZ),f>Z.maxZ-.1&&(f=Z.maxZ),g=f-b.getZoom(),Z.zooming=0<g?"in":0>g?"out":"stop",b.z633(f),Z.zooming="stop",b.updateView());else if(-1!=e.indexOf("buttonSliderFilter")||Wc)Nc&&(window.clearInterval(Nc),Nc=null),
bb(),R(a,e,"sliderEnd");else if(-1!=e.indexOf("trackSliderFilter"))R(a,e,"z653");else if("buttonImageFilterPlus"==e||"buttonImageFilterMinus"==e)R(a,e);else if("buttonSliderImageSet"==e||cc)gc&&(window.clearInterval(gc),gc=null),bb(),cc=!1,Z.Viewer.viewportSelect(Z.viewportCurrentID,!0);else if("buttonZoomOut"==e||"buttonZoomIn"==e)b.zoom("stop"),"buttonZoomOut"==e&&k&&b.toggleSmoothZoom(),"buttonZoomIn"==e&&k&&b.toggleEditMode();else if("buttonPanLeft"==e||"buttonPanRight"==e)Z.tracking?"buttonPanLeft"==
e?Z.viewportCurrent.goToNextCell("left"):Z.viewportCurrent.goToNextCell("right"):b.pan("horizontalStop"),"buttonPanLeft"==e&&k&&b.toggleSmoothPan();else if("buttonPanUp"==e||"buttonPanDown"==e)Z.tracking?"buttonPanUp"==e?Z.viewportCurrent.goToNextCell("up"):Z.viewportCurrent.goToNextCell("down"):b.pan("verticalStop");else if("buttonHelp"==e)0==Z.debug&&k&&Z.Utils.showGlobals();else if("buttonRotateClockwise"==e||"buttonRotateCounterwise"==e)Z.rotationFree&&b.rotate("stop");else if(e=="buttonLabelScaleDown"+
g||e=="buttonLabelScaleUp"+g)b.labelScale("stop");else if("buttonFullView"==e)b.toggleFullViewMode(!0);else if("buttonFullViewExit"==e)b.toggleFullViewMode(!1);else if("buttonImageFilterClear"==e)b.clearImageFilterLast();else if("buttonImageFiltersClearAll"==e)b.clearImageFiltersAll();else if("trackSliderImageSet"==e)Z.slidestack&&trsiS&&trsisS&&(f=Z.Utils.getElementPosition(trsiS),f=Z.Utils.getMousePosition(a).x-f.x,g=parseFloat(trsisS.width),f=Math.round((f-0)/(g-0)*(Z.imageSetLength-1)),0>f&&(f=
0),f>Z.imageSetLength-1&&(f=Z.imageSetLength-1),f!=Z.viewportCurrentID&&Z.Viewer.viewportSelect(f,!0),ba(f));else{if("buttonImageSetPrior"==e||"buttonImageSetNext"==e)Z.animation?Z.Viewer.viewportChange("stop"):Z.slidestack&&("buttonImageSetPrior"==e?Z.Viewer.viewportChange("backward"):"buttonImageSetNext"==e&&Z.Viewer.viewportChange("forward"))}else"mouseout"==f&&("buttonZoomOut"==e||"buttonZoomIn"==e?b.zoom("stop"):"buttonPanLeft"==e||"buttonPanRight"==e?b.pan("horizontalStop"):"buttonPanUp"==e||
"buttonPanDown"==e?b.pan("verticalStop"):e=="buttonLabelScaleDown"+g||e=="buttonLabelScaleUp"+g?b.labelScale("stop"):"buttonImageSetPrior"!=e&&"buttonImageSetNext"!=e||Z.Viewer.viewportChange("stop"))}function bb(){fb?(Z.Utils.removeEventListener(document,"mousemove",T),Z.Utils.removeEventListener(document,"mouseup",E),Z.Utils.removeEventListener(document,"touchmove",Ca)):Wc?(Z.Utils.removeEventListener(document,"mousemove",ca),Z.Utils.removeEventListener(document,"mouseup",E),Z.Utils.removeEventListener(document,
"touchmove",J)):cc&&(Z.Utils.removeEventListener(document,"mousemove",M),Z.Utils.removeEventListener(document,"mouseup",E),Z.Utils.removeEventListener(document,"touchmove",oa));for(var a=Z.ToolbarDisplay.childNodes,b=0,e=a.length;b<e;b++){var f=a[b],g=f.id;if(g&&-1!=g.indexOf("button"))if("buttonContainer"!=g&&"buttonContainerImageFilter"!=g)Z.Utils.setButtonDefaults(f);else for(var f=f.childNodes,g=0,k=f.length;g<k;g++){var m=f[g],u=m.id;u&&-1!=u.indexOf("button")&&Z.Utils.setButtonDefaults(m)}}}
function T(a){ja=new Z.Utils.Point(a.clientX,a.clientY)}function Ca(a){(a=Z.Utils.getFirstTouch(a))&&(ja=new Z.Utils.Point(a.pageX,a.pageY))}function Y(a,b){if(-1!=a.id.indexOf("button")&&-1==a.id.indexOf("buttonContainer")){var e=a.firstChild,f=a.childNodes[1],g=a.childNodes[2];if(e&&f&&g)if(e=e.style,f=f.style,g=g.style,e.visibility=f.visibility=g.visibility="hidden","mouseover"==b&&"buttonSliderZoom"==a.id&&fb)g.visibility="visible";else if("mouseover"==b&&-1!=a.id.indexOf("buttonSliderFilter")&&
Wc)g.visibility="visible";else if("mouseover"==b&&"buttonSliderImageSet"==a.id&&cc)g.visibility="visible";else if("mouseover"==b||"mouseup"==b)f.visibility="visible";else if("mousedown"==b||"mousemove"==b||"touchstart"==b||"MSPointerDown"==b)g.visibility="visible";else if("mouseout"==b||"touchend"==b||"touchcancel"==b||"MSPointerUp"==b)e.visibility="visible"}}function fa(){var a=document.activeElement.id;!Z.Utils.stringValidate(a)||a!="poiNameTextElement"+ta&&a!="labelNameTextElement"+ta&&"captionTextElement"!=
a&&"commentTextElement"!=a&&"tooltipTextElement"!=a&&"clickURLTextElement"!=a&&a!="noteNameTextElement"+ta&&a!="noteTextElement"+ta||document.getElementById(a).blur()}function pa(a){if(a=Z.Utils.event(a))Z.Utils.target(a).selectedIndex=0}var L=this,aa=!1,ta=b.getViewportID().toString();if(Z.toolbarInternal){var ib,Q,Ba,ha=Z.Utils.getResource("UI_TOOLBARINTERNALBUTTONOVERCOLOR"),ma=Z.Utils.getResource("UI_TOOLBARINTERNALBUTTONDOWNCOLOR"),Xa=Z.Utils.getResource("UI_TOOLBARINTERNALBUTTONUPCOLOR");a()}else{Z.skinPath=
Z.Utils.stringRemoveTrailingSlashCharacters(Z.skinPath);(new Z.NetConnector).loadXML(Z.skinPath+"/"+Z.Utils.getResource("z200"));var Kc,dc,$a=[],Ra=[],ua=[],pb=parseInt(Z.Utils.getResource("z205ZOOM"),10),fb=!1,Va=null,ja=null,Db=null,u=null,Sa,Mc,Vc,Wd,ye;if(Z.imageSet)var zd=parseInt(Z.Utils.getResource("z205IMAGESET"),10),cc=!1,gc=null,yd=null,lh;if(Z.imageFilters)var nd=parseInt(Z.Utils.getResource("z205FILTER"),10),Wc=!1,Nc=null,Qd=null,Kf,bf=[],Jg=Z.initialImageFilters,Kg=!1,ga=null,Ob=null,
Lg=!0,uc,Be,Ib,Bc,ke,De,dd,Ce,af,ze,Ee,gf,cf,Ve,hf,Cd,Pb,jf,kf,$f,wd,Oc,ag,dg,Ge,Xb,mf,Mg,ff,Wf,Xf,Ng,Gd,je,df,ef,ed,Fe,Ie,Pc,nc,nf,Hd,fg,of,gg,cg,Og,lf,bg,hg,od,Yc,qf,le,$e,Ad,rf,sf,Bd,Je,Ke,Yd,Fc,rb,Le,pd,Xd,Jb,Rb,me,Lf,uf,vf,Zd,wf,Dd,Cc,$d,ae,xb,ya,Ja,za,Eb,Me=0}this.getInitialized=function(){return aa};this.getSkinArray=function(){return $a};this.getSkinSizes=function(){return ua};this.show=function(a){m(a)};this.setVisibility=function(a){k(a)};this.minimize=function(a){t(a)};this.setVisibilityAnnotationPanel=
function(a,e){var f=e;if("undefined"===typeof f||null===f)f=Z.annotationFileShared?"0":b.getViewportID().toString();if(f=document.getElementById("AnnotationPanelDisplay"+f))!a||Z.measureVisible&&null===Z.editMode?(f.style.display="none",Z.annotationPanelVisibleState=!1):(f.style.display="inline-block",Z.annotationPanelVisibleState=!0)};this.toggleAnnotationPanelMode=function(a){b.clearAnnotationPanel(ta);b.setStatus("annotationPanelInitializedViewport",!1);b.createAnnotationPanel(ta)};this.setVisibilityTrackingPanel=
function(a,e){var f=e;if("undefined"===typeof f||null===f)f=Z.trackingFileShared?"0":b.getViewportID().toString();if(f=document.getElementById("TrackingPanelDisplay"+f))a?(f.style.display="inline-block",Z.trackingPanelVisibleState=!0):(f.style.display="none",Z.trackingPanelVisibleState=!1)};this.setVisibilityUserPanel=function(a){var b=document.getElementById("userPanelDisplay");b&&(a?(b.style.display="inline-block",Z.userPanelVisibleState=!0):(b.style.display="none",Z.userPanelVisibleState=!1))};
this.showProgress=function(){var a=document.getElementById("progressTextBox");a&&(a=a.style)&&(a.display="inline-block")};this.hideProgress=function(){var a=document.getElementById("progressTextBox");a&&(a=a.style)&&(a.display="none")};this.updateProgress=function(a,b){if(Z.progressVisible){Db&&window.clearInterval(Db);var e,g=document.getElementById("progressTextBoxCenteredDiv");g&&(g=g.firstChild)&&(0==a||0==b?(g.nodeValue="llllllllll",Db=window.setInterval(f,parseInt(Z.Utils.getResource("z182")),
10)):(e=Math.round(100-b/a*100),e=Math.round(e/10),g.nodeValue=Z.Utils.stringMultiply("l",e)))}};this.setViewport=function(a){b=a;ta=b.getViewportID().toString()};this.parseSkinXML=function(a){Z.skinMode=a.getElementsByTagName("SETUP")[0].attributes.getNamedItem("SKINMODE").nodeValue;var f,k;1==Z.skinMode||0==Z.skinMode&&!Z.mobileDevice?(f=a.getElementsByTagName("SETUP")[0].attributes.getNamedItem("FOLDERSTANDARD").nodeValue,k="SIZESSTANDARD"):(f=a.getElementsByTagName("SETUP")[0].attributes.getNamedItem("FOLDERLARGE").nodeValue,
k="SIZESLARGE");var t=a.getElementsByTagName("SETUP")[0].attributes.getNamedItem("PROGRESSCOLOR");"undefined"!==typeof t&&null!==t&&(u=a.getElementsByTagName("SETUP")[0].attributes.getNamedItem("PROGRESSCOLOR").nodeValue);var I=[];I[I.length]=parseFloat(a.getElementsByTagName(k)[0].attributes.getNamedItem("TOOLBARW").nodeValue);I[I.length]=parseFloat(a.getElementsByTagName(k)[0].attributes.getNamedItem("TOOLBARH").nodeValue);I[I.length]=parseFloat(a.getElementsByTagName(k)[0].attributes.getNamedItem("LOGOW").nodeValue);
I[I.length]=parseFloat(a.getElementsByTagName(k)[0].attributes.getNamedItem("LOGOH").nodeValue);I[I.length]=parseFloat(a.getElementsByTagName(k)[0].attributes.getNamedItem("DIVIDERW").nodeValue);I[I.length]=parseFloat(a.getElementsByTagName(k)[0].attributes.getNamedItem("DIVIDERH").nodeValue);I[I.length]=parseFloat(a.getElementsByTagName(k)[0].attributes.getNamedItem("BUTTONW").nodeValue);I[I.length]=parseFloat(a.getElementsByTagName(k)[0].attributes.getNamedItem("BUTTONH").nodeValue);I[I.length]=
parseFloat(a.getElementsByTagName(k)[0].attributes.getNamedItem("BUTTONSPAN").nodeValue);I[I.length]=parseFloat(a.getElementsByTagName(k)[0].attributes.getNamedItem("SLIDERBUTTONW").nodeValue);I[I.length]=parseFloat(a.getElementsByTagName(k)[0].attributes.getNamedItem("SLIDERBUTTONH").nodeValue);I[I.length]=parseFloat(a.getElementsByTagName(k)[0].attributes.getNamedItem("SLIDERTRACKW").nodeValue);I[I.length]=parseFloat(a.getElementsByTagName(k)[0].attributes.getNamedItem("SLIDERTRACKH").nodeValue);
I[I.length]=parseFloat(a.getElementsByTagName(k)[0].attributes.getNamedItem("SLIDERSPAN").nodeValue);I[I.length]=parseFloat(a.getElementsByTagName(k)[0].attributes.getNamedItem("PROGRESSW").nodeValue);I[I.length]=parseFloat(a.getElementsByTagName(k)[0].attributes.getNamedItem("PROGRESSH").nodeValue);I[I.length]=parseFloat(a.getElementsByTagName(k)[0].attributes.getNamedItem("PROGRESSFONTSIZE").nodeValue);var J,ja,w,ba,W;J="edit"==Z.trackingEditMode?176:Z.tracking?164:"edit"==Z.editMode||"edit"==Z.trackingEditMode?
161:"markup"==Z.editMode?152:Z.imageFilters?100:Z.screensaver||Z.preloadVisible||Z.tourPath||Z.slidePath||Z.imageSetPath?77:Z.rotationVisible?58:Z.measureVisible?51:0<Z.helpVisible?45:Z.fullScreenVisible||Z.fullPageVisible?45:Z.resetVisible?35:Z.panButtonsVisible?32:Z.sliderZoomVisible?19:Z.minimizeVisible?14:Z.logoVisible?8:6;ja=a.getElementsByTagName("FILES")[0].attributes.getNamedItem("SKIN0");null!==ja&&(w=ja.nodeValue);ba=a.getElementsByTagName("FILES")[0].attributes.getNamedItem("SKIN"+J.toString());
null!==ba&&(W=ba.nodeValue);if("undefined"!==typeof w&&Z.Utils.stringValidate(w)&&"undefined"!==typeof W&&Z.Utils.stringValidate(W)){for(var Sa=!1,M=0,G=J+1;M<G;M++){var fa=a.getElementsByTagName("FILES")[0].attributes.getNamedItem("SKIN"+M).nodeValue;Z.Utils.stringValidate(fa)?Ra[M]=f+"/"+fa:(Ra[M]="null",Sa=!0)}Sa&&Z.Utils.showMessage(Z.Utils.getResource("z279"));var H=Ra;$a=H;Z.ToolbarDisplay=Z.Utils.createContainerElement("div","ToolbarDisplay","inline-block","absolute","visible","1px","1px",
"0px","1px","none","0px","transparent none","0px","0px","normal");dc=Z.ToolbarDisplay.style;dc.textAlign="left";dc.zIndex=(Z.baseZIndex+2).toString();var Db=new Z.Utils.Graphic("toolbarBackground",Z.skinPath,H[0],"1px","1px","0px","0px");parseFloat(Z.Utils.getResource("z82"));Z.Utils.getResource("z83NOALPHA");Z.ToolbarDisplay.appendChild(Db.elmt);ua=I;if(Z.logoVisible){var P;if(Z.Utils.stringValidate(Z.logoCustomPath)){var T=Z.Utils.cacheProofPath(Z.logoCustomPath);P=new Z.Utils.Graphic("toolbarLogo",
T,null,"1px","1px","1px","1px")}else P=new Z.Utils.Graphic("toolbarLogo",Z.skinPath,H[7],"1px","1px","1px","1px");if(Z.Utils.stringValidate(Z.logoLinkURL)){var Mc=document.createElement("a");Mc.setAttribute("href",Z.logoLinkURL);Mc.setAttribute("target",Z.Utils.getResource("z427TARGET"));Mc.setAttribute("title",Z.Utils.getResource("z360"));Mc.setAttribute("outline","none");Mc.appendChild(P.elmt);Z.ToolbarDisplay.appendChild(Mc)}else P.elmt.setAttribute("title",Z.Utils.getResource("z427DISPLAY")),
Z.ToolbarDisplay.appendChild(P.elmt);if(0==Z.toolbarVisible||1==Z.toolbarVisible){var R=new Z.Utils.Graphic("logoDivider",Z.skinPath,H[8],"1px","1px","1px","1px");Z.ToolbarDisplay.appendChild(R.elmt)}}var B=Z.Utils.createContainerElement("div","buttonContainer","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal","default");Z.ToolbarDisplay.appendChild(B);Z.Utils.addEventListener(B,"mousedown",Z.Utils.preventDefault);Z.Utils.addEventListener(B,
"mouseover",L.backgroundEventsHandler);Z.Utils.addEventListener(B,"touchstart",Z.Utils.preventDefault);var Q=new Z.Utils.Graphic("buttonBackground",Z.skinPath,H[0],"1px","1px","0px","0px");B.appendChild(Q.elmt);Z.Utils.setOpacity(Q.elmt,"0","#FBFAFA");if((0!=Z.toolbarVisible&&1!=Z.toolbarVisible||Z.mobileDevice)&&Z.minimizeVisible){var Vc=new Z.Utils.Button("buttonMinimize",null,Z.skinPath,H[9],H[10],H[11],"1px","1px","1px","1px","mouseover",E,"z363");Z.ToolbarDisplay.appendChild(Vc.elmt);var ca=
new Z.Utils.Button("buttonExpand",null,Z.skinPath,H[12],H[13],H[14],"1px","1px","1px","1px","mouseover",E,"z341");Z.ToolbarDisplay.appendChild(ca.elmt)}if(Z.zoomButtonsVisible){var ga=new Z.Utils.Button("buttonZoomOut",null,Z.skinPath,H[1],H[2],H[3],"1px","1px","1px","1px","mouseover",E,"z400");B.appendChild(ga.elmt)}if(Z.sliderZoomVisible){var ea=new Z.Utils.Graphic("trackSliderZoom",Z.skinPath,H[15],"1px","1px","0px","0px","z385ZOOM");B.appendChild(ea.elmt);Z.Utils.addEventListener(ea.elmt,"mousedown",
E);Z.Utils.addEventListener(ea.elmt,"touchstart",E);Z.Utils.addEventListener(ea.elmt,"mouseover",E);var aa=new Z.Utils.Button("buttonSliderZoom",null,Z.skinPath,H[17],H[18],H[19],"1px","1px","1px","1px","mouseover",E,"z385ZOOM");B.appendChild(aa.elmt)}if(Z.zoomButtonsVisible){var Y=new Z.Utils.Button("buttonZoomIn",null,Z.skinPath,H[4],H[5],H[6],"1px","1px","1px","1px","mouseover",E,"z399");B.appendChild(Y.elmt)}if(Z.panButtonsVisible){if(Z.zoomButtonsVisible||Z.sliderZoomVisible){var n=new Z.Utils.Graphic("panDivider",
Z.skinPath,H[20],"1px","1px","1px","1px");B.appendChild(n.elmt)}var oa=new Z.Utils.Button("buttonPanLeft",null,Z.skinPath,H[21],H[22],H[23],"1px","1px","1px","1px","mouseover",E,"z370");B.appendChild(oa.elmt);var ka=new Z.Utils.Button("buttonPanUp",null,Z.skinPath,H[24],H[25],H[26],"1px","1px","1px","1px","mouseover",E,"z372");B.appendChild(ka.elmt);var ha=new Z.Utils.Button("buttonPanDown",null,Z.skinPath,H[27],H[28],H[29],"1px","1px","1px","1px","mouseover",E,"z369");B.appendChild(ha.elmt);var ma=
new Z.Utils.Button("buttonPanRight",null,Z.skinPath,H[30],H[31],H[32],"1px","1px","1px","1px","mouseover",E,"z371");B.appendChild(ma.elmt)}if(Z.resetVisible){var Wd=new Z.Utils.Button("buttonReset",null,Z.skinPath,H[33],H[34],H[35],"1px","1px","1px","1px","mouseover",E,"z378");B.appendChild(Wd.elmt)}if(Z.fullScreenVisible||Z.fullPageVisible){if(null===Z.editMode){var ya=new Z.Utils.Graphic("fullViewDivider",Z.skinPath,H[36],"1px","1px","1px","1px");B.appendChild(ya.elmt)}var za=new Z.Utils.Button("buttonFullViewExit",
null,Z.skinPath,H[40],H[41],H[42],"1px","1px","1px","1px","mouseover",E,"z391EXIT");B.appendChild(za.elmt);var Ba=new Z.Utils.Button("buttonFullView",null,Z.skinPath,H[37],H[38],H[39],"1px","1px","1px","1px","mouseover",E,"z391");B.appendChild(Ba.elmt)}if(Z.measureVisible&&null===Z.editMode){if(!Z.fullScreenVisible&&!Z.fullPageVisible){var Ca=new Z.Utils.Graphic("measureDivider",Z.skinPath,H[36],"1px","1px","1px","1px");B.appendChild(Ca.elmt)}if(null===Z.editMode){var ye=new Z.Utils.Button("buttonMeasureExit",
null,Z.skinPath,H[49],H[50],H[51],"1px","1px","1px","1px","mouseover",E,"z392EXIT");B.appendChild(ye.elmt)}var ib=new Z.Utils.Button("buttonMeasure",null,Z.skinPath,H[46],H[47],H[48],"1px","1px","1px","1px","mouseover",E,"z392");B.appendChild(ib.elmt)}if(Z.rotationVisible){var cc=new Z.Utils.Graphic("rotateDivider",Z.skinPath,H[52],"1px","1px","1px","1px");B.appendChild(cc.elmt);var Ja=new Z.Utils.Button("buttonRotateCounterwise",null,Z.skinPath,H[53],H[54],H[55],"1px","1px","1px","1px","mouseover",
E,"z381");B.appendChild(Ja.elmt);var Xa=new Z.Utils.Button("buttonRotateClockwise",null,Z.skinPath,H[56],H[57],H[58],"1px","1px","1px","1px","mouseover",E,"z380");B.appendChild(Xa.elmt)}if(Z.tour){var gc=new Z.Utils.Graphic("tourDivider",Z.skinPath,H[59],"1px","1px","1px","1px");B.appendChild(gc.elmt);var Va=new Z.Utils.Button("buttonTourPrior",null,Z.skinPath,H[60],H[61],H[62],"1px","1px","1px","1px","mouseover",E,"z394");B.appendChild(Va.elmt);var jb=new Z.Utils.Button("buttonTourNext",null,Z.skinPath,
H[63],H[64],H[65],"1px","1px","1px","1px","mouseover",E,"z393");B.appendChild(jb.elmt);var rb=new Z.Utils.Button("buttonTourStart",null,Z.skinPath,H[66],H[67],H[68],"1px","1px","1px","1px","mouseover",E,"z395");B.appendChild(rb.elmt);var bb=new Z.Utils.Button("buttonTourStop",null,Z.skinPath,H[69],H[70],H[71],"1px","1px","1px","1px","mouseover",E,"z396");B.appendChild(bb.elmt)}if(Z.slideshow){var Ea=new Z.Utils.Graphic("slideshowDivider",Z.skinPath,H[59],"1px","1px","1px","1px");B.appendChild(Ea.elmt);
var fb=new Z.Utils.Button("buttonSlideshowPrior",null,Z.skinPath,H[60],H[61],H[62],"1px","1px","1px","1px","mouseover",E,"z384");B.appendChild(fb.elmt);var Yb=new Z.Utils.Button("buttonSlideshowNext",null,Z.skinPath,H[63],H[64],H[65],"1px","1px","1px","1px","mouseover",E,"z383");B.appendChild(Yb.elmt);var Ib=new Z.Utils.Button("buttonSlideshowStart",null,Z.skinPath,H[66],H[67],H[68],"1px","1px","1px","1px","mouseover",E,"z386");B.appendChild(Ib.elmt);var Jb=new Z.Utils.Button("buttonSlideshowStop",
null,Z.skinPath,H[69],H[70],H[71],"1px","1px","1px","1px","mouseover",E,"z387");B.appendChild(Jb.elmt)}if(Z.tour||Z.slideshow){var Nc=new Z.Utils.Button("buttonAudioOn",null,Z.skinPath,H[72],H[73],H[74],"1px","1px","1px","1px","mouseover",E,"z321");B.appendChild(Nc.elmt);var xb=new Z.Utils.Button("buttonAudioMuted",null,Z.skinPath,H[75],H[76],H[77],"1px","1px","1px","1px","mouseover",E,"z322");B.appendChild(xb.elmt)}if(Z.imageFilters){var Ua=new Z.Utils.Graphic("imageFilterDivider",Z.skinPath,H[78],
"1px","1px","1px","1px");B.appendChild(Ua.elmt);var ia=new Z.Utils.Button("buttonImageFilterPanelHide",null,Z.skinPath,H[79],H[80],H[81],"1px","1px","1px","1px","mouseover",E,"z350");B.appendChild(ia.elmt);var Pb=new Z.Utils.Button("buttonImageFilterPanelShow",null,Z.skinPath,H[82],H[83],H[84],"1px","1px","1px","1px","mouseover",E,"z351");B.appendChild(Pb.elmt);var S=Z.Utils.createContainerElement("div","buttonContainerImageFilter","none","absolute","visible","1px","1px","0px","0px","solid","1px",
"transparent none","0px","0px","normal","default");Z.ToolbarDisplay.appendChild(S);Z.Utils.addEventListener(S,"mouseover",L.backgroundEventsHandler);var va=parseFloat(Z.Utils.getResource("z82")),Rb=Z.Utils.getResource("z83"),Eb=Z.Utils.getResource("z83NOALPHA"),sa=Z.Utils.createContainerElement("div","imageFilterPanelBackground","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px",Rb,"0px","0px","normal",null,!0);Z.Utils.setOpacity(sa,va,Eb);S.appendChild(sa);for(var Ka=Z.Utils.getResource("z425").split(","),
tb=Z.Utils.getResource("z426").split(","),pb=0,Xb=Ka.length;pb<Xb;pb++)bf[bf.length]={text:Ka[pb],value:tb[pb]};var zd=new Z.Utils.createSelectElement("imageFilterList","",bf,1,1,1,null,!0,pa,"change");S.appendChild(zd);Z.brightnessVisible&&new Z.Utils.Slider("brightness",S,H,E,U);Z.contrastVisible&&new Z.Utils.Slider("contrast",S,H,E,U);Z.sharpnessVisible&&new Z.Utils.Slider("sharpness",S,H,E,U);Z.blurrinessVisible&&new Z.Utils.Slider("blurriness",S,H,E,U);Z.colorRedVisible&&new Z.Utils.Slider("colorRed",
S,H,E,U);Z.colorGreenVisible&&new Z.Utils.Slider("colorGreen",S,H,E,U);Z.colorBlueVisible&&new Z.Utils.Slider("colorBlue",S,H,E,U);Z.colorRedRangeVisible&&new Z.Utils.Slider("colorRedRange",S,H,E,U,!0);Z.colorGreenRangeVisible&&new Z.Utils.Slider("colorGreenRange",S,H,E,U,!0);Z.colorBlueRangeVisible&&new Z.Utils.Slider("colorBlueRange",S,H,E,U,!0);Z.gammaVisible&&new Z.Utils.Slider("gamma",S,H,E,U);Z.gammaRedVisible&&new Z.Utils.Slider("gammaRed",S,H,E,U);Z.gammaGreenVisible&&new Z.Utils.Slider("gammaGreen",
S,H,E,U);Z.gammaBlueVisible&&new Z.Utils.Slider("gammaBlue",S,H,E,U);Z.hueVisible&&new Z.Utils.Slider("hue",S,H,E,U);Z.saturationVisible&&new Z.Utils.Slider("saturation",S,H,E,U);Z.lightnessVisible&&new Z.Utils.Slider("lightness",S,H,E,U);Z.whiteBalanceVisible&&new Z.Utils.Slider("whiteBalance",S,H,E,U);Z.noiseVisible&&new Z.Utils.Slider("noise",S,H,E,U);var Ob=new Z.Utils.Button("buttonImageFilterMinus",null,Z.skinPath,H[85],H[86],H[87],"1px","1px","1px","1px","mouseover",E,"z349");S.appendChild(Ob.elmt);
var nc=new Z.Utils.Button("buttonImageFilterPlus",null,Z.skinPath,H[88],H[89],H[90],"1px","1px","1px","1px","mouseover",E,"z352");S.appendChild(nc.elmt);var yb=new Z.Utils.Graphic("imageFilterStateDivider",Z.skinPath,H[94],"1px","1px","1px","1px");S.appendChild(yb.elmt);if(Z.grayscaleVisible){var uc=Z.Utils.createContainerElement("div","labelGrayscaleTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0),Bc=document.createTextNode(Z.Utils.getResource("UI_IMAGEFILTERPANELLABELGRAYSCALE"));
uc.appendChild(Bc);var wa=new Z.Utils.Checkbox("checkboxFilterGrayscale","test","1px","1px","1px","1px","click",E,"TIP_GRAYSCALE");S.appendChild(uc);S.appendChild(wa)}if(Z.thresholdVisible){var gb=Z.Utils.createContainerElement("div","labelThresholdTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0),Cc=document.createTextNode(Z.Utils.getResource("UI_IMAGEFILTERPANELLABELTHRESHOLD"));gb.appendChild(Cc);var Fc=new Z.Utils.Checkbox("checkboxFilterThreshold",
"test","1px","1px","1px","1px","click",E,"TIP_THRESHOLD");S.appendChild(gb);S.appendChild(Fc)}if(Z.inversionVisible){var yd=Z.Utils.createContainerElement("div","labelInversionTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0),Oc=document.createTextNode(Z.Utils.getResource("UI_IMAGEFILTERPANELLABELINVERSION"));yd.appendChild(Oc);var Pc=new Z.Utils.Checkbox("checkboxFilterInversion","test","1px","1px","1px","1px","click",
E,"TIP_INVERSION");S.appendChild(yd);S.appendChild(Pc)}if(Z.normalizeVisible){var Kb=Z.Utils.createContainerElement("div","labelNormalizeTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0),Vb=document.createTextNode(Z.Utils.getResource("UI_IMAGEFILTERPANELLABELEQUALIZE"));Kb.appendChild(Vb);var Yc=new Z.Utils.Checkbox("checkboxFilterNormalize","test","1px","1px","1px","1px","click",E,"TIP_EQUALIZE");S.appendChild(Kb);S.appendChild(Yc)}if(Z.equalizeVisible){var nd=
Z.Utils.createContainerElement("div","labelEqualizeTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0),ob=document.createTextNode(Z.Utils.getResource("UI_IMAGEFILTERPANELLABELEQUALIZE"));nd.appendChild(ob);var mc=new Z.Utils.Checkbox("checkboxFilterEqualize","test","1px","1px","1px","1px","click",E,"TIP_EQUALIZE");S.appendChild(nd);S.appendChild(mc)}if(Z.edgesVisible){var db=Z.Utils.createContainerElement("div","labelEdgesTextBox",
"inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0),dd=document.createTextNode(Z.Utils.getResource("UI_IMAGEFILTERPANELLABELEDGES"));db.appendChild(dd);var Wc=new Z.Utils.Checkbox("checkboxFilterEdges","test","1px","1px","1px","1px","click",E,"TIP_EDGES");S.appendChild(db);S.appendChild(Wc)}if(Z.sepiaVisible){var ed=Z.Utils.createContainerElement("div","labelSepiaTextBox","inline-block","absolute","hidden","1px","1px","0px","0px",
"none","0px","transparent none","0px","0px","nowrap",null,!0),od=document.createTextNode(Z.Utils.getResource("UI_IMAGEFILTERPANELLABELSEPIA"));ed.appendChild(od);var pd=new Z.Utils.Checkbox("checkboxFilterSepia","test","1px","1px","1px","1px","click",E,"TIP_SEPIA");S.appendChild(ed);S.appendChild(pd)}var ld=new Z.Utils.Graphic("imageFilterPanelDivider",Z.skinPath,H[94],"1px","1px","1px","1px");S.appendChild(ld.elmt);var Ad=new Z.Utils.Button("buttonImageFilterClear",null,Z.skinPath,H[95],H[96],H[97],
"1px","1px","1px","1px","mouseover",E,"z347");S.appendChild(Ad.elmt);var lh=new Z.Utils.Button("buttonImageFiltersClearAll",null,Z.skinPath,H[98],H[99],H[100],"1px","1px","1px","1px","mouseover",E,"z347ALL");S.appendChild(lh.elmt);var Bd=new Z.Utils.Graphic("imageFilterStateDivider3",Z.skinPath,H[94],"1px","1px","1px","1px");S.appendChild(Bd.elmt);var Cd=new Z.Utils.Button("buttonImageFilterPanelHideOnPanel",null,Z.skinPath,H[79],H[80],H[81],"1px","1px","1px","1px","mouseover",E,"z350");S.appendChild(Cd.elmt)}if(Z.imageSet&&
!Z.overlays){if(1<B.childNodes.length){var Dd=new Z.Utils.Graphic("imageSetDivider",Z.skinPath,H[59],"1px","1px","1px","1px");B.appendChild(Dd.elmt)}var Gd=new Z.Utils.Button("buttonImageSetPrior",null,Z.skinPath,H[60],H[61],H[62],"1px","1px","1px","1px","mouseover",E,"TIP_IMAGESETPRIOR");B.appendChild(Gd.elmt);if(Z.sliderImageSetVisible){var wd=new Z.Utils.Graphic("trackSliderImageSet",Z.skinPath,H[15],"1px","1px","0px","0px","z385IMAGESET");B.appendChild(wd.elmt);Z.Utils.addEventListener(wd.elmt,
"mousedown",E);Z.Utils.addEventListener(wd.elmt,"touchstart",E);Z.Utils.addEventListener(wd.elmt,"mouseover",E);var Ab=new Z.Utils.Button("buttonSliderImageSet",null,Z.skinPath,H[17],H[18],H[19],"1px","1px","1px","1px","mouseover",E,"z385IMAGESET");B.appendChild(Ab.elmt)}var $b=new Z.Utils.Button("buttonImageSetNext",null,Z.skinPath,H[63],H[64],H[65],"1px","1px","1px","1px","mouseover",E,"TIP_IMAGESETNEXT");B.appendChild($b.elmt)}if(Z.preloadVisible){var Wa=new Z.Utils.Graphic("preloadDivider",Z.skinPath,
H[59],"1px","1px","1px","1px");B.appendChild(Wa.elmt);var Hd=new Z.Utils.Button("buttonPreload",null,Z.skinPath,H[69],H[70],H[71],"1px","1px","1px","1px","mouseover",E,"TIP_PRELOAD");B.appendChild(Hd.elmt)}if(Z.comparison){var ac=Z.Utils.createContainerElement("div","labelSyncTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0),Md=document.createTextNode(Z.Utils.getResource("UI_TOOLBARLABELSYNC"));ac.appendChild(Md);var Aa=
new Z.Utils.Checkbox("checkboxSyncComparison","test","1px","1px","1px","1px","click",E,"TIP_SYNC");B.appendChild(ac);B.appendChild(Aa)}if(1==Z.helpVisible||3==Z.helpVisible){var Wb=new Z.Utils.Button("buttonHelp",null,Z.skinPath,H[43],H[44],H[45],"1px","1px","1px","1px","mouseover",E,"z342");B.appendChild(Wb.elmt)}if(Z.progressVisible){var Lb=Z.Utils.createContainerElement("div","progressTextBox","inline-block","absolute","hidden","1px","1px","1px","1px","none","0px","transparent none","0px","0px",
"normal",null,!0),Da=ua[16];B.appendChild(Lb);var sb=document.createTextNode(Z.Utils.getResource("z183"));Lb.appendChild(Z.Utils.createCenteredElement(sb,"progressTextBoxCenteredDiv"));null===u&&(u=Z.Utils.getResource("z183COLOR"));Z.Utils.setTextNodeStyle(sb,u,"verdana",Da+"px","none","normal","normal","normal","normal","1em","left","none");Z.Utils.disableTextInteraction(sb)}Z.ViewerDisplay.appendChild(Z.ToolbarDisplay);Z.toolbarW=ua[0];Z.toolbarCurrentW=-1==Z.toolbarW?Z.viewerW:Z.toolbarW;Z.toolbarH=
Kc=ua[1];L.setSizeAndPosition(Z.toolbarCurrentW,Z.toolbarH,0,1==Z.toolbarPosition?Z.viewerH-Z.toolbarH:0);if(b&&b.getStatus("initializedViewport")){1==Z.toolbarVisible&&(b.setSizeAndPosition(Z.viewerW,Z.viewerH-Z.toolbarH,0,0),b.validateXYZDefaults(!0));var Gb=b.getZoom();q(Gb);b.setDrawingColor("buttonColor0"+ta,!0)}m(1==Z.toolbarVisible||2==Z.toolbarVisible||4==Z.toolbarVisible||7==Z.toolbarVisible);Z.Utils.addEventListener(Z.ToolbarDisplay,"mouseover",Z.Utils.stopPropagation);g(!0);e()}else Z.Utils.showMessage(Z.Utils.getResource("z278"))};
this.setSizeAndPosition=function(a,e,f,g){"undefined"===typeof a||null===a?a=0<Z.toolbarVisible?Z.toolbarCurrentW:0:Z.toolbarCurrentW=a;if("undefined"===typeof e||null===e)e=0<Z.toolbarVisible&&8!=Z.toolbarVisible?Kc:0;if("undefined"===typeof f||null===f)f=0;if("undefined"===typeof g||null===g)g=1==Z.toolbarPosition?Z.viewerH-Kc:0;dc=Z.ToolbarDisplay.style;dc.width=a+"px";dc.height=e+"px";dc.left=f+"px";dc.top=g+"px";var k=a,m=e,u=ua[2],q=ua[3],t=ua[4],I=ua[5],J=ua[6],ja=ua[7],w=ua[8],ba=ua[9],W=
ua[10],M=ua[11],E=ua[12],G=ua[13],fa=ua[14],Db=ua[15],B=0,T=(m-q)/2+1,R=(m-I)/2,Q=(m-ja)/2,ca=1.3*Q,ea=Q+4,ga=Q+2,pa=1==Z.logoVisible?0:w/2,n=1==Z.logoVisible?0:w/2,U=w-(J-t),aa=0,Y=0;Z.zoomButtonsVisible&&(aa+=2);Z.panButtonsVisible&&(aa+=4,Y+=1);Z.resetVisible&&(aa+=1);if(Z.fullScreenVisible||Z.fullPageVisible)aa+=1,Y+=1;Z.helpVisible&&(aa+=1,Z.fullScreenVisible||Z.fullPageVisible||(Y+=1));Z.measureVisible&&(Z.fullScreenVisible||Z.fullPageVisible||(Y+=1),aa+=1);Z.rotationVisible&&(aa+=2,Y+=1);if(Z.tour||
Z.slideshow)aa+=3,Y+=1,Z.audioContent&&(aa+=1);Z.imageFilters&&(aa+=1,Y+=1);Z.preloadVisible&&(aa+=1,Y+=1);Z.comparison&&Z.syncVisible&&(aa+=1,Y+=1);if(Z.imageSet&&Z.sliderImageSetVisible){var oa=G,ta=M,ka=E;lh=!1;aa+=2}Z.progressVisible||(fa=0);var ha=aa*w+Y*U;Z.sliderZoomVisible&&(ha+=G);Z.imageSet&&Z.sliderImageSetVisible&&(ha+=oa);Sa=Mc=Vc=Wd=overrideZoom=!1;var ma=(1==Z.logoVisible?u+2:0)+(0!=Z.toolbarVisible&&1!=Z.toolbarVisible&&0!=Z.minimizeVisible?w:0),ya=1==Z.panButtonsVisible?4*w+U:0,za=
1==Z.zoomButtonsVisible?2*w:0,Ba=1==Z.resetVisible?w:0,Ca=ma+20+ha+20+fa;Ca>k&&(Sa=!0,Ca-G>k&&(Mc=!0,Ca-G-fa>k&&(Vc=!0,Ca-G-fa-ma>k&&(ye=!0,Ca-G-fa-ma-Ba>k&&(Wd=!0,ha-=ya,Ca-G-fa-ma-Ba-ya>k&&(overrideZoom=!0,ha-=za)),ha-=Ba),ma=0),fa=0),ha-=G);var ib=(k-ha)/2-20+3,cc=document.getElementById("toolbarBackground");cc&&(cc.style.width=k+"px",cc.style.height=m+"px",cc.firstChild.style.width=k+"px",cc.firstChild.style.height=m+"px");var Ja=document.getElementById("buttonContainer");Ja&&(Ja.style.width=
ha+40+"px",Ja.style.height=m+"px",Ja.style.left=ib+"px");var Ra=document.getElementById("buttonBackground");Ra&&(Ra.style.width=k+"px",Z.Utils.graphicSize(Ra,parseFloat(Ja.style.width),parseFloat(Ja.style.height)),Ra.style.left="0px");var Xa=document.getElementById("toolbarLogo");if(Xa){var gc=Xa.style;if(gc)if(Vc)gc.display="none";else{gc.display="inline-block";Z.Utils.graphicSize(Xa,u,q);gc.left=B+"px";gc.top=T+"px";var B=B+(u+2),$a=document.getElementById("logoDivider");if($a){Z.Utils.graphicSize($a,
t,I);var Ea=$a.style;Ea.left=B+"px";Ea.top=R+"px"}}}if(0!=Z.toolbarVisible&&1!=Z.toolbarVisible){var Va=document.getElementById("buttonMinimize"),jb=document.getElementById("buttonExpand");if(Va&&jb){var bb=Va.style,fb=jb.style;bb&&fb&&(Vc?(bb.display="none",fb.display="none"):(bb.display="inline-block",fb.display="inline-block",Z.Utils.buttonSize(Va,J,ja),Z.Utils.buttonSize(jb,J,ja),bb.left=B+pa+"px",bb.top=ca+"px",fb.left=B+n+"px",fb.top=ca+"px"))}}B=20;if(!overrideZoom){var pb=document.getElementById("buttonZoomOut");
if(pb){Z.Utils.buttonSize(pb,J,ja);var Nc=pb.style;Nc.left=B+"px";Nc.top=Q+"px";B+=w}trsZ=document.getElementById("trackSliderZoom");btsZ=document.getElementById("buttonSliderZoom");trsZ&&btsZ&&(trszS=trsZ.style,btszS=btsZ.style,trszS&&btszS&&(Sa?(trszS.display="none",btszS.display="none"):(trszS.display="inline-block",btszS.display="inline-block",Z.Utils.graphicSize(trsZ,M,E),trszS.left=B-2+"px",trszS.top=ea+"px",Z.Utils.buttonSize(btsZ,ba,W),btszS.left=parseFloat(trszS.left)+"px",btszS.top=ga+"px",
B+=G)));var Ua=document.getElementById("buttonZoomIn");if(Ua){Z.Utils.buttonSize(Ua,J,ja);var ia=Ua.style;ia.left=B+"px";ia.top=Q+"px";B+=w+1}}if(!Wd){var xb=document.getElementById("panDivider");if(xb){Z.Utils.graphicSize(xb,t,I);var S=xb.style;S.left=B+"px";S.top=R+"px";B+=U}var va=document.getElementById("buttonPanLeft");if(va){Z.Utils.buttonSize(va,J,ja);var Eb=va.style;Eb.left=B+"px";Eb.top=Q+"px";B+=w}var zd=document.getElementById("buttonPanUp");if(zd){Z.Utils.buttonSize(zd,J,ja);var sa=zd.style;
sa.left=B+"px";sa.top=Q+"px";B+=w}var Ka=document.getElementById("buttonPanDown");if(Ka){Z.Utils.buttonSize(Ka,J,ja);var tb=Ka.style;tb.left=B+"px";tb.top=Q+"px";B+=w}var Ob=document.getElementById("buttonPanRight");if(Ob){Z.Utils.buttonSize(Ob,J,ja);var yd=Ob.style;yd.left=B+"px";yd.top=Q+"px";B+=w}}if(!ye){var nd=document.getElementById("buttonReset");if(nd){Z.Utils.buttonSize(nd,J,ja);var Wc=nd.style;Wc.left=B+"px";Wc.top=Q+"px";B+=w+1}}var Qd=document.getElementById("fullViewDivider");if(Qd){Z.Utils.graphicSize(Qd,
t,I);var yb=Qd.style;yb.left=B+"px";yb.top=R+"px";B+=U}var vd=document.getElementById("buttonFullViewExit");if(vd){Z.Utils.buttonSize(vd,J,ja);var ge=vd.style;ge.left=B+"px";ge.top=Q+"px";ge.display=Z.fullView?"inline-block":"none"}var wa=document.getElementById("buttonFullView");if(wa){Z.Utils.buttonSize(wa,J,ja);var gb=wa.style;gb.left=B+"px";gb.top=Q+"px";B+=w+1;gb.display=Z.fullView?"none":"inline-block"}var Eg=document.getElementById("measureDivider");if(Eg){Z.Utils.graphicSize(Eg,t,I);var bf=
Eg.style;bf.left=B+"px";bf.top=R+"px";B+=U}if(null===Z.editMode){var ue=document.getElementById("buttonMeasureExit");if(ue){Z.Utils.buttonSize(ue,J,ja);var ve=ue.style;ve.left=B+"px";ve.top=Q+"px";ve.display="measure"==Z.labelMode?"inline-block":"none"}}if(Va=document.getElementById("buttonMeasure"))Z.Utils.buttonSize(Va,J,ja),bb=Va.style,bb.left=B+"px",bb.top=Q+"px",B+=w+1,bb.display="measure"==Z.labelMode?"none":"inline-block";var zg=document.getElementById("rotateDivider");if(zg){Z.Utils.graphicSize(zg,
t,I);var Kb=zg.style;Kb.left=B+"px";Kb.top=R+"px";var B=B+U,Vb=document.getElementById("buttonRotateCounterwise");if(Vb){Z.Utils.buttonSize(Vb,J,ja);var Mf=Vb.style;Mf.left=B+"px";Mf.top=Q+"px";B+=w}var Ag=document.getElementById("buttonRotateClockwise");if(Ag){Z.Utils.buttonSize(Ag,J,ja);var ob=Ag.style;ob.left=B+"px";ob.top=Q+"px";B+=w+1}}if(Z.tour){var mc=document.getElementById("tourDivider");if(mc){Z.Utils.graphicSize(mc,t,I);var db=mc.style;db.left=B+"px";db.top=R+"px";var B=B+U,wg=document.getElementById("buttonTourPrior");
if(wg){Z.Utils.buttonSize(wg,J,ja);var xd=wg.style;xd.left=B+"px";xd.top=Q+"px";B+=w+1}var xg=document.getElementById("buttonTourNext");if(xg){Z.Utils.buttonSize(xg,J,ja);var Ue=xg.style;Ue.left=B+"px";Ue.top=Q+"px";B+=w+1}var vg=document.getElementById("buttonTourStop");if(vg){Z.Utils.buttonSize(vg,J,ja);var ld=vg.style;ld.left=B+"px";ld.top=Q+"px";ld.display=Z.tourPlaying?"inline-block":"none"}var Te=document.getElementById("buttonTourStart");if(Te){Z.Utils.buttonSize(Te,J,ja);var Dg=Te.style;Dg.left=
B+"px";Dg.top=Q+"px";B+=w+1;Dg.display=Z.tourPlaying?"none":"inline-block"}}}else if(Z.slideshow){var Me=document.getElementById("slideshowDivider");if(Me){Z.Utils.graphicSize(Me,t,I);var Pg=Me.style;Pg.left=B+"px";Pg.top=R+"px";var B=B+U,Ne=document.getElementById("buttonSlideshowPrior");if(Ne){Z.Utils.buttonSize(Ne,J,ja);var Ef=Ne.style;Ef.left=B+"px";Ef.top=Q+"px";B+=w+1}var yg=document.getElementById("buttonSlideshowNext");if(yg){Z.Utils.buttonSize(yg,J,ja);var Ab=yg.style;Ab.left=B+"px";Ab.top=
Q+"px";B+=w+1}var $b=document.getElementById("buttonSlideshowStop");if($b){Z.Utils.buttonSize($b,J,ja);var Wa=$b.style;Wa.left=B+"px";Wa.top=Q+"px";Wa.display=Z.slideshowPlaying?"inline-block":"none"}var Bg=document.getElementById("buttonSlideshowStart");if(Bg){Z.Utils.buttonSize(Bg,J,ja);var ac=Bg.style;ac.left=B+"px";ac.top=Q+"px";B+=w+1;ac.display=Z.slideshowPlaying?"none":"inline-block"}}}else if(null!==Z.imageSetPath&&!Z.comparison){var Md=document.getElementById("imageSetDivider");if(Md){Z.Utils.graphicSize(Md,
t,I);var Aa=Md.style;Aa.left=B+"px";Aa.top=R+"px";B+=U}var Wb=document.getElementById("buttonImageSetPrior");if(Wb){Z.Utils.buttonSize(Wb,J,ja);var Lb=Wb.style;Lb.left=B+"px";Lb.top=Q+"px";B+=w+1}trsiS=document.getElementById("trackSliderImageSet");btsiS=document.getElementById("buttonSliderImageSet");trsiS&&btsiS&&(trsisS=trsiS.style,btsisS=btsiS.style,trsisS&&btsisS&&(lh?(trsisS.display="none",btsisS.display="none"):(trsisS.display="inline-block",btsisS.display="inline-block",Z.Utils.graphicSize(trsiS,
ta,ka),trsisS.left=B-2+"px",trsisS.top=ea+"px",Z.Utils.buttonSize(btsiS,ba,W),btsisS.left=parseFloat(trsisS.left)+"px",btsisS.top=ga+"px",B+=oa)));var Da=document.getElementById("buttonImageSetNext");if(Da){Z.Utils.buttonSize(Da,J,ja);var sb=Da.style;sb.left=B+"px";sb.top=Q+"px";B+=w+1}}if(Z.tour||Z.slideshow){var Gb=document.getElementById("buttonAudioMuted");if(Gb){Z.Utils.buttonSize(Gb,J,ja);var Sc=Gb.style;Sc.left=B+"px";Sc.top=Q+"px";Sc.display="none"}var Fg=document.getElementById("buttonAudioOn");
if(Fg){Z.Utils.buttonSize(Fg,J,ja);var Pa=Fg.style;Pa.left=B+"px";Pa.top=Q+"px";B+=w+1;Pa.display="none"}b.initializeAudioMuteButtons()}if(Z.imageFilters){var ad=document.getElementById("imageFilterDivider");if(ad){Z.Utils.graphicSize(ad,t,I);var Ec=ad.style;Ec.left=B+"px";Ec.top=R+"px";var B=B+U,ic=document.getElementById("buttonImageFilterPanelHide");if(ic){Z.Utils.buttonSize(ic,J,ja);var Hb=ic.style;Hb.left=B+"px";Hb.top=Q+"px";Hb.display=Jg?"inline-block":"none"}var lc=document.getElementById("buttonImageFilterPanelShow");
if(lc){Z.Utils.buttonSize(lc,J,ja);var Ub=lc.style;Ub.left=B+"px";Ub.top=Q+"px";B+=w+1;Ub.display=Jg?"none":"inline-block"}var Na=parseInt(Z.Utils.getResource("DEFAULT_IMAGEFILTERPANELLABELFONTSIZE"),10),Qa=parseInt(Z.Utils.getResource("DEFAULT_IMAGEFILTERPANELTEXTFONTSIZE"),10),mb=parseInt(Z.Utils.getResource("DEFAULT_IMAGEFILTERTEXTPADDINGSMALL"),10),ub=ua[6],lb=ua[7],Zb=ua[8],kc=ua[4],Ma=ua[5],eb=ua[11],zb=ua[12],kb=ua[9],Nb=ua[10],vb=ua[13],ih=Zb-(ub-kc),V=90,Kg=parseInt(Z.Utils.getResource("z137"),
10),uh=Z.grayscaleVisible+Z.thresholdVisible+Z.inversionVisible+Z.normalizeVisible+Z.equalizeVisible+Z.edgesVisible+Z.sepiaVisible,hh=Math.max(lb+6+18*(Z.brightnessVisible+Z.contrastVisible+Z.sharpnessVisible+Z.blurrinessVisible+Z.colorRedVisible+Z.colorGreenVisible+Z.colorBlueVisible+Z.colorRedRangeVisible+Z.colorGreenRangeVisible+Z.colorBlueRangeVisible+Z.gammaVisible+Z.gammaRedVisible+Z.gammaGreenVisible+Z.gammaBlueVisible+Z.hueVisible+Z.saturationVisible+Z.lightnessVisible+Z.whiteBalanceVisible+
Z.noiseVisible)+10,(lb+6)*uh),Ye=0<uh?2:.96,Rf=Z.colorRedRangeVisible||Z.colorGreenRangeVisible||Z.colorBlueRangeVisible?100:0,Ud=Z.colorRedVisible||Z.colorGreenVisible||Z.colorBlueVisible||Z.whiteBalanceVisible||Z.gammaRedVisible||Z.gammaGreenVisible||Z.gammaBlueVisible?0:30,eb=eb+(Rf+Ud),vb=vb+(Rf+Ud),Qf=Z.colorRedRangeVisible||Z.colorGreenRangeVisible||Z.colorBlueRangeVisible?42:0,V=V-Ud,md=Kf=Math.round(V*Ye+eb+2*Zb+Zb*Ye+ih*Ye+15*Ye-4+Qf),td=20+Ma+hh,kh=td-Ma-38,fe=md-15-ub,Fa=td-10-1.9*lb,Tc=
td-10-lb-1,N=15,x=20,sd=document.getElementById("buttonImageFilterPanelShow"),Ze=document.getElementById("buttonContainerImageFilter"),Hg=document.getElementById("imageFilterList");if(Ze&&sd&&Hg){var Lg=parseFloat(sd.style.left),ji=parseFloat(sd.parentNode.style.left),sc=Ze.style;sc.width=md+"px";sc.height=td+"px";sc.left=Lg+ji+Zb-md+"px";sc.top=-(td+5)+"px";var ug=document.getElementById("imageFilterPanelBackground");if(ug){var Tb=ug.style;Tb.width=md+"px";Tb.height=td+"px"}var Fb=Hg.style;Fb.width=
Kg+"px";Fb.left="20px";Fb.top=Tc+"px";var Ld=document.getElementById("labelBrightnessTextBox");Be=document.getElementById("trackSliderFilterBrightness");Bc=document.getElementById("buttonSliderFilterBrightness");var fc=document.getElementById("textBoxFor-brightnessTextElement");Ld&&Be&&Bc&&fc&&(uc=Ld.style,Ib=Be.style,ke=Bc.style,tbfbteS=fc.style,uc&&Ib&&ke&&tbfbteS&&(uc.width=V+"px",uc.height="20px",uc.left=N+"px",uc.top=x-3+"px",uc.visibility="visible",Z.Utils.setTextNodeStyle(Ld,"black","verdana",
Na+"px","none","normal","normal","normal","normal","1em","left","none"),Ib.display="inline-block",ke.display="inline-block",Z.Utils.graphicSize(Be,eb,zb),Ib.left=N+V+3+"px",Ib.top=x+"px",Z.Utils.buttonSize(Bc,kb,Nb),ke.left=parseFloat(Ib.left)+"px",ke.top=x-4+"px",tbfbteS.width="37px",tbfbteS.height="14px",tbfbteS.left=N+V+3+vb+"px",tbfbteS.top=x-6+"px",Z.Utils.setTextAreaStyle(fc,"black","verdana",Qa+"px","none","normal","normal","normal","normal","1em","center","none",mb+"px"),x+=Ma));var Hh=document.getElementById("labelContrastTextBox");
dd=document.getElementById("trackSliderFilterContrast");af=document.getElementById("buttonSliderFilterContrast");var Ig=document.getElementById("textBoxFor-contrastTextElement");Hh&&dd&&af&&Ig&&(De=Hh.style,Ce=dd.style,ze=af.style,tbfcteS=Ig.style,De&&Ce&&ze&&tbfcteS&&(De.width=V+"px",De.height="20px",De.left=N+"px",De.top=x-3+"px",De.visibility="visible",Z.Utils.setTextNodeStyle(Hh,"black","verdana",Na+"px","none","normal","normal","normal","normal","1em","left","none"),Ce.display="inline-block",
ze.display="inline-block",Z.Utils.graphicSize(dd,eb,zb),Ce.left=N+V+3+"px",Ce.top=x+"px",Z.Utils.buttonSize(af,kb,Nb),ze.left=parseFloat(Ce.left)+"px",ze.top=x-4+"px",tbfcteS.width="37px",tbfcteS.height="14px",tbfcteS.left=N+V+3+vb+"px",tbfcteS.top=x-6+"px",Z.Utils.setTextAreaStyle(Ig,"black","verdana",Qa+"px","none","normal","normal","normal","normal","1em","center","none",mb+"px"),x+=Ma));var Sd=document.getElementById("labelSharpnessTextBox");gf=document.getElementById("trackSliderFilterSharpness");
Ve=document.getElementById("buttonSliderFilterSharpness");var te=document.getElementById("textBoxFor-sharpnessTextElement");Sd&&gf&&Ve&&te&&(Ee=Sd.style,cf=gf.style,hf=Ve.style,tbfsteS=te.style,Ee&&cf&&hf&&tbfsteS&&(Ee.width=V+"px",Ee.height="20px",Ee.left=N+"px",Ee.top=x-3+"px",Ee.visibility="visible",Z.Utils.setTextNodeStyle(Sd,"black","verdana",Na+"px","none","normal","normal","normal","normal","1em","left","none"),cf.display="inline-block",hf.display="inline-block",Z.Utils.graphicSize(gf,eb,zb),
cf.left=N+V+3+"px",cf.top=x+"px",Z.Utils.buttonSize(Ve,kb,Nb),hf.left=parseFloat(cf.left)+"px",hf.top=x-4+"px",tbfsteS.width="37px",tbfsteS.height="14px",tbfsteS.left=N+V+3+vb+"px",tbfsteS.top=x-6+"px",Z.Utils.setTextAreaStyle(te,"black","verdana",Qa+"px","none","normal","normal","normal","normal","1em","center","none",mb+"px"),x+=Ma));var Rd=document.getElementById("labelBlurrinessTextBox");Pb=document.getElementById("trackSliderFilterBlurriness");kf=document.getElementById("buttonSliderFilterBlurriness");
var se=document.getElementById("textBoxFor-blurrinessTextElement");Rd&&Pb&&kf&&se&&(Cd=Rd.style,jf=Pb.style,$f=kf.style,tbfblteS=se.style,Cd&&jf&&$f&&tbfblteS&&(Cd.width=V+"px",Cd.height="20px",Cd.left=N+"px",Cd.top=x-3+"px",Cd.visibility="visible",Z.Utils.setTextNodeStyle(Rd,"black","verdana",Na+"px","none","normal","normal","normal","normal","1em","left","none"),jf.display="inline-block",$f.display="inline-block",Z.Utils.graphicSize(Pb,eb,zb),jf.left=N+V+3+"px",jf.top=x+"px",Z.Utils.buttonSize(kf,
kb,Nb),$f.left=parseFloat(jf.left)+"px",$f.top=x-4+"px",tbfblteS.width="37px",tbfblteS.height="14px",tbfblteS.left=N+V+3+vb+"px",tbfblteS.top=x-6+"px",Z.Utils.setTextAreaStyle(se,"black","verdana",Qa+"px","none","normal","normal","normal","normal","1em","center","none",mb+"px"),x+=Ma));var qg=document.getElementById("labelColorRedTextBox");wd=document.getElementById("trackSliderFilterColorRed");ag=document.getElementById("buttonSliderFilterColorRed");var Yh=document.getElementById("textBoxFor-colorRedTextElement");
qg&&wd&&ag&&Yh&&(lfbtcrS=qg.style,Oc=wd.style,dg=ag.style,tbfcrteS=Yh.style,lfbtcrS&&Oc&&dg&&tbfcrteS&&(lfbtcrS.width=V+"px",lfbtcrS.height="20px",lfbtcrS.left=N+"px",lfbtcrS.top=x-3+"px",lfbtcrS.visibility="visible",Z.Utils.setTextNodeStyle(qg,"black","verdana",Na+"px","none","normal","normal","normal","normal","1em","left","none"),Oc.display="inline-block",dg.display="inline-block",Z.Utils.graphicSize(wd,eb,zb),Oc.left=N+V+3+"px",Oc.top=x+"px",Z.Utils.buttonSize(ag,kb,Nb),dg.left=parseFloat(Oc.left)+
"px",dg.top=x-4+"px",tbfcrteS.width="37px",tbfcrteS.height="14px",tbfcrteS.left=N+V+3+vb+"px",tbfcrteS.top=x-6+"px",Z.Utils.setTextAreaStyle(Yh,"black","verdana",Qa+"px","none","normal","normal","normal","normal","1em","center","none",mb+"px"),x+=Ma));var Tf=document.getElementById("labelColorGreenTextBox");Ge=document.getElementById("trackSliderFilterColorGreen");mf=document.getElementById("buttonSliderFilterColorGreen");var ie=document.getElementById("textBoxFor-colorGreenTextElement");Tf&&Ge&&
mf&&ie&&(lfbtcgS=Tf.style,Xb=Ge.style,Mg=mf.style,tbfcgteS=ie.style,lfbtcgS&&Xb&&Mg&&tbfcgteS&&(lfbtcgS.width=V+"px",lfbtcgS.height="20px",lfbtcgS.left=N+"px",lfbtcgS.top=x-3+"px",lfbtcgS.visibility="visible",Z.Utils.setTextNodeStyle(Tf,"black","verdana",Na+"px","none","normal","normal","normal","normal","1em","left","none"),Xb.display="inline-block",Mg.display="inline-block",Z.Utils.graphicSize(Ge,eb,zb),Xb.left=N+V+3+"px",Xb.top=x+"px",Z.Utils.buttonSize(mf,kb,Nb),Mg.left=parseFloat(Xb.left)+"px",
Mg.top=x-4+"px",tbfcgteS.width="37px",tbfcgteS.height="14px",tbfcgteS.left=N+V+3+vb+"px",tbfcgteS.top=x-6+"px",Z.Utils.setTextAreaStyle(ie,"black","verdana",Qa+"px","none","normal","normal","normal","normal","1em","center","none",mb+"px"),x+=Ma));var Uf=document.getElementById("labelColorBlueTextBox");ff=document.getElementById("trackSliderFilterColorBlue");Xf=document.getElementById("buttonSliderFilterColorBlue");var xe=document.getElementById("textBoxFor-colorBlueTextElement");Uf&&ff&&Xf&&xe&&(lfbtcbS=
Uf.style,Wf=ff.style,Ng=Xf.style,tbfcbteS=xe.style,lfbtcbS&&Wf&&Ng&&tbfcbteS&&(lfbtcbS.width=V+"px",lfbtcbS.height="20px",lfbtcbS.left=N+"px",lfbtcbS.top=x-3+"px",lfbtcbS.visibility="visible",Z.Utils.setTextNodeStyle(Uf,"black","verdana",Na+"px","none","normal","normal","normal","normal","1em","left","none"),Wf.display="inline-block",Ng.display="inline-block",Z.Utils.graphicSize(ff,eb,zb),Wf.left=N+V+3+"px",Wf.top=x+"px",Z.Utils.buttonSize(Xf,kb,Nb),Ng.left=parseFloat(Wf.left)+"px",Ng.top=x-4+"px",
tbfcbteS.width="37px",tbfcbteS.height="14px",tbfcbteS.left=N+V+3+vb+"px",tbfcbteS.top=x-6+"px",Z.Utils.setTextAreaStyle(xe,"black","verdana",Qa+"px","none","normal","normal","normal","normal","1em","center","none",mb+"px"),x+=Ma));var we=document.getElementById("labelColorRedRangeTextBox");Gd=document.getElementById("trackSliderFilterColorRedRange");df=document.getElementById("buttonSliderFilterColorRedRange");btfCRR2=document.getElementById("buttonSliderFilterColorRedRange2");var tg=document.getElementById("textBoxFor-colorRedRangeTextElement"),
sg=document.getElementById("textBoxFor-colorRedRangeTextElement2");we&&Gd&&df&&btfCRR2&&tg&&sg&&(lfbtcrrS=we.style,je=Gd.style,ef=df.style,btfcrr2S=btfCRR2.style,tbfcrrteS=tg.style,tbfcrrte2S=sg.style,lfbtcrrS&&je&&ef&&btfcrr2S&&tbfcrrteS&&tbfcrrte2S&&(lfbtcrrS.width=V+"px",lfbtcrrS.height="20px",lfbtcrrS.left=N+"px",lfbtcrrS.top=x-3+"px",lfbtcrrS.visibility="visible",Z.Utils.setTextNodeStyle(we,"black","verdana",Na+"px","none","normal","normal","normal","normal","1em","left","none"),je.display="inline-block",
ef.display="inline-block",Z.Utils.graphicSize(Gd,eb,zb),je.left=N+V+3+"px",je.top=x+"px",Z.Utils.buttonSize(df,kb,Nb),ef.left=parseFloat(je.left)+"px",ef.top=x-4+"px",Z.Utils.buttonSize(btfCRR2,kb,Nb),btfcrr2S.left=parseFloat(je.left)+50+"px",btfcrr2S.top=x-4+"px",tbfcrrteS.width="37px",tbfcrrteS.height="14px",tbfcrrteS.left=N+V+3+vb+"px",tbfcrrteS.top=x-6+"px",Z.Utils.setTextAreaStyle(tg,"black","verdana",Qa+"px","none","normal","normal","normal","normal","1em","center","none",mb+"px"),tbfcrrte2S.width=
"37px",tbfcrrte2S.height="14px",tbfcrrte2S.left=N+V+3+vb+37+5+"px",tbfcrrte2S.top=x-6+"px",Z.Utils.setTextAreaStyle(sg,"black","verdana",Qa+"px","none","normal","normal","normal","normal","1em","center","none",mb+"px"),x+=Ma));var rg=document.getElementById("labelColorGreenRangeTextBox");ed=document.getElementById("trackSliderFilterColorGreenRange");Ie=document.getElementById("buttonSliderFilterColorGreenRange");btfCGR2=document.getElementById("buttonSliderFilterColorGreenRange2");var Zh=document.getElementById("textBoxFor-colorGreenRangeTextElement"),
$h=document.getElementById("textBoxFor-colorGreenRangeTextElement2");rg&&ed&&Ie&&btfCGR2&&Zh&&$h&&(lfbtcgrS=rg.style,Fe=ed.style,Pc=Ie.style,btfcgr2S=btfCGR2.style,tbfcgrteS=Zh.style,tbfcgrte2S=$h.style,lfbtcgrS&&Fe&&Pc&&btfcgr2S&&tbfcgrteS&&tbfcgrte2S&&(lfbtcgrS.width=V+"px",lfbtcgrS.height="20px",lfbtcgrS.left=N+"px",lfbtcgrS.top=x-3+"px",lfbtcgrS.visibility="visible",Z.Utils.setTextNodeStyle(rg,"black","verdana",Na+"px","none","normal","normal","normal","normal","1em","left","none"),Fe.display=
"inline-block",Pc.display="inline-block",Z.Utils.graphicSize(ed,eb,zb),Fe.left=N+V+3+"px",Fe.top=x+"px",Z.Utils.buttonSize(Ie,kb,Nb),Pc.left=parseFloat(Fe.left)+"px",Pc.top=x-4+"px",Z.Utils.buttonSize(btfCGR2,kb,Nb),btfcgr2S.left=parseFloat(je.left)+50+"px",btfcgr2S.top=x-4+"px",tbfcgrteS.width="37px",tbfcgrteS.height="14px",tbfcgrteS.left=N+V+3+vb+"px",tbfcgrteS.top=x-6+"px",Z.Utils.setTextAreaStyle(Zh,"black","verdana",Qa+"px","none","normal","normal","normal","normal","1em","center","none",mb+
"px"),tbfcgrte2S.width="37px",tbfcgrte2S.height="14px",tbfcgrte2S.left=N+V+3+vb+37+5+"px",tbfcgrte2S.top=x-6+"px",Z.Utils.setTextAreaStyle($h,"black","verdana",Qa+"px","none","normal","normal","normal","normal","1em","center","none",mb+"px"),x+=Ma));var fh=document.getElementById("labelColorBlueRangeTextBox");nc=document.getElementById("trackSliderFilterColorBlueRange");Hd=document.getElementById("buttonSliderFilterColorBlueRange");btfCBR2=document.getElementById("buttonSliderFilterColorBlueRange2");
var qh=document.getElementById("textBoxFor-colorBlueRangeTextElement"),Gh=document.getElementById("textBoxFor-colorBlueRangeTextElement2");fh&&nc&&Hd&&btfCBR2&&qh&&Gh&&(lfbtcbrS=fh.style,nf=nc.style,fg=Hd.style,btfcbr2S=btfCBR2.style,tbfcbrteS=qh.style,tbfcbrte2S=Gh.style,lfbtcbrS&&nf&&fg&&btfcbr2S&&tbfcbrteS&&tbfcbrte2S&&(lfbtcbrS.width=V+"px",lfbtcbrS.height="20px",lfbtcbrS.left=N+"px",lfbtcbrS.top=x-3+"px",lfbtcbrS.visibility="visible",Z.Utils.setTextNodeStyle(fh,"black","verdana",Na+"px","none",
"normal","normal","normal","normal","1em","left","none"),nf.display="inline-block",fg.display="inline-block",Z.Utils.graphicSize(nc,eb,zb),nf.left=N+V+3+"px",nf.top=x+"px",Z.Utils.buttonSize(Hd,kb,Nb),fg.left=parseFloat(nf.left)+"px",fg.top=x-4+"px",Z.Utils.buttonSize(btfCBR2,kb,Nb),btfcbr2S.left=parseFloat(je.left)+50+"px",btfcbr2S.top=x-4+"px",tbfcbrteS.width="37px",tbfcbrteS.height="14px",tbfcbrteS.left=N+V+3+vb+"px",tbfcbrteS.top=x-6+"px",Z.Utils.setTextAreaStyle(qh,"black","verdana",Qa+"px",
"none","normal","normal","normal","normal","1em","center","none",mb+"px"),tbfcbrte2S.width="37px",tbfcbrte2S.height="14px",tbfcbrte2S.left=N+V+3+vb+37+5+"px",tbfcbrte2S.top=x-6+"px",Z.Utils.setTextAreaStyle(Gh,"black","verdana",Qa+"px","none","normal","normal","normal","normal","1em","center","none",mb+"px"),x+=Ma));var Fh=document.getElementById("labelGammaTextBox");of=document.getElementById("trackSliderFilterGamma");cg=document.getElementById("buttonSliderFilterGamma");var Eh=document.getElementById("textBoxFor-gammaTextElement");
Fh&&of&&cg&&Eh&&(lfbtgS=Fh.style,gg=of.style,Og=cg.style,tbfgteS=Eh.style,lfbtgS&&gg&&Og&&tbfgteS&&(lfbtgS.width=V+"px",lfbtgS.height="20px",lfbtgS.left=N+"px",lfbtgS.top=x-3+"px",lfbtgS.visibility="visible",Z.Utils.setTextNodeStyle(Fh,"black","verdana",Na+"px","none","normal","normal","normal","normal","1em","left","none"),gg.display="inline-block",Og.display="inline-block",Z.Utils.graphicSize(of,eb,zb),gg.left=N+V+3+"px",gg.top=x+"px",Z.Utils.buttonSize(cg,kb,Nb),Og.left=parseFloat(gg.left)+"px",
Og.top=x-4+"px",tbfgteS.width="37px",tbfgteS.height="14px",tbfgteS.left=N+V+3+vb+"px",tbfgteS.top=x-6+"px",Z.Utils.setTextAreaStyle(Eh,"black","verdana",Qa+"px","none","normal","normal","normal","normal","1em","center","none",mb+"px"),x+=Ma));var Dh=document.getElementById("labelGammaRedTextBox");lf=document.getElementById("trackSliderFilterGammaRed");hg=document.getElementById("buttonSliderFilterGammaRed");var qa=document.getElementById("textBoxFor-gammaRedTextElement");Dh&&lf&&hg&&qa&&(lfbtgrS=
Dh.style,bg=lf.style,od=hg.style,tbfgrteS=qa.style,lfbtgrS&&bg&&od&&tbfgrteS&&(lfbtgrS.width=V+"px",lfbtgrS.height="20px",lfbtgrS.left=N+"px",lfbtgrS.top=x-3+"px",lfbtgrS.visibility="visible",Z.Utils.setTextNodeStyle(Dh,"black","verdana",Na+"px","none","normal","normal","normal","normal","1em","left","none"),bg.display="inline-block",od.display="inline-block",Z.Utils.graphicSize(lf,eb,zb),bg.left=N+V+3+"px",bg.top=x+"px",Z.Utils.buttonSize(hg,kb,Nb),od.left=parseFloat(bg.left)+"px",od.top=x-4+"px",
tbfgrteS.width="37px",tbfgrteS.height="14px",tbfgrteS.left=N+V+3+vb+"px",tbfgrteS.top=x-6+"px",Z.Utils.setTextAreaStyle(qa,"black","verdana",Qa+"px","none","normal","normal","normal","normal","1em","center","none",mb+"px"),x+=Ma));var ra=document.getElementById("labelGammaGreenTextBox");Yc=document.getElementById("trackSliderFilterGammaGreen");le=document.getElementById("buttonSliderFilterGammaGreen");var pg=document.getElementById("textBoxFor-gammaGreenTextElement");ra&&Yc&&le&&pg&&(lfbtggS=ra.style,
qf=Yc.style,$e=le.style,tbfggteS=pg.style,lfbtggS&&qf&&$e&&tbfggteS&&(lfbtggS.width=V+"px",lfbtggS.height="20px",lfbtggS.left=N+"px",lfbtggS.top=x-3+"px",lfbtggS.visibility="visible",Z.Utils.setTextNodeStyle(ra,"black","verdana",Na+"px","none","normal","normal","normal","normal","1em","left","none"),qf.display="inline-block",$e.display="inline-block",Z.Utils.graphicSize(Yc,eb,zb),qf.left=N+V+3+"px",qf.top=x+"px",Z.Utils.buttonSize(le,kb,Nb),$e.left=parseFloat(qf.left)+"px",$e.top=x-4+"px",tbfggteS.width=
"37px",tbfggteS.height="14px",tbfggteS.left=N+V+3+vb+"px",tbfggteS.top=x-6+"px",Z.Utils.setTextAreaStyle(pg,"black","verdana",Qa+"px","none","normal","normal","normal","normal","1em","center","none",mb+"px"),x+=Ma));var Re=document.getElementById("labelGammaBlueTextBox");Ad=document.getElementById("trackSliderFilterGammaBlue");sf=document.getElementById("buttonSliderFilterGammaBlue");var Ya=document.getElementById("textBoxFor-gammaBlueTextElement");Re&&Ad&&sf&&Ya&&(lfbtgbS=Re.style,rf=Ad.style,Bd=
sf.style,tbfgbteS=Ya.style,lfbtgbS&&rf&&Bd&&tbfgbteS&&(lfbtgbS.width=V+"px",lfbtgbS.height="20px",lfbtgbS.left=N+"px",lfbtgbS.top=x-3+"px",lfbtgbS.visibility="visible",Z.Utils.setTextNodeStyle(Re,"black","verdana",Na+"px","none","normal","normal","normal","normal","1em","left","none"),rf.display="inline-block",Bd.display="inline-block",Z.Utils.graphicSize(Ad,eb,zb),rf.left=N+V+3+"px",rf.top=x+"px",Z.Utils.buttonSize(sf,kb,Nb),Bd.left=parseFloat(rf.left)+"px",Bd.top=x-4+"px",tbfgbteS.width="37px",
tbfgbteS.height="14px",tbfgbteS.left=N+V+3+vb+"px",tbfgbteS.top=x-6+"px",Z.Utils.setTextAreaStyle(Ya,"black","verdana",Qa+"px","none","normal","normal","normal","normal","1em","center","none",mb+"px"),x+=Ma));var Za=document.getElementById("labelHueTextBox");Je=document.getElementById("trackSliderFilterHue");Yd=document.getElementById("buttonSliderFilterHue");var tc=document.getElementById("textBoxFor-hueTextElement");Za&&Je&&Yd&&tc&&(lfbthS=Za.style,Ke=Je.style,Fc=Yd.style,tbfhteS=tc.style,lfbthS&&
Ke&&Fc&&tbfhteS&&(lfbthS.width=V+"px",lfbthS.height="20px",lfbthS.left=N+"px",lfbthS.top=x-3+"px",lfbthS.visibility="visible",Z.Utils.setTextNodeStyle(Za,"black","verdana",Na+"px","none","normal","normal","normal","normal","1em","left","none"),Ke.display="inline-block",Fc.display="inline-block",Z.Utils.graphicSize(Je,eb,zb),Ke.left=N+V+3+"px",Ke.top=x+"px",Z.Utils.buttonSize(Yd,kb,Nb),Fc.left=parseFloat(Ke.left)+"px",Fc.top=x-4+"px",tbfhteS.width="37px",tbfhteS.height="14px",tbfhteS.left=N+V+3+vb+
"px",tbfhteS.top=x-6+"px",Z.Utils.setTextAreaStyle(tc,"black","verdana",Qa+"px","none","normal","normal","normal","normal","1em","center","none",mb+"px"),x+=Ma));var zc=document.getElementById("labelSaturationTextBox");rb=document.getElementById("trackSliderFilterSaturation");pd=document.getElementById("buttonSliderFilterSaturation");var bc=document.getElementById("textBoxFor-saturationTextElement");zc&&rb&&pd&&bc&&(lfbtsaS=zc.style,Le=rb.style,Xd=pd.style,tbfsateS=bc.style,lfbtsaS&&Le&&Xd&&tbfsateS&&
(lfbtsaS.width=V+"px",lfbtsaS.height="20px",lfbtsaS.left=N+"px",lfbtsaS.top=x-3+"px",lfbtsaS.visibility="visible",Z.Utils.setTextNodeStyle(zc,"black","verdana",Na+"px","none","normal","normal","normal","normal","1em","left","none"),Le.display="inline-block",Xd.display="inline-block",Z.Utils.graphicSize(rb,eb,zb),Le.left=N+V+3+"px",Le.top=x+"px",Z.Utils.buttonSize(pd,kb,Nb),Xd.left=parseFloat(Le.left)+"px",Xd.top=x-4+"px",tbfsateS.width="37px",tbfsateS.height="14px",tbfsateS.left=N+V+3+vb+"px",tbfsateS.top=
x-6+"px",Z.Utils.setTextAreaStyle(bc,"black","verdana",Qa+"px","none","normal","normal","normal","normal","1em","center","none",mb+"px"),x+=Ma));var Mb=document.getElementById("labelLightnessTextBox");Jb=document.getElementById("trackSliderFilterLightness");me=document.getElementById("buttonSliderFilterLightness");var Id=document.getElementById("textBoxFor-lightnessTextElement");Mb&&Jb&&me&&Id&&(lfbtlS=Mb.style,Rb=Jb.style,Lf=me.style,tbflteS=Id.style,lfbtlS&&Rb&&Lf&&tbflteS&&(lfbtlS.width=V+"px",
lfbtlS.height="20px",lfbtlS.left=N+"px",lfbtlS.top=x-3+"px",lfbtlS.visibility="visible",Z.Utils.setTextNodeStyle(Mb,"black","verdana",Na+"px","none","normal","normal","normal","normal","1em","left","none"),Rb.display="inline-block",Lf.display="inline-block",Z.Utils.graphicSize(Jb,eb,zb),Rb.left=N+V+3+"px",Rb.top=x+"px",Z.Utils.buttonSize(me,kb,Nb),Lf.left=parseFloat(Rb.left)+"px",Lf.top=x-4+"px",tbflteS.width="37px",tbflteS.height="14px",tbflteS.left=N+V+3+vb+"px",tbflteS.top=x-6+"px",Z.Utils.setTextAreaStyle(Id,
"black","verdana",Qa+"px","none","normal","normal","normal","normal","1em","center","none",mb+"px"),x+=Ma));var Jd=document.getElementById("labelWhiteBalanceTextBox");uf=document.getElementById("trackSliderFilterWhiteBalance");Zd=document.getElementById("buttonSliderFilterWhiteBalance");var Tg=document.getElementById("textBoxFor-whiteBalanceTextElement");Jd&&uf&&Zd&&Tg&&(lfbtwbS=Jd.style,vf=uf.style,wf=Zd.style,tbfwbteS=Tg.style,lfbtwbS&&vf&&wf&&tbfwbteS&&(lfbtwbS.width=V+"px",lfbtwbS.height="20px",
lfbtwbS.left=N+"px",lfbtwbS.top=x-3+"px",lfbtwbS.visibility="visible",Z.Utils.setTextNodeStyle(Jd,"black","verdana",Na+"px","none","normal","normal","normal","normal","1em","left","none"),vf.display="inline-block",wf.display="inline-block",Z.Utils.graphicSize(uf,eb,zb),vf.left=N+V+3+"px",vf.top=x+"px",Z.Utils.buttonSize(Zd,kb,Nb),wf.left=parseFloat(vf.left)+"px",wf.top=x-4+"px",tbfwbteS.width="37px",tbfwbteS.height="14px",tbfwbteS.left=N+V+3+vb+"px",tbfwbteS.top=x-6+"px",Z.Utils.setTextAreaStyle(Tg,
"black","verdana",Qa+"px","none","normal","normal","normal","normal","1em","center","none",mb+"px"),x+=Ma));var oe=document.getElementById("labelNormalizeTextBox");Dd=document.getElementById("trackSliderFilterNormalize");$d=document.getElementById("buttonSliderFilterNormalize");var Dc=document.getElementById("textBoxFor-normalizeTextElement");oe&&Dd&&$d&&Dc&&(lfbtnS=oe.style,Cc=Dd.style,ae=$d.style,tbfnteS=Dc.style,lfbtnS&&Cc&&ae&&tbfnteS&&(lfbtnS.width=V+"px",lfbtnS.height="20px",lfbtnS.left=N+"px",
lfbtnS.top=x-3+"px",lfbtnS.visibility="visible",Z.Utils.setTextNodeStyle(oe,"black","verdana",Na+"px","none","normal","normal","normal","normal","1em","left","none"),Cc.display="inline-block",ae.display="inline-block",Z.Utils.graphicSize(Dd,eb,zb),Cc.left=N+V+3+"px",Cc.top=x+"px",Z.Utils.buttonSize($d,kb,Nb),ae.left=parseFloat(Cc.left)+"px",ae.top=x-4+"px",tbfnteS.width="37px",tbfnteS.height="14px",tbfnteS.left=N+V+3+vb+"px",tbfnteS.top=x-6+"px",Z.Utils.setTextAreaStyle(Dc,"black","verdana",Qa+"px",
"none","normal","normal","normal","normal","1em","center","none",mb+"px"),x+=Ma));var Zc=document.getElementById("labelEqualizeTextBox");trsFE=document.getElementById("trackSliderFilterEqualize");btfE=document.getElementById("buttonSliderFilterEqualize");var La=document.getElementById("textBoxFor-equalizeTextElement");Zc&&trsFE&&btfE&&La&&(lfbteS=Zc.style,trsfeS=trsFE.style,btfeS=btfE.style,tbfeteS=La.style,lfbteS&&trsfeS&&btfeS&&tbfeteS&&(lfbteS.width=V+"px",lfbteS.height="20px",lfbteS.left=N+"px",
lfbteS.top=x-3+"px",lfbteS.visibility="visible",Z.Utils.setTextNodeStyle(Zc,"black","verdana",Na+"px","none","normal","normal","normal","normal","1em","left","none"),trsfeS.display="inline-block",btfeS.display="inline-block",Z.Utils.graphicSize(trsFE,eb,zb),trsfeS.left=N+V+3+"px",trsfeS.top=x+"px",Z.Utils.buttonSize(btfE,kb,Nb),btfeS.left=parseFloat(trsfeS.left)+"px",btfeS.top=x-4+"px",tbfeteS.width="37px",tbfeteS.height="14px",tbfeteS.left=N+V+3+vb+"px",tbfeteS.top=x-6+"px",Z.Utils.setTextAreaStyle(La,
"black","verdana",Qa+"px","none","normal","normal","normal","normal","1em","center","none",mb+"px"),x+=Ma));oe=document.getElementById("labelNoiseTextBox");Dd=document.getElementById("trackSliderFilterNoise");$d=document.getElementById("buttonSliderFilterNoise");Dc=document.getElementById("textBoxFor-noiseTextElement");oe&&Dd&&$d&&Dc&&(lfbtnS=oe.style,Cc=Dd.style,ae=$d.style,tbfnteS=Dc.style,lfbtnS&&Cc&&ae&&tbfnteS&&(lfbtnS.width=V+"px",lfbtnS.height="20px",lfbtnS.left=N+"px",lfbtnS.top=x-3+"px",
lfbtnS.visibility="visible",Z.Utils.setTextNodeStyle(oe,"black","verdana",Na+"px","none","normal","normal","normal","normal","1em","left","none"),Cc.display="inline-block",ae.display="inline-block",Z.Utils.graphicSize(Dd,eb,zb),Cc.left=N+V+3+"px",Cc.top=x+"px",Z.Utils.buttonSize($d,kb,Nb),ae.left=parseFloat(Cc.left)+"px",ae.top=x-4+"px",tbfnteS.width="37px",tbfnteS.height="14px",tbfnteS.left=N+V+3+vb+"px",tbfnteS.top=x-6+"px",Z.Utils.setTextAreaStyle(Dc,"black","verdana",Qa+"px","none","normal","normal",
"normal","normal","1em","center","none",mb+"px"),x+=Ma));var N=15+V+eb+11+Qf/2,x=x-5,oc=document.getElementById("buttonImageFilterMinus");if(oc){Z.Utils.buttonSize(oc,.9*ub,.9*lb);var Sb=oc.style;Sb.left=N+"px";Sb.top=x+"px";N+=ub+3}var Df=document.getElementById("buttonImageFilterPlus");if(Df){Z.Utils.buttonSize(Df,.9*ub,.9*lb);var ee=Df.style;ee.left=N+"px";ee.top=x+"px";N+=Zb}var N=md-22.5-ub-V,x=14,Xg=document.getElementById("imageFilterStateDivider");if(Xg){Z.Utils.graphicSize(Xg,kc,kh);var kg=
Xg.style;kg.left=0<uh?N-15+"px":"-1000px";kg.top="10px"}var Wh=document.getElementById("labelGrayscaleTextBox"),Zg=document.getElementById("containerFor-checkboxFilterGrayscale"),Rc=document.getElementById("checkboxFilterGrayscale");if(Wh&&Zg&&Rc){var xc=Wh.style;xc.width=V+"px";xc.height="20px";xc.left=N+"px";xc.top=x+3+"px";xc.visibility="visible";Z.Utils.setTextNodeStyle(Wh,"black","verdana",Na+"px","none","normal","normal","normal","normal","1em","left","none");var Pe=Zg.style;Pe.width=1.5*ub+
"px";Pe.height=1.5*lb+"px";Pe.left=N+V+3+"px";Pe.top=x-3+"px";Rc.width=ub;Rc.height=lb;x+=Ma}var Gf=document.getElementById("labelThresholdTextBox"),si=document.getElementById("containerFor-checkboxFilterThreshold"),Xh=document.getElementById("checkboxFilterThreshold");if(Gf&&si&&Xh){var fd=Gf.style;fd.width=V+"px";fd.height="20px";fd.left=N+"px";fd.top=x+3+"px";fd.visibility="visible";Z.Utils.setTextNodeStyle(Gf,"black","verdana",Na+"px","none","normal","normal","normal","normal","1em","left","none");
var Oe=si.style;Oe.width=1.5*ub+"px";Oe.height=1.5*lb+"px";Oe.left=N+V+3+"px";Oe.top=x-3+"px";Xh.width=ub;Xh.height=lb;x+=Ma}var pe=document.getElementById("labelInversionTextBox"),Kd=document.getElementById("containerFor-checkboxFilterInversion"),pc=document.getElementById("checkboxFilterInversion");if(pe&&Kd&&pc){var ec=pe.style;ec.width=V+"px";ec.height="20px";ec.left=N+"px";ec.top=x+3+"px";ec.visibility="visible";Z.Utils.setTextNodeStyle(pe,"black","verdana",Na+"px","none","normal","normal","normal",
"normal","1em","left","none");var Hc=Kd.style;Hc.width=1.5*ub+"px";Hc.height=1.5*lb+"px";Hc.left=N+V+3+"px";Hc.top=x-3+"px";pc.width=ub;pc.height=lb;x+=Ma}var Ic=document.getElementById("labelEqualizeTextBox"),Cb=document.getElementById("containerFor-checkboxFilterEqualize"),Ff=document.getElementById("checkboxFilterEqualize");if(Ic&&Cb&&Ff){var qe=Ic.style;qe.width=V+"px";qe.height="20px";qe.left=N+"px";qe.top=x+3+"px";qe.visibility="visible";Z.Utils.setTextNodeStyle(Ic,"black","verdana",Na+"px",
"none","normal","normal","normal","normal","1em","left","none");var re=Cb.style;re.width=1.5*ub+"px";re.height=1.5*lb+"px";re.left=N+V+3+"px";re.top=x-3+"px";Ff.width=ub;Ff.height=lb;x+=Ma}var Gc=document.getElementById("labelEdgesTextBox"),be=document.getElementById("containerFor-checkboxFilterEdges"),Sg=document.getElementById("checkboxFilterEdges");if(Gc&&be&&Sg){var zf=Gc.style;zf.width=V+"px";zf.height="20px";zf.left=N+"px";zf.top=x+3+"px";zf.visibility="visible";Z.Utils.setTextNodeStyle(Gc,
"black","verdana",Na+"px","none","normal","normal","normal","normal","1em","left","none");var Pf=be.style;Pf.width=1.5*ub+"px";Pf.height=1.5*lb+"px";Pf.left=N+V+3+"px";Pf.top=x-3+"px";Sg.width=ub;Sg.height=lb;x+=Ma}var Nf=document.getElementById("labelSepiaTextBox"),ai=document.getElementById("containerFor-checkboxFilterSepia"),sh=document.getElementById("checkboxFilterSepia");if(Nf&&ai&&sh){var Nd=Nf.style;Nd.width=V+"px";Nd.height="20px";Nd.left=N+"px";Nd.top=x+3+"px";Nd.visibility="visible";Z.Utils.setTextNodeStyle(Nf,
"black","verdana",Na+"px","none","normal","normal","normal","normal","1em","left","none");var de=ai.style;de.width=1.5*ub+"px";de.height=1.5*lb+"px";de.left=N+V+3+"px";de.top=x-3+"px";sh.width=ub;sh.height=lb}var N=md-15-5*ub,x=td-10-lb,bi=document.getElementById("imageFilterPanelDivider");if(bi){Z.Utils.graphicSize(bi,fe,5.5);var vh=bi.style;vh.left="15px";vh.top=Fa+2+"px"}var Af=document.getElementById("buttonImageFilterClear");if(Af){Z.Utils.buttonSize(Af,ub,lb);var jg=Af.style;jg.left=N+"px";
jg.top=x+"px";N+=Zb}var $g=document.getElementById("buttonImageFiltersClearAll");if($g){Z.Utils.buttonSize($g,ub,lb);var wh=$g.style;wh.left=N+"px";wh.top=x+"px";N+=Zb}var xh=document.getElementById("imageFilterStateDivider3");if(xh){Z.Utils.graphicSize(xh,kc,Ma);var ci=xh.style;ci.left=N+"px";ci.top=x+"px";N+=ih}var ah=document.getElementById("buttonImageFilterPanelHideOnPanel");if(ah){Z.Utils.buttonSize(ah,ub,lb);var di=ah.style;di.left=N+"px";di.top=x+"px"}Z.contrastVisible&&(P(null,"contrast",
!0),L.setImageFilterSlider("contrast",0),L.setImageFilterText("contrast",0),b.setImageFilterValuePrior("contrast",0));Z.sharpnessVisible&&(P(null,"sharpness",!0),L.setImageFilterSlider("sharpness",0),L.setImageFilterText("sharpness",0),b.setImageFilterValuePrior("sharpness",0));Z.blurrinessVisible&&(P(null,"blurriness",!0),L.setImageFilterSlider("blurriness",0),L.setImageFilterText("blurriness",0),b.setImageFilterValuePrior("blurriness",0));Z.colorRedVisible&&(P(null,"colorRed",!0),L.setImageFilterSlider("colorRed",
0),L.setImageFilterText("colorRed",0),b.setImageFilterValuePrior("colorRed",0));Z.colorGreenVisible&&(P(null,"colorGreen",!0),L.setImageFilterSlider("colorGreen",0),L.setImageFilterText("colorGreen",0),b.setImageFilterValuePrior("colorGreen",0));Z.colorBlueVisible&&(P(null,"colorBlue",!0),L.setImageFilterSlider("colorBlue",0),L.setImageFilterText("colorBlue",0),b.setImageFilterValuePrior("colorBlue",0));Z.colorRedRangeVisible&&(P(null,"colorRedRange",!0),L.setImageFilterSlider("colorRedRange",0),
L.setImageFilterText("colorRedRange",0),b.setImageFilterValuePrior("colorRedRange",0),P(null,"colorRedRange2",!0),L.setImageFilterSlider("colorRedRange2",255),L.setImageFilterText("colorRedRange2",255),b.setImageFilterValuePrior("colorRedRange2",255));Z.colorGreenRangeVisible&&(P(null,"colorGreenRange",!0),L.setImageFilterSlider("colorGreenRange",0),L.setImageFilterText("colorGreenRange",0),b.setImageFilterValuePrior("colorGreenRange",0),P(null,"colorGreenRange2",!0),L.setImageFilterSlider("colorGreenRange2",
255),L.setImageFilterText("colorGreenRange2",255),b.setImageFilterValuePrior("colorGreenRange2",255));Z.colorBlueRangeVisible&&(P(null,"colorBlueRange",!0),L.setImageFilterSlider("colorBlueRange",0),L.setImageFilterText("colorBlueRange",0),b.setImageFilterValuePrior("colorBlueRange",0),P(null,"colorBlueRange2",!0),L.setImageFilterSlider("colorBlueRange2",255),L.setImageFilterText("colorBlueRange2",255),b.setImageFilterValuePrior("colorBlueRange2",255));Z.gammaVisible&&(P(null,"gamma",!0),L.setImageFilterSlider("gamma",
1),L.setImageFilterText("gamma",1),b.setImageFilterValuePrior("gamma",1));Z.gammaRedVisible&&(P(null,"gammaRed",!0),L.setImageFilterSlider("gammaRed",1),L.setImageFilterText("gammaRed",1),b.setImageFilterValuePrior("gammaRed",1));Z.gammaGreenVisible&&(P(null,"gammaGreen",!0),L.setImageFilterSlider("gammaGreen",1),L.setImageFilterText("gammaGreen",1),b.setImageFilterValuePrior("gammaGreen",1));Z.gammaBlueVisible&&(P(null,"gammaBlue",!0),L.setImageFilterSlider("gammaBlue",1),L.setImageFilterText("gammaBlue",
1),b.setImageFilterValuePrior("gammaBlue",1));Z.hueVisible&&(P(null,"hue",!0),L.setImageFilterSlider("hue",0),L.setImageFilterText("hue",0),b.setImageFilterValuePrior("hue",0));Z.saturationVisible&&(P(null,"saturation",!0),L.setImageFilterSlider("saturation",0),L.setImageFilterText("saturation",0),b.setImageFilterValuePrior("saturation",0));Z.lightnessVisible&&(P(null,"lightness",!0),L.setImageFilterSlider("lightness",0),L.setImageFilterText("lightness",0),b.setImageFilterValuePrior("lightness",0));
Z.whiteBalanceVisible&&(P(null,"whiteBalance",!0),L.setImageFilterSlider("whiteBalance",6500),L.setImageFilterText("whiteBalance",6500),b.setImageFilterValuePrior("whiteBalance",6500));Z.noiseVisible&&(P(null,"noise",!0),L.setImageFilterSlider("noise",0),L.setImageFilterText("noise",0),b.setImageFilterValuePrior("noise",0));Z.brightnessVisible&&(P(null,"brightness",!0),L.setImageFilterSlider("brightness",0),L.setImageFilterText("brightness",0),b.setImageFilterValuePrior("brightness",0))}}}if(Z.preloadVisible){var Qe=
document.getElementById("preloadDivider"),bh=document.getElementById("buttonPreload");if(Qe&&bh){Z.Utils.graphicSize(Qe,t,I);var Mh=Qe.style;Mh.top=R+"px";Z.imageSet||(Mh.left=B+"px",B+=U);Z.Utils.buttonSize(bh,J,ja);var ki=bh.style;ki.left=B+"px";ki.top=Q+"px";B+=w;Z.imageSet&&(Mh.left=B+"px",B+=U);B+=8}}if(1==Z.helpVisible||3==Z.helpVisible){var Nh=document.getElementById("buttonHelp");if(Nh){Z.Utils.buttonSize(Nh,J,ja);var li=Nh.style;li.left=B+"px";li.top=Q+"px";B+=w+8}}if(Z.comparison&&Z.syncVisible){var Fi=
parseInt(Z.Utils.getResource("DEFAULT_TOOLBARLABELFONTSIZE"),10),Lh=document.getElementById("labelSyncTextBox"),th=document.getElementById("containerFor-checkboxSyncComparison"),mg=document.getElementById("checkboxSyncComparison");if(Lh&&th&&mg){var Hf=Lh.style;Hf.width="28px";Hf.height="20px";Hf.left=B+"px";Hf.top=Q+3+"px";Hf.visibility="visible";Z.Utils.setTextNodeStyle(Lh,"black","verdana",Fi+"px","none","normal","normal","normal","normal","1em","left","none");var lg=th.style;lg.width=1.5*J+"px";
lg.height=1.5*ja+"px";lg.left=B+28+3+"px";lg.top=Q-3+"px";mg.width=J;mg.height=ja;mg.checked=Z.initialSync}}var ng=document.getElementById("progressTextBox");if(ng){var Od=ng.style;Od&&(Mc?Od.display="none":(Od.display="inline-block",Od.width=fa+"px",Od.height=Db+"px",Od.left=k-parseFloat(Ja.style.left)-parseFloat(Od.width)+"px",Od.top=(m-parseFloat(Od.height))/2+"px"))}};this.syncSliderToViewportZoom=function(a){q(a)};this.syncImageFilterPanel=function(a,e,f){L.setImageFilterSlider(a,e,f);L.setImageFilterText(a,
e);b.setImageFilterValuePrior(a,e)};this.clearImageFilterInPanel=function(a,b){var e=document.getElementById("imageFilterList");if(e){var f=b?e.options.length-1:Z.Utils.arrayIndexOfObjectValue(e.options,"value",a);if(-1!=f&&(e.options.remove(f),e.options.length>f&&e.options[f].value==e.options[f-1].value)){var g=e.options[f-1].text,k=e.options[f].text,g=g.substring(0,g.indexOf(":\u00a0\u00a0")+2),m=k.substring(k.indexOf(":\u00a0\u00a0")+3,k.length),k=k.substring(k.indexOf(":\u00a0\u00a0")+3,k.length),
k=parseFloat(k)+parseFloat(m);e.options[f-1].text=g+k.toString();e.options.remove(f)}2==e.options.length&&(e.options[e.options.length]=new Option("\u00a0\u00a0None","null"))}if("grayscale"==a||"threshold"==a||"inversion"==a||"normalize"==a||"equalize"==a||"edges"==a||"sepia"==a){if(e="checkboxFilter"+Z.Utils.stringUpperCaseFirstLetter(a),e=document.getElementById(e))e.checked=!1}else if(e=(f="2"==a.substring(a.length-1))?"2":"",g=f?a.substring(0,a.length-1):a,f=-1==a.indexOf("gamma")?0:1,L.setImageFilterSlider(g,
f),e=document.getElementById(g+"TextElement"+e))e.value=f};this.setImageFilterSlider=function(a,e,f){var g="2"!=a.substring(a.length-1)?a:a.substring(0,a.length-1);if(Z[g+"Visible"]){g=b.getImageFilterRangeMaxAbsolute(a);e/=g;switch(a){case "brightness":e+=.5;break;case "contrast":e+=.3333;break;case "colorRed":e+=.5;break;case "colorGreen":e+=.5;break;case "colorBlue":e+=.5;break;case "saturation":e+=.5;break;case "lightness":e+=.5}Z.Toolbar.setFilterSliderReferences(a);"undefined"!==typeof ya&&
"undefined"!==typeof za&&(a=parseFloat(ya.left),g=parseFloat(ya.left)+parseFloat(ya.width)-parseFloat(za.width),e=e*(g-a)+a,e<a&&(e=a),e>g&&(e=g),(f?f:za).left=e+"px")}};this.setImageFilterText=function(a,b){var e="2"==a.substring(a.length-1),f=e?"2":"",e=e?a.substring(0,a.length-1):a;if(Z[e+"Visible"]){-1==a.indexOf("gamma")&&(b=Math.round(b));var g=b.toString();document.getElementById(e+"TextElement"+f).value=g}};this.setFilterSliderReferences=function(a){Eb=null;switch(a){case "brightness":Be&&
(xb=Be,ya=Be.style,Ja=Bc,za=Bc.style);break;case "contrast":dd&&(xb=dd,ya=dd.style,Ja=af,za=af.style);break;case "sharpness":gf&&(xb=gf,ya=gf.style,Ja=Ve,za=Ve.style);break;case "blurriness":Pb&&(xb=Pb,ya=Pb.style,Ja=kf,za=kf.style);break;case "colorRed":wd&&(xb=wd,ya=wd.style,Ja=ag,za=ag.style);break;case "colorGreen":Ge&&(xb=Ge,ya=Ge.style,Ja=mf,za=mf.style);break;case "colorBlue":ff&&(xb=ff,ya=ff.style,Ja=Xf,za=Xf.style);break;case "colorRedRange":Gd&&(xb=Gd,ya=Gd.style,Ja=df,za=df.style,Eb=btfCRR2.style);
break;case "colorRedRange2":Gd&&(xb=Gd,ya=Gd.style,Ja=btfCRR2,za=btfCRR2.style,Eb=df.style);break;case "colorGreenRange":ed&&(xb=ed,ya=ed.style,Ja=Ie,za=Ie.style,Eb=btfCGR2.style);break;case "colorGreenRange2":ed&&(xb=ed,ya=ed.style,Ja=btfCGR2,za=btfCGR2.style,Eb=Ie.style);break;case "colorBlueRange":nc&&(xb=nc,ya=nc.style,Ja=Hd,za=Hd.style,Eb=btfCBR2.style);break;case "colorBlueRange2":nc&&(xb=nc,ya=nc.style,Ja=btfCBR2,za=btfCBR2.style,Eb=Hd.style);break;case "gamma":of&&(xb=of,ya=of.style,Ja=cg,
za=cg.style);break;case "gammaRed":lf&&(xb=lf,ya=lf.style,Ja=hg,za=hg.style);break;case "gammaGreen":Yc&&(xb=Yc,ya=Yc.style,Ja=le,za=le.style);break;case "gammaBlue":Ad&&(xb=Ad,ya=Ad.style,Ja=sf,za=sf.style);break;case "hue":Je&&(xb=Je,ya=Je.style,Ja=Yd,za=Yd.style);break;case "saturation":rb&&(xb=rb,ya=rb.style,Ja=pd,za=pd.style);break;case "lightness":Jb&&(xb=Jb,ya=Jb.style,Ja=me,za=me.style);break;case "whiteBalance":uf&&(xb=uf,ya=uf.style,Ja=Zd,za=Zd.style);break;case "noise":Dd&&(xb=Dd,ya=Dd.style,
Ja=$d,za=$d.style)}};this.syncSliderToViewportImageSet=function(a){ba(a)};this.z457=function(a){E(a)};this.backgroundEventsHandler=function(a){a=Z.Utils.event(a);if(a=Z.Utils.relatedTarget(a)){var b=a.parentNode;b&&(b=b.id)&&(fb||Wc||cc||-1==b.indexOf("button")||-1!=b.indexOf("buttonContainer")||Z.Utils.setButtonDefaults(a.parentNode))}};this.positionButtonBorder=function(a){var b=Z.annotationFileShared?"0":ta;if("buttonColor"==a.substr(0,11))var e=document.getElementById("buttonBorderSm"+b);else if(a==
"buttonViewMode"+b||a=="buttonEditModeFreehand"+b||a=="buttonEditModeText"+b||a=="buttonEditModeIcon"+b||a=="buttonEditModeRectangle"+b||a=="buttonEditModePolygon"+b||a=="buttonEditModeMeasure"+b)e=document.getElementById("buttonBorderLg"+b);var f=document.getElementById(a);e&&f&&(a=="buttonClearAll"+b&&(f=document.getElementById("buttonViewMode"+tbViewportID)),a=e.style,f=f.style,a.left=parseFloat(f.left)-2+"px",a.top=parseFloat(f.top)-2+"px")};this.imageFilterPanelShow=function(){var a=document.getElementById("imageFilterPanelBackground"),
b=document.getElementById("buttonContainerImageFilter"),e=document.getElementById("buttonImageFilterPanelShow"),f=document.getElementById("buttonImageFilterPanelHide");a&&b&&e&&f&&(a.style.width=Kf+"px",b.style.display="inline-block",e.style.display="none",f.style.display="inline-block");Jg=!0};this.imageFilterPanelHide=function(){var a=document.getElementById("imageFilterPanelBackground"),b=document.getElementById("buttonContainerImageFilter"),e=document.getElementById("buttonImageFilterPanelShow"),
f=document.getElementById("buttonImageFilterPanelHide");a&&b&&e&&f&&(a.style.width="0px",b.style.display="none",e.style.display="inline-block",f.style.display="none");Jg=!1};this.addFilterToImageFilterList=function(a,b,e,f){var g=document.getElementById("imageFilterList");if(g){var k=Z.Utils.stringUpperCaseFirstLetter(a),m=Z.Utils.arrayIndexOfObjectValueSubstring(g.options,"text",k),u="\u00a0\u00a0"+k;"\u00a0\u00a0None"==g.options[g.options.length-1].text&&g.options.remove(g.options.length-1);k="";
"undefined"!==typeof b&&null!==b&&(k=Z.Utils.roundToFixed(b,3).toString());b="";"undefined"!==typeof e&&null!==e&&(b="-"+Z.Utils.roundToFixed(e,3).toString());f?(a=g.options[m].text,a=a.substring(0,a.indexOf(":\u00a0\u00a0")+3),g.options[m].text=a+k+b):-1==g.options[g.options.length-1].text.toLowerCase().indexOf(a.toLowerCase())?(g.options[g.options.length]=new Option(u,a),Z.Utils.stringValidate(k)&&(g.options[g.options.length-1].text+=":\u00a0\u00a0"+k+b)):(a=g.options[g.options.length-1].text,a=
a.substring(0,a.indexOf(":\u00a0\u00a0")+3),g.options[g.options.length-1].text=a+k+b)}}};
Z.ZoomifyNavigator=function(b){function a(e,f){var g="undefined"!==typeof f&&null!==f?!1:!0,k=g?b:f;if("unconverted"!=Z.tileSource)"ZoomifyImageFile"==Z.tileSource?Va=k.formatTilePath(0,0,0):"ZoomifyImageFolder"==Z.tileSource?Va=Z.Utils.cacheProofPath(k.getImagePath()+"/TileGroup0/0-0-0."+Z.tileType):"ZoomifyPFFFile"==Z.tileSource?Va=k.formatTilePath(0,0,0):"IIIFImageServer"==Z.tileSource?Va=k.formatTilePath(0,0,0):"ImageServer"==Z.tileSource&&(Va=k.formatTilePath(0,0,0)),ma=null,ma=new Image,ma.onload=
e,ma.onerror=J,"offsetLoading"!=Va?(g||(Xa[Xa.length]={id:f.getViewportID().toString(),image:ma}),"ZoomifyImageFile"==Z.tileSource?(new Z.NetConnector).loadImage(Va,Z.Utils.createCallback(null,e),"navigator",null):ma.src=Va):window.setTimeout(function(){a(e)},100);else{var m=k.getUnconvertedImage();"undefined"!==typeof m&&null!==m?(ma=k.createUnconvertedImageThumbnail(m),g&&"function"===typeof e?e():Xa[Xa.length]="undefined"!==typeof f?{id:f.getViewportID().toString(),image:ma}:{id:null,image:null}):
window.setTimeout(function(){a(e,f)},100)}}function e(b){for(var e=0,f=Z.imageSetLength;e<f;e++)a(null,Z["Viewport"+e.toString()]);b()}function f(a,b){"ZoomifyImageFile"==Z.tileSource&&(ma=b);var e=Z.Utils.createContainerElement("div","testImageContainer","inline-block","absolute","hidden",$a+"px",Ra+"px","0px","0px","none","0px","transparent none","0px","0px","normal",null,!0);e.appendChild(ma);e.removeChild(ma);e=null;e=ma.height;if(0!=ma.width&&0!=e){Y=Z.Utils.createContainerElement("div","navigatorDisplay"+
T,"inline-block","absolute","hidden",$a+"px",Ra+"px",ua+"px",pb+"px","solid","1px","transparent none","0px","0px","normal",null,!0);fa=Z.NavigatorDisplay=Y;pa=fa.style;Z.slideshow&&Z.Utils.setOpacity(Z.NavigatorDisplay,0);pa.zIndex=(Z.baseZIndex+4).toString();var e=parseFloat(Z.Utils.getResource("z82")),g=Z.Utils.getResource("z83"),k=Z.Utils.getResource("z83NOALPHA"),g=Z.Utils.createContainerElement("div","navigatorBackground","inline-block","absolute","hidden",$a+"px",Ra+"px","0px","0px","none",
"0px",g,"0px","0px","normal",null,!0);Z.Utils.setOpacity(g,e,k);Y.appendChild(g);L=g;aa=L.style;e=Z.Utils.createContainerElement("div","navigatorImageContainer","inline-block","absolute","hidden",$a+"px",Ra+"px","0px","0px","none","0px","transparent none","0px","0px","normal",null,!0);e.appendChild(ma);ma.alt=Z.Utils.getResource("z439");Y.appendChild(e);ta=e;ib=ta.style;Q=ma;e=Q.width;k=Q.height;g=Z.Utils.createContainerElement("div","navigatorRectangle","inline-block","absolute","hidden",$a+1+"px",
Ra+1+"px",ua+"px",pb+"px","solid","1px","transparent none","0px","0px","normal",null,!0);g.style.borderColor=Z.Utils.stringValidateColorValue(Z.navigatorRectangleColor);Y.appendChild(g);Ba=g;ha=Ba.style;if(Z.comparison){var g=Z.Utils.getResource("DEFAULT_NAVIGATORBORDERCOLOR"),m=Z.Utils.createContainerElement("div","navigatorBorder"+T,"inline-block","absolute","hidden",$a+1+"px",Ra+1+"px",ua+"px",pb+"px","solid","1px","transparent none","0px","0px","normal",null,!0);m.style.borderColor=Z.Utils.stringValidateColorValue(g);
Y.appendChild(m);nBO=m;nboS=L.style}Z.ViewerDisplay.appendChild(Y);t($a,Ra,ua,pb,fb,e,k);w(1==Z.navigatorVisible||2==Z.navigatorVisible);Z.Utils.addEventListener(fa,"mouseover",Z.Utils.stopPropagation);Z.Utils.addEventListener(fa,"mousedown",ba);Z.Utils.addEventListener(fa,"touchstart",M);Z.Utils.addEventListener(fa,"touchmove",oa);Z.Utils.addEventListener(fa,"touchend",ea);Z.Utils.addEventListener(fa,"touchcancel",E);bb||(bb=!0,Z.Utils.validateCallback("navigatorInitialized"),Z.Viewer.validateViewerReady("navigatorInitialized"));
R()}else window.setTimeout(function(){f(a,b)},100)}function g(){if(Xa&&0<Xa.length&&null!==Xa[0]&&0<Xa[0].image.width){var a=Z.Utils.arrayIndexOfObjectValue(Xa,"id","0");if(-1!=a){a=Xa[a].image;ma=a.cloneNode(!1);a=null;if("undefined"===typeof b)var b=null;f(b,ma)}else window.setTimeout(function(){g()},100)}else window.setTimeout(function(){g()},100)}function m(a){if(Y)if(Z.slideshow&&Z.Utils.setOpacity(Y,0),"ZoomifyImageFile"==Z.tileSource&&(ma=a),ta&&ma&&0<ma.width&&0<ma.height){a=ma.width;var b=
ma.height;ta.appendChild(ma);Q=Y.childNodes[1].firstChild;t($a,Ra,ua,pb,fb,a,b);a=Z.ToolbarDisplay&&"inline-block"==Z.ToolbarDisplay.style.display&&!Z.ToolbarMinimized||"undefined"!==typeof slideList&&null!==slideList&&"visible"==slideList.style.visibility;w((1==Z.navigatorVisible||2==Z.navigatorVisible)&&a);Y.style.zIndex=(Z.baseZIndex+4).toString();R()}else window.setTimeout(function(){m()},100)}function k(){bb&&(Ca&&(window.clearInterval(Ca),Ca=null),fa&&pa&&L&&aa&&ta&&ib&&Q&&Ba&&ha||(fa=Y,pa=
fa.style,L=Y.firstChild,aa=L.style,ta=Y.childNodes[1],ib=ta.style,Q=Y.childNodes[1].firstChild,Ba=Y.childNodes[2],ha=Ba.style))}function t(a,e,f,g,k,m,t){k||(k=fb);if("undefined"===typeof a||null===a)a=Z.navigatorW;if("undefined"===typeof e||null===e)e=Z.navigatorH;if("undefined"===typeof f||null===f)f=0;if("undefined"===typeof g||null===g)g=0;fa||(fa=Y);pa||(pa=fa.style);Q=fa.childNodes[1].firstChild;0==Q.width&&"undefined"!==m&&null!==m&&(Q.width=m);0==Q.height&&"undefined"!==t&&null!==t&&(Q.height=
t);fa&&pa&&Q&&(Z.tracking&&(k=0),"undefined"!==typeof k&&null!==k&&(m=Q.width/Q.height,t=Z.viewerW/Z.viewerH,k=0==k?t:m,1<m?e=a/k:(a=e,a*=k)),pa.width=a+"px",pa.height=e+"px",pa.left=f+"px",pa.top=g+"px",q(a,e));Z.navigatorW=a;Z.navigatorH=e;if(Z.tracking||Z.annotations)Z.Ruler&&Z.Ruler.getInitialized()&&(f=-1==Z.rulerL&&Z.Navigator?Z.navigatorL:Z.rulerL,g=-1==Z.rulerT&&Z.Navigator?Z.navigatorT+Z.navigatorH+1:Z.rulerT,Z.Ruler.setSizeAndPosition(Z.rulerW,Z.rulerH,f,g)),Z.userPanelVisible&&null!==Z.UserPanel&&
(a=Z.rulerW,e=parseInt(Z.Utils.getResource("DEFAULT_USERPANELHEIGHT"),10),f=Z.Utils.calculateUserPanelCoords(Z.userPanelPosition,a,e,Z.viewerW,Z.viewerH),Z.Utils.sizeAndPositionUserPanel(Z.UserPanel.style,a,e,f.x,f.y)),Z.imageList&&b.getStatus("initializedImageList")&&(b.setSizeAndPositionImageList(),Z.comparison&&(a=0==b.getViewportID()?Z.Viewport1:Z.Viewport0)&&a.getStatus("initializedImageList")&&a.setSizeAndPositionImageList())}function q(a,b){Q||(Q=Y.childNodes[1].firstChild);if(Q&&0!=Q.width&&
0!=Q.height){if(aa||(aa=Y.firstChild.style),ib||(ib=Y.childNodes[1].style),aa&&ib&&(aa.width=a+"px",aa.height=b+"px",G(a,b),ib.width=Q.width+"px",ib.height=Q.height+"px",ib.left=(a-Q.width)/2+"px",ib.top=(b-Q.height)/2+"px",R(),Z.comparison)){if(!e)var e=document.getElementById("navigatorBorder"+T);e&&(e=e.style,e.width=a-2+"px",e.height=b-2+"px",e.left=parseFloat(aa.left)+"px",e.top=parseFloat(aa.top)+"px",e.display=T==Z.viewportCurrentID?"inline-block":"none")}}else window.setTimeout(function(){q(a,
b)},100)}function G(a,b){Q||(Q=Y.childNodes[1].firstChild);if(Q){var e=Q.width,f=Q.height,g=e/f,k=a/e,m=b/f;k<=m?(e=a,f=a/g,navImageT=(b-a/e*f)/2):m<k&&(f=b,e=b*g,navImageL=(a-b/f*e)/2);Q.width=e;Q.height=f}}function w(a){!pa&&Y&&(pa=Y.style);pa&&(pa.display=a?"inline-block":"none")}function R(){if(b&&b.getStatus("initializedViewport")){P();U();var a=b.calculateCurrentCenterCoordinates();ka(a)}}function U(){if(Q&&ha){var a=Q.width/Z.imageW,e=Q.height/Z.imageH,f=b.getZoom(Z.comparison&&T!=Z.viewportCurrentID),
a=Z.viewerW*a/f;Z.comparison&&(a/=2);e=Z.viewerH*e/f;ha.width=a+"px";ha.height=e+"px"}}function P(){!ib&&Y&&(ib=Y.childNodes[1].style);if(ib){var a=b.getRotation();Z.Utils.rotateElement(ib,a,!0)}}function ka(a){if(Q&&ha&&ib){if("undefined"===typeof a||null===a||0==a.x&&0==a.y)a=new Z.Utils.Point(Z.imageX,Z.imageY);if("undefined"===typeof z||null===z)z=Z.imageZ;var b=Z.imageR;0>b&&(b+=360);var e=parseFloat(Q.width),f=parseFloat(Q.height),b=Z.Utils.rotatePoint(e/Z.imageW*a.x-e/2,f/Z.imageH*a.y-f/2,
-b);a=b.x-parseFloat(ha.width)/2;e=b.y-parseFloat(ha.height)/2;b=parseFloat(pa.width)/2;e=parseFloat(pa.height)/2+e-1;ha.left=b+a+(Z.comparison?-1:0)+"px";ha.top=e+"px"}}function ca(a){if(Q&&ha&&ib){var e=Z.imageZ,f=Z.imageR;0>f&&(f+=360);var g=parseFloat(Q.width),k=parseFloat(Q.height),m=g/Z.imageW,q=k/Z.imageH,t=Z.imageX*m,I=Z.imageY*q,J=Z.Utils.getPageScroll(),w=a?J.x:0,J=a?J.y:0,w=parseFloat(ha.left)+w,J=parseFloat(ha.top)+J,g=w-parseFloat(pa.width)/2+parseFloat(ha.width)/2+g/2,k=J-parseFloat(pa.height)/
2+parseFloat(ha.height)/2+k/2,t=Z.Utils.getPositionRotated(g,k,t,I,-f),m=Math.round(t.x/m),q=Math.round(t.y/q);a?b.zoomAndPanToView(m,q,e,f):(a=new Z.Utils.Point(m,q),b.syncViewportToNavigator(a));Z.tracking&&b.syncTrackingToViewport()}}function J(){Z.Utils.showMessage(Z.Utils.getResource("z271"))}function ba(a){Z.interactive&&(b.zoomAndPanAllStop(!1,!0),Z.mouseIsDown=!0,Z.comparison&&Z.Viewer.viewportSelect(parseInt(T,10)),Z.maskingSelection&&Z.maskClearOnUserAction&&b.clearMask(),fa&&Ba&&ha&&(a=
Z.Utils.event(a),Ba.mouseXPrior=a.clientX,Ba.mouseYPrior=a.clientY,dragPtStart=new Z.Utils.Point(a.clientX,a.clientY),Z.Utils.addEventListener(fa,"mousemove",I),Z.Utils.addEventListener(fa,"mouseup",W),Z.Utils.addEventListener(document,"mouseup",W)))}function I(a){if(Z.interactive&&Ba&&ha){var b=parseFloat(ha.left),e=parseFloat(ha.top);ha.left=b+(a.clientX-Ba.mouseXPrior)+"px";ha.top=e+(a.clientY-Ba.mouseYPrior)+"px";Ba.mouseXPrior=a.clientX;Ba.mouseYPrior=a.clientY;ca(!1);return!1}}function W(a){if(Z.interactive&&
(Z.mouseIsDown=!1,fa&&Ba&&ha)){document.mousemove=null;document.mouseup=null;Z.Utils.removeEventListener(fa,"mousemove",I);Z.Utils.removeEventListener(fa,"mouseup",W);Z.Utils.removeEventListener(document,"mouseup",W);a=Z.Utils.event(a);var e=new Z.Utils.Point(a.clientX,a.clientY);if(e=Z.Utils.calculatePointsDistance(dragPtStart.x,dragPtStart.y,e.x,e.y)<Kc){var f=Z.Utils.getElementPosition(Y);ha.left=a.clientX-f.x-parseFloat(ha.width)/2+"px";ha.top=a.clientY-f.y-parseFloat(ha.height)/2+"px"}ca(e);
Z.comparison&&e||b.updateView()}}function M(a){Z.interactive&&(Z.mouseIsDown=!0,a.preventDefault(),fa&&Ba&&ha&&(a=Z.Utils.getFirstTouch(a)))&&(a=new Z.Utils.Point(a.pageX,a.pageY),dragPtStart=new Z.Utils.Point(a.x,a.y),Ba.mouseXPrior=a.x,Ba.mouseYPrior=a.y)}function oa(a){if(Z.interactive&&(a.preventDefault(),Z.mousePan)){if(Ba&&ha&&(a=Z.Utils.getFirstTouch(a))){a=new Z.Utils.Point(a.pageX,a.pageY);var b=parseFloat(ha.left),e=parseFloat(ha.top);ha.left=b+(a.x-Ba.mouseXPrior)+"px";ha.top=e+(a.y-Ba.mouseYPrior)+
"px";Ba.mouseXPrior=a.x;Ba.mouseYPrior=a.y;ca(!1)}return!1}}function ea(a){if(Z.interactive&&(Z.mouseIsDown=!1,fa&&Ba&&ha)){if(a=Z.Utils.getFirstTouch(a)){a=new Z.Utils.Point(a.pageX,a.pageY);var e=new Z.Utils.Point(a.x,a.y);if(e=Z.Utils.calculatePointsDistance(dragPtStart.x,dragPtStart.y,e.x,e.y)<dc){var f=Z.Utils.getElementPosition(Y);ha.left=a.x-f.x-parseFloat(ha.width)/2+"px";ha.top=a.y-f.y-parseFloat(ha.height)/2+"px"}}ca(e);b.updateView()}}function E(a){if(Z.interactive&&(Z.mouseIsDown=!1,fa&&
Ba&&ha)){if(a=Z.Utils.getFirstTouch(a)){a=new Z.Utils.Point(a.pageX,a.pageY);var e=new Z.Utils.Point(a.x,a.y);if(e=Z.Utils.calculatePointsDistance(dragPtStart.x,dragPtStart.y,e.x,e.y)<dc){var f=Z.Utils.getElementPosition(Y);ha.left=a.x-f.x-parseFloat(ha.width)/2+"px";ha.top=a.y-f.y-parseFloat(ha.height)/2+"px"}}ca(e);b.updateView()}}var jb=this,bb=!1,T=b.getViewportID().toString(),Ca,Y,fa,pa,L,aa,ta,ib,Q,Ba,ha,ma,Xa=[],Kc=parseInt(Z.Utils.getResource("DEFAULT_MOUSECLICKTHRESHOLDNAVIGATOR"),10),dc=
parseInt(Z.Utils.getResource("DEFAULT_TOUCHTAPTHRESHOLDNAVIGATOR"),10),$a=Z.navigatorW,Ra=Z.navigatorH,ua=Z.navigatorL,pb=Z.navigatorT,fb=Z.navigatorFit;Z.comparison&&"1"==T&&(ua=Z.viewerW-$a-1);var Va;"multiple"!=Z.imagePath||Z.comparison||Z.overlays&&"0"==b.getViewportID()?a(f):e(g);this.z556=function(a,b){f(a,b)};this.setImage=function(b){ta&&ma&&0<ta.childNodes.length&&(Z.tracking&&Y.removeChild(navigatorTrackingOverlay),ta.innerHTML="");"undefined"===typeof Xa||null===Xa||0==Xa.length?a(m):(b=
Z.Utils.arrayIndexOfObjectValue(Xa,"id",T),-1!=b&&(ma=Xa[b].image,m(ma)))};this.getInitialized=function(){return bb};this.setVisibility=function(a){w(a)};this.setSelected=function(a){if(!b)var b=document.getElementById("navigatorBorder"+T);b&&(b.style.display=a?"inline-block":"none")};this.syncToViewport=function(){R()};this.z657=function(){U()};this.z659=function(){P()};this.z658=function(a){ka(a)};this.setViewport=function(a){b=a;T=b.getViewportID().toString();Z.overlays||jb.setImage(b.getImagePath())};
this.drawNavigatorTrackingOverlay=function(a,e){var f=document.getElementById("navigatorTrackingOverlay");if("undefined"===typeof f||null===f)f=Z.Utils.createContainerElement("div","navigatorTrackingOverlay","none","absolute","visible",$a+1+"px",Ra+1+"px",ua+"px",pb+"px","none","0px","transparent-none","0px","0px","normal",null,!0),Y.appendChild(f);if(f){for(;f.hasChildNodes();)f.removeChild(f.lastChild);if("undefined"===typeof e||null===e)e=Z.Navigator.getSizeAndPositionNavigatorImage();if(e)for(var g=
e.height/Z.imageH,k=Math.round(e.width/Z.imageW*Z.viewerW),g=Math.round(Z.viewerH*g),m=0,q=a.length;m<q;m++){if(a[m].complete){var t=b.getCoordinatesFromTrackingCellID(a[m].id);if(null!==t.x&&null!==t.y&&null!==t.z){var I=t.z/100,J=k/I,w=g/I,ba=Math.floor(t.x*J),t=Math.floor(t.y*w),J=ba+J<=e.width?J:e.width-ba,w=t+w<=e.height?w:e.height-t,W="cellComp"+m.toString(),I=getTrackingOverlayColor(I);f[W]=Z.Utils.createContainerElement("div",W,"inline-block","absolute","visible",J+"px",w+"px",ba+"px",t+"px",
"solid","1px",I,"0px","0px","normal",null,!0);f.appendChild(f[W]);Z.Utils.setOpacity(f[W],.25)}}}else window.setTimeout(function(){jb.drawNavigatorTrackingOverlay(a)},10)}};getTrackingOverlayColor=function(a){a=Z.Utils.convertZoomPercentToMagnification(100*a,Z.sourceMagnification,!0);return Z.Utils.stringValidateColorValue(Z.Utils.getResource("UI_TRACKINGNAVIGATOROVERLAYCOLOR_UNDER"+(2>a?"1":4>a?"2":10>a?"4":16>a?"10":25>a?"16":40>a?"25":60>a?"40":100>a?"60":"INFINITY")))};this.z682=function(){bb?
k():Ca=window.setInterval(k,300)};this.setSizeAndPosition=function(a,b,e,f,g,k,m){t(a,b,e,f,g,k,m)};this.getSizeAndPositionNavigatorImage=function(){Q||(Q=Y.childNodes[1].firstChild);var a=null;"undefined"!==typeof Q.parentNode&&null!==Q.parentNode&&(a=Q.parentNode.style,a={width:Q.width,height:Q.height,left:parseFloat(a.left)-1,top:parseFloat(a.top)-1});return a}};
Z.ZoomifyGallery=function(b){function a(a){ha=Z.viewportCurrent.getSlides();for(var b=0,e=ha.length;b<e;b++)f(null,null,ha[b]);a()}function e(a){for(var b=0,e=Z.imageSetLength;b<e;b++)f(null,Z["Viewport"+b.toString()]);a()}function f(a,e,g){var k="undefined"!==typeof e&&null!==e?!1:!0,m=k?b:e,q=Z.slideshow&&"undefined"!==typeof g&&null!==g;if("unconverted"!=Z.tileSource){if("ZoomifyImageFile"==Z.tileSource?Xa=q?null:m.formatTilePath(0,0,0):"ZoomifyImageFolder"==Z.tileSource?Xa=q?Z.Utils.cacheProofPath(g.media+
"/TileGroup0/0-0-0."+Z.tileType):Xa=Z.Utils.cacheProofPath(m.getImagePath()+"/TileGroup0/0-0-0."+Z.tileType):"ZoomifyPFFFile"==Z.tileSource?Xa=q?null:m.formatTilePath(0,0,0):"ImageServer"==Z.tileSource&&(Xa=q?null:m.formatTilePath(0,0,0)),null!==Xa)if(Kc=null,Kc=new Image,Kc.onload=a,Kc.onerror=R,"offsetLoading"!=Xa){if(Z.slideshow||!k)k=q?g.internalID:e.getViewportID().toString(),g=q?g.name:e.getViewportID().toString(),ma[ma.length]={internalID:k,image:Kc,name:g};"ZoomifyImageFile"==Z.tileSource?
(new Z.NetConnector).loadImage(Xa,Z.Utils.createCallback(null,a),"gallery",null):Kc.src=Xa}else window.setTimeout(function(){f(a)},100)}else"undefined"!==typeof unconvertedImage&&null!==unconvertedImage?(Kc=m.createUnconvertedImageThumbnail(unconvertedImage),k&&"function"===typeof a?a():ma[ma.length]="undefined"!==typeof e?{id:e.getViewportID().toString(),image:Kc}:{id:null,image:null}):window.setTimeout(function(){f(a,e)},100)}function g(){var a=ma&&ha&&ma.length==ha.length;a&&(a=Z.Utils.arrayImageLoadingValidate(ma));
a?k():window.setTimeout(function(){g()},100)}function m(){var a=ma&&ha&&ma.length==ha.length;a&&(a=Z.Utils.arrayImageLoadingValidate(ma));if(a)if(a=Z.Utils.arrayIndexOfObjectValue(ma,"internalID","0"),-1!=a){a=ma[a].image;Kc=a.cloneNode(!1);a=null;if("undefined"===typeof b)var b=null;k()}else window.setTimeout(function(){m()},100);else window.setTimeout(function(){m()},100)}function k(a,b){"undefined"!==typeof b&&null!==b&&(Kc=b);fa=Z.Utils.createContainerElement("div","galleryDisplay","inline-block",
"absolute","hidden","1px","1px","0px","0px","solid","1px","transparent none","0px","0px","normal",null,!0);L=Z.GalleryDisplay=fa;aa=L.style;Z.slideshow&&Z.Utils.setOpacity(Z.GalleryDisplay,0);aa.zIndex=(Z.baseZIndex+10).toString();var e=parseFloat(Z.Utils.getResource("DEFAULT_GALLERYBACKGROUNDALPHA")),f=Z.Utils.getResource("DEFAULT_GALLERYBACKGROUNDCOLOR"),g=Z.Utils.getResource("DEFAULT_GALLERYBACKGROUNDCOLORNOALPHA"),f=Z.Utils.createContainerElement("div","galleryBackground","inline-block","absolute",
"hidden","1px","1px","0px","0px","none","0px",f,"0px","0px","normal",null,!0);Z.Utils.setOpacity(f,e,g);fa.appendChild(f);gB=f;ta=gB.style;e=Z.Utils.createContainerElement("div","galleryScrollPanel","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal",null,!0);Z.GalleryScrollPanel=e;Kc.alt=Z.Utils.getResource("UI_GALLERYACCESSIBILITYALTATTRIBUTE");fa.appendChild(e);ib=e;gspS=ib.style;e=Z.Utils.createContainerElement("div","galleryRectangle",
"inline-block","absolute","hidden","1px","1px","0px","0px","solid","2px","transparent none","0px","0px","normal",null,!0);e.style.borderColor=Z.Utils.stringValidateColorValue(Z.galleryRectangleColor);fa.appendChild(e);Q=e;Ba=Q.style;Z.ViewerDisplay.appendChild(fa);q();G(1==Z.galleryVisible||2==Z.galleryVisible);Z.Utils.addEventListener(L,"mouseover",Z.Utils.stopPropagation);Z.Utils.addEventListener(L,"mousedown",U);Z.Utils.addEventListener(document,"touchstart",J);Z.Utils.addEventListener(document,
"touchmove",ba);Z.Utils.addEventListener(document,"touchend",I);Z.Utils.addEventListener(document,"touchcancel",W);for(var k,m,f=parseFloat(Z.GalleryDisplay.style.height),t=parseFloat(Z.GalleryDisplay.style.width),w=Z.galleryM,E=w,P=w,R=0,Y=ma.length;R<Y;R++){var ea=Z.Utils.createContainerElement("div","imgContainer"+R.toString(),"inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal",null,!0);ea.appendChild(ma[R].image);g=ea.firstChild;k=g.width;
m=g.height;Z.GalleryScrollPanel.appendChild(ea);giC=ea;gicS=giC.style;g.title=ma[R].name;e=Math.round(f-2*w);m=e/m;k=Math.round(k*m);g.width=k;g.height=e;ea.style.width=k+"px";ea.style.height=e+"px";ea.style.left=P+"px";ea.style.top=w+"px";E+=k+w;P+=k+w;Z.Utils.addEventListener(ea,"mouseup",ca);Z.Utils.addEventListener(ea,"touchend",M);Z.Utils.addEventListener(ea,"touchcancel",oa)}gspS.width=E+"px";gspS.height=f+"px";gspS.left=E<t?(t-E)/2+"px":"0px";T.syncGalleryToViewport(Z.slideshow?0:Z.imageSet?
Z.viewportCurrentID:0);Z.Utils.setOpacity(Z.GalleryDisplay,1);G(!0);Ca||(Ca=!0,Z.Utils.validateCallback("galleryInitialized"),Z.Viewer.validateViewerReady("galleryInitialized"))}function t(){Ca&&(Y&&(window.clearInterval(Y),Y=null),L&&aa&&gB&&ta&&Q&&Ba||(L=fa,aa=L.style,gB=fa.firstChild,ta=gB.style,Q=fa.childNodes[2],Ba=Q.style))}function q(a,b,e,f){var g=Z.ToolbarDisplay&&Z.Toolbar.getInitialized()&&Z.toolbarPosition==Z.galleryPosition?Z.toolbarH+2:0;if("undefined"===typeof a||null===a)a=-1!=Z.galleryW?
Z.galleryW:Z.viewerW;if("undefined"===typeof b||null===b)b=Z.galleryH;if("undefined"===typeof e||null===e)e=0;if("undefined"===typeof f||null===f)f=-1!=Z.galleryT?Z.galleryT:0==Z.galleryPosition?g:Z.viewerH-g-Z.galleryH;L||(L=fa);aa||(aa=L.style);L&&aa&&(aa.width=a+"px",aa.height=b+"px",aa.left=e-1+"px",aa.top=f+"px",ta||(ta=fa.firstChild.style),ta&&(ta.width=2*a+"px",ta.height=b+"px",ta.left="0px"))}function G(a){!aa&&fa&&(aa=fa.style);aa&&(aa.display=a?"inline-block":"none")}function w(a){if(a=
Z.Utils.event(a))if(a=Z.Utils.target(a)){a=a.parentNode.id;var b=a.indexOf("imgContainer");-1!=b&&(a=a.substring(b+12,a.length),Z.slideshow?(Z.slideshowPlaying&&Z.viewportCurrent.slideshowStop(),Z.viewportCurrent.goToSlide(a,null,null,!0)):Z.imageSet&&Z.Viewer.viewportSelect(parseInt(a,10)))}}function R(){Z.Utils.showMessage(Z.Utils.getResource("ERROR_GALLERYIMAGEPATHINVALID"))}function U(a){if(a=Z.Utils.event(a))b.zoomAndPanAllStop(!1,!0),Z.maskingSelection&&Z.maskClearOnUserAction&&b.clearMask(),
Z.mouseIsDownGallery=!0,dragPtStart=Z.Utils.getMousePosition(a),pb=dragPtStart.x,Z.Utils.removeEventListener(L,"mousedown",U),Z.Utils.addEventListener(document,"mousemove",P),Z.Utils.addEventListener(document,"mouseup",ka),ea()}function P(a){if(a=Z.Utils.event(a))pb=Z.Utils.getMousePosition(a).x}function ka(a){if(a=Z.Utils.event(a))Z.mouseIsDownGallery=!1,Z.Utils.removeEventListener(document,"mousemove",P),Z.Utils.removeEventListener(document,"mouseup",ka),Z.Utils.addEventListener(L,"mousedown",U)}
function ca(a){if(a=Z.Utils.event(a)){var b=Z.Utils.getMousePosition(a),b=Z.mouseOutDownPointGallery?Z.mouseOutDownPointGallery:new Z.Utils.Point(b.x,b.y);Math.abs(b.x-dragPtStart.x)<dc&&w(a)}}function J(a){if(a=Z.Utils.event(a))if(a.preventDefault(),a=Z.Utils.getFirstTouch(a))b.zoomAndPanAllStop(!1,!0),Z.maskingSelection&&Z.maskClearOnUserAction&&b.clearMask(),Z.mouseIsDownGallery=!0,a=new Z.Utils.Point(a.pageX,a.pageY),dragPtStart=new Z.Utils.Point(a.x,a.y),pb=dragPtStart.x,ea()}function ba(a){if(a=
Z.Utils.event(a))if(a.preventDefault(),a=Z.Utils.getFirstTouch(a))pb=a.pageX;return!1}function I(a){if(a=Z.Utils.event(a))a.preventDefault(),Z.mouseIsDownGallery=!1}function W(a){if(a=Z.Utils.event(a))a.preventDefault(),Z.mouseIsDownGallery=!1}function M(a){if(a=Z.Utils.event(a)){a.preventDefault();var b=Z.Utils.getFirstTouch(a);b&&(b=new Z.Utils.Point(b.pageX,b.pageY),b=Z.mouseOutDownPointGallery?Z.mouseOutDownPointGallery:new Z.Utils.Point(b.x,b.y),Math.abs(b.x-dragPtStart.x)<dc&&w(a))}}function oa(a){if(a=
Z.Utils.event(a)){a.preventDefault();var b=Z.Utils.getFirstTouch(a);b&&(b=new Z.Utils.Point(b.pageX,b.pageY),b=Z.mouseOutDownPointGallery?Z.mouseOutDownPointGallery:new Z.Utils.Point(b.x,b.y),Math.abs(b.x-dragPtStart.x)<dc&&w(a))}}function ea(){1<Z.smoothPanEasing&&(E(),Ra=dragPtStart.x,null===ua&&(ua=parseFloat(gspS.left)),null===$a&&($a=window.setInterval(jb,50)))}function E(){null!==$a&&(window.clearInterval($a),pb=ua=Ra=$a=null,Va=fb=0,Db=ja=null)}function jb(){var a=parseFloat(gspS.left);if(Z.mouseIsDownGallery||
ja){var b=(ja?Db:pb)-Ra,e=a-ua;if(!(isNaN(b)||isNaN(e)||0==b&&0==e)){var f=ja?1:100;fb=Math.round((b-e)/(Z.smoothPanEasing*(ja?Z.smoothPanGlide:1))*f/f);Z.mouseIsDownGallery?Va=fb:Math.abs(fb)>Math.abs(Va)&&(smoothPanDeltaX=Va);a+=fb;b=bb(a);gspS.left=b+"px";fb-=a-b;a=Z.GalleryScrollPanel.childNodes[pa].style;Ba.left=parseFloat(gspS.left)+parseFloat(a.left)-1+"px";ja&&0==Math.round(fb*f)/f&&(ja=!1)}}else Z.mouseIsDownGallery||null!==ja||0==fb?E():(b=bb(a+Va),Va=b-a,0!=Va&&(Db=pb+Va,ja=!0))}function bb(a){parseFloat(Z.GalleryScrollPanel.childNodes[pa].style.width);
var b=parseFloat(aa.width),e=parseFloat(gspS.width);e<b?0>a?a=0:a>=b-e?a=b-e:Z.mouseIsDownGallery||ja||(a=(b-e)/2):0<a?a=0:a<=b-e&&(a=b-e);return a}var T=this,Ca=!1;b.getViewportID();var Y,fa,pa,L,aa,ta,ib,Q,Ba,ha=[],ma=[],Xa,Kc,dc=parseInt(Z.Utils.getResource("DEFAULT_MOUSECLICKTHRESHOLDVIEWPORT"),10),$a=null,Ra=null,ua=null,pb=null,fb=0,Va=0,ja=null,Db=null;Z.slideshow?a(g):Z.imageSet?e(m):f(k);this.initializeGallery=function(a,b){k(a,b)};this.getInitialized=function(){return Ca};this.setVisibility=
function(a){G(a)};this.syncGalleryToViewport=function(a){if(Z.GalleryScrollPanel){pa=a;a=Z.GalleryScrollPanel.childNodes[a].style;var b=parseFloat(aa.width),e=parseFloat(gspS.left),f=parseFloat(a.left),g=parseFloat(a.top),k=parseFloat(a.width),m=parseFloat(a.height),q=f;0>f+e&&(q=-f+1);f+k+e>b&&(console.log(b,e,f,k),q=-(f+k+1-b));q!=f&&(b=bb(q),gspS.left=b+"px",e=b,f=parseFloat(a.left));Ba.width=k-2+"px";Ba.height=m-3+"px";Ba.left=f-1+e+"px";Ba.top=g+"px"}};this.setViewport=function(a){b=a;b.getViewportID()};
this.validateGalleryGlobals=function(){Ca?t():Y=window.setInterval(t,300)};this.setSizeAndPosition=function(a,b,e,f){q(a,b,e,f)}};
Z.ZoomifyRuler=function(b){function a(a,b,e,f){if("undefined"===typeof a||null===a)a=Z.rulerW;if("undefined"===typeof b||null!==b)b=Z.rulerH;if("undefined"===typeof e||null!==e)e=-1==Z.rulerL&&Z.Navigator?Z.navigatorL:Z.rulerL;if("undefined"===typeof f||null!==f)f=-1==Z.rulerT&&Z.Navigator?Z.navigatorT+Z.navigatorH+1:Z.rulerT;t.width=a+"px";t.height=b+"px";t.left=e+"px";t.top=f+"px"}function e(a){t||(t=Z.RulerDisplay.style);t&&(t.display=a?"inline-block":"none")}function f(a){if(b&&b.getStatus("initializedViewport")){a=
b.getZoom();var e="pixels"==Z.units?0:4;if(W){W.visibility="visible";var f;f=0!=M?M*a:100*a;1>f?Math.round(100*f):Math.round(f)}f=0;for(var g=T.length;f<g;f++)T[f].symbol==Z.units&&(Ca=f);bb=null!==jb&&0!=jb?jb:null!==E&&0!=E?Z.imageW/E:1;a=Z.Utils.roundToFixed(Y/bb/a,e);ka.firstChild.nodeValue=a.toString();ba.visibility="visible";J.firstChild.nodeValue="um"!=T[Ca].symbol?T[Ca].symbol:"\u03bcm";if(W){var k,m;a=Math.round(100*b.getZoom())==Math.round(1E3*b.getZoom())/1E3*100?"":"~";2==Z.rulerListType?
(k=Math.round(100*b.getZoom()),k=Math.round(k),m="%"):1==Z.rulerListType&&0!=M&&(k=100*Z.Utils.convertZoomPercentToMagnification(b.getZoom(),M),k=Math.round(k),m="x");m=k.toString()+m+a;for(a=insertIndex=0;k>ea[a].value;)a++;insertIndex=a;if(k==ea[insertIndex].value)Z.Utils.updateSelectElement(I,ea);else{var q=Z.Utils.arrayClone("magnifications",ea,q),q=Z.Utils.arraySplice(q,insertIndex,0,{text:m,value:k.toString()});Z.Utils.updateSelectElement(I,q)}I.selectedIndex=insertIndex}}}function g(a){var e=
0;if(a=Z.Utils.event(a))a=Z.Utils.target(a),e=parseInt(a.options[a.selectedIndex].value,10),isNaN(e)||b.zoomAndPanToView(b.viewX,b.viewY,(1==Z.rulerListType?100*e/M:e)/100)}var m=!1,k,t,q,G,w,R,U,P,ka,ca,J,ba,I,W;Z.Utils.getResource("z442");var M=Z.sourceMagnification,oa,ea=[],E=Z.unitsPerImage,jb=Z.pixelsPerUnit,bb=1,T=[],Ca=-1,Y=1;(function(){Z.RulerDisplay=Z.Utils.createContainerElement("div","RulerDisplay","inline-block","absolute","hidden","1px","1px","0px","0px","solid","1px","transparent none",
"0px","0px","normal");k=Z.RulerDisplay;t=k.style;var E=parseFloat(Z.Utils.getResource("z82")),pa=Z.Utils.getResource("z83"),L=Z.Utils.getResource("z83NOALPHA"),pa=Z.Utils.createContainerElement("div","rulerBackground","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px",pa,"0px","0px","normal",null,!0);Z.Utils.setOpacity(pa,E,L);Z.RulerDisplay.appendChild(pa);q=pa;G=q.style;E=Z.Utils.getResource("z198");L=Z.Utils.createContainerElement("div","rulerScaleBar","inline-block","absolute",
"hidden","1px","1px","0px","0px","none","0px",E,"0px","0px","normal",null,!0);Z.RulerDisplay.appendChild(L);w=L;R=w.style;R.zIndex=(Z.baseZIndex+6).toString();L=Z.Utils.createContainerElement("div","rulerScaleBarNotchL","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px",E,"0px","0px","normal",null,!0);Z.RulerDisplay.appendChild(L);rSBNL=L;rsbnlS=rSBNL.style;E=Z.Utils.createContainerElement("div","rulerScaleBarNotchR","inline-block","absolute","hidden","1px","1px","0px","0px",
"none","0px",E,"0px","0px","normal",null,!0);Z.RulerDisplay.appendChild(E);rSBNR=E;rsbnrS=rSBNR.style;E=parseInt(Z.Utils.getResource("z194"),10);L=Z.Utils.createContainerElement("div","errorTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);pa=document.createTextNode("");L.appendChild(pa);Z.Utils.setTextNodeStyle(pa,"black","verdana",E+"px","none","normal","normal","normal","normal","1em","center","none");Z.RulerDisplay.appendChild(L);
U=L;P=U.style;L=Z.Utils.createContainerElement("div","scaleTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);pa=document.createTextNode("");L.appendChild(pa);Z.Utils.setTextNodeStyle(pa,"black","verdana",E+"px","none","normal","normal","normal","normal","1em","right","none");Z.RulerDisplay.appendChild(L);ka=L;ca=ka.style;L=Z.Utils.createContainerElement("div","unitTextBox","inline-block","absolute","hidden","1px","1px",
"0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);pa=document.createTextNode("");L.appendChild(pa);Z.Utils.setTextNodeStyle(pa,"black","verdana",E+"px","none","normal","normal","normal","normal","1em","left","none");Z.RulerDisplay.appendChild(L);J=L;ba=J.style;if(0!=Z.rulerListType){ea=1==Z.rulerListType&&0!=M?Z.tracking?[{text:"1.25x",value:1.25},{text:"1.5x",value:1.5},{text:"2x",value:2},{text:"2.5x",value:2.5},{text:"4x",value:4},{text:"5x",value:5},{text:"10x",value:10},
{text:"16x",value:16},{text:"20x",value:20},{text:"25x",value:25},{text:"32x",value:32},{text:"40x",value:40},{text:"50x",value:50},{text:"60x",value:60},{text:"100x",value:100},{text:"150x",value:150},{text:"250x",value:250}]:[{text:"1.25x",value:1.25},{text:"2.5x",value:2.5},{text:"5x",value:5},{text:"10x",value:10},{text:"20x",value:20},{text:"40x",value:40},{text:"60x",value:60},{text:"100x",value:100}]:[{text:"10%",value:10},{text:"20%",value:20},{text:"30%",value:30},{text:"40%",value:40},{text:"50%",
value:50},{text:"60%",value:60},{text:"70%",value:70},{text:"80%",value:80},{text:"90%",value:90},{text:"100%",value:100}];oa=new Z.Utils.createSelectElement("magnificationList","",ea,1,1,1,null,!0,g,"change");Z.RulerDisplay.appendChild(oa);I=oa;W=I.style;var E=100*Z.minZ,L=100*Z.maxZ,pa=Math.round(E),aa=Math.round(L),ta="%";-1==E&&(E=Math.round(100*b.calcZoomDecimalToFitDisplay()));1==Z.rulerListType&&0!=M&&(E=Z.Utils.convertZoomPercentToMagnification(E,M),pa=Math.round(E),ta="x");for(;ea[0].value<=
pa;)ea=Z.Utils.arraySplice(ea,0,1);-1==L&&(L=Math.round(100*b.calcZoomDecimalToFitDisplay()));1==Z.rulerListType&&0!=M&&(L=Z.Utils.convertZoomPercentToMagnification(L,M),aa=Math.round(L),ta="x");for(;ea[ea.length-1].value>=aa;)ea=Z.Utils.arraySplice(ea,ea.length-1,1);ea=Z.Utils.arraySplice(ea,0,0,{text:pa.toString()+ta+(pa==E?"":"~")+"",value:pa});ea[ea.length]={text:aa.toString()+ta+(aa==L?"":"~")+"",value:L};Z.Utils.updateSelectElement(I,ea);I.selectedIndex=0}T=[{magnitude:Math.pow(10,24),symbol:"Ym"},
{magnitude:Math.pow(10,21),symbol:"Zm"},{magnitude:Math.pow(10,18),symbol:"Em"},{magnitude:Math.pow(10,15),symbol:"Pm"},{magnitude:Math.pow(10,12),symbol:"Tm"},{magnitude:Math.pow(10,9),symbol:"Gm"},{magnitude:Math.pow(10,6),symbol:"Mm"},{magnitude:Math.pow(10,3),symbol:"km"},{magnitude:Math.pow(10,2),symbol:"hm"},{magnitude:Math.pow(10,1),symbol:"dam"},{magnitude:Math.pow(10,0),symbol:"m"},{magnitude:Math.pow(10,-1),symbol:"dm"},{magnitude:Math.pow(10,-2),symbol:"cm"},{magnitude:Math.pow(10,-3),
symbol:"mm"},{magnitude:Math.pow(10,-6),symbol:"um"},{magnitude:Math.pow(10,-9),symbol:"nm"},{magnitude:Math.pow(10,-12),symbol:"pm"},{magnitude:Math.pow(10,-15),symbol:"fm"},{magnitude:Math.pow(10,-18),symbol:"am"},{magnitude:Math.pow(10,-21),symbol:"zm"},{magnitude:Math.pow(10,-24),symbol:"ym"},{magnitude:Math.pow(10,-24),symbol:"pixels"}];E=Z.rulerW;L=Z.rulerH;pa=-1==Z.rulerL&&Z.Navigator?Z.navigatorL:Z.rulerL;aa=-1==Z.rulerT&&Z.Navigator?Z.navigatorT+Z.navigatorH+1:Z.rulerT;Y=0!=Z.rulerListType?
E-60-16:E-10;var ta=(L-1+5)/2,Ca=Y/2-5,Q=ta-10,Ba="pixels"==Z.units?7:0;G&&R&&rsbnlS&&rsbnrS&&U&&P&&ka&&ca&&J&&ba&&(a(E,L,pa,aa),G.width=E+"px",G.height=L+"px",G.left="0px",G.top="0px",W&&(W.width="60px",W.left=E-60-3+"px",W.top=(L-20)/2+"px",W.visibility="visible"),R.width=Y+"px",R.height="1px",R.left="5px",R.top=ta+3+"px",rsbnlS.width="1px",rsbnlS.height="6px",rsbnlS.left="5px",rsbnlS.top=ta+"px",rsbnrS.width="1px",rsbnrS.height="6px",rsbnrS.left=5+Y+"px",rsbnrS.top=ta+"px",P.width=Y+"px",P.height=
"15px",P.left="12px",P.top=Q+"px",ca.width=Ca+"px",ca.height="15px",ca.left=15-Ba+"px",ca.top=Q+"px",ba.width=Ca+"px",ba.height="15px",ba.left=Y/2+15-Ba+"px",ba.top=Q+"px");Z.ViewerDisplay.appendChild(Z.RulerDisplay);e(Z.rulerVisible);Z.Utils.addEventListener(k,"mouseover",Z.Utils.stopPropagation);m||(m=!0,Z.Utils.validateCallback("rulerInitialized"),Z.Viewer.validateViewerReady("rulerInitialized"));f()})();this.getInitialized=function(){return m};this.setVisibility=function(a){e(a)};this.setSizeAndPosition=
function(b,e,f,g,k){a(b,e,f,g,k)};this.syncToViewport=function(a){f()}};
Z.NetConnector=function(){function b(b,e,f){var k=b.substring(0,b.indexOf("?")),m=parseFloat(b.substring(b.indexOf("?")+1,b.indexOf(",")));b=parseFloat(b.substring(b.indexOf(",")+1,b.length));m=new Z.Utils.Range(m,m+b);a(k,g,m,e,f)}function a(a,b,g,k,m,q,t){var w=e();if(null===w)Z.Utils.showMessage(Z.Utils.getResource("z295"));else{var G="function"===typeof b;if(G){var P=b;b=function(){window.setTimeout(Z.Utils.createCallback(null,P,w),1)};w.onreadystatechange=function(){4==w.readyState&&(w.onreadystatechange=
new Function,b())}}try{if("undefined"===typeof g||null===g)w.open("GET",a,G),"loadHTML"==k&&w.setRequestHeader("Content-Type","text/html"),w.send(null);else if("undefined"!==typeof k&&null!==k)if(!Z.localUse||"postXML"!=k&&"postImage"!=k)if("postXML"==k)if(m=null,"annotation"!=t||"undefined"!==typeof Z.annotationPath&&Z.Utils.stringValidate(Z.annotationPath)?"tracking"!=t||"undefined"!==typeof Z.trackingPath&&Z.Utils.stringValidate(Z.trackingPath)||(m=Z.Utils.getResource("ERROR_TRACKINGPATHMISSING")):
m=Z.Utils.getResource("ERROR_ANNOTATIONPATHMISSING"),null!==m)Z.Utils.showMessage(m,!1,Z.messageDurationStandard,"center");else{var R,U,Y,ca,ka;"annotation"==t?(R=Z.annotationPath,Y=R.toLowerCase(),ka=Z.Utils.getResource("z69")):"tracking"==t&&(R=Z.trackingPath,Y=R.toLowerCase(),ka=Z.Utils.getResource("DEFAULT_TRACKINGXMLFILE"));U=Y.length;".json"!=Y.substring(U-5,U)&&".xml"!=Y.substring(U-4,U)&&(ca="/"+ka);t=R+ca;Z.postingXML=!0;w.open("POST",a+"?file="+t,!0);Z.Utils.defineObjectProperty(w,"file",
{value:t,writable:!1,enumerable:!1,configurable:!1});w.setRequestHeader("Content-Type","application/xml");w.send(g)}else if("postImage"==k){Z.Utils.showMessage(Z.Utils.getResource("ALERT_IMAGESAVEUPLOADING"),!1,"none","center");Z.postingImage=!0;var L=new FormData;L.append("fileToUpload",g);Z.Utils.addEventListener(w.upload,"progress",Z.Utils.uploadProgress);w.open("POST",a,!0);Z.Utils.defineObjectProperty(w,"zType",{value:"postingImage",writable:!1,enumerable:!1,configurable:!1});w.setRequestHeader("Content-Type",
"application/upload");w.send(L)}else"ZoomifyImageFile"==Z.tileSource&&("tile"!=k&&(a=Z.Utils.cacheProofPath(a)),w.open("GET",a,!0),w.responseType="arraybuffer",Z.Utils.defineObjectProperty(w,"zType",{value:k,writable:!1,enumerable:!1,configurable:!1}),Z.Utils.defineObjectProperty(w,"zTile",{value:m,writable:!1,enumerable:!1,configurable:!1}),Z.Utils.defineObjectProperty(w,"zChunkNumber",{value:q,writable:!1,enumerable:!1,configurable:!1}),Z.browser==Z.browsers.SAFARI&&w.setRequestHeader("If-Modified-Since",
"Thu, 01 Dec 1994 16:00:00 GMT"),w.setRequestHeader("Range","bytes="+g.start.toString()+"-"+g.end.toString()),w.send(null));else Z.Utils.showMessage(Z.Utils.getResource("ERROR_UNSUPPORTEDLOCALSAVING"),!1,Z.messageDurationStandard,"center",!0)}catch(aa){f(aa,a,k),w=null,console.log(aa)}}}function e(){var a=null;switch(Z.xmlHttpRequestSupport){case "XMLHttpRequest":a=new XMLHttpRequest;break;case "Msxml2.XMLHTTP.6.0":a=new ActiveXObject("Msxml2.XMLHTTP.6.0");break;case "Msxml2.XMLHTTP.3.0":a=new ActiveXObject("Msxml2.XMLHTTP.3.0");
break;case "Microsoft.XMLHTTP":a=new ActiveXObject("Microsoft.XMLHTTP")}return a}function f(a,b,e){1==Z.localUse&&(Z.browser==Z.browsers.CHROME||Z.browser==Z.browsers.OPERA||Z.browser==Z.browsers.IE&&11==Z.browserVersion||Z.browser==Z.browsers.SAFARI&&7<=Z.browserVersion)?Z.Utils.showMessage(Z.Utils.getResource("z288"),!1,Z.messageDurationStandard,"center"):1==Z.localUse&&"ZoomifyImageFile"==Z.tileSource?Z.Utils.showMessage(Z.Utils.getResource("z290"),!1,Z.messageDurationShort,"center"):1==Z.localUse&&
"ZoomifyPFFFile"==Z.tileSource?Z.Utils.showMessage(Z.Utils.getResource("z289"),!1,Z.messageDurationShort,"center"):-1!=b.toLowerCase().indexOf(".zif")?Z.Utils.showMessage(Z.Utils.getResource("z256-ZIFBYTERANGE")+e+".",!1,Z.messageDurationShort,"center"):-1!=b.indexOf("ImageProperties.xml")?Z.Utils.showMessage(Z.Utils.getResource("z256-IMAGEXML"),!0,null,"left"):-1!=b.toLowerCase().indexOf(".pff")?Z.Utils.showMessage(Z.Utils.getResource("z256-IMAGEHEADER"),!1,Z.messageDurationShort,"center"):-1!=b.toLowerCase().indexOf("reply_data")?
Z.Utils.showMessage(Z.Utils.getResource("z256-IMAGEOFFSET"),!1,Z.messageDurationShort,"center"):-1!=b.indexOf(Z.Utils.getResource("z200"))?Z.Utils.showMessage(Z.Utils.getResource("z256-TOOLBARSKINSXML"),!0,null,"left"):-1!=b.indexOf(Z.Utils.getResource("DEFAULT_IMAGELISTXMLFILE"))?Z.Utils.showMessage(Z.Utils.getResource("z256-IMAGELISTXML"),!1,Z.messageDurationShort,"center"):-1!=b.indexOf(Z.Utils.getResource("DEFAULT_COMPARISONXMLFILE"))?Z.Utils.showMessage(Z.Utils.getResource("z256-COMPARISONXML"),
!1,Z.messageDurationShort,"center"):-1!=b.indexOf(Z.Utils.getResource("z209"))?Z.Utils.showMessage(Z.Utils.getResource("z256-SLIDESXML"),!1,Z.messageDurationShort,"center"):-1!=b.indexOf(Z.Utils.getResource("z135"))?Z.Utils.showMessage(Z.Utils.getResource("z256-HOTSPOTSXML"),!1,Z.messageDurationShort,"center"):-1!=b.indexOf(Z.Utils.getResource("z69"))?(Z.Utils.showMessage(Z.Utils.getResource("z256-CREATINGANNOTATIONSXMLFILE"),!1,Z.messageDurationShort,"center"),Z.Viewport.createAnnotationsXMLFile()):
-1!=b.indexOf(Z.Utils.getResource("z68"))?Z.Utils.showMessage(Z.Utils.getResource("z256-ANNOTATIONSJSON"),!1,Z.messageDurationShort,"center"):-1!=b.toLowerCase().indexOf(Z.Utils.getResource("z70"))||-1!=b.toLowerCase().indexOf(Z.Utils.getResource("z70"))?Z.Utils.showMessage(Z.Utils.getResource("z256-ANNOTATIONSSAVEHANDLER"),!1,Z.messageDurationShort,"center"):Z.Utils.showMessage(Z.Utils.getResource("z256"),!1,Z.messageDurationShort,"center")}function g(a,b){if(a)if(200!==a.status&&0!==a.status&&206!==
a.status){var e=a.status,f=404==e?"Not Found":a.statusText;Z.xmlParametersParsing?Z.Utils.showMessage(Z.Utils.getResource("z256-PARAMETERSXML"),!0,null,"left"):Z.Toolbar&&!Z.Toolbar.getInitialized()?Z.Utils.showMessage(Z.Utils.getResource("z256-TOOLBARSKINSXML"),!0,null,"left"):Z.Viewport&&null!==Z.annotationPath&&Z.Viewport.getStatus("initializedViewport")&&!Z.Viewport.getStatus("XMLParsedViewport")?(Z.Utils.showMessage(Z.Utils.getResource("z256-CREATINGANNOTATIONSXMLFILE"),!1,Z.messageDurationShort,
"center"),Z.Viewport.createAnnotationsXMLFile()):"ZoomifyImageFile"==Z.tileSource?Z.Utils.showMessage(Z.Utils.getResource("z273RANGEREQUESTS")+e+" - "+f,!0,null,"left"):Z.Utils.showMessage(Z.Utils.getResource("z273")+e+" - "+f,!1,Z.messageDurationShort,"center")}else if(e=null,f="undefined"!==typeof Z.annotationPath&&Z.Utils.stringValidate(Z.annotationPath)&&".json"==Z.annotationPath.toLowerCase().substring(Z.annotationPath.length-5,Z.annotationPath.length),Z.postingImage&&a.zType&&"postingImage"==
a.zType)Z.postingImage=!1,Z.Utils.showMessage(Z.Utils.getResource("ALERT_IMAGESAVESUCCESSFUL"),!1,Z.messageDurationShort,"center");else if(a.response&&a.zType&&"ZoomifyImageFile"==Z.tileSource){if(Z.Viewport)if(e=new Z.Utils.createUint8Array(a.response,0),"header"==a.zType)if("undefined"===typeof b||null===b)Z.Viewport.parseZIFHeader(e);else for(var f=0,g=Z.imageSetLength;f<g;f++)b==f&&Z["Viewport"+f.toString()].parseZIFHeader(e);else if("offset"==a.zType)if("undefined"===typeof b||null===b)Z.Viewport.parseZIFOffsetChunk(e,
a.zChunkNumber);else for(f=0,g=Z.imageSetLength;f<g;f++)b==f&&Z["Viewport"+f.toString()].parseZIFOffsetChunk(e,a.zChunkNumber);else if("byteCount"==a.zType)if("undefined"===typeof b||null===b)Z.Viewport.parseZIFByteCountChunk(e,a.zChunkNumber);else for(f=0,g=Z.imageSetLength;f<g;f++)b==f&&Z["Viewport"+f.toString()].parseZIFByteCountChunk(e,a.zChunkNumber);else if("image"==a.zType.substring(0,5))w--,Z.Viewport.parseZIFImage(e,a.zTile,a.zType);else if("navigator"==a.zType)if("undefined"===typeof b||
null===b)Z.viewportCurrent.parseZIFImage(e,a.zTile,a.zType);else for(f=0,g=Z.imageSetLength;f<g;f++)b==f&&Z["Viewport"+f.toString()].parseZIFImage(e,a.zTile,a.zType);else if("gallery"==a.zType)if("undefined"===typeof b||null===b)Z.viewportCurrent.parseZIFImage(e,a.zTile,a.zType);else for(f=0,g=Z.imageSetLength;f<g;f++)b==f&&Z["Viewport"+f.toString()].parseZIFImage(e,a.zTile,a.zType);else Z.Utils.showMessage(Z.Utils.getResource("z256-ZIFBYTES"),!1,Z.messageDurationShort,"center")}else a.responseXML&&
a.responseXML.documentElement&&!f?(e=a.responseXML,k(e,b)):a.responseText&&(e=a.responseText,-1!=e.indexOf("ZAS")&&f?m(e,b):"IIIFImageServer"==Z.tileSource?m(e,b,!0):Z.postingXML?(Z.postingXML=!1,Z.Utils.showMessage(Z.Utils.getResource("z1"),!1,Z.messageDurationShort,"center"),Z.Viewport&&Z.Viewport.setAllHotspotsSaved()):"ZoomifyImageFolder"==Z.tileSource?(e=Z.Utils.xmlConvertTextToDoc(e),k(e,b)):"ZoomifyImageFile"==Z.tileSource?(e=Z.Utils.xmlConvertTextToDoc(e),k(e,b)):"ZoomifyPFFFile"==Z.tileSource&&
(-1!=e.toUpperCase().indexOf("PFFHEADER")?(f=e.indexOf("reply_data=")+11,e=e.substring(f,e.length)):(f=e.indexOf("begin=")+6,g=e.indexOf("&",f),beginValue=e.substring(f,g),f=e.indexOf("reply_data=")+11,replyDataValue=e.substring(f,e.length),e="<PFFOFFSET BEGIN='"+beginValue+"' REPLYDATA='"+replyDataValue+"' />"),e=Z.Utils.xmlConvertTextToDoc(e),k(e,b)));else Z.Utils.showMessage(Z.Utils.getResource("z272"),!1,Z.messageDurationShort,"center")}function m(a,b,e){var f=null;try{f=JSON.parse(a)}catch(g){Z.Utils.showMessage(g.name+
Z.Utils.getResource("z276")+g.message)}if(f)if(e)if(Z.iiifInfoJSONObject=f,a='<IMAGE_PROPERTIES WIDTH="'+f.width+'" HEIGHT="'+f.height+'" />',a=Z.Utils.xmlConvertTextToDoc(a),"undefined"===typeof b||null===b)Z.Viewport&&Z.Viewport.z602(a);else for(e=0,f=Z.imageSetLength;e<f;e++)b==e&&Z["Viewport"+e.toString()].z602(a);else if(Z.overlays)Z.overlayJSONObject=f,a=Z.Utils.jsonConvertObjectToXMLText(f),a=Z.Utils.xmlConvertTextToDoc(a),Z.Viewer&&Z.Viewer.parseImageSetXML(a,"overlay");else if(Z.annotationJSONObject=
f,a=Z.Utils.jsonConvertObjectToXMLText(f),a=Z.Utils.xmlConvertTextToDoc(a),"undefined"===typeof b||null===b)Z.Viewport&&Z.Viewport.parseAnnotationsXML(a);else for(e=0,f=Z.imageSetLength;e<f;e++)b==e&&Z["Viewport"+e.toString()].parseAnnotationsXML(a)}function k(a,b){if(a&&a.documentElement){var e=a.documentElement.tagName;if(Z.xmlParametersParsing)Z.Utils.parseParametersXML(a);else if("USERDATA"==e)Z.Utils.parseUsersXML(a);else if("COPYRIGHT"==e){var e=a.documentElement.getAttribute("STATEMENTTEXT"),
f=a.documentElement.getAttribute("DECLINEDTEXT");Z.Utils.stringValidate(e)?Z.Utils.showCopyright(e,f):Z.Utils.showMessage(Z.Utils.getResource("z255"),!0)}else if("IMAGE_PROPERTIES"==e||"ZIFHEADER"==e||"PFFHEADER"==e){if("ZoomifyImageFile"==Z.tileSource||"ZoomifyImageFolder"==Z.tileSource||"ZoomifyPFFFile"==Z.tileSource||"ImageServer"==Z.tileSource)if("multiple"!=Z.imagePath)e="undefined"===typeof b||null===b||0==b?Z.Viewport:Z["Viewport"+b.toString()],e.z602(a);else for(e=0,f=Z.imageSetLength;e<f;e++)b==
e&&Z["Viewport"+e.toString()].z602(a)}else if("PFFOFFSET"==e)if("multiple"!=Z.imagePath)e="undefined"===typeof b||null===b||0==b?Z.Viewport:Z["Viewport"+b.toString()],e.parseOffsetChunk(a);else for(e=0,f=Z.imageSetLength;e<f;e++)b==e&&Z["Viewport"+e.toString()].parseOffsetChunk(a);else if("SKINDATA"==e)"function"===typeof Z.xmlCallbackFunction?Z.xmlCallbackFunction(a):Z.Toolbar&&Z.Toolbar.parseSkinXML(a);else if("GEODATA"==e)Z.Viewport&&Z.Viewport.parseGeoCoordinatesXML(a);else if("IMAGELISTDATA"==
e)if("undefined"===typeof b||null===b)Z.Viewport&&Z.Viewport.parseImageListXML(a);else for(e=0,f=Z.imageSetLength;e<f;e++)b==e&&Z["Viewport"+e.toString()].parseImageListXML(a,b);else if("SLIDEDATA"==e)Z.Viewport&&Z.Viewport.parseSlidesXML(a);else if("HOTSPOTDATA"==e)if("undefined"===typeof b||null===b)Z.Viewport&&Z.Viewport.parseHotspotsXML(a);else for(e=0,f=Z.imageSetLength;e<f;e++)b==e&&Z["Viewport"+e.toString()].parseHotspotsXML(a);else if("ZAS"==e)if("undefined"===typeof b||null===b)Z.Viewport&&
Z.Viewport.parseAnnotationsXML(a);else for(e=0,f=Z.imageSetLength;e<f;e++)b==e&&Z["Viewport"+e.toString()].parseAnnotationsXML(a,b);else if("COMPARISONDATA"==e)Z.Viewer&&Z.Viewer.parseImageSetXML(a,"comparison");else if("OVERLAYDATA"==e)Z.Viewer&&Z.Viewer.parseImageSetXML(a,"overlay");else if("ANIMATIONDATA"==e)Z.Viewer&&Z.Viewer.parseImageSetXML(a,"animation");else if("SLIDESTACKDATA"==e)Z.Viewer&&Z.Viewer.parseImageSetXML(a,"slidestack");else if("TRACKINGDATA"==e)if("undefined"===typeof b||null===
b)Z.Viewport&&Z.Viewport.parseTrackingXML(a);else for(e=0,f=Z.imageSetLength;e<f;e++)b==e&&Z["Viewport"+e.toString()].parseTrackingXML(a,b);else Z.postingImage?Z.Utils.showMessage(Z.Utils.getResource("ERROR_SAVEIMAGEHANDLERPATHINVALID"),!0):Z.Utils.showMessage(Z.Utils.getResource("z296"),!0)}else Z.Utils.showMessage(Z.Utils.getResource("z293"),!0)}function t(a,e,f,g){if(w<R)return w++,"ZoomifyImageFile"==Z.tileSource&&("undefined"!==typeof g&&null!==g||"navigator"==f)?b(a,f,g):(e=Z.Utils.createCallback(null,
q,e),(new G(a,e,f)).start()),!0;-1==Z.Utils.arrayIndexOfObjectValue(ca,"sc",a)&&(ca[ca.length]={sc:a,cb:e,ct:f,t:g},ka||(ka=window.setInterval(function(){var a=ca[0];t(a.sc,a.cb,a.ct,a.t)&&(ca=Z.Utils.arraySplice(ca,0,1));0==ca.length&&ka&&(window.clearInterval(ka),ka=null)},P)));return!1}function q(a,b,e){w--;if("function"===typeof a)try{a(e)}catch(f){Z.Utils.showMessage(f.name+Z.Utils.getResource("z245")+b+" "+f.message,!0)}}function G(a,b,e){function f(e){g.onload=null;g.onabort=null;g.onerror=
null;k&&window.clearTimeout(k);window.setTimeout(function(){b(a,e?g:null)},1)}var g=null,k=null;this.start=function(){g=new Image;var b=function(){f(!1)};g.onload=function(){f(!0)};g.onabort=b;g.onerror=b;k=window.setTimeout(function(){console.log(Z.Utils.getResource("z253"));f(!1);Z.Viewport.traceDebugValues("imageRequestTimeout",e+" timeout: "+a)},U);g.src=a}}var w=0,R=parseInt(Z.Utils.getResource("z140"),10),U=parseFloat(Z.Utils.getResource("z139")),P=Z.Utils.getResource("DEFAULT_IMAGELOADQUEUEDELAY"),
ka,ca=[];this.loadHTML=function(b,e){a(b,e,null)};this.loadXML=function(b,e){"undefined"===typeof e||null===e?a(b,g,null):a(b,function(a){g(a,e)},null)};this.loadJSON=function(b){a(b,g,null)};this.loadByteRange=function(b,e,f,k,m,q){e=new Z.Utils.Range(e,f);a(b,g,e,k,m,q)};this.postXML=function(b,e,f){a(b,g,e,"postXML",null,null,f)};this.postImage=function(b,e){a(b,g,e,"postImage")};this.loadImage=function(a,b,e,f){t(a,b,e,f)}};
Z.Utils={addCrossBrowserMethods:function(){document.addEventListener?(this.disableTextInteraction=function(b){if(b){var a=b.parentNode.style;a&&(b.parentNode.unselectable="on",a.userSelect="none",a.MozUserSelect="none",a.webkitUserSelect="none",a.webkitTouchCallout="none",a.webkitTapHighlightColor="transparent")}},this.renderQuality=function(b,a){a&&b.style.setProperty("image-rendering","high"==a?"optimizeQuality":"optimizeSpeed",null)},this.setOpacity=function(b,a,e){Z.alphaSupported?b.style.opacity=
a:e&&(b.style.backgroundColor=e)}):document.attachEvent&&(this.disableTextInteraction=function(b){b&&(b.parentNode.unselectable="on",b.parentNode.onselectstart=function(){return!1})},this.renderQuality=function(b,a){a&&(b.style.msInterpolationMode="high"==a?"bicubic":"nearest-neighbor")},this.setOpacity=function(b,a,e){Z.alphaSupported?(a*=100,b.style.zoom=1,b.style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity="+a+")",b.style.filter="alpha(opacity="+a+")",100==a&&(b.style.filter="")):e&&
(b.style.backgroundColor=e)})},addCrossBrowserEvents:function(){document.addEventListener?(this.addEventListener=function(b,a,e){b&&("mousewheel"==a&&b.addEventListener("DOMMouseScroll",e,!1),b.addEventListener(a,e,!1))},this.removeEventListener=function(b,a,e){b&&("mousewheel"==a&&b.removeEventListener("DOMMouseScroll",e,!1),b.removeEventListener(a,e,!1))},this.event=function(b){return b},this.target=function(b){return b.target},this.relatedTarget=function(b){return b.relatedTarget},this.isRightMouseButton=
function(b){var a=!1;if(2==b.which||3==b.which)a=!0;return a},this.preventDefault=function(b){b.preventDefault()},this.stopPropagation=function(b){b.stopPropagation()}):document.attachEvent&&(this.addEventListener=function(b,a,e){if(-1==this._findListener(b,a,e)){var f=function(){var a=window.event;Function.prototype.call?e.call(b,a):(b._currentListener=e,b._currentListener(a),b._currentListener=null)};b.attachEvent("on"+a,f);a={target:b,eventName:a,handler:e,handler2:f};var f=(b.document||b).parentWindow,
g="l"+this._listenerCounter++;f._allListeners||(f._allListeners={});f._allListeners[g]=a;b._listeners||(b._listeners=[]);b._listeners[b._listeners.length]=g;f._unloadListenerAdded||(f._unloadListenerAdded=!0,f.attachEvent("onunload",this._removeAllListeners))}},this.removeEventListener=function(b,a,e){if(b&&(e=this._findListener(b,a,e),-1!=e)){var f=(b.document||b).parentWindow,g=b._listeners[e];b.detachEvent("on"+a,f._allListeners[g].handler2);b._listeners=Z.Utils.arraySplice(b._listeners,e,1);delete f._allListeners[g]}},
this.event=function(b){return window.event},this.target=function(b){return b.srcElement},this.relatedTarget=function(b){var a=null;"mouseover"==b.type?a=b.fromElement:"mouseout"==b.type&&(a=b.toElement);return a},this.isRightMouseButton=function(b){var a=!1;2==b.button&&(a=!0);return a},this.preventDefault=function(b){b&&(b.returnValue=!1)},this.stopPropagation=function(b){b.cancelBubble=!0},this._findListener=function(b,a,e){var f=b._listeners;if(!f)return-1;b=(b.document||b).parentWindow;for(var g=
f.length-1;0<=g;g--){var m=b._allListeners[f[g]];if(m&&m.eventName==a&&m.handler==e)return g}return-1},this._removeAllListeners=function(){for(id in this._allListeners){var b=this._allListeners[id];b.target.detachEvent("on"+b.eventName,b.handler2);delete this._allListeners[id]}},this._listenerCounter=0)},declareGlobals:function(){Z.pageContainerID=null;Z.imagePath=null;Z.imagePath2=null;Z.parameters=null;Z.xmlParametersPath=null;Z.xMLParametersPath=null;Z.xmlParametersParsing=null;Z.xMLParametersParsing=
null;Z.skinPath=null;Z.skinMode=null;Z.cacheProofCounter=0;Z.timerCounter=0;Z.browsers=null;Z.browser=null;Z.browserVersion=null;Z.scaleThreshold=null;Z.canvasSupported=null;Z.cssTransformsSupported=null;Z.cssTransformProperty=null;Z.cssTransformNoUnits=null;Z.alphaSupported=null;Z.renderQuality=null;Z.rotationSupported=null;Z.fullScreenSupported=null;Z.arrayMapSupported=null;Z.arraySpliceSupported=null;Z.float32ArraySupported=null;Z.uInt8ArraySupported=null;Z.xmlHttpRequestSupport=null;Z.definePropertySupported=
null;Z.responseArraySupported=null;Z.responseArrayPrototyped=!1;Z.touchSupport=null;Z.mobileDevice=null;Z.localUse=null;Z.zifSupported=null;Z.onReady=null;Z.onAnnotationReady=null;Z.initialX=null;Z.initialY=null;Z.initialZ=null;Z.initialZoom=null;Z.minZ=null;Z.minZoom=null;Z.maxZ=null;Z.maxZoom=null;Z.zoomSpeed=null;Z.panSpeed=null;Z.smoothPan=null;Z.smoothPanEasing=null;Z.smoothZoom=null;Z.smoothZoomEasing=null;Z.smoothPanGlide=null;Z.autoResize=null;Z.fadeIn=null;Z.fadeInSpeed=null;Z.toolbarInternal=
null;Z.toolbarVisible=null;Z.toolbarAutoShowHide=null;Z.toolbarW=null;Z.toolbarH=null;Z.toolbarPosition=null;Z.navigatorVisible=null;Z.navigatorW=null;Z.navigatorWidth=null;Z.navigatorH=null;Z.navigatorHeight=null;Z.navigatorL=null;Z.navigatorLeft=null;Z.navigatorT=null;Z.navigatorTop=null;Z.navigatorFit=null;Z.navigatorRectangleColor=null;Z.GalleryScrollPanel=null;Z.galleryVisible=null;Z.galleryAutoShowHide=null;Z.galleryW=null;Z.galleryH=null;Z.galleryL=null;Z.galleryT=null;Z.galleryPosition=null;
Z.galleryRectangleColor=null;Z.mouseIsDownGallery=null;Z.clickZoom=null;Z.doubleClickZoom=null;Z.doubleClickDelay=null;Z.clickPan=null;Z.clickZoomAndPanBlock=!1;Z.mousePan=null;Z.keys=null;Z.constrainPan=null;Z.constrainPanLimit=null;Z.constrainPanStrict=null;Z.panBuffer=null;Z.tooltipsVisible=null;Z.helpVisible=0;Z.helpPath=null;Z.helpCustom=!1;Z.helpContent=null;Z.helpW=null;Z.helpWidth=null;Z.helpH=null;Z.helpHeight=null;Z.helpL=null;Z.helpLeft=null;Z.helpT=null;Z.helpTop=null;Z.minimizeVisible=
null;Z.sliderZoomVisible=null;Z.sliderVisible=null;Z.panButtonsVisible=null;Z.resetVisible=null;Z.fullViewVisible=null;Z.fullScreenVisible=null;Z.fullPageVisible=null;Z.initialFullPage=null;Z.fullPageInitial=null;Z.fullScreenEntering=null;Z.progressVisible=null;Z.messagesVisible=null;Z.logoVisible=null;Z.logoLink=null;Z.logoLinkURL=null;Z.logoCustomPath=null;Z.bookmarksGet=null;Z.bookmarksSet=null;Z.copyrightPath=null;Z.watermarkPath=null;Z.watermarks=null;Z.virtualPointerVisible=null;Z.crosshairsVisible=
null;Z.zoomRectangle=null;Z.rulerVisible=null;Z.units=null;Z.unitsPerImage=null;Z.pixelsPerUnit=null;Z.sourceMagnification=null;Z.magnification=null;Z.rulerListType=null;Z.rulerW=null;Z.rulerWidth=null;Z.rulerH=null;Z.rulerHeight=null;Z.rulerL=null;Z.rulerLeft=null;Z.rulerT=null;Z.rulerTop=null;Z.measureVisible=!1;Z.rotationVisible=null;Z.rotationFree=null;Z.initialR=null;Z.initialRotation=null;Z.imageListPath=null;Z.imageList=null;Z.imageListTitle=null;Z.imageListFolder=null;Z.imageListFileShared=
!1;Z.imageSetImageListPath=null;Z.imageListTimeout=null;Z.screensaver=!1;Z.screensaverSpeed=null;Z.tour=!1;Z.tourPath=null;Z.tourListTitle=null;Z.tourPlaying=null;Z.tourStop=!1;Z.comparison=!1;Z.comparisonPath=null;Z.syncVisible=null;Z.initialSync=null;Z.syncComparison=null;Z.slideshow=!1;Z.slidePath=null;Z.slideListTitle=null;Z.slideshowPlaying=null;Z.slideTransitionTimeout=null;Z.slideTransitionSpeed=null;Z.slideOpacity=0;Z.audioContent=!1;Z.audioMuted=!1;Z.hotspots=!1;Z.hotspotPath=null;Z.hotspotFolder=
null;Z.hotspotListTitle=null;Z.hotspotsDrawOnlyInView=!0;Z.captionBoxes=!1;Z.captionsColorsDefault=!0;Z.annotations=!1;Z.annotationPath=null;Z.annotationFolder=null;Z.annotationXMLText=null;Z.annotationJSONObject=null;Z.annotationsAddMultiple=null;Z.annotationsAutoSave=null;Z.annotationPanelVisible=null;Z.annotationPanelVisibleState=!1;Z.saveButtonVisible=null;Z.labelClickSelect=null;Z.simplePath=!1;Z.noPost=!1;Z.noPostDefaults=!1;Z.unsavedEditsTest=!0;Z.maskVisible=null;Z.maskingSelection=!1;Z.maskFadeTimeout=
null;Z.maskFadeSpeed=null;Z.maskOpacity=0;Z.maskClearOnUserAction=null;Z.externalEditPermissionFunction=null;Z.annotationSort="none";Z.saveHandlerPath=null;Z.saveImageHandlerPath=null;Z.saveImageFull=null;Z.postingXML=!1;Z.postingImage=!1;Z.coordinatesVisible=null;Z.geoCoordinatesPath=null;Z.geoCoordinatesVisible=null;Z.geoCoordinatesFolder=null;Z.preloadVisible=null;Z.imageFilters=null;Z.imageFiltersVisible=null;Z.initialImageFilters=null;Z.brightnessVisible=null;Z.contrastVisible=null;Z.sharpnessVisible=
null;Z.blurrinessVisible=null;Z.colorRedVisible=null;Z.colorGreenVisible=null;Z.colorBlueVisible=null;Z.colorRedRangeVisible=null;Z.colorGreenRangeVisible=null;Z.colorBlueRangeVisible=null;Z.colorRedRangeMin=null;Z.colorRedRangeMax=null;Z.colorGreenRangeMin=null;Z.colorGreenRangeMax=null;Z.colorBlueRangeMin=null;Z.colorBlueRangeMax=null;Z.saveImageFull=null;Z.saveImageFilename=null;Z.saveImageFormat=null;Z.saveImageCompression=null;Z.saveImageBackColor=null;Z.tracking=!1;Z.trackingPath=null;Z.trackingFolder=
null;Z.trackingPathProvided=!1;Z.trackingEditMode=!1;Z.trackingFileShared=!1;Z.imageSetTrackingPath=null;Z.trackingPanelPosition=null;Z.trackingCounts=[];Z.trackingTypeCurrent="0";Z.trackingOverlayVisible=!1;Z.initialTrackingOverlayVisible=null;Z.trackingCellCurrent=null;Z.trackingPanelVisible=null;Z.trackingPanelVisibleState=!1;Z.userName=null;Z.userInitials=null;Z.userLogin=null;Z.userNamePrompt=null;Z.userNamePromptRetry=null;Z.userPath=null;Z.userFolder=null;Z.userPathProvided=!1;Z.userList=[];
Z.userLogging=!1;Z.UserPanel=null;Z.userPanelVisible=null;Z.userPanelVisibleState=!1;Z.canvas=null;Z.baseZIndex=null;Z.debug=null;Z.imageProperties=null;Z.serverIP=null;Z.serverPort=null;Z.tileHandlerPath=null;Z.tileHandlerPathFull=null;Z.iiifInfoJSONObject=null;Z.iiifScheme=null;Z.iIIFScheme=null;Z.iiifServer=null;Z.iIIFServer=null;Z.iiifPrefix=null;Z.iIIFPrefix=null;Z.iiifIdentifier=null;Z.iIIFIdentifier=null;Z.iiifRegion=null;Z.iIIFRegion=null;Z.iiifSize=null;Z.iIIFSize=null;Z.iiifRotation=null;
Z.iIIFRotation=null;Z.iiifQuality=null;Z.iIIFQuality=null;Z.iiifFormat=null;Z.iIIFFormat=null;Z.tileW=null;Z.tileH=null;Z.tileType="jpg";Z.tilesPNG=null;Z.freehandVisible=null;Z.textVisible=null;Z.iconVisible=null;Z.rectangleVisible=null;Z.polygonVisible=null;Z.captionTextColor=null;Z.captionBackColor=null;Z.polygonLineColor=null;Z.polygonFillColor=null;Z.captionTextVisible=!0;Z.captionBackVisible=!0;Z.polygonFillVisible=!1;Z.polygonLineVisible=!0;Z.annotationPathProvided=!1;Z.saveHandlerProvided=
!1;Z.imageSetPathProvided=!1;Z.slidePathProvided=!1;Z.saveImageHandlerProvided=!1;Z.tileSource=null;Z.tileSourceMultiple=null;Z.focal=null;Z.quality=null;Z.markupMode=null;Z.editMode=null;Z.editAdmin=!1;Z.editing=null;Z.labelMode="view";Z.editModePrior=Z.editMode;Z.xmlCallbackFunction=null;Z.labelsClickDrag=!1;Z.sliderFocus="zoom";Z.overlayPath=null;Z.overlays=!1;Z.overlayJSONObject=null;Z.overlaysInitialVisibility=null;Z.animation=!1;Z.animationPath=null;Z.animationCount=0;Z.animationAxis=null;Z.animator=
null;Z.animationFlip=null;Z.slidestack=!1;Z.slidestackPath=null;Z.imageSet=!1;Z.imageSetPath=null;Z.imageSetLength=null;Z.imageSetListPosition=null;Z.imageSetListTitle=null;Z.imageSetStart=null;Z.imageSetLoop=null;Z.sliderImageSetVisible=null;Z.mouseWheelParmeterProvided=null;Z.mouseWheel=null;Z.imageSetHotspotPath=null;Z.hotspotFileShared=!1;Z.imageSetAnnotationPath=null;Z.annotationFileShared=!1;Z.messageDurationLong=parseInt(Z.Utils.getResource("DEFAULT_MESSAGEDURATIONLONG"),10);Z.messageDurationStandard=
parseInt(Z.Utils.getResource("DEFAULT_MESSAGEDURATIONSTANDARD"),10);Z.messageDurationShort=parseInt(Z.Utils.getResource("DEFAULT_MESSAGEDURATIONSHORT"),10);Z.messageDurationVeryShort=parseInt(Z.Utils.getResource("DEFAULT_MESSAGEDURATIONVERYSHORT"),10);Z.Viewer=null;Z.ViewerDisplay=null;Z.Viewport=null;Z.Toolbar=null;Z.ToolbarDisplay=null;Z.ToolbarMinimized=!1;Z.TooltipDisplay=null;Z.Navigator=null;Z.Navigator2=null;Z.NavigatorDisplay=null;Z.MessageDisplay=null;Z.messages=null;Z.messageDisplayList=
[];Z.overlayMessage=null;Z.CoordinatesDisplay=null;Z.coordinates=null;Z.coordinatesSave=null;Z.CopyrightDisplay=null;Z.AnnotationPanelDisplay=null;Z.imageW=null;Z.imageH=null;Z.imageD=null;Z.imageCtrX=null;Z.imageCtrY=null;Z.imageX=0;Z.imageY=0;Z.imageZ=0;Z.imageR=0;Z.priorX=0;Z.priorY=0;Z.priorZ=0;Z.priorR=0;Z.preventDupCall=!1;Z.fitZ=null;Z.fillZ=null;Z.zooming="stop";Z.panningX="stop";Z.panningY="stop";Z.rotating="stop";Z.fullView=!1;Z.fullViewPrior=!1;Z.interactive=!0;Z.useCanvas=!0;Z.expressParamsEnabled=
null;Z.proParamsEnabled=null;Z.specialStorageEnabled=null;Z.enterpriseParamsEnabled=null;Z.updateViewPercent=0;Z.TraceDisplay=null;Z.traces=null;Z.mouseIsDown=!1;Z.buttonIsDown=!1;Z.keyIsDown=!1;Z.mouseWheelIsDown=!1;Z.mouseWheelCompleteDuration=null;Z.mouseWheelCompleteTimer=null;Z.mouseOutDownPoint=null;Z.viewportCurrentID=0;Z.viewportCurrent=null;Z.viewportChangeTimeout=null},detectBrowserFeatures:function(){Z.browsers={UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5,EDGE:6};var b=Z.browsers.UNKNOWN,
a=0,e=1E4,f=navigator.appName,g=navigator.appVersion,m=!1,k=!1,t=navigator.userAgent.toLowerCase();if(-1!=t.indexOf("edge"))b=Z.browsers.EDGE,a=g;else if("Microsoft Internet Explorer"==f&&window.attachEvent&&window.ActiveXObject)a=t.indexOf("msie"),b=Z.browsers.IE,a=parseFloat(t.substring(a+5,t.indexOf(";",a))),m="undefined"!==typeof document.documentMode;else if("Netscape"==f&&-1!=t.indexOf("trident"))b=Z.browsers.IE,a=11;else if("Netscape"==f&&window.addEventListener){var q=t.indexOf("firefox"),
f=t.indexOf("safari"),g=t.indexOf("chrome");0<=q?(b=Z.browsers.FIREFOX,a=parseFloat(t.substring(q+8)),e=1E4):0<=f&&(e=t.substring(0,f).lastIndexOf("/"),b=0<=g?Z.browsers.CHROME:Z.browsers.SAFARI,a=parseFloat(t.substring(e+1,f)),e=1E4);f=new Image;f.style.getPropertyValue&&(k=f.style.getPropertyValue("image-rendering"))}else"Opera"==f&&window.opera&&"[object Opera]"==Object.prototype.toString.call(window.opera)&&(b=Z.browsers.OPERA,a=parseFloat(g));var G;if(window.XMLHttpRequest)netReq=new XMLHttpRequest,
G="XMLHttpRequest";else if(window.ActiveXObject)for(f=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],g=0,q=f.length;g<q;g++)try{netReq=new ActiveXObject(f[g]);G=f[g];break}catch(w){}var f="response"in XMLHttpRequest.prototype||"mozResponseArrayBuffer"in XMLHttpRequest.prototype||"mozResponse"in XMLHttpRequest.prototype||"responseArrayBuffer"in XMLHttpRequest.prototype,g=document.createElement("canvas"),g=!(!g.getContext||!g.getContext("2d")),q=!(b==Z.browsers.SAFARI&&4>a||b==Z.browsers.CHROME&&
2>a),g=g&&q,q=!(b==Z.browsers.CHROME&&2>a),k=m||k?"high":null,R=(document.documentElement||{}).style||{},m=!1,U=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],P,ka;for(;P=U.shift();)if("undefined"!==typeof R[P]){m=!0;ka=/webkit/i.test(P);break}var R=m,U="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints,ca=-1<t.indexOf("iphone")||-1<t.indexOf("ipad")||-1<t.indexOf("ipod"),t=-1<t.indexOf("android")||
ca,ca=!1;if("undefined"!==typeof document.cancelFullScreen||"undefined"!==typeof document.webkitCancelFullScreen||"undefined"!==typeof document.mozCancelFullScreen||"undefined"!==typeof document.oCancelFullScreen||"undefined"!==typeof document.msCancelFullScreen||"undefined"!==typeof document.msExitFullscreen)ca=!0;var J=Array.prototype.map,ba=Array.prototype.splice,I=!1;try{new Float32Array(1),I=!0}catch(w){}var W=!1;try{new Uint8Array(1),W=!0}catch(w){}var M=!1;if("function"==typeof Object.defineProperty)try{Object.defineProperty({},
"x",{}),M=!0}catch(w){}var oa;switch(window.location.protocol){case "http:":oa=!1;break;case "https:":oa=!1;break;case "file:":oa=!0;break;default:oa=null}var ea=!(Z.browser==Z.browsers.IE&&9>Z.browserVersion||Z.browser==Z.browsers.OPERA&&15>Z.browserVersion||Z.browser==Z.browsers.CHROME&&25>Z.browserVersion&&Z.browser==Z.browsers.FIREFOX&&20>Z.browserVersion&&Z.browser==Z.browsers.SAFARI&&5>Z.browserVersion);Z.browser=b;Z.browserVersion=a;Z.scaleThreshold=e;Z.xmlHttpRequestSupport=G;Z.responseArraySupported=
f;Z.canvasSupported=g;Z.useCanvas=Z.canvasSupported;Z.imageFilters=!Z.useCanvas&&Z.imageFilters?!1:Z.imageFilters;Z.cssTransformsSupported=m;Z.cssTransformProperty=P;Z.cssTransformNoUnits=ka;Z.alphaSupported=q;Z.renderQuality=k;Z.rotationSupported=R;Z.fullScreenSupported=ca;Z.arrayMapSupported=J;Z.arraySpliceSupported=ba;Z.float32ArraySupported=I;Z.uInt8ArraySupported=W;Z.definePropertySupported=M;Z.touchSupport=U;Z.mobileDevice=t;Z.localUse=oa;Z.zifSupported=ea},getBookmarksURL:function(){if(Z.bookmarksGet){var b=
window.location.href,a=b.indexOf("?");if(-1!=a){var e="",f=-1,g=-1,m=-1,k=-1,t=Z.imageW/2,q=Z.imageH/2,G=-1,w=0,e=b.substring(a+1,b.length);if("IIIFImageServer"!=Z.tileSource)f=e.indexOf("x="),g=e.indexOf("y="),m=e.indexOf("z="),k=e.indexOf("r="),-1==k&&(k=e.length+1),-1!=f&&(t=parseFloat(e.substring(f+2,g-1))),-1!=g&&(q=parseFloat(e.substring(g+2,m-1))),-1!=m&&(G=parseFloat(e.substring(m+2,k-1))),k!=e.length+1&&(w=parseFloat(e.substring(k+2,e.length)));else{for(var R,U,P,b=e.split("/"),a=b.length-
1;-1<a;a--)if(e=b[a],-1!=e.indexOf(",")){P=parseInt(b[a+1],10);if(isNaN(P)||0>P||360<P)P=0;U=e.split(",");R=b[a-1].split(",");break}t=Math.round(parseFloat(R[0])+parseFloat(R[2])/2);q=Math.round(parseFloat(R[1])+parseFloat(R[3])/2);G=Math.round(parseFloat(U[0])/parseFloat(R[2])*100)/100;w=P}}Z.initialX=t;Z.initialY=q;Z.initialZ=G;Z.initialR=w}},setBookmarksURL:function(){if(Z.bookmarksSet){var b=Z.Viewport.getCoordinatesBookmark(null,"IIIFImageServer"==Z.tileSource);window.history.pushState({id:"zBookmark"},
"",b)}},enforceUserLogin:function(b,a){var e=!0,f=this.readCookie("zoomifyUserLogin");Z.Utils.stringValidate(f)&&(Z.Viewer.configureViewer(),Z.userName=f,Z.userInitials=Z.Utils.stringGetInitials(Z.userName),Z.Utils.stringValidate(Z.userGuestPrompt)&&Z.userName==Z.userGuestPrompt&&Z.userList.splice(0,0,{name:Z.userGuestPrompt,id:"0",countCell:0,countImage:0}),e=!1);!Z.userPathProvided||"undefined"!==typeof a&&null!==a||(this.loadUsersXML(),e=!1);e&&(Z.Utils.stringValidate(Z.userName)?Z.userName!=Z.userGuestPrompt&&
Z.Utils.stringValidate(Z.userName)&&a&&-1==Z.Utils.arrayIndexOfObjectValue(a,"name",Z.userName)?(Z.Utils.stringValidate(Z.userNamePromptRetry)||Z.Utils.getResource("UI_USERNAMEPROMPTRETRY"),b=Z.Utils.getResource("UI_USERNAMEPROMPTRETRY")):b="complete":"undefined"!==typeof b&&Z.Utils.stringValidate(Z.promptText)||(b=Z.Utils.stringValidate(Z.userNamePrompt)?Z.userNamePrompt:Z.Utils.getResource("UI_USERNAMEPROMPT")),"complete"!=b?(Z.userName=prompt(b,Z.userGuestPrompt),Z.Utils.enforceUserLogin(Z.userName,
a)):(Z.Utils.hideMessage(),Z.userInitials=Z.Utils.stringGetInitials(Z.userName),document.cookie="zoomifyUserLogin="+Z.userName,Z.Utils.stringValidate(Z.userGuestPrompt)&&Z.userName==Z.userGuestPrompt&&Z.userList.splice(0,0,{name:Z.userGuestPrompt,id:"0",countCell:0,countImage:0}),Z.Viewer.configureViewer()))},loadUsersXML:function(){Z.Utils.stringValidate(Z.userPath)&&(Z.simplePath?dataPath=Z.userPath:(".json"!=Z.userPath.toLowerCase().substring(Z.userPath.length-5,Z.userPath.length)&&".xml"!=Z.userPath.toLowerCase().substring(Z.userPath.length-
4,Z.userPath.length)&&(Z.userPath=Z.userPath+"/"+Z.Utils.getResource("DEFAULT_USERXMLFILE")),dataPath=Z.Utils.cacheProofPath(Z.userPath)));if("undefined"!==typeof dataPath&&Z.Utils.stringValidate(dataPath)){var b=new Z.NetConnector;-1!=dataPath.toLowerCase().indexOf(".xml")?b.loadXML(dataPath):-1!=dataPath.toLowerCase().indexOf(".json")&&b.loadJSON(dataPath)}else"string"===typeof Z.userXMLText&&Z.Utils.stringValidate(Z.userXMLText)?(b=Z.Utils.xmlConvertTextToDoc(Z.userXMLText),self.parseUsersXML(b)):
"undefined"!==typeof Z.userJSONObject&&"object"===typeof Z.userJSONObject&&null!==Z.userJSONObject&&(b=Z.Utils.jsonConvertObjectToXMLText(Z.userJSONObject),b=Z.Utils.xmlConvertTextToDoc(b),self.parseUsersXML(b))},parseUsersXML:function(b){Z.Viewer.setStatus("XMLParsedViewer",!1);var a=b.getElementsByTagName("SETUP")[0];if(a){0!=Z.userPanelVisible&&(Z.userPanelPosition=a.getAttribute("PANELPOSITION"));var e=a.getAttribute("GUESTPROMPT");Z.userGuestPrompt="undefined"!==typeof e&&Z.Utils.stringValidate(e)?
e:"";Z.Utils.stringValidate(Z.userNamePrompt)||(e=a.getAttribute("PROMPTTEXT"),Z.userNamePrompt="undefined"!==typeof e&&Z.Utils.stringValidate(e)?e:"");Z.Utils.stringValidate(Z.userNamePromptRetry)||(a=a.getAttribute("PROMPTRETRYTEXT"),Z.userNamePromptRetry="undefined"!==typeof a&&Z.Utils.stringValidate(a)?a:"")}if(b=b.getElementsByTagName("USERS")[0])for(b=b.getElementsByTagName("USER"),a=0,e=b.length;a<e;a++){var f=b[a];Z.userList[Z.userList.length]={name:f.getAttribute("NAME"),id:f.getAttribute("ID"),
countCell:0,countImage:0}}Z.Viewer.setStatus("XMLParsedViewer",!0);"undefined"!==typeof Z.userList&&0<Z.userList.length&&(Z.Utils.hideMessage(),this.enforceUserLogin(null,Z.userList),Z.Viewer.setStatus("usersLoadedViewer",!0),Z.Utils.validateCallback("usersLoaded"),Z.userPanelVisible&&null===Z.UserPanel&&(Z.Viewer.getStatus("readyViewer")?Z.Utils.createUserPanel(Z.userList):Z.setCallback("readyViewer",function(){Z.Utils.createUserPanel(Z.userList)})))},createUserPanel:function(b){var a=Z.Utils.createContainerElement("div",
"userPanelDisplay","inline-block","absolute","hidden","1px","1px","1px","1px","solid","1px","transparent none","0px","0px","normal","default");Z.UserPanel=a;var e=a.style;Z.ViewerDisplay.appendChild(a);e.zIndex=(Z.baseZIndex+34).toString();e=Z.Utils.createContainerElement("div","userPanelBackground","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal");a.appendChild(e);parseInt(Z.Utils.getResource("DEFAULT_USERPANELLISTFONTSIZE"),10);Z.Utils.getResource("CONTENT_USERPLACEHOLDERLISTTEXT");
if("undefined"===typeof userCountainer||null===userCountainer){var f=Z.Utils.createContainerElement("div","containerUserLabels","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);a.appendChild(f);var g=Z.Utils.createContainerElement("div","labelNameTextBox","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0),m=document.createTextNode(Z.Utils.getResource("UI_USERPANELLABELNAME"));
g.appendChild(m);f.appendChild(g);Z.tracking&&(g=Z.Utils.createContainerElement("div","labelCountPerUserTextBox","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0),m=document.createTextNode(Z.Utils.getResource("UI_USERPANELLABELCOUNT")),g.appendChild(m),f.appendChild(g),g=Z.Utils.createContainerElement("div","labelUserCountersShowTextBox","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none",
"0px","0px","nowrap",null,!0),m=document.createTextNode(Z.Utils.getResource("UI_USERPANELLABELSHOW")),g.appendChild(m),f.appendChild(g));var k="#FFFFFF",f=parseInt(Z.Utils.getResource("DEFAULT_USERPANELLABELFONTSIZE"),10),g=6,m=0;containerUsers=Z.Utils.createContainerElement("div","containerUsers","inline-block","absolute","auto","1px","1px","0px","0px","solid","1px","#FFFFFF","0px","0px","nowrap",null,!0);containerUsers.style.overflowX="hidden";a.appendChild(containerUsers);for(var a=0,t=b.length;a<
t;a++){k=0==a%2?"#F8F8F8":"#FFFFFF";k=Z.Utils.createContainerElement("div","rowContainer","inline-block","absolute","visible","100%","24px","0px",m+"px","none","0px",k,"0px","0px","nowrap",null,!0);containerUsers.appendChild(k);var q="rowNameTextBox"+a.toString(),G="rowNameTextNode"+a.toString();k[q]=Z.Utils.createContainerElement("div",q,"inline-block","absolute","visible","100px","20px",g+"px","6px","none","0px","transparent none","0px","0px","nowrap",null,!0);k[G]=document.createTextNode(b[a].name);
k[q].appendChild(k[G]);k.appendChild(k[q]);Z.Utils.setTextNodeStyle(k[q],"black","verdana",f+"px","none","normal","normal","normal","normal","1em","left","none");Z.tracking&&(g+=100,q="rowCountPerUserTextBox"+a.toString(),G="rowCountPerUserTextNode"+a.toString(),k[q]=Z.Utils.createContainerElement("div",q,"inline-block","absolute","visible","100px","20px",g+"px","6px","none","0px","transparent none","0px","0px","nowrap",null,!0),k[G]=document.createTextNode(null!==b[a].countImage?b[a].countImage:
"0"),k[q].appendChild(k[G]),k.appendChild(k[q]),Z.Utils.setTextNodeStyle(k[q],"black","verdana",f+"px","none","normal","normal","normal","normal","1em","left","none"),g+=30,q="checkboxUserCountersShow"+a.toString(),k[q]=new Z.Utils.Checkbox(q,"show","20px","20px",g+"px","1px","click",Z.Toolbar.z457,"TIP_COUNTERTYPESHOW"),k.appendChild(k[q]),document.getElementById(q).checked=!0);g=6;m+=24}}Z.Utils.drawLayoutUserPanel();Z.Utils.addEventListener(e,"mousedown",Z.Utils.preventDefault)},drawLayoutUserPanel:function(){var b=
parseInt(Z.Utils.getResource("DEFAULT_USERPANELWIDTH"),10),a=parseInt(Z.Utils.getResource("DEFAULT_USERPANELHEIGHT"),10),e=Z.Utils.calculateUserPanelCoords(Z.userPanelPosition,b,a,Z.viewerW,Z.viewerH),f=Z.UserPanel.style;Z.Utils.sizeAndPositionUserPanel(f,b,a,e.x,e.y);Z.userPanelVisibleState=Z.userPanelVisible&&"0"!=Z.userPanelPosition;f.display=Z.userPanelVisibleState?"inline-block":"none";var g=parseFloat(Z.Utils.getResource("z82")),m=Z.Utils.getResource("z83"),k=Z.Utils.getResource("z83NOALPHA"),
t=parseInt(Z.Utils.getResource("DEFAULT_USERLABELWIDTH"),10),q=parseInt(Z.Utils.getResource("DEFAULT_USERPANELLABELFONTSIZE"),10),e=b-16-2,f=a-32-4,G=document.getElementById("userPanelBackground");if(G){var w=G.style;w.width=b+"px";w.height=a+"px";w.backgroundColor=m;Z.Utils.setOpacity(G,g,k)}dx=12;if(a=document.getElementById("containerUserLabels"))g=a.style,g.width=b+"px",g.height="15px",g.left=dx+"px",g.top="7px",g.visibility="visible",Z.Utils.setTextNodeStyle(a.firstChild,"black","verdana",q+
"px","none","normal","normal","normal","normal","1em","left","none");dx=0;if(b=document.getElementById("labelNameTextBox"))a=b.style,a.width=t+"px",a.height="15px",a.left="0px",a.top="0px",Z.Utils.setTextNodeStyle(b.firstChild,"black","verdana",q+"px","none","normal","normal","normal","normal","1em","left","none"),dx+=1.5*t;if(b=document.getElementById("labelCountPerUserTextBox"))a=b.style,a.width=t+"px",a.height="15px",a.left=dx+"px",a.top="0px",Z.Utils.setTextNodeStyle(b.firstChild,"black","verdana",
q+"px","none","normal","normal","normal","normal","1em","left","none"),dx+=t-4;if(b=document.getElementById("labelUserCountersShowTextBox"))a=b.style,a.width=t+"px",a.height="15px",a.left=dx+"px",a.top="0px",Z.Utils.setTextNodeStyle(b.firstChild,"black","verdana",q+"px","none","normal","normal","normal","normal","1em","left","none"),dx+=t-12;dy=24;if(t=document.getElementById("containerUsers"))q=t.style,q.width=e+"px",q.height=f+"px",q.left="8px",q.top=dy+"px",t.size=6},calculateUserPanelCoords:function(b,
a,e,f,g){if(null===Z.userPanelVisible)e=b=-1E3;else switch(b){case "0":e=b=-1E3;break;case "1":b=Z.navigatorL;e=Z.navigatorT+Z.navigatorH+Z.rulerH+2;break;case "2":b=f-a-15;e=15;2==Z.trackingPanelPosition&&(e+=170);break;case "3":b=f-a-15;e=0<Z.toolbarVisible&&8!=Z.toolbarVisible?g-e-15:g-15;break;case "4":b=15;e=0<Z.toolbarVisible&&8!=Z.toolbarVisible?g-e-15:g-15;break;default:b=f-a-15,e=15}return new Z.Utils.Point(b,e)},sizeAndPositionUserPanel:function(b,a,e,f,g){"undefined"!==typeof a&&null!==
a&&(b.width=a+"px");"undefined"!==typeof e&&null!==e&&(b.height=e+"px");"undefined"!==typeof f&&null!==f&&(b.left=f+"px");"undefined"!==typeof g&&null!==g&&(b.top=g+"px")},enforceCopyright:function(){this.readCookie("zoomifyImageCopyright")?Z.Viewer.configureViewer():this.loadCopyrightText()},loadCopyrightText:function(){(new Z.NetConnector).loadXML(Z.copyrightPath)},showCopyright:function(b,a){var e=this.getResource("z102"),f=this.getResource("z101");Z.CopyrightDisplay=this.createContainerElement("div",
"CopyrightDisplay","inline-block","absolute","hidden",Z.viewerW-2+"px",Z.viewerH-2+"px","0px","0px","solid","1px",e,"0px","0px","normal",null,!0);Z.ViewerDisplay.appendChild(Z.CopyrightDisplay);Z.CopyrightDisplay.style.zIndex=(Z.baseZIndex+36).toString();var g=parseFloat(Z.CopyrightDisplay.style.width)/2-220,e=parseFloat(Z.CopyrightDisplay.style.height)/2-100,m=this.createContainerElement("div","textBox","inline-block","absolute","hidden","440px","200px",g+"px",e+"px","none","0px","transparent none",
"0px","0px","normal",null,!0);m.id="textBox";Z.CopyrightDisplay.appendChild(m);var k=document.createTextNode(b);m.appendChild(this.createCenteredElement(k,"copyrightTextNode"));this.setTextNodeStyle(k,"black","verdana","16px","none","normal","normal","normal","normal","1em","justify","none");var k=this.createContainerElement("div","declinedTextContainer","hidden","absolute","hidden","0px","0px","0px","0px","none","0px","transparent none","0px","0px","normal",null,!0),t=document.createTextNode(a);
k.appendChild(t);m.appendChild(k);g=g+220-95;e=e+200+20;m=this.getResource("z418");m=new Z.Utils.Button("buttonAgree",m,null,null,null,null,"80px","20px",g+"px",e+"px","mousedown",this.copyrightAgreeButtonHandler,"z332","solid","1px",f,"0px","0px");Z.CopyrightDisplay.appendChild(m.elmt);g+=110;m=this.getResource("z419");f=new Z.Utils.Button("buttonExit",m,null,null,null,null,"80px","20px",g+"px",e+"px","mousedown",this.copyrightExitButtonHandler,"z333","solid","1px",f,"0px","0px");Z.CopyrightDisplay.appendChild(f.elmt)},
hideCopyright:function(){var b=document.getElementById("copyrightTextNode").firstChild,a=document.getElementById("declinedTextContainer").firstChild.nodeValue;b.nodeValue=a;b=document.getElementById("buttonAgree");Z.Utils.removeEventListener(b,"mousedown",this.copyrightAgreeButtonHandler);Z.CopyrightDisplay.removeChild(b);b=document.getElementById("buttonExit");Z.Utils.removeEventListener(b,"mousedown",this.copyrightExitButtonHandler);Z.CopyrightDisplay.removeChild(b)},copyrightAgreeButtonHandler:function(b){Z.ViewerDisplay.removeChild(Z.CopyrightDisplay);
document.cookie="zoomifyImageCopyright=confirmed";Z.Viewer.configureViewer()},copyrightExitButtonHandler:function(b){Z.Utils.hideCopyright()},parseParametersXML:function(b){Z.xmlParametersParsing=!1;var a="";b=b.getElementsByTagName("ZOOMIFY")[0];zImagePath=b.getAttribute("IMAGEPATH");zImagePath2=b.getAttribute("IMAGEPATH2");"undefined"!==typeof zImagePath&&Z.Utils.stringValidate(zImagePath)&&(Z.imagePath=zImagePath);"undefined"!==typeof zImagePath2&&Z.Utils.stringValidate(zImagePath2)&&(Z.imagePath2=
zImagePath2);for(var e=Z.Utils.getResource("DEFAULT_PARAMETERLISTTEXT").split(","),f=0,g=e.length;f<g;f++){var m=e[f],k=Z.Utils.stringLowerCaseFirstLetter(m.substr(1)).toUpperCase(),k=b.getAttribute(k);"undefined"!==typeof k&&Z.Utils.stringValidate(k)&&(a+=m+"="+k+"&")}e=b.getAttribute("FULLPAGEINITIAL");"undefined"!==typeof e&&Z.Utils.stringValidate(e)&&(a+="zInitialFullPage="+e+"&");e=b.getAttribute("TOOLBARSKINXMLPATH");"undefined"!==typeof e&&Z.Utils.stringValidate(e)&&(a+="zSkinPath="+e+"&");
e=b.getAttribute("TOOLBARTOOLTIPS");"undefined"!==typeof e&&Z.Utils.stringValidate(e)&&(a+="zTooltipsVisible="+e+"&");e=b.getAttribute("SHOWTOOLTIPS");"undefined"!==typeof e&&Z.Utils.stringValidate(e)&&(a+="zTooltipsVisible="+e+"&");e=b.getAttribute("WATERMARKMEDIA");"undefined"!==typeof e&&Z.Utils.stringValidate(e)&&(a+="zWatermarkPath="+e+"&");e=b.getAttribute("SLIDESXMLPATH");"undefined"!==typeof e&&Z.Utils.stringValidate(e)&&(a+="zSlidePath="+e+"&");e=b.getAttribute("HOTSPOTSXMLPATH");"undefined"!==
typeof e&&Z.Utils.stringValidate(e)&&(a+="zHotspotPath="+e+"&");e=b.getAttribute("ANNOTATIONSXMLPATH");"undefined"!==typeof e&&Z.Utils.stringValidate(e)&&(a+="zAnnotationPath="+e+"&");e=b.getAttribute("SAVETOFILE");"undefined"!==typeof e&&Z.Utils.stringValidate(e)&&(a+="zSaveImageHandlerPath="+e+"&");a="&"==a.slice(-1,a.length)?a.slice(0,a.length-1):a;a=unescape(a);a=Z.Utils.stringUnescapeAmpersandCharacters(a);Z.Utils.arrayClear(Z.parameters);Z.parameters=Z.Utils.parseParameters(a);Z.initialize()},
parseParameters:function(b){var a=[];if("object"===typeof b)a=b;else if("string"===typeof b){b=b.split("&");for(var e=0,f=b.length;e<f;e++){var g=b[e],m=g.indexOf("=");if(0<m){var k=g.substring(0,m),g=g.substring(m+1);a[k]=g}}}return a},parametersToDelimitedString:function(b,a){var e="",f;for(f in b)e+=f+"="+b[f].toString()+a;return e=e.slice(0,-1)},setParameters:function(b){var a=this.getResource("z110"),e=this.getResource("z109"),f=this.getResource("z108");Z.expressParamsEnabled=a!=e?!0:!1;Z.expressParamsEnabled||
(Z.toolbarInternal=!0,Z.logoLinkURL=Z.Utils.getResource("z427"));var e=this.getResource("z187"),g=this.getResource("z186"),a=this.getResource("z185");Z.proParamsEnabled=e!=g?!0:!1;var m=this.getResource("z215"),e=this.getResource("z214"),g=this.getResource("z213");Z.specialStorageEnabled=m!=e?!0:!1;var k=this.getResource("z107"),t=this.getResource("z106"),m=this.getResource("z105");Z.enterpriseParamsEnabled=k!=t?!0:!1;Z.skinPath=this.getResource("z201");Z.skinMode=this.getResource("z199");isNaN(parseFloat(this.getResource("z143")))||
(Z.initialX=parseFloat(this.getResource("z143")));isNaN(parseFloat(this.getResource("z144")))||(Z.initialY=parseFloat(this.getResource("z144")));isNaN(parseFloat(this.getResource("z145")))||(Z.initialZ=parseFloat(this.getResource("z145")));isNaN(parseFloat(this.getResource("z163")))||(Z.minZ=parseFloat(this.getResource("z163")));isNaN(parseFloat(this.getResource("z153")))||(Z.maxZ=parseFloat(this.getResource("z153")));isNaN(parseFloat(this.getResource("z241")))||(Z.zoomSpeed=parseFloat(this.getResource("z241")));
isNaN(parseFloat(this.getResource("z175")))||(Z.panSpeed=parseFloat(this.getResource("z175")));isNaN(parseFloat(this.getResource("z111")))||(Z.fadeInSpeed=parseFloat(this.getResource("z111")));Z.fadeIn=0<Z.fadeInSpeed;Z.navigatorVisible=parseInt(this.getResource("z171"),10);null===Z.navigatorW&&(Z.navigatorW=parseInt(this.getResource("z172"),10));null===Z.navigatorH&&(Z.navigatorH=parseInt(this.getResource("z167"),10));null===Z.navigatorL&&(Z.navigatorL=parseInt(this.getResource("z168"),10));null===
Z.navigatorT&&(Z.navigatorT=parseInt(this.getResource("z170"),10));null===Z.navigatorFit&&(Z.navigatorFit=this.getResource("z166"));null===Z.navigatorRectangleColor&&(Z.navigatorRectangleColor=this.getResource("z169"));Z.galleryVisible=parseInt(this.getResource("DEFAULT_GALLERYVISIBLE"),10);Z.galleryAutoShowHide=2==Z.galleryVisible;Z.galleryW=parseInt(this.getResource("DEFAULT_GALLERYWIDTH"),10);Z.galleryH=parseInt(this.getResource("DEFAULT_GALLERYHEIGHT"),10);Z.galleryM=parseInt(this.getResource("DEFAULT_GALLERYMARGIN"),
10);Z.galleryL=parseInt(this.getResource("DEFAULT_GALLERYLEFT"),10);Z.galleryT=parseInt(this.getResource("DEFAULT_GALLERYTOP"),10);Z.galleryPosition=parseFloat(this.getResource("DEFAULT_GALLERYPOSITION"));Z.galleryRectangleColor=this.getResource("DEFAULT_GALLERYRECTANGLECOLOR");Z.clickZoom="0"!=this.getResource("z93");Z.doubleClickZoom="0"!=this.getResource("DEFAULT_DOUBLECLICKZOOM");Z.doubleClickDelay=parseFloat(this.getResource("DEFAULT_DOUBLECLICKDELAY"));Z.clickPan="0"!=this.getResource("z92");
Z.mousePan="0"!=this.getResource("z164");Z.constrainPan="0"!=this.getResource("z95");Z.constrainPanLimit=parseInt(this.getResource("z95LIMIT"),10);Z.constrainPanStrict="0"!=this.getResource("z95STRICT");Z.panBuffer=parseFloat(this.getResource("z173"));Z.smoothPan=Z.useCanvas&&!Z.comparison&&"0"!=this.getResource("DEFAULT_SMOOTHPAN");Z.smoothPanEasing=parseInt(this.getResource("DEFAULT_SMOOTHPANEASING"),10);Z.smoothPanGlide=parseInt(this.getResource("DEFAULT_SMOOTHPANGLIDE"),10);Z.smoothZoom="0"!=
this.getResource("DEFAULT_SMOOTHZOOM");Z.smoothZoomEasing=parseInt(this.getResource("DEFAULT_SMOOTHZOOMEASING"),10);Z.keys="0"!=this.getResource("z146");Z.canvas="0"!=this.getResource("z88");Z.baseZIndex=parseInt(this.getResource("DEFAULT_BASEZINDEX"),10);Z.debug=parseInt(this.getResource("z104"),10);Z.toolbarVisible=parseInt(this.getResource("z223"),10);Z.toolbarAutoShowHide=0!=Z.toolbarVisible&&1!=Z.toolbarVisible&&6!=Z.toolbarVisible&&7!=Z.toolbarVisible&&8!=Z.toolbarVisible;Z.toolbarPosition=
parseFloat(this.getResource("z222"));Z.logoVisible="0"!=this.getResource("z150");Z.logoCustomPath=this.getResource("z149");Z.minimizeVisible="0"!=this.getResource("z162");Z.sliderZoomVisible="0"!=this.getResource("DEFAULT_SLIDERZOOMVISIBLE");Z.mouseWheel=parseInt(this.getResource("DEFAULT_MOUSEWHEEL"),10);Z.zoomButtonsVisible="0"!=this.getResource("DEFAULT_ZOOMBUTTONSVISIBLE");Z.panButtonsVisible="0"!=this.getResource("z174");Z.resetVisible="0"!=this.getResource("DEFAULT_RESETVISIBLE");Z.tooltipsVisible=
"0"!=this.getResource("z224");Z.helpVisible=parseInt(this.getResource("z128"),10);Z.helpW=parseInt(this.getResource("z422"),10);Z.helpH=parseInt(this.getResource("z421"),10);Z.progressVisible="0"!=this.getResource("z184");Z.messagesVisible="0"!=this.getResource("DEFAULT_MESSAGESVISIBLE");Z.fullViewVisible="0"!=this.getResource("z121");Z.fullScreenVisible="0"!=this.getResource("z119");Z.fullPageVisible="0"!=this.getResource("z118");Z.initialFullPage="0"!=this.getResource("z141");null===Z.bookmarksGet&&
(Z.bookmarksGet="0"!=this.getResource("DEFAULT_BOOKMARKSGET"));null===Z.bookmarksSet&&(Z.bookmarksSet="0"!=this.getResource("DEFAULT_BOOKMARKSSET"));Z.measureVisible="0"!=this.getResource("z157");Z.rotationVisible="0"!=this.getResource("z190");Z.rotationFree="0"!=this.getResource("DEFAULT_ROTATIONFREE");Z.initialR=this.getResource("DEFAULT_INITIALR");isNaN(parseFloat(this.getResource("DEFAULT_SCREENSAVERSPEED")))||(Z.screensaverSpeed=parseFloat(this.getResource("DEFAULT_SCREENSAVERSPEED")));isNaN(parseFloat(this.getResource("DEFAULT_MASKFADESPEED")))||
(Z.maskFadeSpeed=parseFloat(this.getResource("DEFAULT_MASKFADESPEED")));Z.maskClearOnUserAction="0"!=this.getResource("DEFAULT_MASKCLEARONUSERACTION");Z.units=this.getResource("z231");Z.sourceMagnification=parseInt(this.getResource("z212"),10);null===Z.virtualPointerVisible&&(Z.virtualPointerVisible="0"!=this.getResource("z233"));null===Z.crosshairsVisible&&(Z.crosshairsVisible="0"!=this.getResource("z103"));null===Z.zoomRectangle&&(Z.zoomRectangle="0"!=this.getResource("DEFAULT_ZOOMRECTANGLE"));
null===Z.rulerVisible&&(Z.rulerVisible=parseInt(this.getResource("z196"),10));null===Z.rulerListType&&(Z.rulerListType=this.getResource("z193"));null===Z.rulerW&&(Z.rulerW=parseInt(this.getResource("z197"),10));null===Z.rulerH&&(Z.rulerH=parseInt(this.getResource("z191"),10));null===Z.rulerL&&(Z.rulerL=parseInt(this.getResource("z192"),10));null===Z.rulerT&&(Z.rulerT=parseInt(this.getResource("z195"),10));isNaN(parseFloat(this.getResource("z210")))||(Z.slideTransitionSpeed=parseFloat(this.getResource("z210")));
null===Z.coordinatesVisible&&(Z.coordinatesVisible="0"!=this.getResource("z100"));null===Z.geoCoordinatesVisible&&(Z.geoCoordinatesVisible="0"!=this.getResource("DEFAULT_GEOCOORDINATESVISIBLE"));null===Z.preloadVisible&&(Z.preloadVisible="0"!=this.getResource("DEFAULT_PRELOADVISIBLE"));Z.saveImageFull="0"!=this.getResource("DEFAULT_SAVEIMAGEFULL");Z.saveImageFilename=this.getResource("DEFAULT_SAVEIMAGEFILENAME");Z.saveImageFormat=this.getResource("DEFAULT_SAVEIMAGEFORMAT");Z.saveImageCompression=
parseFloat(this.getResource("DEFAULT_SAVEIMAGECOMPRESSION"));var q,G;document.body&&(q=document.body.style,q=q.backgroundColor);if(k=document.getElementById(Z.pageContainerID))G=Z.Utils.getElementStyle(k),G=G.backgroundColor;null===Z.imageFilters&&(Z.imageFilters="0"!=this.getResource("DEFAULT_IMAGEFILTERS"));Z.initialImageFilters="0"!=this.getResource("z142");Z.brightnessVisible="0"!=this.getResource("DEFAULT_BRIGHTNESSVISIBLE");Z.contrastVisible="0"!=this.getResource("DEFAULT_CONTRASTVISIBLE");
Z.sharpnessVisible="0"!=this.getResource("DEFAULT_SHARPNESSVISIBLE");Z.blurrinessVisible="0"!=this.getResource("DEFAULT_BLURRINESSVISIBLE");Z.colorRedVisible="0"!=this.getResource("DEFAULT_COLORREDVISIBLE");Z.colorGreenVisible="0"!=this.getResource("DEFAULT_COLORGREENVISIBLE");Z.colorBlueVisible="0"!=this.getResource("DEFAULT_COLORBLUEVISIBLE");Z.colorRedRangeVisible="0"!=this.getResource("DEFAULT_COLORREDRANGEVISIBLE");Z.colorGreenRangeVisible="0"!=this.getResource("DEFAULT_COLORGREENRANGEVISIBLE");
Z.colorBlueRangeVisible="0"!=this.getResource("DEFAULT_COLORBLUERANGEVISIBLE");Z.gammaVisible="0"!=this.getResource("DEFAULT_GAMMAVISIBLE");Z.gammaRedVisible="0"!=this.getResource("DEFAULT_GAMMAREDVISIBLE");Z.gammaGreenVisible="0"!=this.getResource("DEFAULT_GAMMAGREENVISIBLE");Z.gammaBlueVisible="0"!=this.getResource("DEFAULT_GAMMABLUEVISIBLE");Z.hueVisible="0"!=this.getResource("DEFAULT_HUEVISIBLE");Z.saturationVisible="0"!=this.getResource("DEFAULT_SATURATIONVISIBLE");Z.lightnessVisible="0"!=this.getResource("DEFAULT_LIGHTNESSVISIBLE");
Z.whiteBalanceVisible="0"!=this.getResource("DEFAULT_WHITEBALANCEVISIBLE");Z.normalizeVisible="0"!=this.getResource("DEFAULT_NORMALIZEVISIBLE");Z.equalizeVisible="0"!=this.getResource("DEFAULT_EQUALIZEVISIBLE");Z.noiseVisible="0"!=this.getResource("DEFAULT_NOISEVISIBLE");Z.grayscaleVisible="0"!=this.getResource("DEFAULT_GRAYSCALEVISIBLE");Z.thresholdVisible="0"!=this.getResource("DEFAULT_THRESHOLDVISIBLE");Z.inversionVisible="0"!=this.getResource("DEFAULT_INVERSIONVISIBLE");Z.edgesVisible="0"!=this.getResource("DEFAULT_EDGESVISIBLE");
Z.sepiaVisible="0"!=this.getResource("DEFAULT_SEPIAVISIBLE");Z.freehandVisible="0"!=this.getResource("z116");Z.textVisible="0"!=this.getResource("z217");Z.iconVisible="0"!=this.getResource("z136");Z.rectangleVisible="0"!=this.getResource("z189");Z.polygonVisible="0"!=this.getResource("z181");Z.annotationPanelVisible=parseInt(this.getResource("DEFAULT_ANNOTATIONPANELVISIBLE"),10);Z.labelIconsInternal="0"!=this.getResource("DEFAULT_LABELICONSINTERNAL");Z.annotationsAddMultiple="0"!=this.getResource("DEFAULT_ANNOTATIONSADDMULTIPLE");
Z.annotationsAutoSave="0"!=this.getResource("DEFAULT_ANNOTATIONSAUTOSAVE");Z.saveButtonVisible="0"!=this.getResource("DEFAULT_ANNOTATIONSAVEBUTTONVISIBLE");Z.labelClickSelect="0"!=this.getResource("DEFAULT_LABELCLICKSELECT");null===Z.userPanelVisible&&(Z.userPanelVisible=this.getResource("DEFAULT_USERPANELVISIBLE"));Z.userNamePrompt&&(Z.userNamePrompt=Z.Utils.getResource("UI_USERNAMEPROMPT"));Z.userNamePromptRetry&&(Z.userNamePromptRetry=Z.Utils.getResource("UI_USERNAMEPROMPTRETRY"));Z.trackingPanelVisible=
parseInt(this.getResource("DEFAULT_TRACKINGPANELVISIBLE"),10);Z.initialTrackingOverlayVisible=parseInt(this.getResource("DEFAULT_INITIALTRACKINGOVERLAYVISIBLE"),10);Z.focal=parseInt(this.getResource("z114"),10);Z.quality=parseInt(this.getResource("z188"),10);Z.saveImageBackColor=Z.Utils.stringValidate(G)&&"transparent"!=G?G:Z.Utils.stringValidate(q)&&"transparent"!=q?q:Z.Utils.getResource("DEFAULT_SAVEIMAGEBACKCOLOR");Z.sliderImageSetVisible="0"!=this.getResource("DEFAULT_IMAGESETSLIDERVISIBLE");
if("object"===typeof b&&null!==b){q=this.getResource("z287");Z.annotationPathProvided=void 0!==b.zHotspotPath||void 0!==b.zAnnotationPath||void 0!==b.zAnnotationXMLText||void 0!==b.zAnnotationJSONObject;Z.saveHandlerProvided=void 0!==b.zSaveHandlerPath||void 0!==b.zNoPost&&"1"==b.zNoPost;Z.imageSetPathProvided=void 0!==b.zAnimationPath||void 0!==b.zSlidestackPath;Z.saveImageHandlerProvided=void 0!==b.zSaveImageHandlerPath;Z.mouseWheelParmeterProvided=void 0!==b.zMouseWheel;Z.trackingPathProvided=
void 0!==b.zTrackingPath||void 0!==b.zTrackingXMLText||void 0!==b.zTrackingJSONObject;Z.userPathProvided=void 0!==b.zUserPath||void 0!==b.zUserXMLText||void 0!==b.zUserJSONObject;Z.slidePathProvided=Z.imagePath&&-1!=Z.imagePath.indexOf("zSlidePath")||void 0!==b.zSlidePath;G=Z.slidePathProvided||Z.comparison||Z.overlays||Z.slideshow||Z.imageSetPathProvided||Z.animation||Z.slidestack;for(var w in b)if(!("function"===typeof b[w]&&"zOnAnnotationReady"!==w&&"zOnReady"!==w||G&&("each"==w||"eachSlice"==
w||"all"==w||"any"==w||"collect"==w||"detect"==w||"findAll"==w||"select"==w||"grep"==w||"include"==w||"member"==w||"inGroupsOf"==w||"inject"==w||"invoke"==w||"max"==w||"min"==w||"partition"==w||"pluck"==w||"reject"==w||"sortBy"==w||"toArray"==w||"zip"==w||"size"==w||"inspect"==w||"_reverse"==w||"_each"==w||"clear"==w||"first"==w||"last"==w||"compact"==w||"flatten"==w||"without"==w||"uniq"==w||"intersect"==w||"clone"==w)||-1!=w.indexOf("this.indexOf")))if("undefined"===typeof Z[Z.Utils.stringLowerCaseFirstLetter(w.substr(1))])G?
console.log(q+" "+w):alert(q+" "+w);else if(pValue=b[w],Z.expressParamsEnabled||"zNavigatorVisible"==w)switch(w){case "zOnAnnotationReady":"function"===typeof pValue&&Z.setCallback("annotationPanelInitializedViewer",pValue);break;case "zOnReady":"function"===typeof pValue&&Z.setCallback("readyViewer",pValue);break;case "zInitialX":isNaN(parseFloat(pValue))||(Z.initialX=parseFloat(pValue));break;case "zInitialY":isNaN(parseFloat(pValue))||(Z.initialY=parseFloat(pValue));break;case "zInitialZoom":"fit"==
pValue&&(pValue="-1");"fill"==pValue&&(pValue="0");isNaN(parseFloat(pValue))||(Z.initialZ=parseFloat(pValue),Z.initialZ&&0<Z.initialZ&&100>=Z.initialZ&&(Z.initialZ/=100));break;case "zMinZoom":"fit"==pValue&&(pValue="-1");"fill"==pValue&&(pValue="0");isNaN(parseFloat(pValue))||(Z.minZ=parseFloat(pValue),Z.minZ&&0<Z.minZ&&100>=Z.minZ&&(Z.minZ/=100));break;case "zMaxZoom":isNaN(parseFloat(pValue))||(Z.maxZ=parseFloat(pValue),Z.maxZ&&-1!=Z.maxZ&&(Z.maxZ/=100));break;case "zNavigatorVisible":Z.navigatorVisible=
parseInt(pValue,10);break;case "zNavigatorRectangleColor":Z.navigatorRectangleColor=pValue;break;case "zToolbarInternal":Z.toolbarInternal=pValue;break;case "zToolbarVisible":Z.toolbarVisible=parseInt(pValue,10);Z.toolbarAutoShowHide=0!=Z.toolbarVisible&&1!=Z.toolbarVisible&&6!=Z.toolbarVisible&&7!=Z.toolbarVisible&&8!=Z.toolbarVisible;break;case "zLogoVisible":"0"==pValue&&(Z.logoVisible=!1);break;case "zMinimizeVisible":"0"==pValue&&(Z.minimizeVisible=!1);break;case "zSliderVisible":"0"==pValue&&
(Z.sliderZoomVisible=!1);break;case "zZoomButtonsVisible":"0"==pValue&&(Z.zoomButtonsVisible=!1);break;case "zPanButtonsVisible":"0"==pValue&&(Z.panButtonsVisible=!1);break;case "zResetVisible":"0"==pValue&&(Z.resetVisible=!1);break;case "zFullViewVisible":"1"==pValue?(Z.fullScreenVisible=!0,Z.fullPageVisible=!1):"0"==pValue&&(Z.fullScreenVisible=!1,Z.fullPageVisible=!1);break;case "zFullScreenVisible":"0"==pValue&&(Z.fullScreenVisible=!1,Z.fullPageVisible=!1);break;case "zFullPageVisible":"1"==pValue&&
(Z.fullScreenVisible=!1,Z.fullPageVisible=!0);break;case "zInitialFullPage":"1"==pValue&&(Z.initialFullPage=!0);break;case "zFullPageInitial":alert(Z.Utils.getResource("z275")+" zFullPageInitial is now zInitialFullPage");break;case "zSkinPath":Z.skinPath=pValue;break;case "zTooltipsVisible":"0"==pValue&&(Z.tooltipsVisible=!1);break;case "zHelpVisible":Z.helpVisible=parseInt(pValue,10);break;case "zHelpPath":Z.helpPath=pValue;Z.helpCustom=!0;break;case "zHelpWidth":isNaN(parseInt(pValue,10))||(Z.helpW=
parseInt(pValue,10));break;case "zHelpHeight":isNaN(parseInt(pValue,10))||(Z.helpH=parseInt(pValue,10));break;case "zHelpLeft":isNaN(parseInt(pValue,10))||(Z.helpL=parseInt(pValue,10));break;case "zHelpTop":isNaN(parseInt(pValue,10))||(Z.helpT=parseInt(pValue,10));break;case "zProgressVisible":"0"==pValue&&(Z.progressVisible=!1);break;case "zMessagesVisible":"0"==pValue&&(Z.messagesVisible=!1);break;default:if(Z.proParamsEnabled)switch(w){case "zXMLParametersPath":Z.xmlParametersPath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);
Z.loadParametersXML();break;case "zZoomSpeed":Z.zoomSpeed=parseInt(pValue,10);break;case "zPanSpeed":Z.panSpeed=parseInt(pValue,10);break;case "zFadeInSpeed":Z.fadeInSpeed=parseInt(pValue,10);Z.fadeIn=0<Z.fadeInSpeed&&!Z.imageFilters;break;case "zInteractive":"0"==pValue&&(Z.interactive=!1,Z.navigatorVisible=!1,Z.toolbarVisible=!1,Z.clickZoom=!1,Z.doubleClickZoom=!1,Z.clickPan=!1,Z.mousePan=!1,Z.keys=!1);break;case "zClickZoom":"0"==pValue&&(Z.clickZoom=!1);break;case "zDoubleClickZoom":"0"==pValue&&
(Z.doubleClickZoom=!1);break;case "zDoubleClickDelay":Z.doubleClickDelay=parseInt(pValue,10);break;case "zClickPan":"0"==pValue&&(Z.clickPan=!1);break;case "zMousePan":"0"==pValue&&(Z.mousePan=!1);break;case "zKeys":"0"==pValue&&(Z.keys=!1);break;case "zConstrainPan":Z.constrainPan="0"!=pValue;Z.constrainPanLimit=parseInt(pValue,10);Z.constrainPanStrict="3"==pValue;break;case "zPanBuffer":k=parseFloat(pValue);isNaN(k)||(Z.panBuffer=k);break;case "zSmoothPan":"0"==pValue&&(Z.smoothPan=!1);break;case "zSmoothPanEasing":k=
parseInt(pValue,10);1<=k&&5>=k&&(Z.smoothPanEasing=k);break;case "zSmoothPanGlide":k=parseInt(pValue,10);1<=k&&5>=k&&(Z.smoothPanGlide=k);break;case "zSmoothZoom":"0"==pValue&&(Z.smoothZoom=!1);break;case "zSmoothZoomEasing":k=parseInt(pValue,10);1<=k&&4>=k&&(Z.smoothZoomEasing=k);break;case "zAutoResize":"1"==pValue&&(Z.autoResize=!0);break;case "zCanvas":"0"==pValue&&(Z.canvas=!1);Z.canvasSupported&&Z.canvas||(Z.useCanvas=!1);break;case "zBaseZIndex":Z.baseZIndex=parseInt(pValue,10);break;case "zDebug":Z.debug=
parseInt(pValue,10);break;case "zImageProperties":Z.imageProperties=pValue;break;case "zNavigatorWidth":!isNaN(parseInt(pValue,10))&&(Z.navigatorW=parseInt(pValue,10),0<Z.rulerVisible&&null===Z.rulerW||-1==Z.rulerW)&&(Z.rulerW=Z.navigatorW);break;case "zNavigatorHeight":isNaN(parseInt(pValue,10))||(Z.navigatorH=parseInt(pValue,10));break;case "zNavigatorLeft":isNaN(parseInt(pValue,10))||(Z.navigatorL=parseInt(pValue,10));break;case "zNavigatorTop":isNaN(parseInt(pValue,10))||(Z.navigatorT=parseInt(pValue,
10));break;case "zNavigatorFit":isNaN(parseFloat(pValue))||(Z.navigatorFit=parseInt(pValue,10));break;case "zGalleryVisible":Z.galleryVisible=parseInt(pValue,10);Z.galleryAutoShowHide=2==Z.galleryVisible;break;case "zGalleryWidth":isNaN(parseInt(pValue,10))||(Z.galleryW=parseInt(pValue,10));break;case "zGalleryHeight":isNaN(parseInt(pValue,10))||(Z.galleryH=parseInt(pValue,10));break;case "zGalleryLeft":isNaN(parseInt(pValue,10))||(Z.galleryL=parseInt(pValue,10));break;case "zGalleryTop":isNaN(parseInt(pValue,
10))||(Z.galleryT=parseInt(pValue,10));break;case "zGalleryPosition":Z.galleryPosition=parseInt(pValue,10);break;case "zToolbarPosition":Z.toolbarPosition=parseInt(pValue,10);break;case "zLogoCustomPath":Z.logoCustomPath=pValue;break;case "zBookmarksGet":"1"==pValue&&(Z.bookmarksGet=!0);break;case "zBookmarksSet":"1"==pValue&&(Z.bookmarksSet=!0);break;case "zCopyrightPath":Z.copyrightPath=pValue;break;case "zWatermarkPath":Z.watermarkPath=pValue;Z.watermarks=!0;break;case "zVirtualPointerVisible":"1"==
pValue&&(Z.virtualPointerVisible=!0);break;case "zCrosshairsVisible":"1"==pValue&&(Z.crosshairsVisible=!0);break;case "zZoomRectangle":"0"==pValue&&(Z.zoomRectangle=!1);break;case "zRulerVisible":Z.rulerVisible=parseInt(pValue,10);break;case "zRulerListType":this.stringValidate(pValue)&&(Z.rulerListType=pValue);break;case "zRulerWidth":isNaN(parseInt(pValue,10))||(Z.rulerW=parseInt(pValue,10));break;case "zRulerHeight":isNaN(parseInt(pValue,10))||(Z.rulerH=parseInt(pValue,10));break;case "zRulerLeft":isNaN(parseInt(pValue,
10))||(Z.rulerL=parseInt(pValue,10));break;case "zRulerTop":isNaN(parseInt(pValue,10))||(Z.rulerT=parseInt(pValue,10));break;case "zUnits":this.stringValidate(pValue)&&(Z.units=pValue);break;case "zUnitsPerImage":isNaN(parseFloat(pValue))||(Z.unitsPerImage=parseFloat(pValue));break;case "zPixelsPerUnit":isNaN(parseFloat(pValue))||(Z.pixelsPerUnit=parseFloat(pValue));break;case "zSourceMagnification":isNaN(parseInt(pValue,10))||(Z.sourceMagnification=parseInt(pValue,10));break;case "zMagnification":alert(Z.Utils.getResource("z275")+
" zMagnification is now zSourceMagnification");break;case "zMeasureVisible":Z.measureVisible="1"==pValue;break;case "zRotationVisible":"0"!=pValue&&(Z.rotationVisible=!0,Z.rotationFree="1"==pValue);break;case "zInitialRotation":isNaN(parseFloat(pValue))||(Z.initialR=parseInt(pValue,10));break;case "zImageListPath":Z.imageListPath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);Z.imageList=!0;break;case "zScreensaver":"1"==pValue&&(Z.screensaver=!0,Z.tour=!0);break;case "zScreensaverSpeed":Z.screensaverSpeed=
parseInt(pValue,10);break;case "zTourPath":Z.tourPath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);Z.hotspotPath=Z.tourPath;Z.hotspotFolder=Z.hotspotPath;".xml"==Z.hotspotPath.toLowerCase().substring(Z.hotspotPath.length-4,Z.hotspotPath.length)&&(Z.hotspotFolder=Z.hotspotFolder.substring(0,Z.hotspotFolder.lastIndexOf("/")));Z.tour=!0;break;case "zTourListTitle":Z.tourListTitle=pValue;break;case "zComparisonPath":Z.imageSetPath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);Z.imageSet=
!0;Z.comparison=!0;Z.smoothPan=!1;break;case "zSyncVisible":"0"==pValue&&(Z.syncVisible=!1);break;case "zInitialSync":"0"==pValue&&(Z.initialSync=!1);break;case "zSlidePath":Z.slidePath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);Z.slideshow=!0;break;case "zSlideListTitle":Z.slideListTitle=pValue;break;case "zHotspotPath":Z.hotspotPath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);Z.hotspotFolder=Z.hotspotPath;".xml"==Z.hotspotPath.toLowerCase().substring(Z.hotspotPath.length-4,Z.hotspotPath.length)&&
(Z.hotspotFolder=Z.hotspotFolder.substring(0,Z.hotspotFolder.lastIndexOf("/")));Z.hotspots=!0;break;case "zHotspotListTitle":Z.hotspotListTitle=pValue;break;case "zHotspotsDrawOnlyInView":"0"==pValue&&(Z.hotspotsDrawOnlyInView=!1);break;case "zCaptionBoxes":"1"==pValue&&(Z.captionBoxes=!0);break;case "zCaptionTextColor":Z.captionTextColor=Z.Utils.stringValidateColorValue(pValue);Z.captionsColorsDefault=!1;break;case "zCaptionBackColor":Z.captionBackColor=Z.Utils.stringValidateColorValue(pValue);Z.captionsColorsDefault=
!1;break;case "zPolygonLineColor":Z.polygonLineColor=Z.Utils.stringValidateColorValue(pValue);break;case "zPolygonFillColor":Z.polygonFillColor=Z.Utils.stringValidateColorValue(pValue);break;case "zCaptionTextVisible":"0"==pValue&&(Z.captionTextVisible=!1);break;case "zCaptionBackVisible":"0"==pValue&&(Z.captionBackVisible=!1);break;case "zPolygonLineVisible":"0"==pValue&&(Z.polygonLineVisible=!1);break;case "zPolygonFillVisible":"1"==pValue&&(Z.polygonFillVisible=!0);break;case "zCoordinatesVisible":"1"==
pValue&&(Z.coordinatesVisible=!0);break;case "zGeoCoordinatesPath":Z.geoCoordinatesPath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);Z.geoCoordinatesFolder=Z.geoCoordinatesPath;".xml"==Z.geoCoordinatesPath.toLowerCase().substring(Z.geoCoordinatesPath.length-4,Z.geoCoordinatesPath.length)&&(Z.geoCoordinatesFolder=Z.geoCoordinatesFolder.substring(0,Z.geoCoordinatesFolder.lastIndexOf("/")));Z.geoCoordinatesVisible=!0;Z.coordinatesVisible=!0;break;case "zPreloadVisible":"1"==pValue&&(Z.preloadVisible=
!0);break;case "zOverlayPath":Z.imageSetPath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);Z.imageSet=!0;Z.overlays=!0;break;case "zOverlayJSONObject":Z.overlayJSONObject=pValue;Z.imageSet=!0;Z.overlays=!0;break;case "zAnimationPath":Z.imageSetPath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);Z.imageSet=!0;Z.animation=!0;Z.mouseWheelParmeterProvided||(Z.mouseWheel=parseInt(this.getResource("DEFAULT_MOUSEWHEELANIMATION"),10),Z.sliderFocus=2==Z.mouseWheel?"imageSet":"zoom");Z.constrainPanStrict||
(Z.constrainPanStrict=!0);break;case "zAnimationAxis":Z.animationAxis=this.stringValidate(pValue)&&"vertical"==pValue?"vertical":"horizontal";break;case "zAnimator":Z.animator=this.stringValidate(pValue)&&"motion"==pValue?"motion":"position";break;case "zAnimationFlip":"1"==pValue&&(Z.animationFlip=!0);break;case "zImageSetSliderVisible":"0"==pValue&&(Z.sliderImageSetVisible=!1);break;case "zMouseWheel":Z.mouseWheel=parseInt(pValue,10);Z.sliderFocus=2==Z.mouseWheel?"imageSet":"zoom";break;case "zTilesPNG":"1"==
pValue&&(Z.tileType="png");break;case "zTileW":Z.tileW=parseInt(pValue,10);break;case "zTileH":Z.tileH=parseInt(pValue,10);break;default:if(Z.enterpriseParamsEnabled)switch(w){case "zImageFiltersVisible":if(Z.Utils.stringValidate(pValue))switch(pValue){case "all":Z.brightnessVisible=!0;Z.contrastVisible=!0;Z.sharpnessVisible=!0;Z.blurrinessVisible=!0;Z.colorRedVisible=!0;Z.colorGreenVisible=!0;Z.colorBlueVisible=!0;Z.colorRedRangeVisible=!0;Z.colorGreenRangeVisible=!0;Z.colorBlueRangeVisible=!0;Z.gammaVisible=
!0;Z.gammaRedVisible=!0;Z.gammaGreenVisible=!0;Z.gammaBlueVisible=!0;Z.hueVisible=!0;Z.saturationVisible=!0;Z.lightnessVisible=!0;Z.whiteBalanceVisible=!0;Z.noiseVisible=!0;Z.grayscaleVisible=!0;Z.thresholdVisible=!0;Z.inversionVisible=!0;Z.edgesVisible=!0;Z.sepiaVisible=!0;break;case "creative":Z.brightnessVisible=!0;Z.contrastVisible=!0;Z.sharpnessVisible=!0;Z.blurrinessVisible=!0;Z.colorRedVisible=!0;Z.colorGreenVisible=!0;Z.colorBlueVisible=!0;Z.gammaVisible=!0;Z.whiteBalanceVisible=!0;Z.noiseVisible=
!0;Z.grayscaleVisible=!0;Z.inversionVisible=!0;Z.sepiaVisible=!0;break;case "hsl":Z.hueVisible=!0;Z.saturationVisible=!0;Z.lightnessVisible=!0;break;case "pathology":Z.brightnessVisible=!0;Z.contrastVisible=!0;Z.sharpnessVisible=!0;Z.gammaRedVisible=!0;Z.gammaGreenVisible=!0;Z.gammaBlueVisible=!0;Z.whiteBalanceVisible=!0;Z.thresholdVisible=!0;Z.edgesVisible=!0;break;case "colors":Z.colorRedVisible=!0;Z.colorGreenVisible=!0;Z.colorBlueVisible=!0;break;case "ranges":Z.colorRedRangeVisible=!0;Z.colorGreenRangeVisible=
!0;Z.colorBlueRangeVisible=!0;break;case "gammaColors":Z.gammaRedVisible=!0,Z.gammaGreenVisible=!0,Z.gammaBlueVisible=!0}break;case "zInitialImageFilters":"0"==pValue&&(Z.initialImageFilters=!1);break;case "zBrightnessVisible":"1"==pValue&&(Z.brightnessVisible=!0);break;case "zContrastVisible":"1"==pValue&&(Z.contrastVisible=!0);break;case "zSharpnessVisible":"1"==pValue&&(Z.sharpnessVisible=!0);break;case "zBlurrinessVisible":"1"==pValue&&(Z.blurrinessVisible=!0);break;case "zColorRedVisible":"1"==
pValue&&(Z.colorRedVisible=!0);break;case "zColorGreenVisible":"1"==pValue&&(Z.colorGreenVisible=!0);break;case "zColorBlueVisible":"1"==pValue&&(Z.colorBlueVisible=!0);break;case "zColorRedRangeVisible":"1"==pValue&&(Z.colorRedRangeVisible=!0);break;case "zColorGreenRangeVisible":"1"==pValue&&(Z.colorGreenRangeVisible=!0);break;case "zColorBlueRangeVisible":"1"==pValue&&(Z.colorBlueRangeVisible=!0);break;case "zGammaVisible":"1"==pValue&&(Z.gammaVisible=!0);break;case "zGammaRedVisible":"1"==pValue&&
(Z.gammaRedVisible=!0);break;case "zGammaGreenVisible":"1"==pValue&&(Z.gammaGreenVisible=!0);break;case "zGammaBlueVisible":"1"==pValue&&(Z.gammaBlueVisible=!0);break;case "zHueVisible":"1"==pValue&&(Z.hueVisible=!0);break;case "zSaturationVisible":"1"==pValue&&(Z.saturationVisible=!0);break;case "zLightnessVisible":"1"==pValue&&(Z.lightnessVisible=!0);break;case "zWhiteBalanceVisible":"1"==pValue&&(Z.whiteBalanceVisible=!0);break;case "zNormalizeVisible":"1"==pValue&&(Z.normalizeVisible=!0);break;
case "zEqualizeVisible":"1"==pValue&&(Z.equalizeVisible=!0);break;case "zNoiseVisible":"1"==pValue&&(Z.noiseVisible=!0);break;case "zGrayscaleVisible":"1"==pValue&&(Z.grayscaleVisible=!0);break;case "zThresholdVisible":"1"==pValue&&(Z.thresholdVisible=!0);break;case "zInversionVisible":"1"==pValue&&(Z.inversionVisible=!0);break;case "zEdgesVisible":"1"==pValue&&(Z.edgesVisible=!0);break;case "zSepiaVisible":"1"==pValue&&(Z.sepiaVisible=!0);break;case "zAnnotationPath":Z.annotationPath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);
"undefined"!==typeof Z.annotationPath&&Z.Utils.stringValidate(Z.annotationPath)?(Z.annotationFolder=Z.annotationPath,".xml"==Z.annotationPath.toLowerCase().substring(Z.annotationPath.length-4,Z.annotationPath.length)&&(Z.annotationFolder=Z.annotationFolder.substring(0,Z.annotationFolder.lastIndexOf("/"))),Z.annotations=!0):alert(this.getResource("ERROR_ANNOTATIONPATHMISSING"));break;case "zAnnotationPanelVisible":Z.annotationPanelVisible=parseInt(pValue,10);break;case "zAnnotationXMLText":Z.annotationXMLText=
pValue;Z.annotations=!0;break;case "zLabelIconsInternal":"0"==pValue&&(Z.labelIconsInternal=!1);break;case "zAnnotationJSONObject":Z.annotationJSONObject=pValue;Z.annotations=!0;break;case "zAnnotationsAddMultiple":"0"==pValue&&(Z.annotationsAddMultiple=!1);break;case "zAnnotationsAutoSave":"0"==pValue&&(Z.annotationsAutoSave=!1);break;case "zSaveButtonVisible":"0"==pValue&&(Z.saveButtonVisible=!1);break;case "zLabelClickSelect":"1"==pValue&&(Z.labelClickSelect=!0);break;case "zSimplePath":"1"==pValue&&
(Z.simplePath=!0);break;case "zNoPost":"1"==pValue&&(Z.noPost=!0);break;case "zNoPostDefaults":"1"==pValue&&(Z.noPostDefaults=!0);break;case "zUnsavedEditsTest":"0"==pValue&&(Z.unsavedEditsTest=!1);break;case "zAnnotationSort":Z.annotationSort=pValue;break;case "zMaskVisible":"1"==pValue&&(Z.maskVisible=!0);break;case "zMaskFadeSpeed":Z.maskFadeSpeed=parseInt(pValue,10);break;case "zMaskClearOnUserAction":"0"==pValue&&(Z.maskClearOnUserAction=!1);break;case "zFreehandVisible":"0"==pValue&&(Z.freehandVisible=
!1);break;case "zTextVisible":"0"==pValue&&(Z.textVisible=!1);break;case "zIconVisible":"0"==pValue&&(Z.iconVisible=!1);break;case "zRectangleVisible":"0"==pValue&&(Z.rectangleVisible=!1);break;case "zPolygonVisible":"0"==pValue&&(Z.polygonVisible=!1);break;case "zMarkupMode":if("1"==pValue||"2"==pValue)Z.annotationPathProvided||Z.imageSetPathProvided?(Z.editMode="markup",Z.editing="addLabel","2"==pValue&&(Z.editAdmin=!0)):alert(this.getResource("ERROR_ANNOTATIONPATHMISSING"));break;case "zEditMode":if("1"==
pValue||"2"==pValue)Z.annotationPathProvided||Z.imageSetPathProvided?(Z.editMode="edit","2"==pValue&&(Z.editAdmin=!0)):alert(this.getResource("ERROR_ANNOTATIONPATHMISSING"));break;case "zSlidestackPath":Z.imageSetPath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);Z.imageSet=!0;Z.slidestack=!0;Z.mouseWheelParmeterProvided||(Z.mouseWheel=parseInt(this.getResource("DEFAULT_MOUSEWHEELSLIDESTACK"),10),Z.sliderFocus=2==Z.mouseWheel?"imageSet":"zoom");break;case "zSaveHandlerPath":Z.saveHandlerPath=
pValue;break;case "zSaveImageHandlerPath":Z.saveImageHandlerPath=pValue;break;case "zSaveImageFull":"1"==pValue&&(Z.saveImageFull=!0);break;case "zSaveImageFilename":Z.Utils.stringValidate(pValue)&&(Z.saveImageFilename=pValue);break;case "zSaveImageFormat":switch(pValue.toLowerCase()){case "png":Z.saveImageFormat="png";break;default:Z.saveImageFormat="jpg"}break;case "zSaveImageCompression":k=parseFloat(pValue);!isNaN(k)&&.1<=k&&1>=k&&(Z.saveImageCompression=k);break;case "zSaveImageBackColor":Z.saveImageBackColor=
Z.Utils.stringValidateColorValue(pValue);break;case "zTrackingPath":Z.trackingPath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);"undefined"!==typeof Z.trackingPath&&Z.Utils.stringValidate(Z.trackingPath)?(Z.trackingFolder=Z.trackingPath,".xml"==Z.trackingPath.toLowerCase().substring(Z.trackingPath.length-4,Z.trackingPath.length)&&(Z.trackingFolder=Z.trackingFolder.substring(0,Z.trackingFolder.lastIndexOf("/"))),Z.tracking=!0):alert(this.getResource("ERROR_TRACKINGPATHMISSING"));break;case "zTrackingEditMode":"1"==
pValue&&(Z.trackingPathProvided?(Z.trackingEditMode="edit",Z.markupMode=!0,Z.editMode="markup",Z.editing="addLabel",Z.labelMode="counter"):alert(this.getResource("ERROR_TRACKINGPATHMISSING")));break;case "zTrackingAuto":"1"==pValue&&(Z.trackingAuto=!0);break;case "zTrackingPanelVisible":Z.trackingPanelVisible=parseInt(pValue,10);break;case "zInitialTrackingOverlayVisible":"0"==pValue&&(Z.initialTrackingOverlayVisible=!1);break;case "zUserLogin":"1"==pValue?Z.userLogin="request":"skip"==pValue?(Z.userName=
this.getResource("CONTENT_SKIPUSERNAME"),Z.userInitials=Z.Utils.stringGetInitials(Z.userName)):Z.Utils.stringValidate(pValue)&&(Z.userName=pValue,Z.userInitials=Z.Utils.stringGetInitials(Z.userName));break;case "zUserNamePrompt":Z.Utils.stringValidate(pValue)&&(Z.userNamePrompt=pValue);break;case "zUserPath":Z.userPath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);"undefined"!==typeof Z.userPath&&Z.Utils.stringValidate(Z.userPath)?(Z.userFolder=Z.userPath,".xml"==Z.userPath.toLowerCase().substring(Z.userPath.length-
4,Z.userPath.length)&&(Z.userFolder=Z.userFolder.substring(0,Z.userFolder.lastIndexOf("/"))),Z.userLogging=!0):alert(this.getResource("ERROR_USERPATHMISSING"));break;case "zUserPanelVisible":"0"!=pValue&&(Z.userPathProvided?Z.userPanelVisible=parseInt(pValue,10):alert(this.getResource("ERROR_USERPATHMISSING")));break;default:if(Z.specialStorageEnabled==e)alert(g+" "+w);else switch(w){case "zServerIP":Z.serverIP=pValue;break;case "zServerPort":Z.serverPort=pValue;break;case "zTileHandlerPath":Z.tileHandlerPath=
pValue;break;case "zIIIFScheme":Z.iiifScheme=pValue;break;case "zIIIFServer":Z.iiifServer=pValue;break;case "zIIIFPrefix":Z.iiifPrefix=pValue;break;case "zIIIFIdentifier":Z.iiifIdentifier=pValue;break;case "zIIIFRegion":Z.iiifRegion=pValue;break;case "zIIIFSize":Z.iiifSize=pValue;break;case "zIIIFRotation":Z.iiifRotation=pValue;break;case "zIIIFQuality":Z.iiifQuality=pValue;break;case "zIIIFFormat":Z.iiifFormat=pValue;break;case "zImageW":Z.imageW=parseInt(pValue,10);Z.imageCtrX=Z.imageW/2;null!=
Z.imageW&&0<Z.imageW&&null!=Z.imageH&&0<Z.imageH&&(Z.imageD=Math.round(Math.sqrt(Z.imageW*Z.imageW+Z.imageH*Z.imageH)));break;case "zImageH":Z.imageH=parseInt(pValue,10);Z.imageCtrY=Z.imageH/2;null!=Z.imageW&&0<Z.imageW&&null!=Z.imageH&&0<Z.imageH&&(Z.imageD=Math.round(Math.sqrt(Z.imageW*Z.imageW+Z.imageH*Z.imageH)));break;case "zFocal":Z.focal=parseInt(pValue,10);break;case "zQuality":Z.quality=parseInt(pValue,10)}}else alert(m+" "+w)}else alert(a+" "+w)}else alert(f+" "+w)}Z.Utils.getBookmarksURL();
if(Z.brightnessVisible||Z.contrastVisible||Z.sharpnessVisible||Z.blurrinessVisible||Z.colorRedVisible||Z.colorGreenVisible||Z.colorBlueVisible||Z.colorRedRangeVisible||Z.colorGreenRangeVisible||Z.colorBlueRangeVisible||Z.gammaVisible||Z.gammaRedVisible||Z.gammaGreenVisible||Z.gammaBlueVisible||Z.hueVisible||Z.saturationVisible||Z.lightnessVisible||Z.whiteBalanceVisible||Z.normalizeVisible||Z.equalizeVisible||Z.noiseVisible||Z.grayscaleVisible||Z.thresholdVisible||Z.inversionVisible||Z.edgesVisible||
Z.sepiaVisible)Z.imageFilters=!0,Z.imageFiltersVisible=!0,Z.fadeIn=!1;if(Z.Utils.stringValidate(Z.annotationPath)||Z.Utils.stringValidate(Z.saveHandlerPath)||Z.Utils.stringValidate(Z.saveImageHandlerPath))Z.enterpriseParamsEnabled?Z.Utils.stringValidate(Z.saveHandlerPath)&&(b=Z.saveImageHandlerPath,Z.saveHandlerPath=Z.saveHandlerPath,Z.saveImageHandlerPath=b):(Z.annotationPath="",alert(m));Z.Utils.validateImagePath()},resetParametersXYZ:function(b){isNaN(parseFloat(this.getResource("z143")))||(Z.initialX=
parseFloat(this.getResource("z143")));isNaN(parseFloat(this.getResource("z144")))||(Z.initialY=parseFloat(this.getResource("z144")));isNaN(parseFloat(this.getResource("z145")))||(Z.initialZ=parseFloat(this.getResource("z145")));isNaN(parseFloat(this.getResource("z163")))||(Z.minZ=parseFloat(this.getResource("z163")));isNaN(parseFloat(this.getResource("z153")))||(Z.maxZ=parseFloat(this.getResource("z153")));if(this.stringValidate(b))for(var a=0,e=b.length;a<e;a++){var f=b[a],g=f.indexOf("=");if(0<
g){var m=f.substring(0,g),f=f.substring(g+1);if(this.stringValidate(f))switch(m){case "zInitialX":isNaN(parseFloat(f))||(Z.initialX=parseFloat(f));break;case "zInitialY":isNaN(parseFloat(f))||(Z.initialY=parseFloat(f));break;case "zInitialZoom":"fit"==f&&(f="-1");"fill"==f&&(f="0");isNaN(parseFloat(f))||(Z.initialZ=parseFloat(f),Z.initialZ&&0<Z.initialZ&&100>=Z.initialZ&&(Z.initialZ/=100));break;case "zMinZoom":"fit"==f&&(f="-1");"fill"==f&&(f="0");isNaN(parseFloat(f))||(Z.minZ=parseFloat(f),Z.minZ&&
0<Z.minZ&&100>=Z.minZ&&(Z.minZ/=100));break;case "zMaxZoom":isNaN(parseFloat(f))||(Z.maxZ=parseFloat(f),Z.maxZ&&-1!=Z.maxZ&&(Z.maxZ/=100))}}}},readCookie:function(b){b+="=";for(var a=document.cookie.split(";"),e=0,f=a.length;e<f;e++){for(var g=a[e];" "==g.charAt(0);)g=g.substring(1,g.length);if(0==g.indexOf(b))return g.substring(b.length,g.length)}return null},validateImagePath:function(b){b="undefined"!==typeof b&&Z.Utils.stringValidate(b)?b:Z.imagePath;if(null!==b){var a=this.getResource("z213");
if(-1!=b.toLowerCase().indexOf(".zif"))Z.zifSupported?(Z.tileSource="ZoomifyImageFile",Z.Utils.validateResponseArrayFunctionality()):alert(this.getResource("z16"));else if(-1!=b.toLowerCase().indexOf(".jpg")||-1!=b.toLowerCase().indexOf(".png"))Z.tileSource="unconverted";else if(-1!=b.toLowerCase().indexOf(".pff"))Z.specialStorageEnabled?(Z.tileSource="ZoomifyPFFFile",b=Z.tileHandlerPath,Z.tileHandlerPathFull=b):alert(a);else if(Z.Utils.stringValidate(Z.iiifServer)){Z.tileSource="IIIFImageServer";
b="undefined"!=typeof Z.iiifScheme&&Z.Utils.stringValidate(Z.iiifScheme)?Z.iiifScheme+"://":"https://";var a="undefined"!=typeof Z.iiifServer&&Z.Utils.stringValidate(Z.iiifServer)?Z.iiifServer+"/":null,e="undefined"!=typeof Z.iiifPrefix&&Z.Utils.stringValidate(Z.iiifPrefix)?Z.iiifPrefix+"/":null,f="undefined"!=typeof Z.iiifIdentifier&&Z.Utils.stringValidate(Z.iiifIdentifier)?Z.iiifIdentifier:null;Z.imagePath=b&&a&&f?b+a+e+f:Z.Utils.getResource("ERROR_SETTINGIIIFIMAGEPATH")}else Z.Utils.stringValidate(Z.tileHandlerPath)?
Z.Utils.stringValidate(Z.tileHandlerPath)&&(Z.specialStorageEnabled?(Z.tileSource="ImageServer",b=Z.tileHandlerPath,Z.tileHandlerPathFull=b):alert(a)):Z.tileSource="ZoomifyImageFolder"}else if(Z.imageSet||Z.slideshow)Z.tileSourceMultiple=!0},clearImageParameters:function(){Z.imagePath=null;Z.imagePath2=null;Z.parameters=null;Z.xmlParametersPath=null;Z.xmlParametersParsing=null;Z.initialX=null;Z.initialY=null;Z.initialZ=null;Z.minZ=null;Z.maxZ=null;Z.geoCoordinatesPath=null;Z.geoCoordinatesVisible=
null;Z.geoCoordinatesFolder=null;Z.tour=!1;Z.tourPath=null;Z.tourPlaying=null;Z.tourStop=!1;Z.hotspots=!1;Z.hotspotPath=null;Z.hotspotFolder=null;Z.annotations=!1;Z.annotationPath=null;Z.annotationPanelVisible=null;Z.annotationFolder=null;Z.annotationJSONObject=null;Z.annotationXMLText=null;Z.labelIconsInternal=null;Z.annotationsAddMultiple=null;Z.annotationsAutoSave=null;Z.postingXML=!1;Z.postingImage=!1;Z.initialR=null;Z.unitsPerImage=null;Z.pixelsPerUnit=null;Z.sourceMagnification=null;Z.imageProperties=
null;Z.annotationPathProvided=!1;Z.imageSetPathProvided=!1;Z.slidePathProvided=!1;Z.tileSource=null;Z.tileSourceMultiple=null;Z.focal=null;Z.quality=null;Z.tracking||(Z.markupMode=null,Z.editMode=null,Z.editAdmin=!1,Z.editing=null,Z.labelMode="view",Z.editModePrior=Z.editMode);Z.sliderFocus="zoom";Z.animation=!1;Z.animationPath=null;Z.animationCount=0;Z.animationAxis=null;Z.animator=null;Z.animationFlip=null;Z.slidestack=!1;Z.slidestackPath=null;Z.brightnessVisible=null;Z.contrastVisible=null;Z.sharpnessVisible=
null;Z.blurrinessVisible=null;Z.colorRedVisible=null;Z.colorGreenVisible=null;Z.colorBlueVisible=null;Z.colorRedRangeVisible=null;Z.colorGreenRangeVisible=null;Z.colorBlueRangeVisible=null;Z.colorRedRangeMin=null;Z.colorRedRangeMax=null;Z.colorGreenRangeMin=null;Z.colorGreenRangeMax=null;Z.colorBlueRangeMin=null;Z.colorBlueRangeMax=null;Z.gammaVisible=null;Z.gammaRedVisible=null;Z.gammaGreenVisible=null;Z.gammaBlueVisible=null;Z.hueVisible=null;Z.saturationVisible=null;Z.lightnessVisible=null;Z.whiteBalanceVisible=
null;Z.grayscaleVisible=null;Z.thresholdVisible=null;Z.inversionVisible=null;Z.normalizeVisible=null;Z.equalizeVisible=null;Z.edgesVisible=null;Z.sepiaVisible=null;Z.mouseWheelParmeterProvided=null;Z.mouseWheel=null;Z.imageSetHotspotPath=null;Z.hotspotFileShared=!1;Z.imageSetAnnotationPath=null;Z.annotationFileShared=!1;Z.imageW=null;Z.imageH=null;Z.imageD=null;Z.imageCtrX=null;Z.imageCtrY=null;Z.imageX=0;Z.imageY=0;Z.imageZ=0;Z.imageR=0;Z.fitZ=null;Z.fillZ=null;Z.zooming="stop";Z.panningX="stop";
Z.panningY="stop";Z.rotating="stop";Z.fullView=!1;Z.fullViewPrior=!1;Z.iiifInfoJSONObject=null;Z.iiifIdentifier=null;Z.iiifRegion=null;Z.iiifSize=null;Z.iiifRotation=null;Z.iiifQuality=null;Z.iiifFormat=null},getResource:function(b){var a="";switch(b){case "z110":a="Enable Express parameters";break;case "z109":a="Changing This Violates License Agreement";break;case "z108":a="Support for this parameter is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Express, Pro, and Enterprise editions: ";
break;case "z187":a="Enable Pro parameters";break;case "z186":a="Changing This Violates License Agreement";break;case "z185":a="Support for this parameter is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Pro and Enterprise editions: ";break;case "z215":a="Enable special storage support";break;case "z214":a="Changing this violates License Agreement";break;case "z213":a="Support for Zoomify Image File (PFF) storage and other special storage options is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Enterprise edition.";
break;case "z107":a="Enable Enterprise parameters";break;case "z106":a="Changing this violates License Agreement";break;case "z105":a="Support for this parameter is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Enterprise edition: ";break;case "DEFAULT_PARAMETERLISTTEXT":a="zImagePath,zImagePath2,zOnAnnotationReady,zOnReady,zInitialX,zInitialY,zInitialZoom,zMinZoom,zMaxZoom,zNavigatorVisible,zToolbarInternal,zToolbarVisible,zLogoVisible,zMinimizeVisible,zSliderVisible,zZoomButtonsVisible,zPanButtonsVisible,zResetVisible,zFullViewVisible,zFullScreenVisible,zFullPageVisible,zInitialFullPage,zSkinPath,zTooltipsVisible,zHelpVisible,zHelpPath,zHelpWidth,zHelpHeight,zHelpLeft,zHelpTop,zProgressVisible,zMessagesVisible,zZoomSpeed,zPanSpeed,zFadeInSpeed,zInteractive,zClickZoom,zDoubleClickZoom,zDoubleClickDelay,zClickPan,zMousePan,zKeys,zConstrainPan,zPanBuffer,zSmoothPan,zSmoothPanEasing,zSmoothPanGlide,zSmoothZoom,zSmoothZoomEasing,zAutoResize,zCanvas,zBaseZIndex,zDebug,zImageProperties,zNavigatorWidth,zNavigatorHeight,zNavigatorLeft,zNavigatorTop,zNavigatorFit,zNavigatorRectangleColor,zGalleryVisible,zGalleryWidth,zGalleryHeight,zGalleryLeft,zGalleryTop,zGalleryPosition,zToolbarPosition,zLogoCustomPath,zBookmarksGet,zBookmarksSet,zCopyrightPath,zWatermarkPath,zVirtualPointerVisible,zCrosshairsVisible,zZoomRectangle,zRulerVisible,zRulerListType,zRulerWidth,zRulerHeight,zRulerLeft,zRulerTop,zUnits,zUnitsPerImage,zPixelsPerUnit,zSourceMagnification,zMagnification,zMeasureVisible,zRotationVisible,zInitialRotation,zImageListPath,zScreensaver,zScreensaverSpeed,zTourPath,zTourListTitle,zComparisonPath,zSyncVisible,zInitialSync,zSlidePath,zSlideListTitle,zHotspotPath,zHotspotListTitle,zHotspotsDrawOnlyInView,zCaptionBoxes,zCaptionTextColor,zCaptionBackColor,zPolygonLineColor,zPolygonFillColor,zCaptionTextVisible,zCaptionBackVisible,zPolygonLineVisible,zPolygonFillVisible,zCoordinatesVisible,zGeoCoordinatesPath,zPreloadVisible,zOverlayPath,zOverlayJSONObject,zAnimationPath,zAnimationAxis,zAnimator,zAnimationFlip,zImageSetSliderVisible,zMouseWheel,zTilesPNG,zTileW,zTileH,zImageFiltersVisible,zInitialImageFilters,zBrightnessVisible,zContrastVisible,zSharpnessVisible,zBlurrinessVisible,zColorRedVisible,zColorGreenVisible,zColorBlueVisible,zColorRedRangeVisible,zColorGreenRangeVisible,zColorBlueRangeVisible,zGammaVisible,zGammaRedVisible,zGammaGreenVisible,zGammaBlueVisible,zHueVisible,zSaturationVisible,zLightnessVisible,zWhiteBalanceVisible,zNormalizeVisible,zEqualizeVisible,zNoiseVisible,zGrayscaleVisible,zThresholdVisible,zInversionVisible,zEdgesVisible,zSepiaVisible,zAnnotationPath,zAnnotationPanelVisible,zAnnotationXMLText,zLabelIconsInternal,zAnnotationJSONObject,zAnnotationsAddMultiple,zAnnotationsAutoSave,zSaveButtonVisible,zLabelClickSelect,zSimplePath,zNoPost,zNoPostDefaults,zUnsavedEditsTest,zAnnotationSort,zMaskVisible,zMaskFadeSpeed,zMaskClearOnUserAction,zFreehandVisible,zTextVisible,zIconVisible,zRectangleVisible,zPolygonVisible,zMarkupMode,zEditMode,zSlidestackPath,zSaveHandlerPath,zSaveImageHandlerPath,zSaveImageFull,zSaveImageFilename,zSaveImageFormat,zSaveImageCompression,zSaveImageBackColor,zTrackingPath,zTrackingEditMode,zTrackingAuto,zTrackingPanelVisible,zInitialTrackingOverlayVisible,zUserLogin,zUserNamePrompt,zUserPath,zUserPanelVisible,zServerIP,zServerPort,zTileHandlerPath,zIIIFScheme,zIIIFServer,zIIIFPrefix,zIIIFIdentifier,zIIIFRegion,zIIIFSize,zIIIFRotation,zIIIFQuality,zIIIFFormat,zImageW,zImageH,zFocal,zQuality";
break;case "z125":a="0";break;case "z124":a="8192";break;case "z123":a="1060";break;case "z90":a="ZoomifyImageFile"==Z.tileSource?"1024":"256";break;case "z90-PFF":a="256";break;case "z221":a="IIIFImageServer"!=Z.tileSource?"256":"512";break;case "z219":a="IIIFImageServer"!=Z.tileSource?"256":"512";break;case "z140":a="300";break;case "z139":a="60000";break;case "DEFAULT_IMAGELOADQUEUEDELAY":a="100";break;case "z218":a="1.15";break;case "z220":a="300";break;case "z81":a="6";break;case "z78":a="3";
break;case "z80":a="5";break;case "z77":a="3";break;case "z79":a="3";break;case "z76":a="2";break;case "z75":a="0";break;case "z173":a=Z.mobileDevice?"1":"1.5";Z.rotationVisible&&(a="2");break;case "z173UNCONVERTED":a=Z.mobileDevice?Z.rotationVisible?"2":"1":"10";break;case "DEFAULT_z310SIZEMAXBROWSER":a="10000";break;case "DEFAULT_z310SIZEMAXFIREFOX":a="4000";break;case "DEFAULT_z310SIZEMAXMOBILE":a="3000";break;case "DEFAULT_z310SIZEMAXIMAGESET":a="1000";break;case "z74":reTxt=Z.mobileDevice?"1":
"2";break;case "z88":a="1";break;case "DEFAULT_BASEZINDEX":a="2000";break;case "DEFAULT_VALIDATEVIEWRETRYLIMIT":a="2";break;case "DEFAULT_VALIDATEVIEWRETRYDELAY":a="1000";break;case "z104":a="0";break;case "DEFAULT_MOUSECLICKTHRESHOLDVIEWPORT":a=4;break;case "DEFAULT_MOUSECLICKTHRESHOLDTIMEVIEWPORT":a=500;break;case "DEFAULT_MOUSECLICKTHRESHOLDHOTSPOT":a=4;break;case "DEFAULT_TOUCHTAPTHRESHOLDVIEWPORT":a=Z.mobileDevice?6:4;break;case "DEFAULT_TOUCHTAPTHRESHOLDTIMEVIEWPORT":a=500;break;case "DEFAULT_MOUSECLICKTHRESHOLDNAVIGATOR":a=
4;break;case "DEFAULT_TOUCHTAPTHRESHOLDNAVIGATOR":a=Z.mobileDevice?6:3;break;case "z175":a="5";break;case "z176":a="10";break;case "z241":a="5";break;case "z242":a="0.02";break;case "z238":a="30";break;case "z240":a="20";break;case "z239":a="800";break;case "z93TIERSKIPTHRESHOLD":a="0.2";break;case "DEFAULT_ROTATIONSTEPDEGREES":a="1";break;case "DEFAULT_ROTATIONSTEPDURATION":a="1";break;case "z122":a="10";break;case "DEFAULT_AUTORESIZESKIPDURATION":a="10";break;case "DEFAULT_MOUSEWHEEL":a="1";break;
case "DEFAULT_MOUSEWHEELANIMATION":a="1";break;case "DEFAULT_MOUSEWHEELSLIDESTACK":a="1";break;case "z165":a="300";break;case "z111":a="5";break;case "z112":a="0.067";break;case "z146":a="1";break;case "z164":a="1";break;case "z92":a="1";break;case "z93":a="1";break;case "DEFAULT_DOUBLECLICKZOOM":a="1";break;case "DEFAULT_DOUBLECLICKDELAY":a="250";break;case "z95":a="1";break;case "z95LIMIT":a="2";break;case "z95STRICT":a="0";break;case "DEFAULT_SMOOTHPAN":a="1";break;case "DEFAULT_SMOOTHPANEASING":a=
"2";break;case "DEFAULT_SMOOTHPANGLIDE":a="2";break;case "DEFAULT_SMOOTHZOOM":a="1";break;case "DEFAULT_SMOOTHZOOMEASING":a="2";break;case "z143":a=null;break;case "z144":a=null;break;case "z145":a=null;break;case "z163":a=null;break;case "z153":a="1";break;case "z83":a="#FBFAFA";break;case "z83NOALPHA":a="#FBFAFA";break;case "z83LIGHT":a="#FEFEFE";break;case "z82":a="0.75";break;case "DEFAULT_BACKGROUNDSMALLDALPHA":a="0.75";break;case "z87":a="#C0C0C0";break;case "z200":a="skinFiles.xml";break;case "z201":a=
"Assets/Skins/Default";break;case "z199":a="0";break;case "z171":a="2";break;case "z172":a="150";break;case "z167":a="100";break;case "z168":a="-1";break;case "z170":a="-1";break;case "z166":a=null;break;case "z169":a="#0000FF";break;case "DEFAULT_NAVIGATORBORDERCOLOR":a="#FFFFFF";break;case "DEFAULT_GALLERYVISIBLE":a=Z.slideshow?"2":"0";break;case "DEFAULT_GALLERYWIDTH":a="-1";break;case "DEFAULT_GALLERYHEIGHT":a="70";break;case "DEFAULT_GALLERYMARGIN":a="1";break;case "DEFAULT_GALLERYLEFT":a="0";
break;case "DEFAULT_GALLERYTOP":a="-1";break;case "DEFAULT_GALLERYPOSITION":a="1";break;case "DEFAULT_GALLERYBACKGROUNDALPHA":a="0.5";break;case "DEFAULT_GALLERYBACKGROUNDCOLOR":a="#696969";break;case "DEFAULT_GALLERYBACKGROUNDCOLORNOALPHA":a="#696969";break;case "DEFAULT_GALLERYRECTANGLECOLOR":a="#DDDDDD";break;case "z223":a="4";break;case "z222":a="1";break;case "z224":a="1";break;case "z128":a="1";break;case "z150":a="1";break;case "z149":a=null;break;case "z162":a="1";break;case "DEFAULT_SLIDERZOOMVISIBLE":a=
"1";break;case "z205ZOOM":a="10";break;case "DEFAULT_ZOOMBUTTONSVISIBLE":a="1";break;case "z174":a="1";break;case "DEFAULT_RESETVISIBLE":a="1";break;case "z121":a="1";break;case "z119":a="1";break;case "z120":a="white";break;case "z118":a="0";break;case "z141":a="0";break;case "DEFAULT_BOOKMARKSGET":a="0";break;case "DEFAULT_BOOKMARKSSET":a="0";break;case "z232":a="Assets/VirtualPointer/virtualPointer.png";break;case "DEFAULT_ZOOMRECTANGLE":b=Z.comparison||null!==Z.imagePath&&-1!=Z.imagePath.indexOf("zComparisonPath")||
"undefined"!==typeof Z.parameters&&null!==Z.parameters&&"undefined"!==typeof Z.parameters.zComparisonPath&&("undefined"===typeof Z.parameters.zZoomRectangle||0!=Z.parameters.zZoomRectangle);a=Z.mobileDevice||b||!Z.proParamsEnabled&&!Z.enterpriseParamsEnabled?"0":"1";break;case "z157":a="undefined"===typeof Z.parameters||null===Z.parameters||"undefined"!==typeof Z.parameters.zMeasureVisible&&"0"==Z.parameters.zMeasureVisible||("undefined"===typeof Z.parameters.zMarkupMode||"1"!=Z.parameters.zMarkupMode&&
"2"!=Z.parameters.zMarkupMode)&&("undefined"===typeof Z.parameters.zEditMode||"1"!=Z.parameters.zEditMode&&"2"!=Z.parameters.zEditMode)?"0":"1";break;case "DEFAULT_FULLVIEWEXITEXTERNALBUTTONCOLOR":a="\t#F8F8F8";break;case "z190":a="0";break;case "DEFAULT_ROTATIONFREE":a="0";break;case "DEFAULT_INITIALR":a="0";break;case "z184":a="1";break;case "z182":a="500";break;case "z183":a=" ";break;case "z183COLOR":a="#000000";break;case "DEFAULT_MESSAGESVISIBLE":a="1";break;case "z102":a="#D3D3D3";break;case "z101":a=
"#FFFFFF";break;case "z234":a="0.6";break;case "z235":a="0.33";break;case "z237":a="512";break;case "z236":a="384";break;case "z233":a="0";break;case "z103":a="0";break;case "z196":a="0";break;case "z193":a="2";break;case "z194":a="10";break;case "z198":a="#696969";break;case "z197":a="150";break;case "z191":a="30";break;case "z192":a="-1";break;case "z195":a="-1";break;case "z212":a="40";break;case "z231":a="pixels";break;case "z156":a="170";break;case "z155":a="12";break;case "DEFAULT_MEASURECAPTIONBACKALPHA":a=
"0.3";break;case "z154":a="11";break;case "z100":a="0";break;case "DEFAULT_GEOCOORDINATESVISIBLE":a="0";break;case "DEFAULT_PRELOADVISIBLE":a="0";break;case "DEFAULT_SCREENSAVERSPEED":a="5";break;case "DEFAULT_MASKFADESPEED":a="5";break;case "DEFAULT_MASKFADESTEP":a="0.05";break;case "DEFAULT_MASKCLEARONUSERACTION":a="1";break;case "DEFAULT_IMAGELISTXMLFILE":a="imageList.xml";break;case "DEFAULT_IMAGELISTPOSITION":a="2";break;case "DEFAULT_IMAGELISTSOURCE":a="NAME";break;case "DEFAULT_IMAGELISTWIDTH":a=
"200";break;case "z227":a="destinations.xml";break;case "z226":a=!0;break;case "z225":a=!0;break;case "DEFAULT_COMPARISONXMLFILE":a="comparison.xml";break;case "DEFAULT_COMPARISONSYNCVISIBLE":a="1";break;case "DEFAULT_COMPARISONINITIALSYNC":a="1";break;case "DEFAULT_COMPARISONSYNC":a="1";break;case "DEFAULT_TOOLBARLABELFONTSIZE":a="11";break;case "z209":a="slides.xml";break;case "DEFAULT_SLIDESHOWAUTOSTART":a=!0;break;case "DEFAULT_SLIDESHOWAUTOLOOP":a=!0;break;case "z203":a="NAME";break;case "z204":a=
"200";break;case "z202":a="2";break;case "z210":a="2";break;case "z211":a="0.05";break;case "z135":a="hotspots.xml";break;case "z130":a="6";break;case "z130CANVAS":a="12";break;case "z161":a="2";break;case "z152":a="7";break;case "z129":a="14";break;case "z160":a="3";break;case "z151":a="14";break;case "z115":a="1.8";break;case "z134":a=!0;break;case "DEFAULT_HOTSPOTSMINSCALE":a="0.2";break;case "DEFAULT_HOTSPOTSMAXSCALE":a="2";break;case "z132":a="NAME";break;case "z133":a="200";break;case "z131":a=
"2";break;case "DEFAULT_IMAGEFILTERS":a="0";break;case "z142":a="1";break;case "DEFAULT_BRIGHTNESSVISIBLE":a="0";break;case "DEFAULT_CONTRASTVISIBLE":a="0";break;case "DEFAULT_SHARPNESSVISIBLE":a="0";break;case "DEFAULT_BLURRINESSVISIBLE":a="0";break;case "DEFAULT_COLORREDVISIBLE":a="0";break;case "DEFAULT_COLORGREENVISIBLE":a="0";break;case "DEFAULT_COLORBLUEVISIBLE":a="0";break;case "DEFAULT_COLORREDRANGEVISIBLE":a="0";break;case "DEFAULT_COLORGREENRANGEVISIBLE":a="0";break;case "DEFAULT_COLORBLUERANGEVISIBLE":a=
"0";break;case "DEFAULT_GAMMAVISIBLE":a="0";break;case "DEFAULT_GAMMAREDVISIBLE":a="0";break;case "DEFAULT_GAMMAGREENVISIBLE":a="0";break;case "DEFAULT_GAMMABLUEVISIBLE":a="0";break;case "DEFAULT_HUEVISIBLE":a="0";break;case "DEFAULT_SATURATIONVISIBLE":a="0";break;case "DEFAULT_LIGHTNESSVISIBLE":a="0";break;case "DEFAULT_WHITEBALANCEVISIBLE":a="0";break;case "DEFAULT_NORMALIZEVISIBLE":a="0";break;case "DEFAULT_EQUALIZEVISIBLE":a="0";break;case "DEFAULT_NOISEVISIBLE":a="0";break;case "DEFAULT_GRAYSCALEVISIBLE":a=
"0";break;case "DEFAULT_THRESHOLDVISIBLE":a="0";break;case "DEFAULT_INVERSIONVISIBLE":a="0";break;case "DEFAULT_EDGESVISIBLE":a="0";break;case "DEFAULT_SEPIAVISIBLE":a="0";break;case "z205FILTER":a="10";break;case "z137":a="150";break;case "DEFAULT_IMAGEFILTERPANELLABELFONTSIZE":a="11";break;case "DEFAULT_IMAGEFILTERPANELTEXTFONTSIZE":a="11";break;case "DEFAULT_IMAGEFILTERTEXTPADDINGSMALL":a="2";break;case "z116":a="1";break;case "z217":a="1";break;case "z136":a="1";break;case "z189":a="1";break;
case "z181":a="1";break;case "DEFAULT_ANNOTATIONPANELVISIBLE":a="2";break;case "DEFAULT_LABELICONSINTERNAL":a="1";break;case "DEFAULT_ANNOTATIONSADDMULTIPLE":a="1";break;case "DEFAULT_ANNOTATIONSAUTOSAVE":a="1";break;case "DEFAULT_ANNOTATIONSAVEBUTTONVISIBLE":a="1";break;case "DEFAULT_LABELCLICKSELECT":a="0";break;case "z69":a="annotations.xml";break;case "z68":a="annotations.json";break;case "z57":a=Z.labelIconsInternal?"circle":"circle.png";break;case "z57TYPE":a="icon";break;case "z70":a="save";
break;case "z71":a="upload";break;case "z67":a=!0;break;case "z65":a="220";break;case "z61":a="257";break;case "z62":a="11";break;case "z63":a="11";break;case "z64":a="11";break;case "z72SMALL":a="2";break;case "z72":a="3";break;case "z53":a="50";break;case "z51":a="122";break;case "z55":a="160";break;case "z54":a="88";break;case "z56":a="10";break;case "DEFAULT_ANNOTATIONCOMMENTHEIGHT":a="82";break;case "z59":a="82";break;case "z66":a="0";break;case "z52":a="1";break;case "z60":a="0";break;case "DEFAULT_ANNOTATIONCOMMENTVISIBILITY":a=
"1";break;case "z147":a="0.02";break;case "z148":a="30";break;case "DEFAULT_LABELICONWIDTH":a="200";break;case "DEFAULT_LABELICONHEIGHT":a="200";break;case "DEFAULT_ICONLINEWIDTH":a=3;break;case "z177":a=2;break;case "DEFAULT_POLYGONALPHA":a=.3;break;case "z180":a=300;break;case "z96":a="1";break;case "z98":a="#FFFFFF";break;case "z89":a="#FFFFFF";break;case "DEFAULT_CAPTIONBACKCOLOR":a="#000000";break;case "z177FREEHAND":a=2;break;case "z113":a="#FFFFFF";break;case "z216":a="#999999";break;case "z97":a=
"10";break;case "DEFAULT_TRACKINGPANELVISIBLE":a="2";break;case "DEFAULT_INITIALTRACKINGOVERLAYVISIBLE":a="1";break;case "DEFAULT_TRACKINGPANELWIDTH":a="350";break;case "DEFAULT_TRACKINGPANELHEIGHT":a="163";break;case "DEFAULT_TRACKINGPANELLABELFONTSIZE":a="12";break;case "DEFAULT_TRACKINGPANELLISTFONTSIZE":a="12";break;case "DEFAULT_TRACKINGPANELTEXTFONTSIZE":a="11";break;case "DEFAULT_TRACKINGTEXTPADDINGSMALL":a="2";break;case "DEFAULT_TRACKINGTEXTPADDING":a="3";break;case "DEFAULT_TRACKINGLABELWIDTH":a=
"50";break;case "DEFAULT_TRACKINGLABELTEXTWIDTH":a="122";break;case "DEFAULT_TRACKINGLISTWIDTH":a="160";break;case "DEFAULT_TRACKINGLISTNARROWWIDTH":a="88";break;case "DEFAULT_TRACKINGMARGIN":a="10";break;case "DEFAULT_TRACKINGALPHA":a="0.75";break;case "DEFAULT_USERPANELVISIBLE":a="0";break;case "DEFAULT_USERPANELWIDTH":a="200";break;case "DEFAULT_USERPANELHEIGHT":a="85";break;case "DEFAULT_USERPANELLABELFONTSIZE":a="12";break;case "DEFAULT_USERPANELLISTFONTSIZE":a="12";break;case "DEFAULT_USERLABELWIDTH":a=
"50";break;case "DEFAULT_IMAGESETLISTSOURCE":a="NAME";break;case "DEFAULT_IMAGESETLISTWIDTH":a="222";break;case "DEFAULT_IMAGESETLISTPOSITION":a="2";break;case "DEFAULT_IMAGESETSLIDERVISIBLE":a="1";break;case "z205IMAGESET":a="10";break;case "DEFAULT_OVERLAYSVISIBLE":a="1";break;case "DEFAULT_ANIMATIONOPTIMALMOTIONIMAGES":a="30";break;case "DEFAULT_ANIMATIONOPTIMALPOSITIONDELTA":a="50";break;case "DEFAULT_ANIMATIONAXIS":a="horizontal";break;case "DEFAULT_ANIMATOR":a="motion";break;case "DEFAULT_ANIMATIONFLIP":a=
"0";break;case "DEFAULT_SAVEIMAGEFULL":a="0";break;case "DEFAULT_SAVEIMAGEFILENAME":a="zoomifySavedImage";break;case "DEFAULT_SAVEIMAGEFORMAT":a="jpg";break;case "DEFAULT_SAVEIMAGECOMPRESSION":a="0.8";break;case "DEFAULT_SAVEIMAGEBACKCOLOR":a="#FFFFFF";break;case "DEFAULT_SAVEIMAGELABELMARGIN":a="50";break;case "DEFAULT_TRACKINGXMLFILE":a="tracking.xml";break;case "DEFAULT_TRACKINGPANELPOSITION":a="2";break;case "DEFAULT_USERXMLFILE":a="users.xml";break;case "z159":a="lightgray";break;case "z158":a=
"white";break;case "DEFAULT_MESSAGEDURATIONLONG":a="5000";break;case "DEFAULT_MESSAGEDURATIONSTANDARD":a="3000";break;case "DEFAULT_MESSAGEDURATIONSHORT":a="1500";break;case "DEFAULT_MESSAGEDURATIONVERYSHORT":a="750";break;case "z99":a="lightgray";break;case "DEFAULT_TRACEDISPLAYTEXTFONTSIZE":a="11";break;case "DEFAULT_TRACEDISPLAYTEXTPADDINGSMALL":a="2";break;case "z229":a="#D3D3D3";break;case "z228":a="#FFFFFF";break;case "z114":a="1";break;case "z188":a="55";break;case "DEFAULT_IMAGESETXMLFILE":a=
Z.animation?"animation.xml":Z.overlay?"overlays.xml":"slidestack.xml";break;case "z9":a="Displaying or editing polygon hotspots requires a browser that supports the HTML5 canvas feature.";break;case "z12":a="Rotation requires a newer browser version. Please consider upgrading to the current release of your browser.";break;case "z16":a="Viewing Zoomify Images stored in the ZIF format requires a newer browser version. Please consider upgrading to the current release of your browser.";break;case "z8":a=
"\nClick the '?' button for help.";break;case "ALERT_LOADINGANNOTATIONS":a="\nLoading annotations...";break;case "z4SHORT":a="Click a button to\npick a label type";break;case "z4":a="Click a button to pick a label type.\nTips will show only on first use of each button.";break;case "ALERT_HOWTOEDITMODEVIEW":a="Click image to zoom-in.\nAlt-click to zoom-out.\nClick-drag to pan.";break;case "ALERT_HOWTOEDITMODEFREEHAND":a="\nClick-drag in image to draw.";break;case "ALERT_HOWTOEDITMODETEXT":a="\nClick in image to create caption. Edit text in panel.";
break;case "ALERT_HOWTOEDITMODEICON":a="Select icon type from list.\nClick image to create icon.\nAlt-click-drag icon to position.";break;case "ALERT_HOWTOEDITMODERECTANGLE":a="\nClick-drag in image to create rectangle.";break;case "ALERT_HOWTOEDITMODEPOLYGON":a="Click in image to start polygon and add control points.\nRe-click first point to close the polygon.\nOr alt-click in image to leave polygon open.";break;case "ALERT_HOWTOEDITMODEMEASURE":a="Click in image to measure length.\nAdditional clicks measure perimeter.\nRe-click starting point to measure area.";
break;case "z3":a="Click links are disabled in edit mode\nto allow hotspot positioning by click-dragging:\n";break;case "ALERT_CLICKDRAGEXITTOVIEWMODE":b="measure"==Z.labelMode?"measure":"edit";a="Exiting "+b+" mode to allow mouse panning.\nTo navigate in "+b+" mode use arrow keys.";break;case "ALERT_NONEDITABLEPOI":a="\nThis POI is not editable.";break;case "ALERT_NONEDITABLELABEL":a="\nThis label is not editable.";break;case "ALERT_NONEDITABLELABELPOI":a="\nThis label is not editable because its POI is not editable.";
break;case "ALERT_NONEDITABLENOTE":a="\nThis note is not editable.";break;case "ALERT_NONEDITABLENOTEPOI":a="\nThis note is not editable because its POI is not editable.";break;case "ALERT_UNSAVEDEDITSEXIST-BROWSER":a="\nYou have unsaved edits. Stay on page to save edits?";break;case "ALERT_UNSAVEDEDITSEXIST-CUSTOM":a="\nYou have unsaved edits.\nClick Cancel to stay on page to save edits.\nClick OK to DISCARD edits and proceed.";break;case "z2":a="\nCancelling all unsaved edits.";break;case "z15":a=
"\nSaving unsaved edits.";break;case "z1":a="\nXML save complete.";break;case "ALERT_IMAGESAVEPREPARING":a="\nPreparing to save full image...";break;case "ALERT_VIEWSAVEPREPARING":a="\nPreparing to save view...";break;case "ALERT_IMAGESAVELOADINGDATA":a="\nDownloading image data...";break;case "ALERT_IMAGESAVERECEIVINGTILE":a="\nReceiving image tile: ";break;case "ALERT_IMAGESAVEDRAWINGTILE":a="\nDrawing image tile: ";break;case "ALERT_IMAGESAVEDRAWINGANNOTATION":a="\nDrawing annotation: ";break;
case "ALERT_IMAGESAVEUPLOADING":a="\nUploading...";break;case "ALERT_IMAGESAVEINPROGRESS":a="\nUploading image data to save as file: ";break;case "ALERT_VIEWSAVEINPROGRESS":a="\nUploading view data to save as file: ";break;case "ALERT_IMAGESAVESUCCESSFUL":a="\nImage save complete";break;case "ALERT_IMAGESAVEHTMLCAPTIONUNSUPPORTED":a="\nSaving HTML captions to image is not currently supported";break;case "z13":a="SAVEDISABLEDFORDEMO";break;case "z14":a="\nDemo edits are saved only during the browser session.";
break;case "ALERT_PRELOADINGIMAGE-DATA":a="\nPreloading image content...";break;case "ALERT_PRELOADINGONEIMAGE-LOADINGTILES":a="\nPreloading current view for all zoom levels...";break;case "ALERT_PRELOADINGIMAGESET-LOADINGTILES":a=Z.animation?"\nPreloading current view for all images:":"\nPreloading current view for all slides:";break;case "ALERT_PRELOADINGIMAGESET-UPDATINGVIEW":a=Z.animation?"\nUpdating current view for all images:":"\nUpdating current view for all slides:";break;case "ALERT_PRELOADING-STORINGORDRAWINGTILES":a=
Z.imageSet?Z.animation?"\nDrawing animation:   Image ":"\nDrawing slidestack:   Slide ":"\nStoring preloaded image:";break;case "ALERT_LOADINTRACKINGDATA":a="\nLoading tracking data...";break;case "z11":a="\nProcessing image filter...";break;case "z10":a="\nProcessing backfill image filter...";break;case "z11-CONVOLUTION-ONMOUSEUP":a=" filter will begin on slider release...";break;case "z11-CONVOLUTION":a="\nProcessing image convolution filter...";break;case "z10-CONVOLUTION":a="\nProcessing backfill image convolution filter...";
break;case "ALERT_LOADINGIMAGESET":a=Z.comparison?"\nLoading comparison images...":Z.overlays?"\nLoading overlays...":Z.animation?"\nLoading animation images...":"\nLoading slides...";break;case "ALERT_LOADINGUSERLIST":a="\nLoading username list to validate entry...";break;case "ALERT_USERNAMEACCEPTED":a="\nUsername accepted!";break;case "ERROR_ERROR":a="error";break;case "z287":a="Parameter unrecognized or deprecated - see the Parameters List documentation: ";break;case "z275":a="Parameter deprecated - please replace: ";
break;case "ERROR_UNSUPPORTEDLOCALSAVING":a="Standard browser security prevents local saving of edits.\nFor details see Developer Resources/Testing Tools/Local Host.";break;case "z288":a="Use Firefox for local viewing or see READ ME FIRST\nfile for optional settings for other browsers.";break;case "z290":a="Browsers allow ZIF file viewing only from a web server.\nPlease use Zoomify Image folders for local viewing.";break;case "z289":a="Browsers allow PFF file viewing only from a web server.\nPlease use Zoomify Image folders for local viewing.";
break;case "z249":a="Image failed to load: possible invalid path, missing image, or network error.";break;case "z280":a="Sorry!  Part of this view is not refreshing.  The network may be slow, or the website may be missing a file:  ";break;case "ERROR_SETTINGIIIFIMAGEPATH":a="Error setting IIIF image path";break;case "ERROR_VALIDATEVIEW":a="Sorry!  Part of this view is not refreshing. The network\nmay be slow, or the website may be missing a file.  ";break;case "z280-ZIF":a="Sorry!  Part of this view is not refreshing.  The network may be slow, or the ZIF file may be faulty:  ";
break;case "ERROR_ANNOTATIONPATHMISSING":a="Attempt to start edit mode or save data without providing path to annotations XML data file.";break;case "ERROR_TRACKINGPATHMISSING":a="Attempt to start edit mode or save data without providing path to tracking XML data file.";break;case "ERROR_HOTSPOTPOPUPPATHINVALID":a="Hotspot popup graphic failed to load: possible invalid path or missing file.";break;case "ERROR_HOTSPOTMEDIAPATHINVALID":a="Hotspot media failed to load: possible invalid path, missing file, or legacy hotspot media such as library clip of Flash-based viewer.";
break;case "z246":a="Media of one or more hotspots unsupported: hotspot media of type 'symbol' depend on internal Library of Flash-based viewers.";break;case "z298":a="Attempt to initiate Edit mode without providing path to Save Handler - server side script or other resource to post XML data.";break;case "z297":a="Annotations cannot be saved: missing or incorrect save\nhandler path parameter, or missing file on server.";break;case "z256-ZIFBYTERANGE":a="Error loading image: ZIF file data request failed. Request content type: ";
break;case "z256-ZIFBYTES":a="Error loading image: ZIF file invalid.";break;case "z295":a="Browser does not support XMLHttpRequest.";break;case "z256-IMAGEXML":a="Error loading image: please make sure image path in web page matches image folder location on webserver.";break;case "z256-PFFIMAGEHEADER":a="Error loading image: image header request invalid.";break;case "z256-PFFIMAGEOFFSET":a="Error loading image: image offset request invalid.";break;case "z256-PARAMETERSXML":a="Error loading parameters XML: please make sure the zXMLParametersPath value is correct.";
break;case "z256-IMAGELISTXML":a="Error loading image list images: please make sure image list path in web page matches image list folder location on webserver.";break;case "z256-TOOLBARSKINSXML":a="Error loading toolbar - skin files not found: please verify that the folders 'Assets/Skins/Default' are in same folder as the web page displaying the Viewer, or add zSkinPath parameter to web page. The zSkinPath parameter may be required if using a content management system such as Drupal, Joomla, or WordPress.";
break;case "z256-COMPARISONXML":a="Error loading comparison images: please make sure comparison path in web page matches comparison folder location on webserver.";break;case "z256-SLIDESXML":a="Error loading slides: please make sure slide path in web page matches slides folder location on webserver.";break;case "z256-HOTSPOTSXML":a="Error loading hotspots: please make sure hotspot path in web page matches hotspots folder location on webserver.";break;case "z256-CREATINGANNOTATIONSXMLFILE":a="Error finding annotations XML at location provided.\nCreating new file.";
break;case "z256-ANNOTATIONSXML":a="Error loading annotations: please make sure annotation XML path in web page matches annotation folder location on webserver.";break;case "z256-ANNOTATIONSJSON":a="Error loading annotations: please make sure annotation JSON path in web page matches annotation folder location on webserver.";break;case "z256-ANNOTATIONSSAVEHANDLER":a="Error saving annotations: please make sure save handler path in web page matches save handler file location on webserver.";break;case "z256":a=
"Error making network request:\npossible invalid path or network error.";break;case "z272":a="Error related to network security: ";break;case "z273":a="Error related to network status: ";break;case "z273RANGEREQUESTS":a="Network error. If using ZIF storage, setting MIME type on web server may be necessary. See READ ME FIRST file in ZIF Storage folder or contact Support: ";break;case "z244":a=" converting XML text to XML doc (DOMParser): ";break;case "z243":a=" converting XML doc to XML text (DOMParser): ";
break;case "z276":a=" parsing JSON file to JSON object: ";break;case "z277":a=" parsing JSON label to JSON object: ";break;case "z294":a="Browser does not support XML DOM.";break;case "z293":a="XML Doc invalid.";break;case "z296":a="XML invalid.";break;case "z255":a="Image XML invalid.";break;case "z252":a="Image properties XML invalid.";break;case "z250":a="Image properties invalid.";break;case "z251":a="Image properties parameter invalid.";break;case "z254":a="Image tile count does not match value in image XML. If the count is invalid display problems can result.";
break;case "z245":a=" while executing callback: ";break;case "z253":a="\nImage tile request not fulfilled within time period expected";break;case "ERROR_UNCONVERTEDIMAGEPATHINVALID":a="Unconverted JPEG or PNG image failed to load: possible invalid path, missing image, or network error.";break;case "ERROR_TRANSLATINGCANVASFORUNCONVERTEDIMAGE":a="\nTranslation of canvas failed";break;case "ERROR_SCALINGCANVASFORUNCONVERTEDIMAGE":a="\nScaling of canvas failed";break;case "ERROR_SETTINGTRANSFORMONCANVASFORUNCONVERTEDIMAGE":a=
"\nTransform on canvas failed";break;case "z271":a="Navigator image failed to load: possible invalid path, missing image, or network error.";break;case "z278":a="Skin XML invalid.";break;case "z279":a="The skin XML file has one or more faulty name lines.";break;case "z291":a="Virtual pointer graphic failed to load: ";break;case "z292":a="Watermark image failed to load: ";break;case "ERROR_SAVEIMAGEHANDLERPATHINVALID":a="Image failed to save";break;case "ERROR_TRACKINGPATHMISSING":a="Attempt to initiate Tracking mode without providing path to tracking XML data file.";
break;case "ERROR_USERPATHMISSING":a="Attempt to initiate user list display without providing path to users XML data file.";break;case "z283":a="Unknown element style - no known method to identify.";break;case "z284":a="Unknown mouse position - no known method to calculate.";break;case "z285":a="Unknown mouse scroll - no known method to calculate.";break;case "z286":a="Unknown window size - no known method to calculate.";break;case "z282":a="Selected filter requires assignment of increment or toggle interface.";
break;case "ERROR_IMAGEFILTEREQUALIZEARRAYSUPPORT":a="\nUnable to process Equalize filter: browser does not support Uint8ClampedArray";break;case "ERROR_IMAGESAVEUNABLETOCOMPUTEPROGRESS":a="unable to calculate progress";break;case "ERROR_IMAGESAVELOCALUNSUPPORTEDBROWSER":a="\nLocal saving only supported by Firefox and Chrome browsers";break;case "z360":a="Launch Zoomify Website";break;case "z363":b=Z.hotspots?"\nAlt-Click: Toggle Hotspot Visibility":Z.annotations?"\nAlt-Click: Toggle Label Visibility":
"";a="Minimize Toolbar"+b;break;case "z341":b=Z.hotspots?"\nAlt-Click: Toggle Hotspot Visibility":Z.annotations?"\nAlt-Click: Toggle Label Visibility":"";a="Expand Toolbar"+b;break;case "z400":a="Zoom Out";break;case "z385ZOOM":a="Zoom In And Out";break;case "z399":a="Zoom In";break;case "z370":a="Pan Left";break;case "z372":a="Pan Up";break;case "z369":a="Pan Down";break;case "z371":a="Pan Right";break;case "z378":a="Reset Initial View\nAlt-Click: Prior View";break;case "z391":a="Enter Full View";
break;case "z391EXIT":a="Exit Full View";break;case "z391EXITEXTERNAL":a="Exit Full View";break;case "z342":a="Show Help";break;case "z342MARKUP":a="Show Markup Help";break;case "z342ANNOTATION":a="Show Annotation Help";break;case "z380":a="Rotate Clockwise 90 Degrees";break;case "z381":a="Rotate Counterwise 90 Degrees";break;case "TIP_GALLERYSCROLLBUTTONLEFT":a="Scroll Gallery Left";break;case "TIP_GALLERYSCROLLBUTTONRIGHT":a="Scroll Gallery Right";break;case "z398":a="Click-Drag To Position";break;
case "z392":a="Begin Measuring";break;case "z392EXIT":a="Stop Measuring";break;case "z394":a="Prior Destination";break;case "z393":a="Next Destination";break;case "z395":a="Start Tour";break;case "z396":a="Stop Tour";break;case "z384":a="Prior Slide";break;case "z383":a="Next Slide";break;case "z386":a="Start Slideshow";break;case "z387":a="Stop Slideshow";break;case "z321":a="Mute Sound";break;case "z322":a="Enable Sound";break;case "z350":a="Hide Image Filter Panel";break;case "z351":a="Show Image Filter Panel";
break;case "z385BRIGHTNESS":a="Change Brightness";break;case "z385CONTRAST":a="Change Contrast";break;case "z385SHARPNESS":a="Change Sharpness";break;case "z385BLURINESS":a="Change Blurriness";break;case "z385COLORRED":a="Change Color Red";break;case "z385COLORGREEN":a="Change Color Green";break;case "z385COLORBLUE":a="Change Color Blue";break;case "z385COLORREDRANGE":a="Change Color Red Minimum";break;case "z385COLORGREENRANGE":a="Change Color Green Minimum";break;case "z385COLORBLUERANGE":a="Change Color Blue Minimum";
break;case "z385COLORREDRANGE2":a="Change Color Red Maximum";break;case "z385COLORGREENRANGE2":a="Change Color Green Maximum";break;case "z385COLORBLUERANGE2":a="Change Color Blue Maximum";break;case "z385GAMMA":a="Change Gamma";break;case "z385GAMMARED":a="Change Gamma Red";break;case "z385GAMMAGREEN":a="Change Gamma Green";break;case "z385GAMMABLUE":a="Change Gamma Blue";break;case "z385HUE":a="Change Hue";break;case "z385SATURATION":a="Change Saturation";break;case "z385LIGHTNESS":a="Change Lightness";
break;case "z385WHITEBALANCE":a="Change White Balance";break;case "z385NOISE":a="Change Noise";break;case "TIP_GRAYSCALE":a="Set Grayscale Filter";break;case "TIP_THRESHOLD":a="Set Threshold Filter";break;case "TIP_INVERSION":a="Set Inversion Filter";break;case "TIP_EQUALIZE":a="Set Equalize Filter";break;case "TIP_EDGES":a="Set Edges Filter";break;case "TIP_SEPIA":a="Set Sepia Filter";break;case "z352":a="Increase Filter";break;case "z349":a="Decrease Filter";break;case "z346":a="Apply Selected Filter";
break;case "z347":a="Clear Last Filter";break;case "z347ALL":a="Clear All Filters";break;case "TIP_IMAGESETPRIOR":a=Z.animation?"Prior Image":"Prior Slide";break;case "z385IMAGESET":a=Z.animation?"Change Image":"Change Slide";break;case "TIP_IMAGESETNEXT":a=Z.animation?"Next Image":"Next Slide";break;case "TIP_PRELOAD":a=Z.imageSet?Z.animation?"Preload Current View For All Images":"Preload Current View For All Slides":"Preload All Zoom Levels For Current View";break;case "TIP_POIGO":a="Go To Point Of Interest";
break;case "TIP_LABELGO":a="Go To Label";break;case "z397":a="Image Navigation";break;case "z334":a="Toggle Color Palette";break;case "z335":a="Freehand Drawings";break;case "z340":a="Text Labels";break;case "z336":a="Icon Labels";break;case "z339":a="Rectangle Labels";break;case "z338":a="Polygon Labels";break;case "z337":a="Measurements";break;case "z373":a="Add New POI";break;case "z376":a="Edit Current POI";break;case "z375":a="Delete Current POI";break;case "z374":a="Cancel POI Changes";break;
case "z377":a="Save POI Changes";break;case "z353":a="Add New Label";break;case "z356":a="Edit Current Label";break;case "z355":a="Delete Current Label";break;case "z354":a="Cancel Label Changes";break;case "z357":a="Save Label Changes";break;case "z364":a="Add New Note";break;case "z367":a="Edit Current Note";break;case "z366":a="Delete Current Note";break;case "z365":a="Cancel Note Changes";break;case "z368":a="Save Note Changes";break;case "z324":a="Select Color";break;case "z325":a="Select Color";
break;case "z326":a="Select Color";break;case "z327":a="Select Color";break;case "z328":a="Select Color";break;case "z329":a="Select Color";break;case "z330":a="Select Color";break;case "z331":a="Select Color";break;case "z359":a="Grow Label";break;case "z358":a="Shrink Label";break;case "z379":a="Hide Icon Until Mouse-Over";break;case "TIP_COUNTINGLISTHIDE":a="Hide Counter List";break;case "TIP_COUNTINGCOMPLETE":a="Set Current Cell Counting Complete";break;case "TIP_TRACKINGNAVTOGGLE":a="Toggle Navigator Tracking Overlay";
break;case "TIP_COUNTERCLEARLAST":a="Clear Last Counter Added";break;case "TIP_COUNTERCLEARTYPE":a="Clear Counters Of Selected Type";break;case "TIP_COUNTERSCLEARALL":a="Clear All Counters";break;case "TIP_COUNTERSSAVE":a="Save All";break;case "z342OK":a="Close Help Display";break;case "TIP_COUNTERTYPE":a="Set Image Click To Add This Type";break;case "TIP_COUNTERTYPESHOW":a="Show Labels For This Type In Image";break;case "TIP_COUNTERLIST":a="Show List Of Labels For This Type";break;case "z362":a=
"Accept And Close Message";break;case "z361":a="Decline And Close Message";break;case "z332":a="Agree To Copyright And View Images";break;case "z333":a="Exit And Do Not View Images";break;case "z382":a="Toggle Full Page View";break;case "z390":a="Toggle Viewport Display";break;case "z388":a="Toggle Viewport Backfill";break;case "z389":a="Toggle Constrain Pan";break;case "TIP_SYNC":a="Synchronize Viewports";break;case "z427DISPLAY":a="www.zoomify.com";break;case "z427":a="http://www.zoomify.com";break;
case "z427TARGET":a="_blank";break;case "UI_TOOLBARINTERNALBACKGROUNDALPHA":a="0.75";break;case "UI_TOOLBARINTERNALBACKGROUNDCOLOR":a="lightgray";break;case "UI_TOOLBARINTERNALBUTTONUPCOLOR":a="white";break;case "UI_TOOLBARINTERNALBUTTONOVERCOLOR":a="lightgray";break;case "UI_TOOLBARINTERNALBUTTONDOWNCOLOR":a="darkgray";break;case "UI_TOOLBARINTERNALBUTTONZOOMINTEXT":a="+";break;case "UI_TOOLBARINTERNALBUTTONRESETTEXT":a="Z";break;case "UI_TOOLBARINTERNALBUTTONZOOMOUTTEXT":a="-";break;case "z439":a=
"Navigator Bird's Eye View";break;case "z420":a="X";break;case "UI_GALLERYACCESSIBILITYALTATTRIBUTE":a="Scrolling Gallery Of Image Thumbnails";break;case "z441":a=" min";break;case "z440":a=" max";break;case "z442":a="units in %s";break;case "z431":a="Length: ";break;case "z431TOTAL":a="Total length: ";break;case "z433":a="Perimeter: ";break;case "z430":a="Area: ";break;case "z434":a="\u00b2";break;case "z425":a="Filter History,\u00a0\u00a0\u2014,\u00a0\u00a0None";break;case "z426":a="null,null,null";
break;case "UI_IMAGEFILTERPANELLABELBRIGHTNESS":a="Brightness";break;case "UI_IMAGEFILTERPANELLABELCONTRAST":a="Contrast";break;case "UI_IMAGEFILTERPANELLABELCOLORRED":a="Red";break;case "UI_IMAGEFILTERPANELLABELCOLORGREEN":a="Green";break;case "UI_IMAGEFILTERPANELLABELCOLORBLUE":a="Blue";break;case "UI_IMAGEFILTERPANELLABELCOLORREDRANGE":a=Z.colorRedVisible?"Red Range":"Red";break;case "UI_IMAGEFILTERPANELLABELCOLORGREENRANGE":a=Z.colorGreenVisible?"Green Range":"Green";break;case "UI_IMAGEFILTERPANELLABELCOLORBLUERANGE":a=
Z.colorBlueVisible?"Blue Range":"Blue";break;case "UI_IMAGEFILTERPANELLABELGAMMA":a="Gamma";break;case "UI_IMAGEFILTERPANELLABELGAMMARED":a="Gamma Red";break;case "UI_IMAGEFILTERPANELLABELGAMMAGREEN":a="Gamma Green";break;case "UI_IMAGEFILTERPANELLABELGAMMABLUE":a="Gamma Blue";break;case "UI_IMAGEFILTERPANELLABELHUE":a="Hue";break;case "UI_IMAGEFILTERPANELLABELSATURATION":a="Saturation";break;case "UI_IMAGEFILTERPANELLABELLIGHTNESS":a="Lightness";break;case "UI_IMAGEFILTERPANELLABELWHITEBALANCE":a=
"White Balance";break;case "UI_IMAGEFILTERPANELLABELNORMALIZE":a="Normalize";break;case "UI_IMAGEFILTERPANELLABELEQUALIZE":a="Equalize";break;case "UI_IMAGEFILTERPANELLABELNOISE":a="Noise";break;case "UI_IMAGEFILTERPANELLABELGLOW":a="Glow";break;case "UI_IMAGEFILTERPANELLABELSHARPNESS":a="Sharpness";break;case "UI_IMAGEFILTERPANELLABELBLURRINESS":a="Blurriness";break;case "UI_IMAGEFILTERPANELLABELGRAYSCALE":a="Grayscale";break;case "UI_IMAGEFILTERPANELLABELTHRESHOLD":a="Threshold";break;case "UI_IMAGEFILTERPANELLABELINVERSION":a=
"Inversion";break;case "UI_IMAGEFILTERPANELLABELEDGES":a="Edges";break;case "UI_IMAGEFILTERPANELLABELSEPIA":a="Sepia";break;case "z418":a="Agree";break;case "z419":a="Exit";break;case "UI_LISTMOUSEDOWNTEXT":a="Select an item...";break;case "z444":a="Tour Destinations";break;case "z443":a="Slides";break;case "z424":a="Hotspots";break;case "z410":a="POI";break;case "z408":a="Label";break;case "z407":a="Caption";break;case "z413":a="Tooltip";break;case "z414":a="Click";break;case "z412":a="Scale";break;
case "z411":a="Rollover";break;case "z409":a="Note";break;case "z403":a="Select Icon Type,Circle,Triangle,Square,Arrow Down,Arrow Down Left,Arrow Down Right,Arrow Left,Arrow Right,Arrow Up,Arrow Up Left,Arrow Up Right,Line Horizontal,Line Vertical,External Graphics File";break;case "z404":a=Z.labelIconsInternal?"shim,circle,triangle,square,arrowDown,arrowDownLeft,arrowDownRight,arrowLeft,arrowRight,arrowUp,arrowUpLeft,arrowUpRight,lineHorizontal,lineVertical,External Graphics File":"shim,circle.png,triangle.png,square.png,arrowDown.png,arrowDownLeft.png,arrowDownRight.png,arrowLeft.png,arrowRight.png,arrowUp.png,arrowUpLeft.png,arrowUpRight.png,lineHorizontal.png,lineVertical.png,External Graphics File";
break;case "z401":a="Caption position...,Bottom Left,Bottom Center,Bottom Right,Center Left,Center Center,Center Right,Top Left,Top Center,Top Right";break;case "z402":a="shim,7,8,9,4,5,6,1,2,3";break;case "z405":a="Open URL in...,Same Window,New Window,Parent Frame,Top Frame";break;case "z406":a="shim,_self,_blank,_parent,_top";break;case "UI_TOOLBARLABELSYNC":a="Sync";break;case "UI_IMAGESETLISTTITLE":a=Z.comparison||Z.overlays?"":"ImageSet Slide List";break;case "UI_IMAGESETSTART":a="0";break;
case "UI_IMAGESETLOOP":a="1";break;case "UI_IMAGESETSLIDER":a=Z.comparison||Z.overlays?"0":"1";break;case "UI_TRACKINGROWBUTTONCOLORUPCOLOR":a="white";break;case "UI_TRACKINGROWBUTTONCOLOROVERCOLOR":a="lightgray";break;case "UI_TRACKINGROWBUTTONCOLORDOWNCOLOR":a="darkgray";break;case "UI_TRACKINGPANELLABELADD":a="Add";break;case "UI_TRACKINGPANELLABELSHOW":a="Show";break;case "UI_TRACKINGPANELLABELNAME":a="Name";break;case "UI_TRACKINGPANELLABELCOUNT":a="Cell";break;case "UI_TRACKINGPANELLABELCOUNTALL":a=
"All";break;case "UI_TRACKINGPANELLABELLIST":a="List";break;case "UI_TRACKINGPANELLABELCELL":a="Cell";break;case "UI_TRACKINGPANELLABELX":a="X";break;case "UI_TRACKINGPANELLABELY":a="Y";break;case "UI_TRACKINGPANELLABELZOOM":a="Zoom";break;case "UI_TRACKINGPANELLABELUSERNAME":a="UserName";break;case "UI_TRACKINGPANELLABELCURRENTCELL":a="Cell";break;case "UI_TRACKINGPANELLABELCOUNTINGCOMPLETE":a=Z.trackingAuto?"Viewed":"Complete";break;case "UI_TRACKINGNAVIGATOROVERLAYCOLOR_UNDER2":a="#000000";break;
case "UI_TRACKINGNAVIGATOROVERLAYCOLOR_UNDER4":a="#8B4513";break;case "UI_TRACKINGNAVIGATOROVERLAYCOLOR_UNDER10":a="#FF0000";break;case "UI_TRACKINGNAVIGATOROVERLAYCOLOR_UNDER16":a="#FFFF00";break;case "UI_TRACKINGNAVIGATOROVERLAYCOLOR_UNDER25":a="#00FF00";break;case "UI_TRACKINGNAVIGATOROVERLAYCOLOR_UNDER40":a="#40E0D0";break;case "UI_TRACKINGNAVIGATOROVERLAYCOLOR_UNDER60":a="#0000FF";break;case "UI_TRACKINGNAVIGATOROVERLAYCOLOR_UNDER100":a="#000033";break;case "UI_TRACKINGNAVIGATOROVERLAYCOLOR_UNDERINFINITY":a=
"#FFFFFF";break;case "UI_USERNAMEPROMPT":a="Please enter a username for your edits";break;case "UI_USERNAMEPROMPTRETRY":a="Name not on approved list, please try again";break;case "UI_USERPANELLABELNAME":a="Name";break;case "UI_USERPANELLABELCOUNT":a="Count";break;case "UI_USERPANELLABELSHOW":a="Show";break;case "z422":a="430";break;case "z421":a="300";break;case "z423":a="OK";break;case "UI_HELPSCREENCOLOR":a="lightgray";break;case "UI_HELPBUTTONCOLOR":a="white";break;case "z437":a="430";break;case "z436":a=
"84";break;case "z435":a="Cancel";break;case "z438":a="OK";break;case "z417":a="290";break;case "z415":a="200";break;case "z416":a="Mouse Coordinates\nAlt-click, select in list, right-click, Copy";break;case "UI_GEOCOORDINATESDISPLAYTEXT":a="Latitude & Longitude\nAlt-click, select in list, right-click, Copy";break;case "UI_IIIFCOORDINATESDISPLAYTEXT":a="IIIF Values For View\nAlt-click, select in list, right-click, Copy";break;case "UI_TRACEDISPLAYTITLE":a="Trace Values\n\n";break;case "z445":a="This panel is enabled using the HTML parameter 'zDebug=1' (basic) or 'zDebug=2' (adds tile tracing). It can be called in JavaScript as follows:\n\n   Z.Utils.trace('value to display');  \n\nThe buttons below display or modify important state values.  Web designers new to JavaScript will also benefit from the console, trace, profiling, and other debugging features of leading browsers.";
break;case "UI_TRACEDISPLAYTILESTATUSTEXT":a="Required Cached Requested Loaded Displayed Waiting";break;case "UI_TRACEDISPLAYELAPSEDTIMETEXT":a="Seconds";break;case "UI_TRACEDISPLAYTILESPERSECONDTEXT":a="Loads / Second";break;case "z446":a="Show Globals";break;case "z449":a="Toggle Display";break;case "z447":a="Toggle Backfill";break;case "z448":a="Toggle Constrain Pan";break;case "z32":a="<p align=%22center%22><font face=%22Arial,Helvetica,sans-serif%22><strong>Viewer Help</strong></font></p><p align=%22justify%22><font face=%22Arial,Helvetica,sans-serif%22>To explore this image, simply <strong>click</strong> the image to zoom, <strong>double-click</strong> to zoom out, or <strong>click-drag</strong> to pan.<br><br>Shortcuts:<br>&nbsp;&nbsp;&nbsp;<strong>Alt-click-drag</strong> to create a <i>zoom-rectangle</i>.<br>&nbsp;&nbsp;&nbsp;<strong>Alt-click</strong> / <strong>Alt-double-click</strong> to zoom fully in / out.<br>&nbsp;&nbsp;&nbsp;<strong>Alt-click-Reset</strong> button to return to the prior view.<br>&nbsp;&nbsp;&nbsp;(Alt is Option on Macintosh).<br><br>The Navigator thumbnail overview can also be clicked or click-dragged to pan.<br><br>Use the Toolbar for exact navigation - if using a mouse, hold it over any button to see a helpful tip.<br><br>Keyboard shortcuts:<br>&nbsp;&nbsp;&nbsp;<strong>a</strong> or <strong>Shift</strong> to zoom in.<br>&nbsp;&nbsp;&nbsp;<strong>z</strong> or <strong>Ctrl</strong> to zoom out.<br>&nbsp;&nbsp;&nbsp;<strong>Arrows</strong> change image in slideshow/animation.<br>&nbsp;&nbsp;&nbsp;<strong>Escape</strong> to reset initial view or exits fullscreen.<br>&nbsp;&nbsp;&nbsp;<strong>&lt;</strong> or <strong>&gt;</strong> to rotate image if rotation buttons visible.<br>&nbsp;&nbsp;&nbsp;<strong>Page Up/Down</strong> change image in slidestack.</font></p>";
break;case "z31":a="<p align=%22center%22><font face=%22Arial,Helvetica,sans-serif%22><strong>Markup Help</strong></font></p><p align=%22justify%22><font face=%22Arial,Helvetica,sans-serif%22>Markup Mode allows fast, easy addition of labels to a zoomable image.<br><br><strong>Creating A Label</strong><br><br>Click any of the buttons at the top of the Markup Panel: Freehand, Text, Rectangle, Polygon, or Measure.<br><br>Next, click or click-drag in the image:<ul><li>Freehand drawings are created by click-dragging.<li>Text labels are created with a simple click in the image.<li>Icons first require the type of icon to be chosen from the icon list. Then the icon is created by clicking the image.<li>Rectangles do not require multiple clicks - just click-drag and all four corners are automatically created and positioned.<li>Polygons require multiple clicks in the image to create corner <i>control points</i>.  Alt-click the image to create a final point, or click the first point to close the polygon.<li>Measurements are just like polygons but the caption dynamically changes to display the current length or area.<li>Control points of rectangles, polygons, and measurments can be click-dragged to modify a polygon.</ul>Use the Color button to set a color. The color selected affects freehand drawings, text captions, icon captions, and the lines and captions of rectangles, polygons, and measurements.<br><br>Use the View button to return to navigation mode.<br><br><strong>Editing Label Values</strong><br><br>The Markup Panel also displays the name and caption of the currently selected label for easy editing. Use the TAB key to implement any edits or click in the image.<br><br>Delete a label using the trash can button. The label will be removed from the image and the Markup Panel will display the prior label in the label list.<br><br>Save a label using the button with the disk icon. Or, use the label list to change the selected label - the previously selected label will be automatically saved.<br><br><i><strong>Special Tips:</strong><ul><li>Alt-click any label to display its name and caption in the Markup Panel for editing.<li>Alt-click-drag any completed label to reposition it in the image.<li>If using a mouse, hold the cursor over any button at any time to see a helpful reminder.</ul></i></font></p>";
break;case "z28":a="<p align=%22center%22><font face=%22Arial,Helvetica,sans-serif%22><strong>Annotation Editing Help</strong></font></p><p align=%22justify%22><font face=%22Arial,Helvetica,sans-serif%22>The Annotation Panel provides an intuitive, visual means, to add <i>Points of Interest</i> to a zoomable image, including the option of associated <i>Labels</i> and <i>Notes</i>.<br><br><strong>Point Of Interests</strong><br><br>A Point Of Interest (POI) is a place in the image that is named and listed so that it can be navigated to easily.<br><br>To create a Point Of Interest, click the <i>Add</i> button beneath the Point Of Interest choice list at the top of the Annotation Panel to create a new Point of Interest. Or, click the <i>Edit</i> button to modify the current POI. If no Annotations have been created, a placeholder POI will be the only item in the Point Of Interest list.<br><br><i><strong>More Buttons:</strong></i><br><br>When the Add button is clicked, two different buttons will be displayed: <i>Save</i> and <i>Cancel</i>. If the Edit button is clicked, a third button will also be displayed: <i>Delete</i>.<br><br>Save a Point Of Interest using the button with the disk icon. Cancel edits to a Point Of Interest using the button with the large X icon.<br><br>Delete a Point Of Interest using the trash can button. The POI will be removed from the list and the prior POI in the list will be displayed.<br><br><i><strong>Important:</strong><ul><li>Changing the selected POI in the POI list will automatically save any edits to the current POI.<li>Clicking any of the buttons Save, Cancel, and Delete will leave the Add or Edit mode and return to Annotation Panel to its default display.<li>If using a mouse, hold the cursor over any button to see a helpful reminder.</ul></i><strong>Labels</strong><br><br>To add a new Label to the current Point Of Interest, click the Add button beneath the Label section of the Annotation Panel. Or, click the Edit button to edit the current Label. If no Labels have been created yet, the Label list will be empty.<br><br>If adding a new Label, click any of the buttons at the top of the Label section of the Annotation Panel: Freehand, Text, Rectangle, Polygon, or Measure.<br><br>Now click or click-drag in the image to create a new Label:<ul><li>Freehand drawings are created by click-dragging.<li>Text labels are created with a simple click in the image.<li>Icons first require the type of icon to be chosen from the icon list. Then the icon is created by clicking the image.<li>Rectangles do not require multiple clicks - just click-drag and all four corners are automatically created and repositioned.<li>Polygons require multiple clicks in the image to create corner <i>control points</i>.  Alt-click the image to create a final point, or click the first point to close the polygon.<li>Measurements are just like polygons except that the caption dynamically changes to display the current length or area.</ul>Use the Color button to set the color of new freehand drawings, text captions, icon captions, and the lines and captions of rectangles, polygons, and measurements.<br><br>Use the View button to return to navigation mode in the current Label.<br><br><i><strong>Important:</strong><ul><li>In Add mode, multiple clicks or click-drags will create multiple Labels - to support rapid annotation authoring.<li>In Edit mode, any clicks or click-drags will simple replace the current Label in the image.<li>Alt-click any label in the image to display its values in the Annotatoin Panel for editing. (Add or Edit mode)<li>Alt-click-drag any completed label in the image to reposition it.  (Add or Edit mode)<li>Control points of rectangles, polygons, and measurments can be click-dragged to modify a polygon.</ul></i><i><strong>More Label Values:</strong></i><br><br>The Annotation Panel also displays the name, caption, tooltip, and click-URL of of the currently selected label for easy editing. Use the TAB key to implement any edits or click in another text field or in the image. <br><br>Two choice lists are also included: the first allows the caption to be positioned relative to the Label in the image while the second determines whether the click-URL (if any) will open in the current browser window or a new browser window or a specific frame in the web page. <br><br>The Scale buttons allow the Label to be sized in the image.  The Rollover checkbox can be used to hide a Label in the image until the cursor is over it (not supported by mobile devices).<br><br>The Save, Cancel, and Delete buttons for Labels work just as they do with Points of Interest, as described above. And remember, changing the selected Label in the Label list will automatically save any edits to the current Label. Alt-clicking or alt-click-dragging a Label in the image will also change the current Label in the Label list and cause any edits to be saved (see the first two Special Tips below).<br><br><i><strong>Important:</strong><ul><li>Changing the selected Label by clicking or click-dragging it in the image will change the selected Point Of Interest if the newly selected Label is associated with a different POI - if editing is in progress the edits will be automatically saved.<li>If using a mouse, hold the cursor over any button to see a helpful reminder.</ul></i><strong>Notes</strong><br><br>To add a new Note to the current Point Of Interest, click the Add button beneath the Note section of the Annotation Panel. Or, click the Edit button to edit the current Note. If no Notes have been created yet, the Note list will be empty.<br><br>Use the name and text fields to easily add or edit the Note values. Notes can hold a virtually unlimited number of characters (spaces included). A vertical scrollbar automatically appears when a note requires more lines than fit in the note area. Notes can contain carriage returns.<br><br>The Save, Cancel, and Delete buttons for Notes work just as they do with Points of Interest, as described above. And remember, changing the selected Note in the Note list will automatically save any edits to the current Note.</font></p>";
break;case "z30":a="<p align=%22center%22><font face=%22Arial,Helvetica,sans-serif%22><strong>\\/ \\/ \\/</strong></font></p>";break;case "z29":a="<p align=%22center%22><font face=%22Arial,Helvetica,sans-serif%22><strong>Annotation Help</strong></font></p><p align=%22justify%22><font face=%22Arial,Helvetica,sans-serif%22>The Annotation Panel provides an intuitive display of <i>Points of Interest</i> in a zoomable image, along with associated <i>Labels</i> and <i>Notes</i>, if any.<br><br>A Point Of Interest (POI) is a place in the image that is named and listed so that it can be navigated to easily.<br><br>A Label is a visual element in the image: a freehand drawing, text caption, rectangle or other polygon, or a measurement.<br><br>A Note is text associated with a Point Of Interest. Notes can hold a virtually unlimited number of characters (spaces included). A vertical scrollbar automatically appears when a note requires more lines than fit in the note area.</font></p>";
break;case "CONTENT_SKIPUSERNAME":a="Anonymous User";break;case "z27":a="Whole Image";break;case "z43":a="New Point Of Interest ";break;case "z44":a=this.getResource("CONTENT_SKIPUSERNAME");break;case "z34":a="New Hotspot ";break;case "z33":a="Caption for hotspot ";break;case "z37":a="New Label ";break;case "z35":a="Caption for label ";break;case "CONTENT_LABELCOMMENT":a="Comment for label ";break;case "CONTENT_LABELCOMMENTMARKUPNOLABELS":a="Pick a label type above then click in the image to create!";
break;case "CONTENT_ANNOTATIONPLACEHOLDERCOMMENTTEXT":a="";break;case "z45":a="Polygon ";break;case "z38":a="Tooltip for label ";break;case "z36":a="";break;case "z39":a=this.getResource("CONTENT_SKIPUSERNAME");break;case "z40":a="New Note ";break;case "z41":a="Note text";break;case "z42":a=this.getResource("CONTENT_SKIPUSERNAME");break;case "z20":a="List creation in progress...";break;case "z21":a="Note loading in progress...";break;case "z25":a=Z.captionTextColor?Z.captionTextColor:"#FFFFFF";break;
case "z22":a=Z.captionBackColor?Z.captionBackColor:"#000000";break;case "z48":a=Z.polygonLineColor?Z.polygonLineColor:"#FFFFFF";break;case "z46":a=Z.polygonFillColor?Z.polygonFillColor:"#FFFFFF";break;case "z26":a=Z.captionTextVisible?"1":"0";break;case "z23":a=Z.captionBackVisible?"1":"0";break;case "z49":a=Z.polygonLineVisible?"1":"0";break;case "z47":a=Z.polygonFillVisible?"1":"0";break;case "z24":a="8";break;case "CONTENT_EDITABLE":a="1";break;case "CONTENT_TRACKINGPLACEHOLDERLISTTEXT":a="List creation in progress...";
break;case "CONTENT_TRACKINGTEXTCOLOR":a="#FFFFFF";break;case "CONTENT_TRACKINGLINECOLOR":a="#000000";break;case "CONTENT_TRACKINGFILLCOLOR":a="#FFFFFF";break;case "CONTENT_COUNTERNAME":a="Counter Type 0";break;case "CONTENT_COUNTERCAPTION":a="Caption for counter";break;case "CONTENT_COUNTERCAPTIONPOSITION":a="5";break;case "CONTENT_COUNTERFILLCOLOR":a="#FFFFFF";break;case "CONTENT_COUNTERCELL":a="0:0:100";break;case "CONTENT_COUNTERUSER":a="Anonymous User";break;case "CONTENT_COUNTERUSERINITIALS":a=
"AU";break;case "CONTENT_USERPLACEHOLDERLISTTEXT":a="List creation in progress...";break;default:a="Unexpected resource request"}return a},clearDisplay:function(b){if(b)if(Z.useCanvas&&"CANVAS"==b.tagName)Z.Utils.clearCanvas(b);else for(;b.hasChildNodes();)b.removeChild(b.lastChild)},clearCanvas:function(b){b=b.getContext("2d");b.save();try{b.setTransform(1,0,0,1,0,0)}catch(a){Z.Utils.showMessage(Z.Utils.getResource("ERROR_SETTINGTRANSFORMONCANVASFORUNCONVERTEDIMAGE")),console.log("In function clearCanvas setting transform on canvas:  "+
a)}b.clearRect(0,0,b.canvas.width,b.canvas.height);b.restore()},colorCanvas:function(b,a){var e=b.getContext("2d");e.save();e.setTransform(1,0,0,1,0,0);e.fillStyle=a;e.fillRect(0,0,e.canvas.width,e.canvas.height);e.restore()},deleteDiv:function(b){if(b=document.getElementById(b)){for(;b.hasChildNodes();)b.removeChild(b.lastChild);b.parentNode.removeChild(b)}},createCallback:function(b,a){for(var e=[],f=2,g=arguments.length;f<g;f++)e[e.length]=arguments[f];return function(){for(var f=e.concat([]),
g=0,t=arguments.length;g<t;g++)f[f.length]=arguments[g];return a.apply(b,f)}},validateCallback:function(b){"undefined"===typeof Z.callbacks&&(Z.callbacks=[]);var a=Z.callbacks.slice(0);Z.Utils.functionCallWithDelay(function(){Z.Utils.validateCallbackDelayed(b,a)},10)},validateCallbackDelayed:function(b,a){for(var e=0,f=a.length;e<f;e++){var g=a[e];if(g&&g.callbackEvent==b&&"object"===typeof g&&"function"===typeof g.callbackFunction)switch(b){case "viewChanging":g.callbackFunction();break;case "viewPanningGetCurrentCoordinates":var m=
Z.Viewport.getCoordinates();g.callbackFunction(m);break;case "viewZoomingGetCurrentZoom":m=Z.Viewport.getZoom();g.callbackFunction(m);break;case "viewChangingGetCurrentCoordinatesFull":m=Z.Viewport.getCoordinatesFull();g.callbackFunction(m);break;case "viewUpdateCompleteGetLabelIDs":m=Z.Viewport.getLabelIDsInCurrentView(!1,!0,!0);g.callbackFunction(m);break;case "viewUpdateCompleteGetLabelInternalIDs":m=Z.Viewport.getLabelIDsInCurrentView(!0,!0,!0);g.callbackFunction(m);break;case "labelSavedGetJSONObject":if(m=
Z.Viewport.getCurrentLabel())m=m.internalID,m=Z.Viewport.getLabelJSONObject(m,!0),g.callbackFunction(m);break;case "labelCreatedGetInternalID":Z.Viewport&&Z.Viewport.getStatus("XMLParsedViewport")&&(m=Z.Viewport.getCurrentLabel())&&(m=m.internalID,g.callbackFunction(m));break;case "labelSelectedInViewportGetIDs":Z.Viewport&&(m=Z.Viewport.getCurrentLabel())&&g.callbackFunction(m.id,m.internalID);break;case "currentLabelChangedGetID":Z.Viewport&&(m=Z.Viewport.getCurrentLabel())&&g.callbackFunction(m.id,
m.internalID);break;default:g.callbackFunction()}}Z.Utils.arrayClear(a)},getContainerSize:function(b,a){var e=Z.Utils.getElementStyle(b),f=parseFloat(e.width),g=parseFloat(e.height);Z.Utils.stringValidate(e.width)&&-1!=e.width.indexOf("%")&&(f=parseFloat(Z.Utils.getElementStyleProperty(b,"width")));Z.Utils.stringValidate(e.height)&&-1!=e.height.indexOf("%")&&(g=parseFloat(Z.Utils.getElementStyleProperty(b,"height")));isNaN(f)&&(f=a.clientWidth);isNaN(g)&&(g=a.clientHeight);if(0==f||0==g)winDimensions=
Z.Utils.getWindowSize(),0==f&&(b.parentNode.style.width=winDimensions.x+"px",f=b.clientWidth),0==g&&(b.parentNode.style.height=winDimensions.y+"px",g=b.clientHeight);if(isNaN(f)||0==f)f=800;if(isNaN(g)||0==g)g=400;return new Z.Utils.Point(f,g)},createContainerElement:function(b,a,e,f,g,m,k,t,q,G,w,R,U,P,ka,ca,J){var ba=document.createElement(b);this.stringValidate(a)&&(ba.id=a);a=ba.style;a.display=this.stringValidate(e)?e:"inline-block";a.position=this.stringValidate(f)?f:"static";a.overflow=this.stringValidate(g)?
g:"hidden";"canvas"==b?(this.stringValidate(m)&&ba.setAttribute("width",m),this.stringValidate(k)&&ba.setAttribute("height",k)):(this.stringValidate(m)&&(a.width=m),this.stringValidate(k)&&(a.height=k));this.stringValidate(t)&&(a.left=t);this.stringValidate(q)&&(a.top=q);a.borderStyle=this.stringValidate(G)?G:"none";a.borderWidth=this.stringValidate(w)?w:"0px";a.borderColor="#696969";a.background=this.stringValidate(R)?R:"transparent none";a.margin=this.stringValidate(U)?U:"0px";a.padding=this.stringValidate(P)?
P:"0px";a.whiteSpace=this.stringValidate(ka)?ka:"normal";this.stringValidate(ca)&&(a.cursor=ca);"undefined"!==J&&J&&(Z.Utils.addEventListener(ba,"touchstart",Z.Utils.preventDefault),Z.Utils.addEventListener(ba,"mousedown",Z.Utils.preventDefault),Z.Utils.addEventListener(ba,"contextmenu",Z.Utils.preventDefault));return ba},createCenteredElement:function(b,a){var e=this.createContainerElement("div"),f=[];f[f.length]='<div style="#position:relative; display:table; height:100%; width:100%; border:none; margin:0px; padding:0px; overflow:hidden; text-align:left;">';
f[f.length]='<div style="#position:absolute; display:table-cell; #top:50%; width:100%; border:none; margin:0px; padding:0px; vertical-align:middle;">';f[f.length]='<div id="'+a+'"; style="#position:relative; width:100%; #top:-50%; border:none; margin:0px; padding:0px; text-align:center;"></div></div></div>';e.innerHTML=f.join("");for(var f=e=e.firstChild,g=e.getElementsByTagName("div");0<g.length;)f=g[0],g=f.getElementsByTagName("div");f.appendChild(b);return e},createTextElement:function(b,a,e,f,
g,m,k,t,q,G,w,R,U,P,ka,ca,J,ba){e=Z.Utils.createContainerElement("div","textBoxFor-"+b,"inline-block","absolute","hidden",e,f,g,m,t,q,"white","0px",k,"normal");f=document.createElement("textarea");e.appendChild(f);g=f.style;f.id=b;f.value=a;f.readOnly=G;g.width="100%";g.height="100%";g.margin="0";g.border="0";this.stringValidate(w)&&(g.fontFamily=w);this.stringValidate(R)&&(g.fontSize=R);this.stringValidate(U)&&(g.resize=U);this.stringValidate(P)&&(f.columns=P);this.stringValidate(ka)&&(f.rows=ka);
this.stringValidate(ca)&&(g.overflowX=ca);this.stringValidate(J)&&(g.overflowY=J);this.stringValidate(ba)&&(f.wrap=ba,"off"==ba&&(g.whiteSpace="nowrap"));return e},createSelectElement:function(b,a,e,f,g,m,k,t,q,G){var w=document.createElement("select");w.id=b;Z.Utils.stringValidate(a)&&"none"!=a&&(w.options[0]=new Option(a,null));b=0;for(a=e.length;b<a;b++)w.options[w.options.length]=new Option(e[b].text,e[b].value);Z.Utils.addEventListener(w,"undefined"!==typeof G&&null!==G?G:"change",q);e=w.style;
e.width=f+"px";e.position="absolute";e.left=g+"px";e.top=m+"px";e.fontSize=null==k?"11px":k+"px";e.fontFamily="verdana";e.visibility=t;return w},updateSelectElement:function(b,a,e){if(b){var f=-1!=b.selectedIndex?b.selectedIndex:0;b.innerHTML="";for(var g=0,m=a.length;g<m;g++)b.options[b.options.length]=new Option(a[g].text,a[g].value.toString());"undefined"!==typeof e&&null!==e&&(a=parseInt(Z.Utils.arrayIndexOfObjectValue(a,"value",e),10),-1!=a&&(f=a));a=b.options.length-1;b.selectedIndex=f<=a?f:
a}},getChildElementByID:function(b,a){for(var e=null,f=0,g=b.childNodes.length;f<g&&(e=b.childNodes[f],e.id!=a)&&(e=Z.Utils.getChildElementByID(e,a),null===e);f++);return e},getElementPosition:function(b){for(var a=0,e=0,f="fixed"==this.getElementStyle(b).position,g=this.getOffsetParent(b,f);g;)a+=b.offsetLeft,e+=b.offsetTop,f&&(b=this.getPageScroll(),a+=b.x,e+=b.y),b=g,f="fixed"==this.getElementStyle(b).position,g=this.getOffsetParent(b,f);return new this.Point(a,e)},getOffsetParent:function(b,a){return a&&
b!=document.body?document.body:b.offsetParent},getElementSize:function(b){return new this.Point(b.clientWidth,b.clientHeight)},getElementStyle:function(b){if(b.currentStyle)return b.currentStyle;if(window.getComputedStyle)return window.getComputedStyle(b,"");this.showMessage(this.getResource("z283"))},getElementStyleProperty:function(b,a){if(window.getComputedStyle)return window.getComputedStyle(b,null).getPropertyValue(a);if(b.currentStyle)return b.currentStyle[a];this.showMessage(this.getResource("z283"))},
getElementStylePropertyZIndex:function(b){var a=0;window.document.defaultView.getComputedStyle?a=window.document.defaultView.getComputedStyle(b,null).getPropertyValue("z-index"):b.currentStyle?a=b.currentStyle["z-index"]:this.showMessage(this.getResource("z283"));return a},isElementFluid:function(b){var a=null,e=b.cloneNode(!1),f=!1,g=!1,m=null,k=null,t=0,q=0,G=Z.Utils.getElementStyle(b);G&&(t=G.width,q=G.height,a=-1!=t.indexOf("px")&&-1!=q.indexOf("px"));if(Z.browser!=Z.browsers.IE||9<=Z.browserVersion&&
!a)window.getComputedStyle?value=window.getComputedStyle(e,null).width:e.currentStyle&&(value=e.currentStyle.width),"undefined"!==typeof value&&null!==value&&""!==value&&(f=-1!=value.toString().indexOf("%")||"auto"==value),f||(window.getComputedStyle?value=window.getComputedStyle(e,null).height:e.currentStyle&&(value=e.currentStyle.height),"undefined"!==typeof value&&null!==value&&""!=value&&(g=-1!=value.toString().indexOf("%")||"auto"==value)),f||g||(m=Z.Utils.isElementFluidNew(b)),f||g||(k=0!=parseFloat(t)%
1||0!=parseFloat(q)%1);return f||g||m||k},isElementFluidNew:function(b){var a=b.cloneNode(!1),e,f,g,m,k;g=f=!1;a.style.margin="0";a.style.padding="0";a.style.maxWidth="none";a.style.minWidth="none";e=document.createElement("testContainer");e.style.display="block";e.style.width="800px";e.style.padding="0";e.style.margin="0";e.appendChild(a);b.parentNode.insertBefore(e,b);f=a.offsetWidth;e.style.width="900px";a.offsetWidth==f?(b.parentNode.removeChild(e),f=!1):(m=Math.floor(.125*f),k=Math.floor(100/
900*a.offsetWidth),b.parentNode.removeChild(e),f=m==k?!0:!1);f||(a.style.margin="0",a.style.padding="0",a.style.maxHeight="none",a.style.minHeight="none",e=document.createElement("testContainer"),e.style.display="block",e.style.height="800px",e.style.padding="0",e.style.margin="0",e.appendChild(a),b.parentNode.insertBefore(e,b),g=a.offsetHeight,e.style.height="900px",a.offsetHeight==g?(b.parentNode.removeChild(e),g=!1):(m=Math.floor(.125*g),k=Math.floor(100/900*a.offsetHeight),b.parentNode.removeChild(e),
g=m==k?!0:!1));return f||g},getEventTargetCoords:function(b){return getElementPosition(Z.Utils.target(b))},getFirstTouch:function(b){var a=null,e=b.touches;b=b.changedTouches;"undefined"!==typeof e?a=e[0]:"undefined"!==typeof b&&(a=b[0]);return a},getMousePosition:function(b){var a=0,e=0;"DOMMouseScroll"==b.type&&Z.browser==Z.browsers.FIREFOX&&3>Z.browserVersion?(a=b.screenX,e=b.screenY):"number"===typeof b.pageX?(a=b.pageX,e=b.pageY):"number"===typeof b.clientX?(a=b.clientX+document.body.scrollLeft+
document.documentElement.scrollLeft,e=b.clientY+document.body.scrollTop+document.documentElement.scrollTop):console.log(this.getResource("z284"));return new this.Point(a,e)},getMouseScroll:function(b){var a=0;"number"===typeof b.wheelDelta?a=b.wheelDelta:"number"===typeof b.detail?a=-1*b.detail:this.showMessage(this.getResource("z285"));return a?a/Math.abs(a):0},getPageScroll:function(){var b=0,a=0,e=document.documentElement||{},f=document.body||{};if("number"===typeof window.pageXOffset)b=window.pageXOffset,
a=window.pageYOffset;else if(f.scrollLeft||f.scrollTop)b=f.scrollLeft,a=f.scrollTop;else if(e.scrollLeft||e.scrollTop)b=e.scrollLeft,a=e.scrollTop;return new this.Point(b,a)},getScreenSize:function(){return new this.Point(screen.width,screen.height)},getWindowSize:function(){var b=0,a=0,e=document.documentElement||{},f=document.body||{};"number"===typeof window.innerWidth?(b=window.innerWidth,a=window.innerHeight):e.clientWidth||e.clientHeight?(b=e.clientWidth,a=e.clientHeight):f.clientWidth||f.clientHeight?
(b=f.clientWidth,a=f.clientHeight):this.showMessage(this.getResource("z286"));return new this.Point(b,a)},Button:function(b,a,e,f,g,m,k,t,q,G,w,R,U,P,ka,ca,J,ba,I,W){b=Z.Utils.createContainerElement("span",b,"inline-block","absolute","hidden",k,t,q,G,P,ka,ca,J,ba,I,W);if(Z.Utils.stringValidate(a)){var M=document.createTextNode(a);b.appendChild(Z.Utils.createCenteredElement(M));Z.Utils.setTextNodeStyle(M,"black","verdana","13px","none","normal","normal","normal","normal","1em","center","none")}else{e=
Z.Utils.stringRemoveTrailingSlashCharacters(e);var oa=Z.Utils.createGraphicElement(e+"/"+f),ea=Z.Utils.createGraphicElement(e+"/"+g),E=Z.Utils.createGraphicElement(e+"/"+m);oa.style.width=ea.style.width=E.style.width=k;oa.style.height=ea.style.height=E.style.height=t;oa.style.position=ea.style.position=E.style.position="absolute";Z.browser==Z.browsers.FIREFOX&&3>Z.browserVersion&&(oa.style.top=ea.style.top=E.style.top="");ea.style.visibility=E.style.visibility="hidden";oa.alt=ea.alt=E.alt="";"undefined"!==
typeof U&&Z.Utils.stringValidate(U)&&(oa.alt=Z.Utils.getResource(U));b.appendChild(oa);b.appendChild(ea);b.appendChild(E)}Z.Utils.addEventListener(b,"mousedown",Z.Utils.preventDefault);Z.Utils.addEventListener(b,"mouseover",Z.Utils.stopPropagation);Z.Utils.addEventListener(b,"mousedown",Z.Utils.stopPropagation);Z.Utils.addEventListener(b,"mouseup",Z.Utils.stopPropagation);Z.Utils.addEventListener(b,"mouseout",Z.Utils.stopPropagation);"undefined"!==typeof imageUp&&(Z.Utils.addEventListener(oa,"contextmenu",
Z.Utils.preventDefault),Z.Utils.addEventListener(ea,"contextmenu",Z.Utils.preventDefault),Z.Utils.addEventListener(E,"contextmenu",Z.Utils.preventDefault));Z.Utils.addEventListener(b,"touchstart",Z.Utils.preventDefault);Z.Utils.addEventListener(b,"touchend",Z.Utils.preventDefault);Z.Utils.addEventListener(b,"touchcancel",Z.Utils.preventDefault);Z.Utils.stringValidate(a)||(Z.Utils.disableTextInteraction(M),Z.Utils.addEventListener(b,"contextmenu",Z.Utils.preventDefault));Z.tooltipsVisible&&Z.Utils.stringValidate(U)&&
(b.title=Z.Utils.getResource(U));Z.Utils.setButtonHandler(b,w,R);this.elmt=b},buttonSize:function(b,a,e){var f=b.style;f.width=a+"px";f.height=e+"px";e=b.firstChild;f=b.childNodes[1];b=b.childNodes[2];e&&f&&b&&(e.style.width=f.style.width=b.style.width=a+"px",e.style.height=f.style.height=b.style.height=a+"px")},setButtonDefaults:function(b){Z.Utils.clearButtonSettings(b);Z.Utils.setButtonState(b,"up");Z.Utils.setButtonHandler(b,"mouseover",Z.Toolbar.z457)},clearButtonSettings:function(b){var a=b.firstChild,
e=b.childNodes[1],f=b.childNodes[2];a&&e&&f&&(a.style.visibility=e.style.visibility=f.style.visibility="hidden",Z.Utils.removeEventListener(a,"mouseover",Z.Toolbar.z457),Z.Utils.removeEventListener(e,"mousedown",Z.Toolbar.z457),Z.Utils.removeEventListener(e,"mouseout",Z.Toolbar.z457),Z.Utils.removeEventListener(f,"mouseup",Z.Toolbar.z457),Z.Utils.removeEventListener(b,"touchstart",Z.Toolbar.z457),Z.Utils.removeEventListener(b,"touchend",Z.Toolbar.z457),Z.Utils.removeEventListener(b,"touchcancel",
Z.Toolbar.z457));Z.Utils.removeEventListener(b,"mouseover",Z.Toolbar.z457);Z.Utils.removeEventListener(b,"mousedown",Z.Toolbar.z457);Z.Utils.removeEventListener(b,"mouseout",Z.Toolbar.z457);Z.Utils.removeEventListener(b,"mouseup",Z.Toolbar.z457)},setButtonState:function(b,a){var e="up"==a?b.firstChild:"down"==a?b.childNodes[1]:b.childNodes[2];e&&(e.style.visibility="visible")},setButtonHandler:function(b,a,e){e="undefined"!==e?e:Z.Toolbar.z457;var f="undefined"!==a?a:"mouseover";if("mouseover"==a&&
"undefined"!==typeof b.firstChild)b=b.firstChild;else if("mousedown"!=a||"undefined"===typeof b.childNodes[1])"mouseup"==a&&"undefined"!==typeof b.childNodes[2]?b=b.childNodes[2]:"mouseout"==a&&"undefined"!==typeof b.childNodes[1]&&(b=b.childNodes[1]);Z.Utils.addEventListener(b,"mousedown"==a?"touchstart":"touchend",e);Z.Utils.addEventListener(b,f,e)},Checkbox:function(b,a,e,f,g,m,k,t,q){var G=Z.Utils.createContainerElement("div","containerFor-"+b,"inline-block","absolute","hidden",e,f,g,m,"none",
"0px","transparent none","0px","0px","normal"),w=document.createElement("input");G.appendChild(w);w.type="checkbox";w.id=b;w.value=a;w.width=e;w.height=f;b=G.style;b.width=e+"px";b.height=f+"px";b.left=g+"px";b.top=m+"px";Z.Utils.addEventListener(w,k,t);Z.Utils.addEventListener(w,"touchstart",t);Z.tooltipsVisible&&Z.Utils.stringValidate(q)&&(w.title=Z.Utils.getResource(q));return G},Graphic:function(b,a,e,f,g,m,k,t){a=Z.Utils.stringRemoveTrailingSlashCharacters(a);a=Z.Utils.createGraphicElement(e?
a+"/"+e:a);e=a.style;e.width=f;e.height=g;"undefined"!==typeof t&&Z.Utils.stringValidate(t)?a.alt=Z.Utils.getResource(t):a.alt="";e=Z.Utils.createContainerElement("span",b,"inline-block","absolute","hidden",f,g,m,k,"none","0px","transparent none","0px","0px","normal");e.appendChild(a);this.elmt=e;Z.Utils.addEventListener(a,"mousedown",Z.Utils.preventDefault);Z.Utils.addEventListener(a,"touchstart",Z.Utils.preventDefault);Z.Utils.addEventListener(a,"contextmenu",Z.Utils.preventDefault)},createGraphicElement:function(b){var a=
this.createContainerElement("img"),e=null;Z.browser==Z.browsers.IE&&7>Z.browserVersion?(e=this.createContainerElement("span",null,"inline-block"),a.onload=function(){e.style.width=e.style.width||a.width+"px";e.style.height=e.style.height||a.height+"px";a=a.onload=null},e.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+b+'", sizingMethod="scale")'):(e=a,e.src=b);return e},graphicSize:function(b,a,e){var f=b.style;f.width=a+"px";f.height=e+"px";b=b.firstChild.style;b.width=a+
"px";b.height=e+"px"},Slider:function(b,a,e,f,g,m){var k=Z.Utils.stringUpperCaseFirstLetter(b),t=b.toUpperCase(),q=Z.Utils.createContainerElement("div","label"+k+"TextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0),G=document.createTextNode(Z.Utils.getResource("UI_IMAGEFILTERPANELLABEL"+t));q.appendChild(G);a.appendChild(q);q=new Z.Utils.Graphic("trackSliderFilter"+k,Z.skinPath,e[15],"1px","1px","0px","0px","z385"+t);a.appendChild(q.elmt);
Z.Utils.addEventListener(q.elmt,"mousedown",f);Z.Utils.addEventListener(q.elmt,"touchstart",f);Z.Utils.addEventListener(q.elmt,"mouseover",f);q=new Z.Utils.Button("buttonSliderFilter"+k,null,Z.skinPath,e[17],e[18],e[19],"1px","1px","1px","1px","mouseover",f,"z385"+t);a.appendChild(q.elmt);m&&(q=new Z.Utils.Button("buttonSliderFilter"+k+"2",null,Z.skinPath,e[17],e[18],e[19],"1px","1px","1px","1px","mouseover",f,"z385"+t+"2"),a.appendChild(q.elmt));e=Z.Utils.createTextElement(b+"TextElement","0","1px",
"1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.Utils.addEventListener(e.firstChild,"focus",g);Z.Utils.addEventListener(e.firstChild,"input",g);Z.Utils.addEventListener(e.firstChild,"change",g);Z.Utils.addEventListener(e.firstChild,"blur",g);a.appendChild(e);m&&(e=Z.Utils.createTextElement(b+"TextElement2","0","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off"),Z.Utils.addEventListener(e.firstChild,
"focus",g),Z.Utils.addEventListener(e.firstChild,"input",g),Z.Utils.addEventListener(e.firstChild,"change",g),Z.Utils.addEventListener(e.firstChild,"blur",g),a.appendChild(e))},Point:function(b,a){this.x="number"===typeof b?b:0;this.y="number"===typeof a?a:0},Point3D:function(b,a,e){this.x="number"===typeof b?b:0;this.y="number"===typeof a?a:0;this.z="number"===typeof e?e:0},Coordinates:function(b,a,e,f){this.x="number"===typeof b?b:0;this.y="number"===typeof a?a:0;this.z="number"===typeof e?e:0;
this.r="number"===typeof f?f:0},CoordinatesDisplayStyle:function(b,a,e,f,g,m,k,t,q,G,w){this.cLeft=b;this.cTop=a;this.vWidth=e;this.vHeight=f;this.vLeft=g;this.vTop=m;this.bWidth=k;this.bHeight=t;this.bLeft=q;this.bTop=G;this.cRotation=w},Pair:function(b,a){this.a=b;this.b=a},Trio:function(b,a,e){this.a=b;this.b=a;this.c=e},Range:function(b,a){this.start="number"===typeof b?b:0;this.end="number"===typeof a?a:0},RangeScale:function(b,a){this.min="number"===typeof b?b:0;this.max="number"===typeof a?
a:0},swapZIndices:function(b,a){var e=Z.Utils.getElementStylePropertyZIndex(b),f=Z.Utils.getElementStylePropertyZIndex(a);if("auto"==e||"auto"==f)e=(Z.baseZIndex-101).toString(),f=(Z.baseZIndex-100).toString();b.style.zIndex=f;a.style.zIndex=e},stringValidate:function(b){return"undefined"!==typeof b&&null!==b&&""!==b&&"null"!==b},stringReadable:function(b){return b.replace(RegExp("%20","g")," ")},stringGetInitials:function(b){var a="";b&&(a=b.replace(/[^a-zA-Z- ]/g,"").match(/\b\w/g).join("").toUpperCase());
return a},stringLowerCaseFirstLetter:function(b){return b.charAt(0).toLowerCase()+b.slice(1)},stringUpperCaseFirstLetter:function(b){return b.charAt(0).toUpperCase()+b.slice(1)},stringMultiply:function(b,a){var e=Math.ceil(Math.log(a)/Math.LN2),f=b;do f+=f;while(0<--e);return f.slice(0,b.length*a)},stringPadFront:function(b,a,e){return b=Z.Utils.stringMultiply(e,a-b.length)+b},stringRemoveTrailingSlashCharacters:function(b){return"/"==b.slice(-1,b.length)?b.slice(0,b.length-1):b},stringRemoveFileExtension:function(b){var a=
b.length;"."==b.slice(a-4,a-3)&&(b=b.slice(0,a-4));return b},stringRemoveTabAndLineWrapCharacters:function(b){b=b.replace(/\n/g,"");b=b.replace(/\r/g,"");return b=b.replace(/\t/g,"")},stringUnescapeAmpersandCharacters:function(b){b=b.replace(/\n/g,"");b=b.replace(/&#38;/g,"&");b=b.replace(/&#038;/g,"&");return b=b.replace(/&amp;/g,"&")},setHTMLTextDefaultCaptionStyle:function(b,a,e,f,g,m,k,t,q,G,w,R,U){b=b.style;-1==a.indexOf("color=")&&(b.color=e);-1==a.indexOf("font-family=")&&(b.fontFamily=f);
-1==a.indexOf("font-size=")&&(b.fontSize=g);-1==a.indexOf("font-size-adjust=")&&(b.fontSizeAdjust=m);-1==a.indexOf("font-style=")&&(b.fontStyle=k);-1==a.indexOf("font-stretch=")&&(b.fontStretch=t);-1==a.indexOf("font-variant=")&&(b.fontVariant=q);-1==a.indexOf("font-weight=")&&(b.fontWeight=G);-1==a.indexOf("line-height=")&&(b.lineHeight=w);-1==a.indexOf("text-align=")&&(b.textAlign=R);-1==a.indexOf("text-decoration=")&&(b.textDecoration=U)},setHTMLTextStyle:function(b,a,e,f,g,m,k,t,q,G,w,R){b=b.style;
b.color=a;b.fontFamily=e;b.fontSize=f;b.fontSizeAdjust=g;b.fontStyle=m;b.fontStretch=k;b.fontVariant=t;b.fontWeight=q;b.lineHeight=G;b.textAlign=w;b.textDecoration=R},setTextAreaStyle:function(b,a,e,f,g,m,k,t,q,G,w,R,U){b=b.firstChild.style;b.color=a;b.fontFamily=e;b.fontSize=f;b.fontSizeAdjust=g;b.fontStyle=m;b.fontStretch=k;b.fontVariant=t;b.fontWeight=q;b.lineHeight=G;b.textAlign=w;b.textDecoration=R;b.padding=U},setTextNodeStyle:function(b,a,e,f,g,m,k,t,q,G,w,R){b=b.parentNode.style;b.color=a;
b.fontFamily=e;b.fontSize=f;b.fontSizeAdjust=g;b.fontStyle=m;b.fontStretch=k;b.fontVariant=t;b.fontWeight=q;b.lineHeight=G;b.textAlign=w;b.textDecoration=R},stringValidateColorValue:function(b){Z.Utils.stringValidate(b)||(b="#000000");0!=b.indexOf("#")&&(b="#"+b);return b},hexToRGB:function(b){b=b.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(a,b,f,g){return b+b+f+f+g+g});return(b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(b))?{r:parseInt(b[1],16),g:parseInt(b[2],16),b:parseInt(b[3],16)}:
null},xmlConvertTextToDoc:function(b){var a=null;if(window.ActiveXObject)try{a=new ActiveXObject("Microsoft.XMLDOM"),a.async=!1,a.loadXML(b)}catch(e){this.showMessage(e.name+this.getResource("z244")+e.message)}else if(window.DOMParser)try{a=(new DOMParser).parseFromString(b,"text/xml")}catch(e){this.showMessage(e.name+this.getResource("z244")+e.message)}else this.showMessage(this.getResource("z294"));return a},xmlConvertDocToText:function(b){var a=null;if(window.ActiveXObject)try{a=b.xml}catch(e){this.showMessage(e.name+
this.getResource("z243")+e.message)}else if(window.DOMParser)try{a=(new XMLSerializer).serializeToString(b)}catch(e){this.showMessage(e.name+this.getResource("z243")+e.message)}else this.showMessage(this.getResource("z294"));return a},xmlEscapeMinimal:function(b){var a=null;"undefined"!==typeof b&&null!==b&&(a=b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/\r?\n/g,"%0A"));return a},xmlUnescapeMinimal:function(b){var a=null;
"undefined"!==typeof b&&null!==b&&(a=b.replace(/%0A/g,"\n").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&"));return a},jsonConvertObjectToXMLText:function(b){var a=function(b,e){var f="";if(b instanceof Array)for(var t=0,q=b.length;t<q;t++)f+=a(b[t],e)+"\n";else if("object"===typeof b){t=!1;f+="<"+e;for(q in b)"object"!==typeof b[q]?f+=" "+q+'="'+b[q].toString()+'"':t=!0;f+=">";if(t)for(q in b)"#text"==q?f+=b[q]:"object"===typeof b[q]&&
(f+=a(b[q],q));f+="</"+e+">"}else f+="<"+e+">"+b.toString()+"</"+e+">";return f},e="",f;for(f in b)e+=a(b[f],f);return e.replace(/&/g,"&amp;").replace(/\t|\n/g,"")},jsonConvertXMLTextToJSONText:function(b){var a={convertToObject:function(b){var f={};if(1==b.nodeType){if(b.attributes.length)for(var g=0,m=b.attributes.length;g<m;g++)f[b.attributes[g].nodeName]=(b.attributes[g].nodeValue||"").toString();if(b.firstChild){for(var g=0,m=!1,k=b.firstChild;k;k=k.nextSibling)1==k.nodeType?m=!0:3==k.nodeType&&
k.nodeValue.match(/[^ \f\n\r\t\v]/)&&g++;if(m)if(2>g)for(a.reduceWhitespace(b),k=b.firstChild;k;k=k.nextSibling)3==k.nodeType?f["#text"]=a.escapeMinimal(k.nodeValue):f[k.nodeName]?f[k.nodeName]instanceof Array?f[k.nodeName][f[k.nodeName].length]=a.convertToObject(k):f[k.nodeName]=[f[k.nodeName],a.convertToObject(k)]:f[k.nodeName]=a.convertToObject(k);else b.attributes.length?f["#text"]=a.escapeMinimal(a.innerXML(b)):f=a.escapeMinimal(a.innerXML(b));else g&&(b.attributes.length?f["#text"]=a.escapeMinimal(a.innerXML(b)):
f=a.escapeMinimal(a.innerXML(b)))}b.attributes.length||b.firstChild||(f=null)}else 9==b.nodeType?f=a.convertToObject(b.documentElement):alert("This node type not supported : "+b.nodeType);return f},convertToJSONText:function(b,f){var g=f?'"'+f+'"':"";if(b instanceof Array){for(var m=0,k=b.length;m<k;m++)b[m]=a.convertToJSONText(b[m],"","\t");g+=(f?":[":"[")+(1<b.length?"\n\t"+b.join(",\n\t")+"\n":b.join(""))+"]"}else if(null==b)g+=(f&&":")+"null";else if("object"===typeof b){m=[];for(k in b)m[m.length]=
a.convertToJSONText(b[k],k,"\t");g+=(f?":{":"{")+(1<m.length?"\n\t"+m.join(",\n\t")+"\n":m.join(""))+"}"}else g="string"==typeof b?g+((f&&":")+'"'+b.toString()+'"'):g+((f&&":")+b.toString());return g},reduceWhitespace:function(b){b.normalize();for(var f=b.firstChild;f;)if(3==f.nodeType)if(f.nodeValue.match(/[^ \f\n\r\t\v]/))f=f.nextSibling;else{var g=f.nextSibling;b.removeChild(f);f=g}else 1==f.nodeType&&a.reduceWhitespace(f),f=f.nextSibling;return b},escapeMinimal:function(a){return a.replace(/[\\]/g,
"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},innerXML:function(a){var b="";if("innerHTML"in a)b=a.innerHTML;else{var g=function(a){var b="";if(1==a.nodeType){for(var b=b+("<"+a.nodeName),e=0,f=a.attributes.length;e<f;e++)b+=" "+a.attributes[e].nodeName+"='"+(a.attributes[e].nodeValue||"").toString()+"'";if(a.firstChild){b+=">";for(e=a.firstChild;e;e=e.nextSibling)b+=g(e);b+="</"+a.nodeName+">"}else b+="/>"}else 3==a.nodeType&&(b+=a.nodeValue);return b};for(a=a.firstChild;a;a=
a.nextSibling)b+=g(a)}return b}};9==b.nodeType&&(xml=xml.documentElement);return jsonTextOut="{\n  "+a.convertToJSONText(a.convertToObject(a.reduceWhitespace(b)),b.nodeName,"\t").replace(/\t/g,"  ")+"\n}"},arrayClear:function(b){if(b)for(;0<b.length;)b.pop()},arrayClearObjectValue:function(b,a){for(var e=0,f=b.length;e<f;e++)b[e][a]=null},arrayClone:function(b,a,e){e=[];switch(b){case "pois":b=0;for(var f=a.length;b<f;b++)e[e.length]={text:a[b].text,value:a[b].value,id:a[b].id,x:a[b].x,y:a[b].y,z:a[b].z,
user:a[b].user,date:a[b].date,editable:a[b].editable};break;case "labels":b=0;for(f=a.length;b<f;b++)e[e.length]={text:a[b].text,value:a[b].value,poiID:a[b].poiID,editable:a[b].editable};break;case "hotspots":b=0;for(f=a.length;b<f;b++)e[e.length]={id:a[b].id,name:a[b].name,mediaType:a[b].mediaType,media:a[b].media,audio:a[b].audio,x:a[b].x,y:a[b].y,z:a[b].z,xScale:a[b].xScale,yScale:a[b].yScale,radius:a[b].radius,zMin:a[b].zMin,zMax:a[b].zMax,clickURL:a[b].clickURL,urlTarget:a[b].urlTarget,rollover:a[b].rollover,
caption:a[b].caption,tooltip:a[b].tooltip,textColor:a[b].textColor,backColor:a[b].backColor,lineColor:a[b].lineColor,fillColor:a[b].fillColor,textVisible:a[b].textVisible,backVisible:a[b].backVisible,lineVisible:a[b].lineVisible,fillVisible:a[b].fillVisible,captionPosition:a[b].captionPosition,saved:a[b].saved,visibility:a[b].visibility,internalID:a[b].internalID,poiID:a[b].poiID,captionHTML:a[b].captionHTML,tooltipHTML:a[b].tooltipHTML,polyClosed:a[b].polyClosed,polygonPts:a[b].polygonPts,showFor:a[b].showFor,
transition:a[b].transition,changeFor:a[b].changeFor,rotation:a[b].rotation,editable:a[b].editable,popup:a[b].popup,popupOffsetX:a[b].popupOffsetX,popupOffsetY:a[b].popupOffsetY,comment:a[b].comment,user:a[b].user,date:a[b].date,iW:a[b].iW,iH:a[b].iH,image:a[b].image};break;case "polygon":b=0;for(f=a.length;b<f;b++)e[e.length]={x:a[b].x,y:a[b].y};break;case "notes":b=0;for(f=a.length;b<f;b++)e[e.length]={text:a[b].text,value:a[b].value,noteText:a[b].noteText,poiID:a[b].poiID,id:a[b].id,user:a[b].user,
date:a[b].date,editable:a[b].editable};break;case "magnifications":for(b=0,f=a.length;b<f;b++)e[e.length]={text:a[b].text,value:a[b].value}}return e},arrayImageLoadingValidate:function(b){var a=!1;if(b&&0<b.length)for(var a=!0,e=0,f=b.length;e<f;e++)if(null===b[e]||0==b[e].image.width||0==b[e].image.height)a=!1;return a},arrayIndexOf:function(b,a,e){e?0>e&&(e=Math.max(0,b.length+e)):e=0;for(var f=b.length;e<f;e++)if(b[e]===a)return e;return-1},arrayIndexOfObjectValue:function(b,a,e,f){if("undefined"!==
typeof b){f?0>f&&(f=Math.max(0,b.length+f)):f=0;for(var g=b.length;f<g;f++)if(b[f][a]===e)return f}return-1},arrayIndexOfObjectTwoValues:function(b,a,e,f,g,m){if("undefined"!==typeof b){f?0>f&&(f=Math.max(0,b.length+f)):f=0;for(var k=b.length;f<k;f++)if(b[f][a]===e&&b[f][g].toString()===m.toString())return f}return-1},arrayIndexOfSubstring:function(b,a,e){e?0>e&&(e=Math.max(0,b.length+e)):e=0;for(var f=b.length;e<f;e++)if(-1!=b[e].indexOf(a))return e;return-1},arrayIndexOfObjectValueSubstring:function(b,
a,e,f,g){f?0>f&&(f=Math.max(0,b.length+f)):f=0;for(var m=b.length;f<m;f++)if(g){if(-1!=b[f][a].toLowerCase().indexOf(e))return f}else if(-1!=b[f][a].indexOf(e))return f;return-1},arrayIntersect:function(b,a){for(var e,f,g,m=[],k=0,t=b.length;k<t;k++){e=b[k];g=!1;for(var q=0,G=a.length;q<G&&e>=(f=a[q]);q++)if(f==e){g=!0;break}g&&(m[m.length]=b[k])}return m},arrayMap:function(b,a){var e=[];if(Z.arrayMapSupported)e=b.map(a);else for(var f=0,g=b.length;f<g;f++)e[f]=a(b[f]);return e},arraySplice:function(b,
a,e){if(Z.arraySpliceSupported)if(3<arguments.length)for(var f=3,g=arguments.length;f<g;f++)b.splice(a,e,arguments[f]);else b.splice(a,e);else{0>e&&(e=0);var m=[];if(3<arguments.length)for(f=3,g=arguments.length;f<g;f++)m[m.length]=arguments[f];for(var f=Z.Utils.arraySubarray(b,0,a),k=Z.Utils.arraySubarrayLen(b,a,e),g=Z.Utils.arraySubarray(b,a+e),m=f.concat(m,g),f=b.length=0,g=m.length;f<g;f++)b[b.length]=m[f];b=k}return b},arraySubarraySimple:function(b,a){return this.slice(b,a)},arraySortNumericAscending:function(b,
a,e){b.sort(function(a,b){return a-b});return b},arraySortNumericDescending:function(b,a,e){b.sort(function(a,b){return b-a});return b},arraySortByObjectValue:function(b,a,e,f){b.sort(function(b,e){return b[a]>e[a]});return b},arraySubarray:function(b,a,e){0>a&&(a=0);if(!e||e>b.length)e=b.length;if(a==e)return[];for(var f=[];a<e;a++)f[f.length]=b[a];return f},arraySubarrayLen:function(b,a,e){if(a>=b.length||e&&0>=e)return[];0>a&&(a=Math.abs(a)>b.length?0:b.length+a);if(!e||e+a>b.length)e=b.length-
a;for(var f=[],g=a;g<a+e;g++)f[f.length]=b[g];return f},arraySubtract:function(b,a){for(var e=b.slice(0),f=0,g=e.length;f<g;f++){for(var m=e[f],k=!1,t=0,q=a.length;t<q&&m>=(elmt2=a[t]);t++)if(elmt2==m){k=!0;break}k&&(e=Z.Utils.arraySplice(e,f--,1))}return e},arrayToArrayOfStrings:function(b){for(var a=[],e=0,f=b.length;e<f;e++)a[e]="undefined"!==typeof b[e]&&"undefined"!=b[e]&&null!==b[e]?b[e].toString():"";return a},arrayUnique:function(b){for(var a=1;a<b.length;)b[a-1]==b[a]?b=Z.Utils.arraySplice(b,
a,1):a++;return b},arrayUniqueByObjectValue:function(b,a){if("undefined"!==typeof b)for(var e=1;e<b.length;)b[e-1][a]==b[e][a]?b=Z.Utils.arraySplice(b,e,1):e++;return b},playAudio:function(b,a){Z.audioMuted||("undefined"!==typeof b&&null!==b?b.play():Z.Utils.stringValidate(a)&&(new Audio(a)).play())},loadAudio:function(b){Z.Utils.stringValidate(b)&&(new Audio(b)).load()},convertZoomPercentToMagnification:function(b,a,e){b=b*a/100;e&&(b=1.5>b?1.25:2>b?1.5:2.5>b?2:4>b?2.5:5>b?4:10>b?5:16>b?10:20>b?
16:25>b?20:32>b?25:40>b?32:50>b?40:60>b?50:100>b?60:150>b?100:250>b?150:250);return b},calculatePointsDistance:function(b,a,e,f){return Math.sqrt((b-=e)*b+(a-=f)*a)},convertPixelsToUnits:function(b,a,e){var f=1;"undefined"!==typeof a&&null!==a&&0!=a?f=a:"undefined"!==typeof e&&null!==e&&0!=e&&(f=Z.imageW/e);return b/f},polygonArea:function(b,a,e,f){if("undefined"===typeof f||null===f)f=4;b=b.slice(0);a?b[b.length]={x:b[0].x,y:b[0].y}:"undefined"!==typeof e&&null!==e&&(b[b.length]={x:e.x,y:e.y});for(var g=
e=a=0,m=b.length-1;g<m;g++)a+=b[g].x*b[g+1].y,e+=b[g].y*b[g+1].x;b=Z.Utils.convertPixelsToUnits((a-e)/2,Z.pixelsPerUnit,Z.unitsPerImage);b=Z.Utils.convertPixelsToUnits(b,Z.pixelsPerUnit,Z.unitsPerImage);return b=Z.Utils.roundToFixed(Math.abs(b),f)},polygonCenter:function(b,a,e){var f=0,g=0;if("undefined"!==typeof b&&null!==b&&0<b.length){f=b.slice(0);a?f[f.length]={x:f[0].x,y:f[0].y}:"undefined"!==typeof e&&null!==e&&(f[f.length]={x:e.x,y:e.y});b=f[0];g=b.x;a=b.y;var m=b.x;e=b.y;for(var k=1,t=f.length;k<
t;k++)b=f[k],g=Math.min(g,b.x),a=Math.min(a,b.y),m=Math.max(m,b.x),e=Math.max(e,b.y);f=g+(m-g)/2;g=a+(e-a)/2}return new Z.Utils.Point(f,g)},polygonDimensions:function(b,a){var e=0,f=0;if("undefined"!==typeof b&&null!==b&&0<b.length){e=b.slice(0);"undefined"!==typeof a&&null!==a&&(e[e.length]={x:a.x+.1*(e[e.length-1].x-a.x),y:a.y+.1*(e[e.length-1].y-a.y)});for(var g=e[0].x,f=e[0].y,m=e[0].x,k=e[0].y,t=1,q=e.length;t<q;t++)e[t].x<g&&(g=e[t].x),e[t].x>m&&(m=e[t].x),e[t].y<f&&(f=e[t].y),e[t].y>k&&(k=
e[t].y);e=m-g;f=k-f}return new Z.Utils.Point(e,f)},polygonPerimeter:function(b,a,e,f){if("undefined"===typeof f||null===f)f=5;b=b.slice(0);a?b[b.length]={x:b[0].x,y:b[0].y}:"undefined"!==typeof e&&null!==e&&(b[b.length]={x:e.x,y:e.y});e=a=0;for(var g=b.length-1;e<g;e++)a+=Z.Utils.calculatePointsDistance(b[e].x,b[e].y,b[e+1].x,b[e+1].y);a=Z.Utils.convertPixelsToUnits(a,Z.pixelsPerUnit,Z.unitsPerImage);return a=Z.Utils.roundToFixed(Math.abs(a),f)},fullScreenView:function(b,a,e){if("undefined"===typeof e||
null===e)e=!1;if(a){a=document.documentElement;var f=null;a.requestFullScreen?(b.requestFullScreen(),f="fullscreenchange"):a.mozRequestFullScreen?(b.mozRequestFullScreen(),f="mozfullscreenchange"):a.webkitRequestFullScreen?(b.webkitRequestFullScreen(),f="webkitfullscreenchange"):a.msRequestFullscreen&&(b.msRequestFullscreen(),f="MSFullscreenChange");f&&Z.Utils.addEventListener(document,f,Z.Viewport.fullScreenEscapeHandler)}else document.cancelFullScreen?(e||document.cancelFullScreen(),f="fullscreenchange"):
document.mozCancelFullScreen?(e||document.mozCancelFullScreen(),f="mozfullscreenchange"):document.webkitCancelFullScreen?(e||document.webkitCancelFullScreen(),f="webkitfullscreenchange"):document.msExitFullscreen&&(e||document.msExitFullscreen(),f="MSFullscreenChange"),f&&Z.Utils.removeEventListener(document,f,Z.Viewport.fullScreenEscapeHandler)},rotatePoint:function(b,a,e){var f=Math.PI/180*-e;e=b*Math.cos(f)-a*Math.sin(f);b=b*Math.sin(f)+a*Math.cos(f);return new Z.Utils.Point(e,b)},rotateElement:function(b,
a,e){if(a!=Z.imageR||e)a="rotate("+a.toString()+"deg)",b.transform=a,b.msTransform=a,b.mozTransform=a,b.webkitTransform=a,b.oTransform=a},getPositionRotated:function(b,a,e,f,g){if("undefined"===typeof g||null===g)g=Z.imageR;0>g&&(g+=360);g=g*Math.PI/180;b-=e;var m=a-f;a=b*Math.cos(g)-m*Math.sin(g);g=b*Math.sin(g)+m*Math.cos(g);e=Math.round(a+e);f=Math.round(g+f);return new Z.Utils.Point(e,f)},getDisplayPositionRotated:function(b,a){if("undefined"===typeof a||null===a)a=Z.imageR;0>a&&(a+=360);var e=
parseFloat(b.left),f=parseFloat(b.top),g=parseFloat(b.width),m=parseFloat(b.height);return Z.Utils.getPositionRotated(e,f,e+g/2,f+m/2,a)},translateElement:function(b,a,e){a="translate("+a.toString()+"px,"+e.toString()+"px)";b.transform=a;b.msTransform=a;b.mozTransform=a;b.webkitTransform=a;b.oTransform=a},scaleElement:function(b,a){var e="scale("+a.toString()+")";b.transform=e;b.msTransform=e;b.mozTransform=e;b.webkitTransform=e;b.oTransform=e},filterImage:function(b,a,e,f){var g=b.width,m=b.height,
k=b.data;"2"==a.substring(a.length-1)&&(a=a.substring(0,a.length-1));switch(a){case "brightness":if("undefined"===typeof e||null===e)e=40;f=0;for(a=k.length;f<a;f+=4)k[f]+=e,k[f+1]+=e,k[f+2]+=e;break;case "contrast":if("undefined"===typeof e||null===e)e=10;f=0;for(a=k.length;f<a;f+=4){var t=Math.round((k[f]+k[f+1]+k[f+2])/3);127<t?(k[f]+=k[f]/t*e,k[f+1]+=k[f+1]/t*e,k[f+2]+=k[f+2]/t*e):(k[f]-=k[f]/t*e,k[f+1]-=k[f+1]/t*e,k[f+2]-=k[f+2]/t*e)}break;case "colorRed":if("undefined"===typeof e||null===e)e=
1;f=0;for(a=k.length;f<a;f+=4)k[f]+=e;break;case "colorGreen":if("undefined"===typeof e||null===e)e=1;f=0;for(a=k.length;f<a;f+=4)k[f+1]+=e;break;case "colorBlue":if("undefined"===typeof e||null===e)e=1;f=0;for(a=k.length;f<a;f+=4)k[f+2]+=e;break;case "colorRedRange":if("undefined"!==typeof e&&null!==e&&"undefined"!==typeof f&&null!==f)for(g=f,f=0,a=k.length;f<a;f+=4)m=k[f],m=m<e?e:m>g?g:m,k[f]=m;break;case "colorGreenRange":if("undefined"!==typeof e&&null!==e&&"undefined"!==typeof f&&null!==f)for(g=
f,f=0,a=k.length;f<a;f+=4)m=k[f+1],m=m<e?e:m>g?g:m,k[f+1]=m;break;case "colorBlueRange":if("undefined"!==typeof e&&null!==e&&"undefined"!==typeof f&&null!==f)for(g=f,f=0,a=k.length;f<a;f+=4)m=k[f+2],m=m<e?e:m>g?g:m,k[f+2]=m;break;case "gamma":if("undefined"===typeof e||null===e)e=1;f=0;for(a=k.length;f<a;f+=4)k[f]=Math.pow(k[f]/255*255,1/e),k[f+1]=Math.pow(k[f+1]/255*255,1/e),k[f+2]=Math.pow(k[f+2]/255*255,1/e);break;case "gammaRed":if("undefined"===typeof e||null===e)e=1;f=0;for(a=k.length;f<a;f+=
4)k[f]=Math.pow(k[f]/255*255,1/e);break;case "gammaGreen":if("undefined"===typeof e||null===e)e=1;f=0;for(a=k.length;f<a;f+=4)k[f+1]=Math.pow(k[f+1]/255*255,1/e);break;case "gammaBlue":if("undefined"===typeof e||null===e)e=1;f=0;for(a=k.length;f<a;f+=4)k[f+2]=Math.pow(k[f+2]/255*255,1/e);break;case "hue":if("undefined"===typeof e||null===e)e=1;f=0;for(a=k.length;f<a;f+=4){var m=k[f],q=k[f+1],g=k[f+2],g=Z.Utils.colorToHSL(m,q,g);g.h+=e/360;g=Z.Utils.colorToRGB(g.h,g.s,g.l);k[f]=g.r;k[f+1]=g.g;k[f+
2]=g.b}break;case "saturation":if("undefined"===typeof e||null===e)e=1;0<e&&(e/=10);e=-100==e?0:0>e?(e+100)/100:0==e?1:e+1;f=0;for(a=k.length;f<a;f+=4)m=k[f],q=k[f+1],g=k[f+2],g=Z.Utils.colorToHSL(m,q,g),g.s=Math.min(Math.max(g.s*e,0),1),g=Z.Utils.colorToRGB(g.h,g.s,g.l),k[f]=g.r,k[f+1]=g.g,k[f+2]=g.b;break;case "lightness":if("undefined"===typeof e||null===e)e=1;var G=-1*e;f=0;for(a=k.length;f<a;f+=4){var m=k[f],q=k[f+1],g=k[f+2],w=Math.max(m,q,g),t=(m+q+g)/3,t=2*Math.abs(w-t)/255*G/100;m!==w&&(m+=
(w-m)*t);q!==w&&(q+=(w-q)*t);g!==w&&(g+=(w-g)*t);k[f]=m;k[f+1]=q;k[f+2]=g}case "whiteBalance":if("undefined"===typeof e||null===e)e=1;e=this.colorTempToRGB(e);f=0;for(a=k.length;f<a;f+=4)k[f]*=255/e.r,k[f+1]*=255/e.g,k[f+2]*=255/e.b;break;case "noise":if("undefined"===typeof e||null===e)e=1;f=0;for(a=k.length;f<a;f+=4)g=-e/2+Math.random()*e*2,k[f]+=g,k[f+1]+=g,k[f+2]+=g;break;case "sharpness":if("undefined"===typeof e||null===e)e=1;k=[0,-.05,0,-.05,1.2,-.05,0,-.05,0];f=0;for(a=e/2;f<a;f++){e=1;for(g=
k.length;e<g;e+=2)k[e]*=1.5;k[4]=Math.abs(4*k[1])+1}b=Z.Utils.convolveImage(b,k);break;case "blurriness":if("undefined"===typeof e||null===e)e=3;k=Math.abs(e);if(1<k){f=k/2;a=Math.ceil(k)+(1-Math.ceil(k)%2);k=new Z.Utils.createFloat32Array(a);f=(f+.5)/3;f*=f;e=-1/(2*f);m=1/Math.sqrt(2*Math.PI*f);q=Math.floor(a/2);for(f=g=0;f<a;f++)G=f-q,G=m*Math.exp(G*G*e),k[f]=G,g+=G;f=0;for(a=k.length;f<a;f++)k[f]/=g;b=Z.Utils.convolveImageSeparable(b,k,k,!1)}break;case "grayscale":f=0;for(a=k.length;f<a;f+=4)m=
k[f],q=k[f+1],g=k[f+2],e=Math.round(.299*m+.587*q+.114*g),k[f]=k[f+1]=k[f+2]=e;break;case "threshold":if("undefined"===typeof e||null===e)e=128;f=0;for(a=k.length;f<a;f+=4)m=k[f],q=k[f+1],g=k[f+2],k[f]=k[f+1]=k[f+2]=.2126*m+.7152*q+.0722*g>=e?255:0;break;case "inversion":f=0;for(a=k.length;f<a;f+=4)k[f]=255-k[f],k[f+1]=255-k[f+1],k[f+2]=255-k[f+2],k[f+3]=255;break;case "normalize":a=255/Z.Viewport.getImageFilterRangeMaxAbsolute(a);e=Math.round(e*a);g=Math.round(f*a);f=Z.Utils.getColorRange(k,"red");
c=f.min;d=f.max;f=0;for(a=k.length;f<a;f+=4)k[f]=(g-e)/(d-c)*(k[f]-c)+e;break;case "equalize":if("undefined"===typeof Uint8ClampedArray){Z.Utils.showMessage(Z.Utils.getResource("ERROR_IMAGEFILTEREQUALIZEARRAYSUPPORT"),!1,Z.messageDurationStandard,"center");return}e=new Uint8ClampedArray(g*m);f=G=0;for(a=k.length;f<a;f+=4)m=k[f],q=k[f+1],g=k[f+2],e[G]=.2126*m+.7152*q+.0722*g,G++;a=e.length;g=new Float32Array(256);for(f=m=0;f<a;++f)++g[~~e[f]],++m;q=g[0];for(f=1;256>f;++f)q=g[f]+=q;m=255/m;for(f=0;f<
a;++f)e[f]=g[~~e[f]]*m;f=G=0;for(a=k.length;f<a;f+=4)m=k[f],q=k[f+1],g=k[f+2],g=Z.Utils.colorToHSL(m,q,g),g.l=e[G]/255,g=Z.Utils.colorToRGB(g.h,g.s,g.l),k[f]=g.r,k[f+1]=g.g,k[f+2]=g.b,G++;break;case "sepia":f=0;for(a=k.length;f<a;f+=4)q=k[f],G=k[f+1],w=k[f+2],e=k[f+3],g=.393*q+.769*G+.189*w,m=.349*q+.686*G+.168*w,q=.272*q+.534*G+.131*w,k[f]=255>g?g:255,k[f+1]=255>m?m:255,k[f+2]=255>q?q:255,k[f+3]=e;break;case "edges":f=new Z.Utils.createFloat32Array([-1,-1,-1,-1,8,-1,-1,-1,-1]),b=Z.Utils.convolveImage(b,
f,!0)}return b},getColorRange:function(b){var a,e,f;a=e=b[0];for(var g=0,m=b.length;g<m;g+=4)f=b[g],a=a<f?a:f,e=e>f?e:f;return new Z.Utils.RangeScale(a,e)},getImageData:function(b){var a=this.getCanvas(b.width,b.height),e=a.getContext("2d");e.drawImage(b,0,0);return e.getImageData(0,0,a.width,a.height)},getCanvas:function(b,a){var e=document.createElement("canvas");e.width=b;e.height=a;return e},createImageData:function(b,a){return document.createElement("canvas").getContext("2d").createImageData(b,
a)},colorToHSL:function(b,a,e){b/=255;a/=255;e/=255;var f=Math.max(b,a,e),g=Math.min(b,a,e),m,k=(f+g)/2;if(f===g)m=g=0;else{var t=f-g,g=.5<k?t/(2-f-g):t/(f+g);switch(f){case b:m=(a-e)/t+(a<e?6:0);break;case a:m=(e-b)/t+2;break;case e:m=(b-a)/t+4}}return{h:m/6,s:g,l:k}},colorToRGB:function(b,a,e){if(0==a)e=a=b=e;else{var f=function(a,b,e){0>e&&(e+=1);1<e&&--e;return e<1/6?a+6*(b-a)*e:.5>e?b:e<2/3?a+(b-a)*(2/3-e)*6:a},g=.5>e?e*(1+a):e+a-e*a,m=2*e-g;e=f(m,g,b+1/3);a=f(m,g,b);b=f(m,g,b-1/3)}return{r:255*
e,g:255*a,b:255*b}},colorTempToRGB:function(b){b/=100;var a,e;66>=b?(a=255,e=Math.min(Math.max(99.4708025861*Math.log(b)-161.1195681661,0),255)):(a=Math.min(Math.max(329.698727446*Math.pow(b-60,-.1332047592),0),255),e=Math.min(Math.max(288.1221695283*Math.pow(b-60,-.0755148492),0),255));b=66<=b?255:19>=b?0:Math.min(Math.max(138.5177312231*Math.log(b-10)-305.0447927307,0),255);return{r:a,g:e,b:b}},createImageDataFloat32:function(b,a){return{width:b,height:a,data:new Z.Utils.createFloat32Array(b*a*
4)}},createFloat32Array:function(b){return Z.float32ArraySupported?new Float32Array(b):Array(b)},convolveImage:function(b,a,e){var f=Math.round(Math.sqrt(a.length)),g=Math.floor(f/2),m=b.data,k=b.width;b=b.height;e=e?1:0;for(var t=Z.Utils.createImageData(k,b),q=t.data,G=0;G<b;G++)for(var w=0;w<k;w++){for(var R=G,U=w,P=4*(G*k+w),ka=0,ca=0,J=0,ba=0,I=0;I<f;I++)for(var W=0;W<f;W++){var M=R+I-g,oa=U+W-g;0<=M&&M<b&&0<=oa&&oa<k&&(M=4*(M*k+oa),oa=a[I*f+W],ka+=m[M]*oa,ca+=m[M+1]*oa,J+=m[M+2]*oa,ba+=m[M+3]*
oa)}q[P]=ka;q[P+1]=ca;q[P+2]=J;q[P+3]=ba+e*(255-ba)}return t},convolveImageHorizontal:function(b,a,e){var f=a.length,g=Math.floor(f/2),m=b.data,k=b.width;b=b.height;e=e?1:0;for(var t=Z.Utils.createImageData(k,b),q=t.data,G=0;G<b;G++)for(var w=0;w<k;w++){for(var R=G,U=w,P=4*(G*k+w),ka=0,ca=0,J=0,ba=0,I=0;I<f;I++)var W=R,M=Math.min(k-1,Math.max(0,U+I-g)),W=4*(W*k+M),M=a[I],ka=ka+m[W]*M,ca=ca+m[W+1]*M,J=J+m[W+2]*M,ba=ba+m[W+3]*M;q[P]=ka;q[P+1]=ca;q[P+2]=J;q[P+3]=ba+e*(255-ba)}return t},convolveImageVertical:function(b,
a,e){var f=a.length,g=Math.floor(f/2),m=b.data,k=b.width;b=b.height;e=e?1:0;for(var t=Z.Utils.createImageData(k,b),q=t.data,G=0;G<b;G++)for(var w=0;w<k;w++){for(var R=G,U=w,P=4*(G*k+w),ka=0,ca=0,J=0,ba=0,I=0;I<f;I++)var W=4*(Math.min(b-1,Math.max(0,R+I-g))*k+U),M=a[I],ka=ka+m[W]*M,ca=ca+m[W+1]*M,J=J+m[W+2]*M,ba=ba+m[W+3]*M;q[P]=ka;q[P+1]=ca;q[P+2]=J;q[P+3]=ba+e*(255-ba)}return t},convolveImageSeparable:function(b,a,e,f){return Z.Utils.convolveImageHorizontal(Z.Utils.convolveImageFloat32Vertical(b,
e,f),a,f)},convolveImageFloat32:function(b,a,e){var f=Math.round(Math.sqrt(a.length)),g=Math.floor(f/2),m=b.data,k=b.width;b=b.height;e=e?1:0;for(var t={width:k,height:b,data:new Z.Utils.Float32ArrayZ(k*b*4)},q=t.data,G=0;G<b;G++)for(var w=0;w<k;w++){for(var R=G,U=w,P=4*(G*k+w),ka=0,ca=0,J=0,ba=0,I=0;I<f;I++)for(var W=0;W<f;W++)var M=Math.min(b-1,Math.max(0,R+I-g)),oa=Math.min(k-1,Math.max(0,U+W-g)),M=4*(M*k+oa),oa=a[I*f+W],ka=ka+m[M]*oa,ca=ca+m[M+1]*oa,J=J+m[M+2]*oa,ba=ba+m[M+3]*oa;q[P]=ka;q[P+1]=
ca;q[P+2]=J;q[P+3]=ba+e*(255-ba)}return t},convolveImageFloat32Horizontal:function(b,a,e){var f=a.length,g=Math.floor(f/2),m=b.data,k=b.width;b=b.height;e=e?1:0;for(var t=Z.Utils.createImageDataFloat32(k,b),q=t.data,G=0;G<b;G++)for(var w=0;w<k;w++){for(var R=G,U=w,P=4*(G*k+w),ka=0,ca=0,J=0,ba=0,I=0;I<f;I++)var W=R,M=Math.min(k-1,Math.max(0,U+I-g)),W=4*(W*k+M),M=a[I],ka=ka+m[W]*M,ca=ca+m[W+1]*M,J=J+m[W+2]*M,ba=ba+m[W+3]*M;q[P]=ka;q[P+1]=ca;q[P+2]=J;q[P+3]=ba+e*(255-ba)}return t},convolveImageFloat32Vertical:function(b,
a,e){var f=a.length,g=Math.floor(f/2),m=b.data,k=b.width;b=b.height;e=e?1:0;for(var t=Z.Utils.createImageDataFloat32(k,b),q=t.data,G=0;G<b;G++)for(var w=0;w<k;w++){for(var R=G,U=w,P=4*(G*k+w),ka=0,ca=0,J=0,ba=0,I=0;I<f;I++)var W=4*(Math.min(b-1,Math.max(0,R+I-g))*k+U),M=a[I],ka=ka+m[W]*M,ca=ca+m[W+1]*M,J=J+m[W+2]*M,ba=ba+m[W+3]*M;q[P]=ka;q[P+1]=ca;q[P+2]=J;q[P+3]=ba+e*(255-ba)}return t},intValue:function(b,a){return(b[a]+(b[a+1]<<8)|b[a+2]<<16)+16777216*b[a+3]},longValue:function(b,a){var e=(b[a]+
(b[a+1]<<8)|b[a+2]<<16)+16777216*b[a+3];0!=b[a+4]&&(e+=4294967296*b[a+4]);return e},shortValue:function(b,a){return b[a]+(b[a+1]<<8)},createUint8Array:function(b,a){return Z.uInt8ArraySupported?new Uint8Array(b,a):new Z.Utils.TypedArray(b,a)},TypedArray:function(b){var a;if("number"===typeof b){a=Array(b);for(var e=0;e<b;++e)a[e]=0}else a=b.slice(0);a.subarray=Z.Utils.arraySubarraySimple;a.buffer=a;a.byteLength=a.length;a.set=Z.Utils.setSimple;"object"===typeof b&&b.buffer&&(a.buffer=b.buffer);return a},
setSimple:function(b,a){2>arguments.length&&(a=0);for(var e=0,f=b.length;e<f;++e,++a)this[a]=b[e]&255},encodeBase64:function(b){var a,e,f,g,m=0,k=0,t="",t=[];if(!b)return b;do a=b[m++],e=b[m++],f=b[m++],g=a<<16|e<<8|f,a=g>>18&63,e=g>>12&63,f=g>>6&63,g&=63,t[k++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(f)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(g);
while(m<b.length);t=t.join("");b=b.length%3;return(b?t.slice(0,b-3):t)+"===".slice(b||3)},validateResponseArrayFunctionality:function(){"ZoomifyImageFile"!=Z.tileSource||Z.responseArraySupported||Z.responseArrayPrototyped||(Z.Utils.defineObjectProperty(XMLHttpRequest.prototype,"response",{get:function(){return(new VBArray(this.responseBody)).toArray()}}),Z.responseArrayPrototyped=!0)},defineObjectProperty:function(b,a,e){Z.definePropertySupported?Object.defineProperty(b,a,e):(delete b[a],"get"in e&&
b.__defineGetter__(a,e.get),"set"in e&&b.__defineSetter__(a,e.set),"value"in e&&(b.__defineSetter__(a,function(b){this.__defineGetter__(a,function(){return b});return b}),b[a]=e.value))},createImageElementFromBytes:function(b,a){function e(b){f.onload=null;f.onabort=null;f.onerror=null;g&&window.clearTimeout(g);window.setTimeout(function(){a(f)},1)}var f=new Image,g=null,m=parseFloat(this.getResource("z139")),k=function(){e(!1)};f.onload=function(){e(!0)};f.onabort=k;f.onerror=k;g=window.setTimeout(function(){console.log(Z.Utils.getResource("z253"));
e(!1)},m);f.src=b},getCurrentUTCDateAsString:function(){var b=new Date,a=(10>b.getUTCMonth()+1?"0":"")+(b.getUTCMonth()+1),e=(10>b.getUTCDate()?"0":"")+b.getUTCDate(),f=(10>b.getUTCHours()?"0":"")+b.getUTCHours(),g=(10>b.getUTCMinutes()?"0":"")+b.getUTCMinutes(),m=(10>b.getUTCSeconds()?"0":"")+b.getUTCSeconds();return b.getUTCFullYear()+a+e+f+g+m},cacheProofPath:function(b){b+="?t"+(new Date).getTime().toString()+"n"+Z.cacheProofCounter.toString();Z.cacheProofCounter+=1;return b},easing:function(b,
a,e,f,g){if("undefined"===typeof g||null===g)g=Z.smoothZoomEasing;var m=a;if(Z.smoothZoom&&1<g)switch(g){case 2:e/=f;e--;m=(a-b)*(e*e*e*e*e+1)+b;break;case 3:m=(a-b)*(-Math.pow(2,-10*e/f)+1)+b;break;case 4:a-=b,m=1>(e/=f/2)?a/2*e*e*e*e*e+b:a/2*((e-=2)*e*e*e*e+2)+b}return m},functionCallWithDelay:function(b,a){window.setTimeout(b,a)},nodeIsInViewer:function(b){for(var a=!1;0==a;)if(b)b.id?"ViewerDisplay"==b.id?a=!0:b=b.parentNode:b=b.parentNode;else break;return a},roundToFixed:function(b,a){var e=
Math.round(b).toString().length,e=a-e,e=Math.pow(10,0>e?0:e);return b=Math.round(b*e)/e},getRandomInt:function(b,a){return Math.floor(Math.random()*(a-b+1))+b},getSign:function(b){return b?0>b?-1:1:0},drawCrosshairs:function(b,a,e){var f=Z.Utils.createContainerElement("div","viewportCenterLineVertical","inline-block","absolute","visible","1px",e+"px",a/2+"px","0px","solid","1px","transparent none","0px","0px","normal",null,!0);a=Z.Utils.createContainerElement("div","viewportCenterLineHorizontal",
"inline-block","absolute","visible",a+"px","1px","0px",e/2+"px","solid","1px","transparent none","0px","0px","normal",null,!0);b.appendChild(a);b.appendChild(f)},configureHelpDisplay:function(){var b=Z.helpW,a=Z.helpH;b>=Z.viewerW&&(b=Z.viewerW-80);a>=Z.viewerH&&(a=Z.viewerH-80);var e=Z.helpL?Z.helpL:(Z.viewerW-b)/2,f=Z.helpT?Z.helpT:(Z.viewerH-a)/2,g=this.getResource("UI_HELPSCREENCOLOR"),m=this.getResource("UI_HELPBUTTONCOLOR");Z.HelpDisplay=this.createContainerElement("div","HelpDisplay","inline-block",
"absolute","hidden",b+"px",a+"px",e+"px",f+"px","solid","1px",g,"0px","0px","normal",null,!0);Z.ViewerDisplay.appendChild(Z.HelpDisplay);e=Z.Utils.createContainerElement("div","helpTextBox","inline-block","absolute","auto",b-50+"px",a-74+"px","4px","4px","solid","1px","white","0px","20px",null);e.style.overflowY="auto";Z.HelpDisplay.appendChild(e);Z.help=document.getElementById("helpTextBox");Z.HelpDisplay.style.zIndex=(Z.baseZIndex+26).toString();a=a-18-5;b-=66;e=this.getResource("z423");m=new Z.Utils.Button("buttonHelpOk",
e,null,null,null,null,"56px","18px",b+"px",a+"px","mousedown",this.helpOkButtonHandler,"z342OK","solid","1px",m,"0px","0px");Z.HelpDisplay.appendChild(m.elmt)},helpOkButtonHandler:function(b){Z.Utils.hideHelp();return!0},showHelp:function(b){Z.HelpDisplay||Z.Utils.configureHelpDisplay();Z.help&&(Z.help.innerHTML=Z.helpCustom?Z.helpContent:unescape(b),Z.HelpDisplay.style.display="inline-block",document.getElementById("buttonHelpOk").style.display="inline-block")},hideHelp:function(){Z.HelpDisplay.style.display=
"none"},configureMessageDisplay:function(){var b=parseInt(this.getResource("z437"),10),a=parseInt(this.getResource("z436"),10),e=Z.Utils.getMessageDisplayCoords("6",b,Z.viewerW,Z.viewerH),f=this.getResource("z159"),g=this.getResource("z158");Z.MessageDisplay=this.createContainerElement("div","MessageDisplay","inline-block","absolute","auto",b+"px",a+"px",e.x+"px",e.y+"px","solid","1px",f,"0px","0px","normal",null,!0);Z.ViewerDisplay.appendChild(Z.MessageDisplay);Z.MessageDisplay.style.zIndex=(Z.baseZIndex+
30).toString();e=Z.Utils.createTextElement("messageBox","",b-18+"px",a-40+"px","4px","4px","4px","solid","1px",!0,"verdana","12px","none",null,1,"auto","auto",null);Z.MessageDisplay.appendChild(e);Z.messages=document.getElementById("messageBox");a=a-18-5;b-=66;e=this.getResource("z438");g=new Z.Utils.Button("buttonMessageOk",e,null,null,null,null,"56px","18px",b+"px",a+"px","mousedown",this.messageOkButtonHandler,"z362","solid","1px",g,"0px","0px");Z.MessageDisplay.appendChild(g.elmt)},getMessageDisplayCoords:function(b,
a,e,f){switch(b){case "1":f=b=40;break;case "2":b=e/2-a/2;f=40;break;case "3":b=e-a-80;f=40;break;case "4":b=e-a-40;f=0<Z.toolbarVisible&&8!=Z.toolbarVisible?f-120:f-80;break;case "5":b=e/2-a/2;f=0<Z.toolbarVisible&&8!=Z.toolbarVisible?f-120:f-80;break;case "6":b=40;f=0<Z.toolbarVisible&&8!=Z.toolbarVisible?f-120:f-80;break;default:b=e-a,f=40}return new Z.Utils.Point(b,f)},messageOkButtonHandler:function(b){Z.Utils.hideMessage();Z.Viewport&&Z.coordinatesVisible&&Z.Viewport.setCoordinatesDisplayVisibility(!1);
return!0},messageCancelButtonHandler:function(b){Z.Utils.hideMessage();return!1},showMessage:function(b,a,e,f,g,m){if(Z.messagesVisible){Z.MessageDisplay||Z.Utils.configureMessageDisplay();if("undefined"===typeof m||null===m)m="6";var k=parseInt(this.getResource("z437"),10);m=Z.Utils.getMessageDisplayCoords(m,k,Z.viewerW,Z.viewerH);Z.MessageDisplay.style.left=m.x+"px";Z.MessageDisplay.style.top=m.y+"px";Z.MessageDisplay.messageTimer&&window.clearTimeout(MessageDisplay.messageTimer);m=!0;g&&(-1!=Z.Utils.arrayIndexOf(Z.messageDisplayList,
b)?m=!1:Z.messageDisplayList[Z.messageDisplayList.length]=b);if(m&&(Z.messages&&(Z.messages.value=b),Z.MessageDisplay.style.display="inline-block","undefined"!==typeof f&&null!==f&&(b=document.getElementById("textBoxFor-messageBox"))&&(b.firstChild.style.textAlign=f),f=document.getElementById("buttonMessageOk"),b=parseInt(this.getResource("z436"),10),"undefined"!==typeof a&&null!==a&&a?(f.style.display="inline-block",Z.MessageDisplay.style.height=b+"px"):(f.style.display="none",Z.MessageDisplay.style.height=
b-22+"px"),"undefined"!==typeof e&&null!==e&&!isNaN(e))){"undefined"!==typeof Z.MessageDisplay.messageTimer&&null!==Z.MessageDisplay.messageTimer&&window.clearTimeout(Z.MessageDisplay.messageTimer);if("undefined"===typeof e||null===e)e=3E3;Z.MessageDisplay.messageTimer=window.setTimeout(Z.Utils.hideMessageTimerHandler,e)}}},getMessage:function(){var b="";Z.messages&&Z.Utils.stringValidate(Z.messages.value)&&(b=Z.messages.value);return b},hideMessage:function(){Z.MessageDisplay&&(Z.MessageDisplay.style.display=
"none")},hideMessageTimerHandler:function(){Z.MessageDisplay.messageTimer&&(window.clearTimeout(Z.MessageDisplay.messageTimer),Z.MessageDisplay.messageTimer=null);Z.Utils.hideMessage()},uploadProgress:function(b){var a=Z.saveImageMessage;b.lengthComputable?(b=Math.round(100*b.loaded/b.total),a+=b.toString()+"%"):a+=Z.Utils.getResource("ERROR_IMAGESAVEUNABLETOCOMPUTEPROGRESS");Z.Utils.showMessage(a,!1,"none","center")},configureCoordinatesDisplay:function(){var b=parseInt(this.getResource("z417"),
10),a=parseInt(this.getResource("z415"),10),e=Z.viewerW-b-20,f=Z.viewerH-a-30,g=this.getResource("z99");Z.CoordinatesDisplay=this.createContainerElement("div","CoordinatesDisplay","inline-block","absolute","auto",b+"px",a+"px",e+"px",f+"px","solid","1px",g,"0px","0px","normal");Z.ViewerDisplay.appendChild(Z.CoordinatesDisplay);Z.CoordinatesDisplay.style.zIndex=(Z.baseZIndex+12).toString();e=Z.geoCoordinatesVisible?Z.Utils.getResource("UI_GEOCOORDINATESDISPLAYTEXT"):"IIIFImageServer"==Z.tileSource?
Z.Utils.getResource("UI_IIIFCOORDINATESDISPLAYTEXT"):Z.Utils.getResource("z416");e=Z.Utils.createTextElement("coordsLabelBox",e,b-18+"px","28px","4px","4px","4px","solid","1px",!0,"verdana","12px","none",null,1,"auto","auto",null);Z.CoordinatesDisplay.appendChild(e);if(e=document.getElementById("textBoxFor-coordsLabelBox"))e.firstChild.style.textAlign="center";e=Z.Utils.createTextElement("coordsDisplayBox","",b-18+"px","18px","4px","46px","4px","solid","1px",!0,"verdana","12px","none",null,1,"auto",
"auto",null);Z.CoordinatesDisplay.appendChild(e);Z.coordinates=document.getElementById("coordsDisplayBox");if(e=document.getElementById("textBoxFor-coordsDisplayBox"))e.firstChild.style.textAlign="center";b=Z.Utils.createTextElement("coordsSaveBox","",b-18+"px",a-92+"px","4px","78px","4px","solid","1px",!0,"verdana","12px","none",null,1,"auto","auto",null);Z.CoordinatesDisplay.appendChild(b);Z.coordinatesSave=document.getElementById("coordsSaveBox");if(b=document.getElementById("textBoxFor-coordsSaveBox"))b.firstChild.style.textAlign=
"center"},showCoordinates:function(b){Z.CoordinatesDisplay||Z.Utils.configureCoordinatesDisplay();Z.coordinates&&(Z.coordinates.value=b)},saveCoordinates:function(b){Z.CoordinatesDisplay||Z.Utils.configureCoordinatesDisplay();Z.coordinatesSave&&(Z.coordinatesSave.value+=b+"\n")},configureTraceDisplay:function(){if("undefined"!==typeof Z.Viewport&&null!==Z.Viewport){var b=Z.viewerH-330,a=this.getResource("z229");Z.TraceDisplay=this.createContainerElement("div","TraceDisplay","inline-block","absolute",
"auto","280px","280px","10px",b+"px","solid","1px",a,"0px","10px","normal");Z.ViewerDisplay.appendChild(Z.TraceDisplay);Z.TraceDisplay.style.zIndex=(Z.baseZIndex+28).toString();b=Z.Utils.getResource("UI_TRACEDISPLAYTITLE");b=Z.Utils.createTextElement("debugTraces",b,"265px","155px","10px","10px","5px","solid","1px",!0,"verdana","12px","none",null,1,"auto","auto",null);Z.TraceDisplay.appendChild(b);Z.traces=document.getElementById("debugTraces");var b=parseInt(Z.Utils.getResource("DEFAULT_TRACEDISPLAYTEXTFONTSIZE"),
10),a=parseInt(Z.Utils.getResource("DEFAULT_TRACEDISPLAYTEXTPADDINGSMALL"),10),e=textH=16,f=b-2,g=Z.Utils.createContainerElement("div","labelTileStatusTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0),m=document.createTextNode(Z.Utils.getResource("UI_TRACEDISPLAYTILESTATUSTEXT"));g.appendChild(m);Z.TraceDisplay.appendChild(g);if(g=document.getElementById("labelTileStatusTextBox"))m=g.style,m.width="275px",m.height=e+"px",
m.left="10px",m.top="183px",Z.Utils.setTextNodeStyle(g,"black","verdana",f+"px","none","normal","normal","normal","normal","1em","center","none");g=17;m=Z.Utils.createTextElement("tilesRequiredTextElement","","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.TraceDisplay.appendChild(m);if(m=document.getElementById("textBoxFor-tilesRequiredTextElement")){var k=m.style;k.width="37px";k.height=textH+"px";k.left=g+"px";k.top="198px";Z.Utils.setTextAreaStyle(m,
"black","verdana",b+"px","none","normal","normal","normal","normal","1em","center","none",a+"px");g+=45}m=Z.Utils.createTextElement("tilesCachedTextElement","","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.TraceDisplay.appendChild(m);if(m=document.getElementById("textBoxFor-tilesCachedTextElement"))k=m.style,k.width="37px",k.height=textH+"px",k.left=g+"px",k.top="198px",Z.Utils.setTextAreaStyle(m,"black","verdana",b+"px","none","normal","normal",
"normal","normal","1em","center","none",a+"px"),g+=45;m=Z.Utils.createTextElement("tilesRequestedTextElement","","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.TraceDisplay.appendChild(m);if(m=document.getElementById("textBoxFor-tilesRequestedTextElement"))k=m.style,k.width="37px",k.height=textH+"px",k.left=g+"px",k.top="198px",Z.Utils.setTextAreaStyle(m,"black","verdana",b+"px","none","normal","normal","normal","normal","1em","center","none",
a+"px"),g+=45;m=Z.Utils.createTextElement("tilesLoadedTextElement","","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.TraceDisplay.appendChild(m);if(m=document.getElementById("textBoxFor-tilesLoadedTextElement"))k=m.style,k.width="37px",k.height=textH+"px",k.left=g+"px",k.top="198px",Z.Utils.setTextAreaStyle(m,"black","verdana",b+"px","none","normal","normal","normal","normal","1em","center","none",a+"px"),g+=45;m=Z.Utils.createTextElement("tilesDisplayedTextElement",
"","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.TraceDisplay.appendChild(m);if(m=document.getElementById("textBoxFor-tilesDisplayedTextElement"))k=m.style,k.width="37px",k.height=textH+"px",k.left=g+"px",k.top="198px",Z.Utils.setTextAreaStyle(m,"black","verdana",b+"px","none","normal","normal","normal","normal","1em","center","none",a+"px"),g+=45;m=Z.Utils.createTextElement("tilesWaitingTextElement","","1px","1px","1px","1px","0px","solid",
"1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.TraceDisplay.appendChild(m);if(m=document.getElementById("textBoxFor-tilesWaitingTextElement"))k=m.style,k.width="37px",k.height=textH+"px",k.left=g+"px",k.top="198px",Z.Utils.setTextAreaStyle(m,"black","verdana",b+"px","none","normal","normal","normal","normal","1em","center","none",a+"px");g=Z.Utils.createContainerElement("div","labelElapsedTimeTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none",
"0px","0px","nowrap",null,!0);m=document.createTextNode(Z.Utils.getResource("UI_TRACEDISPLAYELAPSEDTIMETEXT"));g.appendChild(m);Z.TraceDisplay.appendChild(g);if(g=document.getElementById("labelElapsedTimeTextBox"))m=g.style,m.width="85px",m.height=e+"px",m.left="15px",m.top="224px",Z.Utils.setTextNodeStyle(g,"black","verdana",f+"px","none","normal","normal","normal","normal","1em","left","none");g=Z.Utils.createTextElement("tilesTimeElapsedTextElement","","1px","1px","1px","1px","0px","solid","1px",
!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.TraceDisplay.appendChild(g);if(g=document.getElementById("textBoxFor-tilesTimeElapsedTextElement"))m=g.style,m.width="50px",m.height=textH+"px",m.left="67.5px",m.top="220px",Z.Utils.setTextAreaStyle(g,"black","verdana",b+"px","none","normal","normal","normal","normal","1em","center","none",a+"px");g=Z.Utils.createContainerElement("div","labelTilesPerSecondTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none",
"0px","0px","nowrap",null,!0);m=document.createTextNode(Z.Utils.getResource("UI_TRACEDISPLAYTILESPERSECONDTEXT"));g.appendChild(m);Z.TraceDisplay.appendChild(g);if(g=document.getElementById("labelTilesPerSecondTextBox"))m=g.style,m.width="85px",m.height=e+"px",m.left="130px",m.top="224px",Z.Utils.setTextNodeStyle(g,"black","verdana",f+"px","none","normal","normal","normal","normal","1em","left","none");e=Z.Utils.createTextElement("tilesPerSecondTextElement","","1px","1px","1px","1px","0px","solid",
"1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.TraceDisplay.appendChild(e);if(e=document.getElementById("textBoxFor-tilesPerSecondTextElement"))f=e.style,f.width="50px",f.height=textH+"px",f.left="215px",f.top="220px",Z.Utils.setTextAreaStyle(e,"black","verdana",b+"px","none","normal","normal","normal","normal","1em","center","none",a+"px");b=58;a=10;e=this.getResource("z228");f=this.getResource("z446");f=new this.Button("buttonShowGlobals",f,null,null,null,null,b+"px","42px",a+
"px","249px","mousedown",this.showGlobals,"z382","solid","1px",e,"0px","0px");Z.TraceDisplay.appendChild(f.elmt);a+=b+10;f=this.getResource("z449");f=new this.Button("buttonToggleDisplay",f,null,null,null,null,b+"px","42px",a+"px","249px","mousedown",Z.Viewport.buttonToggleDisplayHandler,"z390","solid","1px",e,"0px","0px");Z.TraceDisplay.appendChild(f.elmt);a+=b+10;f=this.getResource("z447");f=new this.Button("buttonToggleBackfill",f,null,null,null,null,b+"px","42px",a+"px","249px","mousedown",Z.Viewport.buttonToggleBackfillHandler,
"z388","solid","1px",e,"0px","0px");Z.TraceDisplay.appendChild(f.elmt);a+=b+10;b+=12;f=this.getResource("z448");b=new this.Button("buttonToggleConstrainPan",f,null,null,null,null,b+"px","42px",a+"px","249px","mousedown",Z.Viewport.toggleConstrainPan,"z389","solid","1px",e,"0px","0px");Z.TraceDisplay.appendChild(b.elmt)}else window.setTimeout(function(){Z.Utils.configureTraceDisplay()},100)},showTraces:function(){Z.TraceDisplay?Z.TraceDisplay.style.display="inline-block":Z.Utils.configureTraceDisplay()},
hideTraces:function(){Z.TraceDisplay.style.display="none"},trace:function(b,a,e){a=a?"\n":"";e=e?"\n\n":"\n";Z.TraceDisplay||Z.Utils.configureTraceDisplay();Z.traces&&(Z.traces.value+=a+b+e,2==Z.debug&&(Z.traces.scrollTop=Z.traces.scrollHeight))},traceTileStatus:function(b,a,e,f,g,m){if(!(k&&t&&q&&G&&w&&R))var k=document.getElementById("tilesRequiredTextElement"),t=document.getElementById("tilesCachedTextElement"),q=document.getElementById("tilesRequestedTextElement"),G=document.getElementById("tilesLoadedTextElement"),
w=document.getElementById("tilesDisplayedTextElement"),R=document.getElementById("tilesWaitingTextElement");k&&t&&q&&G&&w&&R&&("undefined"!==typeof b&&null!==b&&(k.value=b.toString()),"undefined"!==typeof a&&null!==a&&(t.value=a.toString()),"undefined"!==typeof e&&null!==e&&(q.value=e.toString()),"undefined"!==typeof f&&null!==f&&(G.value=f.toString()),"undefined"!==typeof g&&null!==g&&(w.value=g.toString()),"undefined"!==typeof m&&null!==m&&(R.value=m.toString()))},traceTileSpeed:function(b,a){if(!e||
!f)var e=document.getElementById("tilesTimeElapsedTextElement"),f=document.getElementById("tilesPerSecondTextElement");e&&f&&("undefined"!==typeof b&&null!==b&&(e.value=b.toString()),"undefined"!==typeof a&&null!==a&&(f.value=Math.round(a).toString()))},showGlobals:function(){var b;b="\n                            ZOOMIFY IMAGE VIEWER - CURRENT VALUES\n";b+="\n";b+="VIEW:    ";b+="Z.imageX="+Z.imageX+",   ";b+="Z.imageY="+Z.imageY+",   ";b+="Z.imageZ="+Z.imageZ+",   ";b+="Z.imageR="+Z.imageR+",   ";
b+="Z.priorX="+Z.priorX+",   ";b+="Z.priorY="+Z.priorY+",   ";b+="Z.priorZ="+Z.priorZ+",   ";b+="Z.priorR="+Z.priorR+",   ";b+="\n";b+="IMAGE & SKIN:    ";b+="Z.imagePath="+Z.imagePath+",   ";b+="Z.skinPath="+Z.skinPath+",   ";b+="Z.skinMode="+Z.skinMode+",   ";b+="Z.imageW="+Z.imageW+",   ";b+="Z.imageH="+Z.imageH+",   ";b+="tierCount="+Z.Viewport.getTierCount()+",   ";b+="z320="+Z.Viewport.getTileW()+",   ";b+="z319="+Z.Viewport.getTileH()+"\n";b+="\n";b+="PAGE & BROWSER:    ";b+="Z.pageContainer="+
Z.pageContainer+",   ";b+="Z.browser="+Z.browser+",   ";b+="Z.browserVersion="+Z.browserVersion+",   ";b+="Z.canvasSupported="+Z.canvasSupported+",   ";b+="Z.cssTransformsSupported="+Z.cssTransformsSupported+",   ";b+="Z.cssTransformProperty="+Z.cssTransformProperty+",   ";b+="Z.cssTransformNoUnits="+Z.cssTransformNoUnits+",   ";b+="Z.alphaSupported="+Z.alphaSupported+",   ";b+="Z.renderQuality="+Z.renderQuality+",   ";b+="Z.rotationSupported="+Z.rotationSupported+",   ";b+="Z.fullScreenSupported="+
Z.fullScreenSupported+",   ";b+="Z.float32ArraySupported="+Z.float32ArraySupported+",   ";b+="Z.uInt8ArraySupported="+Z.uInt8ArraySupported+",   ";b+="Z.xmlHttpRequestSupport="+Z.xmlHttpRequestSupport+",   ";b+="Z.definePropertySupported="+Z.definePropertySupported+",   ";b+="Z.responseArraySupported="+Z.responseArraySupported+",   ";b+="Z.responseArrayPrototyped="+Z.responseArrayPrototyped+",   ";b+="Z.mobileDevice="+Z.mobileDevice+",   ";b+="Z.zifSupported="+Z.zifSupported+",   ";b+="Z.localUse="+
Z.localUse+"\n";b+="\n";b+="VIEWER OPTIONS & DEFAULTS:    ";b+="Z.initialX="+Z.initialX+",   ";b+="Z.initialY="+Z.initialY+",   ";b+="Z.initialZ="+Z.initialZ+",   ";b+="Z.minZ="+Z.minZ+",   ";b+="Z.maxZ="+Z.maxZ+",   ";b+="Z.fitZ="+Z.fitZ+",   ";b+="Z.zoomSpeed="+Z.zoomSpeed+",   ";b+="Z.panSpeed="+Z.panSpeed+",   ";b+="Z.fadeInSpeed="+Z.fadeInSpeed+",   ";b+="Z.toolbarVisible="+Z.toolbarVisible+",   ";b+="Z.toolbarW="+Z.toolbarW+",   ";b+="Z.toolbarCurrentW="+Z.toolbarCurrentW+",   ";b+="Z.toolbarH="+
Z.toolbarH+",   ";b+="Z.toolbarPosition="+Z.toolbarPosition+",   ";b+="Z.tooltipsVisible="+Z.tooltipsVisible+",   ";b+="Z.helpVisible="+Z.helpVisible+",   ";b+="Z.navigatorVisible="+Z.navigatorVisible+",   ";b+="Z.navigatorW="+Z.navigatorW+",   ";b+="Z.navigatorH="+Z.navigatorH+",   ";b+="Z.navigatorL="+Z.navigatorL+",   ";b+="Z.navigatorT="+Z.navigatorT+",   ";b+="Z.navigatorFit="+Z.navigatorFit+",   ";b+="Z.clickZoom="+Z.clickZoom+",   ";b+="Z.clickPan="+Z.clickPan+",   ";b+="Z.mousePan="+Z.mousePan+
",   ";b+="Z.keys="+Z.keys+",   ";b+="Z.constrainPan="+Z.constrainPan+",   ";b+="Z.constrainPanStrict="+Z.constrainPanStrict+",   ";b+="Z.smoothPan="+Z.smoothPan+",   ";b+="Z.smoothPanEasing="+Z.smoothPanEasing+",   ";b+="Watermark alpha = "+Z.Utils.getResource("z234")+",   ";b+="Z.watermarkPath="+Z.watermarkPath+",   ";b+="Z.copyrightPath="+Z.copyrightPath+",   ";b+="Z.hotspotPath="+Z.hotspotPath+",   ";b+="Z.tourPath="+Z.tourPath+",   ";b+="Z.slidePath="+Z.slidePath+",   ";b+="Z.slideTransitionSpeed="+
Z.slideTransitionSpeed+",   ";b+="Z.audioContent="+Z.audioContent+",   ";b+="Z.audioMuted="+Z.audioMuted+",   ";b+="Z.annotationPath="+Z.annotationPath+",   ";b+="Z.saveHandlerPath="+Z.saveHandlerPath+",   ";b+="Z.trackingPath="+Z.trackingPath+",   ";b+="Z.minimizeVisible="+Z.minimizeVisible+",   ";b+="Z.sliderZoomVisible="+Z.sliderZoomVisible+",   ";b+="Z.zoomButtonsVisible="+Z.zoomButtonsVisible+",   ";b+="Z.panButtonsVisible="+Z.panButtonsVisible+",   ";b+="Z.resetVisible="+Z.resetVisible+",   ";
b+="Z.fullScreenVisible="+Z.fullScreenVisible+",   ";b+="Z.fullPageVisible="+Z.fullPageVisible+",   ";b+="Z.initialFullPage="+Z.initialFullPage+",   ";b+="Z.measureVisible="+Z.measureVisible+",   ";b+="Z.captionTextColor="+Z.captionTextColor+",   ";b+="Z.captionBackColor="+Z.captionBackColor+",   ";b+="Z.polygonLineColor="+Z.polygonLineColor+",   ";b+="Z.polygonFillColor="+Z.polygonFillColor+",   ";b+="Z.captionTextVisible="+Z.captionTextVisible+",   ";b+="Z.captionBackVisible="+Z.captionBackVisible+
",   ";b+="Z.polygonFillVisible="+Z.polygonFillVisible+",   ";b+="Z.polygonLineVisible="+Z.polygonLineVisible+",   ";b+="Z.rotationVisible="+Z.rotationVisible+",   ";b+="Z.rotationFree="+Z.rotationFree+",   ";b+="Z.initialRotation="+Z.initialRotation+",   ";b+="Z.virtualPointerVisible="+Z.virtualPointerVisible+",   ";b+="Z.crosshairsVisible="+Z.crosshairsVisible+",   ";b+="Z.rulerVisible="+Z.rulerVisible+",   ";b+="Z.units="+Z.units+",   ";b+="Z.unitsPerImage="+Z.unitsPerImage+",   ";b+="Z.pixelsPerUnit="+
Z.pixelsPerUnit+",   ";b+="Z.sourceMagnification="+Z.sourceMagnification+",   ";b+="Z.rulerListType="+Z.rulerListType+",   ";b+="Z.rulerW="+Z.rulerW+",   ";b+="Z.rulerH="+Z.rulerH+",   ";b+="Z.rulerL="+Z.rulerL+",   ";b+="Z.rulerT="+Z.rulerT+",   ";b+="Z.coordinatesVisible="+Z.coordinatesVisible+",   ";b+="Z.imageFiltersVisible="+Z.imageFiltersVisible+",   ";b+="Z.progressVisible="+Z.progressVisible+",   ";b+="Z.logoVisible="+Z.logoVisible+",   ";b+="Z.logoLinkURL="+Z.logoLinkURL+",   ";b+="Z.logoCustomPath="+
Z.logoCustomPath+",   ";b+="Z.canvas="+Z.canvas+",   ";b+="Z.debug="+Z.debug+",   ";b+="Z.imageProperties="+Z.imageProperties+",   ";b+="Z.serverIP="+Z.serverIP+",   ";b+="Z.serverPort="+Z.serverPort+",   ";b+="Z.tileHandlerPath="+Z.tileHandlerPath+",   ";b+="Z.tileHandlerPathFull="+Z.tileHandlerPathFull+",   ";b+="Z.tileSource="+Z.tileSource+",   ";b+="Z.tileType="+Z.tileType+",   ";b+="Z.freehandVisible="+Z.freehandVisible+",   ";b+="Z.textVisible="+Z.textVisible+",   ";b+="Z.iconVisible="+Z.iconVisible+
",   ";b+="Z.rectangleVisible="+Z.rectangleVisible+",   ";b+="Z.polygonVisible="+Z.polygonVisible+",   ";b+="\n";b+="INTERNAL VALUES:    ";b+="\n";b+="displayW="+Z.Viewport.getDisplayW()+",   ";b+="displayH="+Z.Viewport.getDisplayH()+",   ";b+="tierCurrent="+Z.Viewport.getTierCurrent()+",   ";b+="tierBackfill="+Z.Viewport.getTierBackfill()+",   ";b+="tierBackfillDynamic="+Z.Viewport.getTierBackfillDynamic()+",   ";b+="tierBackfillOversize="+Z.Viewport.getTierBackfillOversize()+",   ";b+="tierScale="+
Z.Viewport.getTierScale()+",   ";b+="z315="+Z.Viewport.getTiersScaleUpMax()+",   ";b+="z314="+Z.Viewport.getTiersScaleDownMax()+",   ";b+="z316="+Z.Viewport.getTilesCacheMax()+",   ";b+="Z.useCanvas="+Z.useCanvas+"\n";b+="Z.specialStorageEnabled="+Z.specialStorageEnabled+"\n";b+="Z.editMode="+Z.editMode+"\n";b+="Z.labelMode="+Z.labelMode+"\n";b+="Z.editing="+Z.editing+"\n";b+="\n";b+="INTERNAL LISTS:    ";b+="tierWs="+Z.Viewport.getTierWs()+",   ";b+="tierHs="+Z.Viewport.getTierHs()+",   ";b+="tierTileCounts="+
Z.Viewport.getTierTileCounts()+",   ";b+="tilesLoadingNames="+Z.Viewport.getTilesLoadingNames()+"\n";b+="\n";alert(b)}};
